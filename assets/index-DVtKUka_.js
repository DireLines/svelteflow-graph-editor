var Ul=Object.defineProperty;var Vo=e=>{throw TypeError(e)};var Ql=(e,t,n)=>t in e?Ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fe=(e,t,n)=>Ql(e,typeof t!="symbol"?t+"":t,n),Ni=(e,t,n)=>t.has(e)||Vo("Cannot "+n);var I=(e,t,n)=>(Ni(e,t,"read from private field"),n?n.call(e):t.get(e)),le=(e,t,n)=>t.has(e)?Vo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Dn=(e,t,n,r)=>(Ni(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Xo=(e,t,n)=>(Ni(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Wo=!1;var ii=Array.isArray,Jl=Array.prototype.indexOf,uo=Array.from,jl=Object.defineProperty,Gt=Object.getOwnPropertyDescriptor,Ks=Object.getOwnPropertyDescriptors,qs=Object.prototype,ec=Array.prototype,oi=Object.getPrototypeOf,Bo=Object.isExtensible;function Rn(e){return typeof e=="function"}const Rt=()=>{};function tc(e){return e()}function Or(e){for(var t=0;t<e.length;t++)e[t]()}const $t=2,Zs=4,si=8,fo=16,Lt=32,In=64,Dr=128,st=256,Rr=512,rt=1024,_t=2048,ln=4096,It=8192,ai=16384,nc=32768,cr=65536,rc=1<<17,ic=1<<19,Gs=1<<20,Fi=1<<21,wt=Symbol("$state"),Us=Symbol("legacy props"),oc=Symbol("");function Qs(e){return e===this.v}function Js(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ho(e){return!Js(e,this.v)}function sc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ac(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function lc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function cc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function uc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function dc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function fc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let zn=!1,gc=!1;function $c(){zn=!0}const go=1,$o=2,js=4,vc=8,yc=16,mc=1,pc=2,wc=4,bc=8,_c=16,ea=1,xc=2,Je=Symbol(),kc="http://www.w3.org/1999/xhtml",Ec="@attach",Sc=[];function ta(e,t=!1){return Nr(e,new Map,"",Sc)}function Nr(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ii(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var a=0;a<e.length;a+=1){var l=e[a];a in e&&(s[a]=Nr(l,t,n,r))}return s}if(oi(e)===qs){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=Nr(e[c],t,n,r);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Nr(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function vo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Le=null;function Fo(e){Le=e}function bn(e){return na().get(e)}function qn(e,t){return na().set(e,t),t}function Ie(e,t=!1,n){var r=Le={p:Le,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};zn&&!t&&(Le.l={s:null,u:null,r1:[],r2:xn(!1)}),yo(()=>{r.d=!0})}function ze(e){const t=Le;if(t!==null){const s=t.e;if(s!==null){var n=Ve,r=Ye;t.e=null;try{for(var i=0;i<s.length;i++){var o=s[i];Jt(o.effect),xt(o.reaction),jt(o.fn)}}finally{Jt(n),xt(r)}}Le=t.p,t.m=!0}return{}}function li(){return!zn||Le!==null&&Le.l===null}function na(e){return Le===null&&vo(),Le.c??(Le.c=new Map(Pc(Le)||void 0))}function Pc(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Ke(e){if(typeof e!="object"||e===null||wt in e)return e;const t=oi(e);if(t!==qs&&t!==ec)return e;var n=new Map,r=ii(e),i=Me(0),o=Ye,s=a=>{var l=Ye;xt(o);var c=a();return xt(l),c};return r&&n.set("length",Me(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&dc();var d=n.get(l);return d===void 0?(d=s(()=>Me(c.value)),n.set(l,d)):q(d,s(()=>Ke(c.value))),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0)l in a&&(n.set(l,s(()=>Me(Je))),Mi(i));else{if(r&&typeof l=="string"){var d=n.get("length"),h=Number(l);Number.isInteger(h)&&h<d.v&&q(d,h)}q(c,Je),Mi(i)}return!0},get(a,l,c){var g;if(l===wt)return e;var d=n.get(l),h=l in a;if(d===void 0&&(!h||(g=Gt(a,l))!=null&&g.writable)&&(d=s(()=>Me(Ke(h?a[l]:Je))),n.set(l,d)),d!==void 0){var f=u(d);return f===Je?void 0:f}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=n.get(l);d&&(c.value=u(d))}else if(c===void 0){var h=n.get(l),f=h==null?void 0:h.v;if(h!==void 0&&f!==Je)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(a,l){var f;if(l===wt)return!0;var c=n.get(l),d=c!==void 0&&c.v!==Je||Reflect.has(a,l);if(c!==void 0||Ve!==null&&(!d||(f=Gt(a,l))!=null&&f.writable)){c===void 0&&(c=s(()=>Me(d?Ke(a[l]):Je)),n.set(l,c));var h=u(c);if(h===Je)return!1}return d},set(a,l,c,d){var H;var h=n.get(l),f=l in a;if(r&&l==="length")for(var g=c;g<h.v;g+=1){var m=n.get(g+"");m!==void 0?q(m,Je):g in a&&(m=s(()=>Me(Je)),n.set(g+"",m))}h===void 0?(!f||(H=Gt(a,l))!=null&&H.writable)&&(h=s(()=>Me(void 0)),q(h,s(()=>Ke(c))),n.set(l,h)):(f=h.v!==Je,q(h,s(()=>Ke(c))));var w=Reflect.getOwnPropertyDescriptor(a,l);if(w!=null&&w.set&&w.set.call(d,c),!f){if(r&&typeof l=="string"){var y=n.get("length"),p=Number(l);Number.isInteger(p)&&p>=y.v&&q(y,p+1)}Mi(i)}return!0},ownKeys(a){u(i);var l=Reflect.ownKeys(a).filter(h=>{var f=n.get(h);return f===void 0||f.v!==Je});for(var[c,d]of n)d.v!==Je&&!(c in a)&&l.push(c);return l},setPrototypeOf(){fc()}})}function Mi(e,t=1){q(e,e.v+t)}function Ko(e){try{if(e!==null&&typeof e=="object"&&wt in e)return e[wt]}catch{}return e}function Cc(e,t){return Object.is(Ko(e),Ko(t))}function _n(e){var t=$t|_t,n=Ye!==null&&(Ye.f&$t)!==0?Ye:null;return Ve===null||n!==null&&(n.f&st)!==0?t|=st:Ve.f|=Gs,{ctx:Le,deps:null,effects:null,equals:Qs,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??Ve}}function x(e){const t=_n(e);return pa(t),t}function ra(e){const t=_n(e);return t.equals=ho,t}function ia(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Tt(t[n])}}function Nc(e){for(var t=e.parent;t!==null;){if((t.f&$t)===0)return t;t=t.parent}return null}function oa(e){var t,n=Ve;Jt(Nc(e));try{ia(e),t=xa(e)}finally{Jt(n)}return t}function sa(e){var t=oa(e),n=(Zt||(e.f&st)!==0)&&e.deps!==null?ln:rt;vt(e,n),e.equals(t)||(e.v=t,e.wv=ba())}const Zn=new Map;function xn(e,t){var n={f:0,v:e,reactions:null,equals:Qs,rv:0,wv:0};return n}function Me(e,t){const n=xn(e);return pa(n),n}function aa(e,t=!1){var r;const n=xn(e);return t||(n.equals=ho),zn&&Le!==null&&Le.l!==null&&((r=Le.l).s??(r.s=[])).push(n),n}function q(e,t,n=!1){Ye!==null&&!ht&&li()&&(Ye.f&($t|fo))!==0&&!(Qe!=null&&Qe.includes(e))&&hc();let r=n?Ke(t):t;return Ki(e,r)}function Ki(e,t){if(!e.equals(t)){var n=e.v;dr?Zn.set(e,t):Zn.set(e,n),e.v=t,(e.f&$t)!==0&&((e.f&_t)!==0&&oa(e),vt(e,(e.f&st)===0?rt:ln)),e.wv=ba(),la(e,_t),li()&&Ve!==null&&(Ve.f&rt)!==0&&(Ve.f&(Lt|In))===0&&(ut===null?Yc([e]):ut.push(e))}return t}function la(e,t){var n=e.reactions;if(n!==null)for(var r=li(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;(a&_t)===0&&(!r&&s===Ve||(vt(s,t),(a&(rt|st))!==0&&((a&$t)!==0?la(s,ln):hi(s))))}}let Mc=!1;var qe,ca,ua,da;function Ac(){if(qe===void 0){qe=window,ca=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ua=Gt(t,"firstChild").get,da=Gt(t,"nextSibling").get,Bo(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Bo(n)&&(n.__t=void 0)}}function ci(e=""){return document.createTextNode(e)}function Nt(e){return ua.call(e)}function ui(e){return da.call(e)}function He(e,t){return Nt(e)}function Re(e,t){{var n=Nt(e);return n instanceof Comment&&n.data===""?ui(n):n}}function xe(e,t=1,n=!1){let r=e;for(;t--;)r=ui(r);return r}function Ic(e){e.textContent=""}function fa(e){Ve===null&&Ye===null&&lc(),Ye!==null&&(Ye.f&st)!==0&&Ve===null&&ac(),dr&&sc()}function zc(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Hn(e,t,n,r=!0){var i=Ve,o={ctx:Le,deps:null,nodes_start:null,nodes_end:null,f:e|_t,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{wo(o),o.f|=nc}catch(l){throw Tt(o),l}else t!==null&&hi(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(Gs|Dr))===0;if(!s&&r&&(i!==null&&zc(o,i),Ye!==null&&(Ye.f&$t)!==0)){var a=Ye;(a.effects??(a.effects=[])).push(o)}return o}function Hc(){return Ye!==null&&!ht}function yo(e){const t=Hn(si,null,!1);return vt(t,rt),t.teardown=e,t}function Ht(e){fa();var t=Ve!==null&&(Ve.f&Lt)!==0&&Le!==null&&!Le.m;if(t){var n=Le;(n.e??(n.e=[])).push({fn:e,effect:Ve,reaction:Ye})}else{var r=jt(e);return r}}function mo(e){return fa(),Tn(e)}function Tc(e){const t=Hn(In,e,!0);return(n={})=>new Promise(r=>{n.outro?Gn(t,()=>{Tt(t),r(void 0)}):(Tt(t),r(void 0))})}function jt(e){return Hn(Zs,e,!1)}function Tn(e){return Hn(si,e,!0)}function Te(e,t=[],n=_n){const r=t.map(n);return ur(()=>e(...r.map(u)))}function ur(e,t=0){return Hn(si|fo|t,e,!0)}function on(e,t=!0){return Hn(si|Lt,e,!0,t)}function ha(e){var t=e.teardown;if(t!==null){const n=dr,r=Ye;qo(!0),xt(null);try{t.call(null)}finally{qo(n),xt(r)}}}function ga(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&In)!==0?n.parent=null:Tt(n,t),n=r}}function Oc(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Lt)===0&&Tt(t),t=n}}function Tt(e,t=!0){var n=!1;(t||(e.f&ic)!==0)&&e.nodes_start!==null&&(Dc(e.nodes_start,e.nodes_end),n=!0),ga(e,t&&!n),Wr(e,0),vt(e,ai);var r=e.transitions;if(r!==null)for(const o of r)o.stop();ha(e);var i=e.parent;i!==null&&i.first!==null&&$a(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Dc(e,t){for(;e!==null;){var n=e===t?null:ui(e);e.remove(),e=n}}function $a(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Gn(e,t){var n=[];po(e,n,!0),va(n,()=>{Tt(e),t&&t()})}function va(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function po(e,t,n){if((e.f&It)===0){if(e.f^=It,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&cr)!==0||(r.f&Lt)!==0;po(r,t,o?n:!1),r=i}}}function Lr(e){ya(e,!0)}function ya(e,t){if((e.f&It)!==0){e.f^=It,(e.f&rt)===0&&(e.f^=rt),fr(e)&&(vt(e,_t),hi(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&cr)!==0||(n.f&Lt)!==0;ya(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Un=[],qi=[];function ma(){var e=Un;Un=[],Or(e)}function Rc(){var e=qi;qi=[],Or(e)}function di(e){Un.length===0&&queueMicrotask(ma),Un.push(e)}function Lc(){Un.length>0&&ma(),qi.length>0&&Rc()}let Mr=!1,Yr=!1,Vr=null,nn=!1,dr=!1;function qo(e){dr=e}let Bn=[];let Ye=null,ht=!1;function xt(e){Ye=e}let Ve=null;function Jt(e){Ve=e}let Qe=null;function pa(e){Ye!==null&&Ye.f&Fi&&(Qe===null?Qe=[e]:Qe.push(e))}let Ge=null,it=0,ut=null;function Yc(e){ut=e}let wa=1,Xr=0,Zt=!1;function ba(){return++wa}function fr(e){var h;var t=e.f;if((t&_t)!==0)return!0;if((t&ln)!==0){var n=e.deps,r=(t&st)!==0;if(n!==null){var i,o,s=(t&Rr)!==0,a=r&&Ve!==null&&!Zt,l=n.length;if(s||a){var c=e,d=c.parent;for(i=0;i<l;i++)o=n[i],(s||!((h=o==null?void 0:o.reactions)!=null&&h.includes(c)))&&(o.reactions??(o.reactions=[])).push(c);s&&(c.f^=Rr),a&&d!==null&&(d.f&st)===0&&(c.f^=st)}for(i=0;i<l;i++)if(o=n[i],fr(o)&&sa(o),o.wv>e.wv)return!0}(!r||Ve!==null&&!Zt)&&vt(e,rt)}return!1}function Vc(e,t){for(var n=t;n!==null;){if((n.f&Dr)!==0)try{n.fn(e);return}catch{n.f^=Dr}n=n.parent}throw Mr=!1,e}function Zo(e){return(e.f&ai)===0&&(e.parent===null||(e.parent.f&Dr)===0)}function fi(e,t,n,r){if(Mr){if(n===null&&(Mr=!1),Zo(t))throw e;return}if(n!==null&&(Mr=!0),Vc(e,t),Zo(t))throw e}function _a(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];Qe!=null&&Qe.includes(e)||((o.f&$t)!==0?_a(o,t,!1):t===o&&(n?vt(o,_t):(o.f&rt)!==0&&vt(o,ln),hi(o)))}}function xa(e){var g;var t=Ge,n=it,r=ut,i=Ye,o=Zt,s=Qe,a=Le,l=ht,c=e.f;Ge=null,it=0,ut=null,Zt=(c&st)!==0&&(ht||!nn||Ye===null),Ye=(c&(Lt|In))===0?e:null,Qe=null,Fo(e.ctx),ht=!1,Xr++,e.f|=Fi;try{var d=(0,e.fn)(),h=e.deps;if(Ge!==null){var f;if(Wr(e,it),h!==null&&it>0)for(h.length=it+Ge.length,f=0;f<Ge.length;f++)h[it+f]=Ge[f];else e.deps=h=Ge;if(!Zt)for(f=it;f<h.length;f++)((g=h[f]).reactions??(g.reactions=[])).push(e)}else h!==null&&it<h.length&&(Wr(e,it),h.length=it);if(li()&&ut!==null&&!ht&&h!==null&&(e.f&($t|ln|_t))===0)for(f=0;f<ut.length;f++)_a(ut[f],e);return i!==null&&i!==e&&(Xr++,ut!==null&&(r===null?r=ut:r.push(...ut))),d}finally{Ge=t,it=n,ut=r,Ye=i,Zt=o,Qe=s,Fo(a),ht=l,e.f^=Fi}}function Xc(e,t){let n=t.reactions;if(n!==null){var r=Jl.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&$t)!==0&&(Ge===null||!Ge.includes(t))&&(vt(t,ln),(t.f&(st|Rr))===0&&(t.f^=Rr),ia(t),Wr(t,0))}function Wr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Xc(e,n[r])}function wo(e){var t=e.f;if((t&ai)===0){vt(e,rt);var n=Ve,r=Le,i=nn;Ve=e,nn=!0;try{(t&fo)!==0?Oc(e):ga(e),ha(e);var o=xa(e);e.teardown=typeof o=="function"?o:null,e.wv=wa;var s=e.deps,a;Wo&&gc&&e.f&_t}catch(l){fi(l,e,n,r||e.ctx)}finally{nn=i,Ve=n}}}function Wc(){try{cc()}catch(e){if(Vr!==null)fi(e,Vr,null);else throw e}}function ka(){var e=nn;try{var t=0;for(nn=!0;Bn.length>0;){t++>1e3&&Wc();var n=Bn,r=n.length;Bn=[];for(var i=0;i<r;i++){var o=Fc(n[i]);Bc(o)}Zn.clear()}}finally{Yr=!1,nn=e,Vr=null}}function Bc(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(ai|It))===0)try{fr(r)&&(wo(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?$a(r):r.fn=null))}catch(i){fi(i,r,null,r.ctx)}}}function hi(e){Yr||(Yr=!0,queueMicrotask(ka));for(var t=Vr=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(In|Lt))!==0){if((n&rt)===0)return;t.f^=rt}}Bn.push(t)}function Fc(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(Lt|In))!==0,o=i&&(r&rt)!==0;if(!o&&(r&It)===0){if((r&Zs)!==0)t.push(n);else if(i)n.f^=rt;else try{fr(n)&&wo(n)}catch(l){fi(l,n,null,n.ctx)}var s=n.first;if(s!==null){n=s;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}return t}function Kc(e){for(var t;;){if(Lc(),Bn.length===0)return t;Yr=!0,ka()}}async function qc(){await Promise.resolve(),Kc()}function u(e){var t=e.f,n=(t&$t)!==0;if(Ye!==null&&!ht){if(!(Qe!=null&&Qe.includes(e))){var r=Ye.deps;e.rv<Xr&&(e.rv=Xr,Ge===null&&r!==null&&r[it]===e?it++:Ge===null?Ge=[e]:(!Zt||!Ge.includes(e))&&Ge.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&st)===0&&(i.f^=st)}return n&&(i=e,fr(i)&&sa(i)),dr&&Zn.has(e)?Zn.get(e):e.v}function Ue(e){var t=ht;try{return ht=!0,e()}finally{ht=t}}const Zc=-7169;function vt(e,t){e.f=e.f&Zc|t}function Ea(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(wt in e)Zi(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&wt in n&&Zi(n)}}}function Zi(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Zi(e[r],t)}catch{}const n=oi(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ks(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Gc(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Uc=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Qc(e){return Uc.includes(e)}const Jc={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function jc(e){return e=e.toLowerCase(),Jc[e]??e}const eu=["touchstart","touchmove"];function tu(e){return eu.includes(e)}function nu(e,t){if(t){const n=document.body;e.autofocus=!0,di(()=>{document.activeElement===n&&e.focus()})}}let Go=!1;function ru(){Go||(Go=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Sa(e){var t=Ye,n=Ve;xt(null),Jt(null);try{return e()}finally{xt(t),Jt(n)}}function Pa(e,t,n,r=n){e.addEventListener(t,()=>Sa(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),ru()}const Ca=new Set,Gi=new Set;function bo(e,t,n,r={}){function i(o){if(r.capture||Vn.call(t,o),!o.cancelBubble)return Sa(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?di(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Ui(e,t,n,r={}){var i=bo(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function je(e,t,n,r,i){var o={capture:r,passive:i},s=bo(e,t,n,o);(t===document.body||t===window||t===document)&&yo(()=>{t.removeEventListener(e,s,o)})}function cn(e){for(var t=0;t<e.length;t++)Ca.add(e[t]);for(var n of Gi)n(e)}function Vn(e){var H;var t=this,n=t.ownerDocument,r=e.type,i=((H=e.composedPath)==null?void 0:H.call(e))||[],o=i[0]||e.target,s=0,a=e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){jl(e,"currentTarget",{configurable:!0,get(){return o||n}});var d=Ye,h=Ve;xt(null),Jt(null);try{for(var f,g=[];o!==null;){var m=o.assignedSlot||o.parentNode||o.host||null;try{var w=o["__"+r];if(w!=null&&(!o.disabled||e.target===o))if(ii(w)){var[y,...p]=w;y.apply(o,[e,...p])}else w.call(o,e)}catch(_){f?g.push(_):f=_}if(e.cancelBubble||m===t||m===null)break;o=m}if(f){for(let _ of g)queueMicrotask(()=>{throw _});throw f}}finally{e.__root=t,delete e.currentTarget,xt(d),Jt(h)}}}function Na(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function kn(e,t){var n=Ve;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function De(e,t){var n=(t&ea)!==0,r=(t&xc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Na(o?e:"<!>"+e),n||(i=Nt(i)));var s=r||ca?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Nt(s),l=s.lastChild;kn(a,l)}else kn(s,s);return s}}function We(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&ea)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=Na(o),l=Nt(a);if(i)for(s=document.createDocumentFragment();Nt(l);)s.appendChild(Nt(l));else s=Nt(l)}var c=s.cloneNode(!0);if(i){var d=Nt(c),h=c.lastChild;kn(d,h)}else kn(c,c);return c}}function Ma(e=""){{var t=ci(e+"");return kn(t,t),t}}function et(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ci();return e.append(t,n),kn(t,n),e}function ge(e,t){e!==null&&e.before(t)}function un(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function iu(e,t){return ou(e,t)}const fn=new Map;function ou(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){Ac();var a=new Set,l=h=>{for(var f=0;f<h.length;f++){var g=h[f];if(!a.has(g)){a.add(g);var m=tu(g);t.addEventListener(g,Vn,{passive:m});var w=fn.get(g);w===void 0?(document.addEventListener(g,Vn,{passive:m}),fn.set(g,1)):fn.set(g,w+1)}}};l(uo(Ca)),Gi.add(l);var c=void 0,d=Tc(()=>{var h=n??t.appendChild(ci());return on(()=>{if(o){Ie({});var f=Le;f.c=o}i&&(r.$$events=i),c=e(h,r)||{},o&&ze()}),()=>{var m;for(var f of a){t.removeEventListener(f,Vn);var g=fn.get(f);--g===0?(document.removeEventListener(f,Vn),fn.delete(f)):fn.set(f,g)}Gi.delete(l),h!==n&&((m=h.parentNode)==null||m.removeChild(h))}});return su.set(c,d),c}let su=new WeakMap;function Xe(e,t,[n,r]=[0,0]){var i=e,o=null,s=null,a=Je,l=n>0?cr:0,c=!1;const d=(f,g=!0)=>{c=!0,h(g,f)},h=(f,g)=>{a!==(a=f)&&(a?(o?Lr(o):g&&(o=on(()=>g(i))),s&&Gn(s,()=>{s=null})):(s?Lr(s):g&&(s=on(()=>g(i,[n+1,r]))),o&&Gn(o,()=>{o=null})))};ur(()=>{c=!1,t(d),c||h(null,null)},l)}function au(e,t){Tn(()=>{var n=t();for(var r in n){var i=n[r];i?e.style.setProperty(r,i):e.style.removeProperty(r)}}),yo(()=>{e.remove()})}function lu(e,t,n,r){for(var i=[],o=t.length,s=0;s<o;s++)po(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;Ic(l),l.append(n),r.clear(),Wt(e,t[0].prev,t[o-1].next)}va(i,()=>{for(var c=0;c<o;c++){var d=t[c];a||(r.delete(d.k),Wt(e,d.prev,d.next)),Tt(d.e,!a)}})}function gi(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&js)!==0;if(l){var c=e;s=c.appendChild(ci())}var d=null,h=!1,f=ra(()=>{var g=n();return ii(g)?g:g==null?[]:uo(g)});ur(()=>{var g=u(f),m=g.length;h&&m===0||(h=m===0,cu(g,a,s,i,t,r,n),o!==null&&(m===0?d?Lr(d):d=on(()=>o(s)):d!==null&&Gn(d,()=>{d=null})),u(f))})}function cu(e,t,n,r,i,o,s){var $,P,C,V;var a=(i&vc)!==0,l=(i&(go|$o))!==0,c=e.length,d=t.items,h=t.first,f=h,g,m=null,w,y=[],p=[],H,_,v,N;if(a)for(N=0;N<c;N+=1)H=e[N],_=o(H,N),v=d.get(_),v!==void 0&&(($=v.a)==null||$.measure(),(w??(w=new Set)).add(v));for(N=0;N<c;N+=1){if(H=e[N],_=o(H,N),v=d.get(_),v===void 0){var z=f?f.e.nodes_start:n;m=du(z,t,m,m===null?t.first:m.next,H,_,N,r,i,s),d.set(_,m),y=[],p=[],f=m.next;continue}if(l&&uu(v,H,N,i),(v.e.f&It)!==0&&(Lr(v.e),a&&((P=v.a)==null||P.unfix(),(w??(w=new Set)).delete(v))),v!==f){if(g!==void 0&&g.has(v)){if(y.length<p.length){var b=p[0],D;m=b.prev;var W=y[0],K=y[y.length-1];for(D=0;D<y.length;D+=1)Uo(y[D],b,n);for(D=0;D<p.length;D+=1)g.delete(p[D]);Wt(t,W.prev,K.next),Wt(t,m,W),Wt(t,K,b),f=b,m=K,N-=1,y=[],p=[]}else g.delete(v),Uo(v,f,n),Wt(t,v.prev,v.next),Wt(t,v,m===null?t.first:m.next),Wt(t,m,v),m=v;continue}for(y=[],p=[];f!==null&&f.k!==_;)(f.e.f&It)===0&&(g??(g=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;v=f}y.push(v),m=v,f=v.next}if(f!==null||g!==void 0){for(var S=g===void 0?[]:uo(g);f!==null;)(f.e.f&It)===0&&S.push(f),f=f.next;var M=S.length;if(M>0){var A=(i&js)!==0&&c===0?n:null;if(a){for(N=0;N<M;N+=1)(C=S[N].a)==null||C.measure();for(N=0;N<M;N+=1)(V=S[N].a)==null||V.fix()}lu(t,S,A,d)}}a&&di(()=>{var Y;if(w!==void 0)for(v of w)(Y=v.a)==null||Y.apply()}),Ve.first=t.first&&t.first.e,Ve.last=m&&m.e}function uu(e,t,n,r){(r&go)!==0&&Ki(e.v,t),(r&$o)!==0?Ki(e.i,n):e.i=n}function du(e,t,n,r,i,o,s,a,l,c){var d=(l&go)!==0,h=(l&yc)===0,f=d?h?aa(i):xn(i):i,g=(l&$o)===0?s:xn(s),m={i:g,v:f,k:o,a:null,e:null,prev:n,next:r};try{return m.e=on(()=>a(e,f,g,c),Mc),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?t.first=m:(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function Uo(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var s=ui(o);i.before(o),o=s}}function Wt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function nt(e,t,...n){var r=e,i=Rt,o;ur(()=>{i!==(i=t())&&(o&&(Tt(o),o=null),o=on(()=>i(r,...n)))},cr)}function _o(e,t,n){var r=e,i,o;ur(()=>{i!==(i=t())&&(o&&(Gn(o),o=null),i&&(o=on(()=>n(r,i))))},cr)}function Ze(e,t,n){jt(()=>{var r=Ue(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};Tn(()=>{var s=n();Ea(s),i&&Js(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function fu(e,t){jt(()=>{const n=t();return n&&n(e)})}function Aa(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Aa(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hu(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Aa(e))&&(r&&(r+=" "),r+=t);return r}function Et(e){return typeof e=="object"?hu(e):e??""}const Qo=[...` 	
\r\f \v\uFEFF`];function gu(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||Qo.includes(r[s-1]))&&(a===r.length||Qo.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function Jo(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function Ai(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function $u(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(Ai)),i&&l.push(...Object.keys(i).map(Ai));var c=0,d=-1;const w=e.length;for(var h=0;h<w;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):o?o===f&&(o=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!a&&o===!1&&s===0){if(f===":"&&d===-1)d=h;else if(f===";"||h===w-1){if(d!==-1){var g=Ai(e.substring(c,d).trim());if(!l.includes(g)){f!==";"&&h++;var m=e.substring(c,h).trim();n+=" "+m+";"}}c=h+1,d=-1}}}}return r&&(n+=Jo(r)),i&&(n+=Jo(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function yt(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=gu(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var c=!!o[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return o}function Ii(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function at(e,t,n,r){var i=e.__style;if(i!==t){var o=$u(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(Ii(e,n==null?void 0:n[0],r[0]),Ii(e,n==null?void 0:n[1],r[1],"important")):Ii(e,n,r));return r}const gn=Symbol("class"),pt=Symbol("style"),Ia=Symbol("is custom element"),za=Symbol("is html");function vu(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function _e(e,t,n,r){var i=Ha(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[oc]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ta(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function dn(e,t,n,r,i=!1){var o=Ha(e),s=o[Ia],a=!o[za],l=t||{},c=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=Et(n.class):(r||n[gn])&&(n.class=null),n[pt]&&(n.style??(n.style=null));var h=Ta(e);for(const _ in n){let v=n[_];if(c&&_==="value"&&v==null){e.value=e.__value="",l[_]=v;continue}if(_==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";yt(e,f,v,r,t==null?void 0:t[gn],n[gn]),l[_]=v,l[gn]=n[gn];continue}if(_==="style"){at(e,v,t==null?void 0:t[pt],n[pt]),l[_]=v,l[pt]=n[pt];continue}var g=l[_];if(v!==g){l[_]=v;var m=_[0]+_[1];if(m!=="$$")if(m==="on"){const N={},z="$$"+_;let b=_.slice(2);var w=Qc(b);if(Gc(b)&&(b=b.slice(0,-7),N.capture=!0),!w&&g){if(v!=null)continue;e.removeEventListener(b,l[z],N),l[z]=null}if(v!=null)if(w)e[`__${b}`]=v,cn([b]);else{let D=function(W){l[_].call(this,W)};var H=D;l[z]=bo(b,e,D,N)}else w&&(e[`__${b}`]=void 0)}else if(_==="style")_e(e,_,v);else if(_==="autofocus")nu(e,!!v);else if(!s&&(_==="__value"||_==="value"&&v!=null))e.value=e.__value=v;else if(_==="selected"&&c)vu(e,v);else{var y=_;a||(y=jc(y));var p=y==="defaultValue"||y==="defaultChecked";if(v==null&&!s&&!p)if(o[_]=null,y==="value"||y==="checked"){let N=e;const z=t===void 0;if(y==="value"){let b=N.defaultValue;N.removeAttribute(y),N.defaultValue=b,N.value=N.__value=z?b:null}else{let b=N.defaultChecked;N.removeAttribute(y),N.defaultChecked=b,N.checked=z?b:!1}}else e.removeAttribute(_);else p||h.includes(y)&&(s||typeof v!="string")?e[y]=v:typeof v!="function"&&_e(e,y,v)}}}for(let _ of Object.getOwnPropertySymbols(n))_.description===Ec&&fu(e,()=>n[_]);return l}function Ha(e){return e.__attributes??(e.__attributes={[Ia]:e.nodeName.includes("-"),[za]:e.namespaceURI===kc})}var jo=new Map;function Ta(e){var t=jo.get(e.nodeName);if(t)return t;jo.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Ks(r);for(var o in n)n[o].set&&t.push(o);r=oi(r)}return t}function Ar(e,t,n=t){Pa(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),Ue(t)==null&&n(e.checked),Tn(()=>{var r=t();e.checked=!!r})}function Oa(e,t,n){if(e.multiple)return pu(e,t);for(var r of e.options){var i=Fn(r);if(Cc(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function yu(e,t){jt(()=>{var n=new MutationObserver(()=>{var r=e.__value;Oa(e,r)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function mu(e,t,n=t){var r=!0;Pa(e,"change",i=>{var o=i?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(o),Fn);else{var a=e.querySelector(o)??e.querySelector("option:not([disabled])");s=a&&Fn(a)}n(s)}),jt(()=>{var i=t();if(Oa(e,i,r),r&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Fn(o),n(i))}e.__value=i,r=!1}),yu(e)}function pu(e,t){for(var n of e.options)n.selected=~t.indexOf(Fn(n))}function Fn(e){return"__value"in e?e.__value:e.value}var qt,wn,sr,ni,Da;const ri=class ri{constructor(t){le(this,ni);le(this,qt,new WeakMap);le(this,wn);le(this,sr);Dn(this,sr,t)}observe(t,n){var r=I(this,qt).get(t)||new Set;return r.add(n),I(this,qt).set(t,r),Xo(this,ni,Da).call(this).observe(t,I(this,sr)),()=>{var i=I(this,qt).get(t);i.delete(n),i.size===0&&(I(this,qt).delete(t),I(this,wn).unobserve(t))}}};qt=new WeakMap,wn=new WeakMap,sr=new WeakMap,ni=new WeakSet,Da=function(){return I(this,wn)??Dn(this,wn,new ResizeObserver(t=>{for(var n of t){ri.entries.set(n.target,n);for(var r of I(this,qt).get(n.target)||[])r(n)}}))},Fe(ri,"entries",new WeakMap);let Qi=ri;var wu=new Qi({box:"border-box"});function es(e,t,n){var r=wu.observe(e,()=>n(e[t]));jt(()=>(Ue(()=>n(e[t])),r))}function ts(e,t){return e===t||(e==null?void 0:e[wt])===t}function Ot(e={},t,n,r){return jt(()=>{var i,o;return Tn(()=>{i=o,o=[],Ue(()=>{e!==n(...o)&&(t(e,...o),i&&ts(n(...i),e)&&t(null,...i))})}),()=>{di(()=>{o&&ts(n(...o),e)&&t(null,...o)})}}),e}function bu(e=!1){const t=Le,n=t.l.u;if(!n)return;let r=()=>Ea(t.s);if(e){let i=0,o={};const s=_n(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&i++,i});r=()=>u(s)}n.b.length&&mo(()=>{ns(t,r),Or(n.b)}),Ht(()=>{const i=Ue(()=>n.m.map(tc));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Ht(()=>{ns(t,r),Or(n.a)})}function ns(e,t){if(e.l.s)for(const n of e.l.s)u(n);t()}let pr=!1;function _u(e){var t=pr;try{return pr=!1,[e(),pr]}finally{pr=t}}const xu={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Yt(e,t,n){return new Proxy({props:e,exclude:t},xu)}const ku={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Rn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Rn(i)&&(i=i());const o=Gt(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Rn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=Gt(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===wt||t===Us)return!1;for(let n of e.props)if(Rn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Rn(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function Ft(...e){return new Proxy({props:e},ku)}function rs(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function j(e,t,n,r){var z;var i=(n&mc)!==0,o=!zn||(n&pc)!==0,s=(n&bc)!==0,a=(n&_c)!==0,l=!1,c;s?[c,l]=_u(()=>e[t]):c=e[t];var d=wt in e||Us in e,h=s&&(((z=Gt(e,t))==null?void 0:z.set)??(d&&t in e&&(b=>e[t]=b)))||void 0,f=r,g=!0,m=!1,w=()=>(m=!0,g&&(g=!1,a?f=Ue(r):f=r),f);c===void 0&&r!==void 0&&(h&&o&&uc(),c=w(),h&&h(c));var y;if(o)y=()=>{var b=e[t];return b===void 0?w():(g=!0,m=!1,b)};else{var p=(i?_n:ra)(()=>e[t]);p.f|=rc,y=()=>{var b=u(p);return b!==void 0&&(f=void 0),b===void 0?f:b}}if((n&wc)===0)return y;if(h){var H=e.$$legacy;return function(b,D){return arguments.length>0?((!o||!D||H||l)&&h(D?y():b),b):y()}}var _=!1,v=aa(c),N=_n(()=>{var b=y(),D=u(v);return _?(_=!1,D):v.v=b});return s&&u(N),i||(N.equals=ho),function(b,D){if(arguments.length>0){const W=D?u(N):o&&s?Ke(b):b;if(!N.equals(W)){if(_=!0,q(v,W),m&&f!==void 0&&(f=W),rs(N))return b;Ue(()=>u(N))}return b}return rs(N)?N.v:u(N)}}function xo(e){Le===null&&vo(),zn&&Le.l!==null?Eu(Le).m.push(e):Ht(()=>{const t=Ue(e);if(typeof t=="function")return t})}function $i(e){Le===null&&vo(),xo(()=>()=>Ue(e))}function Eu(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Su="5";var Fs;typeof window<"u"&&((Fs=window.__svelte??(window.__svelte={})).v??(Fs.v=new Set)).add(Su);var Pu={value:()=>{}};function vi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ir(n)}function Ir(e){this._=e}function Cu(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ir.prototype=vi.prototype={constructor:Ir,on:function(e,t){var n=this._,r=Cu(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Nu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=is(n[i],e.name,t);else if(t==null)for(i in n)n[i]=is(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ir(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Nu(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function is(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Pu,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ji="http://www.w3.org/1999/xhtml";const os={svg:"http://www.w3.org/2000/svg",xhtml:Ji,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),os.hasOwnProperty(t)?{space:os[t],local:e}:e}function Mu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ji&&t.documentElement.namespaceURI===Ji?t.createElement(e):t.createElementNS(n,e)}}function Au(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ra(e){var t=yi(e);return(t.local?Au:Mu)(t)}function Iu(){}function ko(e){return e==null?Iu:function(){return this.querySelector(e)}}function zu(e){typeof e!="function"&&(e=ko(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,c,d=0;d<s;++d)(l=o[d])&&(c=e.call(l,l.__data__,d,o))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new lt(r,this._parents)}function Hu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Tu(){return[]}function La(e){return e==null?Tu:function(){return this.querySelectorAll(e)}}function Ou(e){return function(){return Hu(e.apply(this,arguments))}}function Du(e){typeof e=="function"?e=Ou(e):e=La(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),i.push(l));return new lt(r,i)}function Ya(e){return function(){return this.matches(e)}}function Va(e){return function(t){return t.matches(e)}}var Ru=Array.prototype.find;function Lu(e){return function(){return Ru.call(this.children,e)}}function Yu(){return this.firstElementChild}function Vu(e){return this.select(e==null?Yu:Lu(typeof e=="function"?e:Va(e)))}var Xu=Array.prototype.filter;function Wu(){return Array.from(this.children)}function Bu(e){return function(){return Xu.call(this.children,e)}}function Fu(e){return this.selectAll(e==null?Wu:Bu(typeof e=="function"?e:Va(e)))}function Ku(e){typeof e!="function"&&(e=Ya(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new lt(r,this._parents)}function Xa(e){return new Array(e.length)}function qu(){return new lt(this._enter||this._groups.map(Xa),this._parents)}function Br(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Br.prototype={constructor:Br,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zu(e){return function(){return e}}function Gu(e,t,n,r,i,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Br(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Uu(e,t,n,r,i,o,s){var a,l,c=new Map,d=t.length,h=o.length,f=new Array(d),g;for(a=0;a<d;++a)(l=t[a])&&(f[a]=g=s.call(l,l.__data__,a,t)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(l=c.get(g))?(r[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new Br(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&c.get(f[a])===l&&(i[a]=l)}function Qu(e){return e.__data__}function Ju(e,t){if(!arguments.length)return Array.from(this,Qu);var n=t?Uu:Gu,r=this._parents,i=this._groups;typeof e!="function"&&(e=Zu(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var d=r[c],h=i[c],f=h.length,g=ju(e.call(d,d&&d.__data__,c,r)),m=g.length,w=a[c]=new Array(m),y=s[c]=new Array(m),p=l[c]=new Array(f);n(d,h,w,y,p,g,t);for(var H=0,_=0,v,N;H<m;++H)if(v=w[H]){for(H>=_&&(_=H+1);!(N=y[_])&&++_<m;);v._next=N||null}}return s=new lt(s,r),s._enter=a,s._exit=l,s}function ju(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ed(){return new lt(this._exit||this._groups.map(Xa),this._parents)}function td(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function nd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],d=r[l],h=c.length,f=a[l]=new Array(h),g,m=0;m<h;++m)(g=c[m]||d[m])&&(f[m]=g);for(;l<i;++l)a[l]=n[l];return new lt(a,this._parents)}function rd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function id(e){e||(e=od);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(l[d]=c);l.sort(t)}return new lt(i,this._parents).order()}function od(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ad(){return Array.from(this)}function ld(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function cd(){let e=0;for(const t of this)++e;return e}function ud(){return!this.node()}function dd(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function fd(e){return function(){this.removeAttribute(e)}}function hd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gd(e,t){return function(){this.setAttribute(e,t)}}function $d(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function md(e,t){var n=yi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hd:fd:typeof t=="function"?n.local?yd:vd:n.local?$d:gd)(n,t))}function Wa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pd(e){return function(){this.style.removeProperty(e)}}function wd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bd(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _d(e,t,n){return arguments.length>1?this.each((t==null?pd:typeof t=="function"?bd:wd)(e,t,n??"")):En(this.node(),e)}function En(e,t){return e.style.getPropertyValue(t)||Wa(e).getComputedStyle(e,null).getPropertyValue(t)}function xd(e){return function(){delete this[e]}}function kd(e,t){return function(){this[e]=t}}function Ed(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Sd(e,t){return arguments.length>1?this.each((t==null?xd:typeof t=="function"?Ed:kd)(e,t)):this.node()[e]}function Ba(e){return e.trim().split(/^|\s+/)}function Eo(e){return e.classList||new Fa(e)}function Fa(e){this._node=e,this._names=Ba(e.getAttribute("class")||"")}Fa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ka(e,t){for(var n=Eo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qa(e,t){for(var n=Eo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Pd(e){return function(){Ka(this,e)}}function Cd(e){return function(){qa(this,e)}}function Nd(e,t){return function(){(t.apply(this,arguments)?Ka:qa)(this,e)}}function Md(e,t){var n=Ba(e+"");if(arguments.length<2){for(var r=Eo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Nd:t?Pd:Cd)(n,t))}function Ad(){this.textContent=""}function Id(e){return function(){this.textContent=e}}function zd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Hd(e){return arguments.length?this.each(e==null?Ad:(typeof e=="function"?zd:Id)(e)):this.node().textContent}function Td(){this.innerHTML=""}function Od(e){return function(){this.innerHTML=e}}function Dd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rd(e){return arguments.length?this.each(e==null?Td:(typeof e=="function"?Dd:Od)(e)):this.node().innerHTML}function Ld(){this.nextSibling&&this.parentNode.appendChild(this)}function Yd(){return this.each(Ld)}function Vd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xd(){return this.each(Vd)}function Wd(e){var t=typeof e=="function"?e:Ra(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bd(){return null}function Fd(e,t){var n=typeof e=="function"?e:Ra(e),r=t==null?Bd:typeof t=="function"?t:ko(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Kd(){var e=this.parentNode;e&&e.removeChild(this)}function qd(){return this.each(Kd)}function Zd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ud(e){return this.select(e?Gd:Zd)}function Qd(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jd(e){return function(t){e.call(this,t,this.__data__)}}function jd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ef(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function tf(e,t,n){return function(){var r=this.__on,i,o=Jd(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function nf(e,t,n){var r=jd(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(i=0,d=a[l];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?tf:ef,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Za(e,t,n){var r=Wa(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function rf(e,t){return function(){return Za(this,e,t)}}function of(e,t){return function(){return Za(this,e,t.apply(this,arguments))}}function sf(e,t){return this.each((typeof t=="function"?of:rf)(e,t))}function*af(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Ga=[null];function lt(e,t){this._groups=e,this._parents=t}function hr(){return new lt([[document.documentElement]],Ga)}function lf(){return this}lt.prototype=hr.prototype={constructor:lt,select:zu,selectAll:Du,selectChild:Vu,selectChildren:Fu,filter:Ku,data:Ju,enter:qu,exit:ed,join:td,merge:nd,selection:lf,order:rd,sort:id,call:sd,nodes:ad,node:ld,size:cd,empty:ud,each:dd,attr:md,style:_d,property:Sd,classed:Md,text:Hd,html:Rd,raise:Yd,lower:Xd,append:Wd,insert:Fd,remove:qd,clone:Ud,datum:Qd,on:nf,dispatch:sf,[Symbol.iterator]:af};function ot(e){return typeof e=="string"?new lt([[document.querySelector(e)]],[document.documentElement]):new lt([[e]],Ga)}function cf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=cf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const uf={passive:!1},Qn={capture:!0,passive:!1};function zi(e){e.stopImmediatePropagation()}function yn(e){e.preventDefault(),e.stopImmediatePropagation()}function Ua(e){var t=e.document.documentElement,n=ot(e).on("dragstart.drag",yn,Qn);"onselectstart"in t?n.on("selectstart.drag",yn,Qn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qa(e,t){var n=e.document.documentElement,r=ot(e).on("dragstart.drag",null);t&&(r.on("click.drag",yn,Qn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const wr=e=>()=>e;function ji(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}ji.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function df(e){return!e.ctrlKey&&!e.button}function ff(){return this.parentNode}function hf(e,t){return t??{x:e.x,y:e.y}}function gf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ja(){var e=df,t=ff,n=hf,r=gf,i={},o=vi("start","drag","end"),s=0,a,l,c,d,h=0;function f(v){v.on("mousedown.drag",g).filter(r).on("touchstart.drag",y).on("touchmove.drag",p,uf).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(v,N){if(!(d||!e.call(this,v,N))){var z=_(this,t.call(this,v,N),v,N,"mouse");z&&(ot(v.view).on("mousemove.drag",m,Qn).on("mouseup.drag",w,Qn),Ua(v.view),zi(v),c=!1,a=v.clientX,l=v.clientY,z("start",v))}}function m(v){if(yn(v),!c){var N=v.clientX-a,z=v.clientY-l;c=N*N+z*z>h}i.mouse("drag",v)}function w(v){ot(v.view).on("mousemove.drag mouseup.drag",null),Qa(v.view,c),yn(v),i.mouse("end",v)}function y(v,N){if(e.call(this,v,N)){var z=v.changedTouches,b=t.call(this,v,N),D=z.length,W,K;for(W=0;W<D;++W)(K=_(this,b,v,N,z[W].identifier,z[W]))&&(zi(v),K("start",v,z[W]))}}function p(v){var N=v.changedTouches,z=N.length,b,D;for(b=0;b<z;++b)(D=i[N[b].identifier])&&(yn(v),D("drag",v,N[b]))}function H(v){var N=v.changedTouches,z=N.length,b,D;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<z;++b)(D=i[N[b].identifier])&&(zi(v),D("end",v,N[b]))}function _(v,N,z,b,D,W){var K=o.copy(),S=ft(W||z,N),M,A,$;if(($=n.call(v,new ji("beforestart",{sourceEvent:z,target:f,identifier:D,active:s,x:S[0],y:S[1],dx:0,dy:0,dispatch:K}),b))!=null)return M=$.x-S[0]||0,A=$.y-S[1]||0,function P(C,V,Y){var T=S,B;switch(C){case"start":i[D]=P,B=s++;break;case"end":delete i[D],--s;case"drag":S=ft(Y||V,N),B=s;break}K.call(C,v,new ji(C,{sourceEvent:V,subject:$,target:f,identifier:D,active:B,x:S[0]+M,y:S[1]+A,dx:S[0]-T[0],dy:S[1]-T[1],dispatch:K}),b)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:wr(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:wr(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:wr(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:wr(!!v),f):r},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,f):Math.sqrt(h)},f}function So(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ja(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function gr(){}var Jn=.7,Fr=1/Jn,mn="\\s*([+-]?\\d+)\\s*",jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$f=/^#([0-9a-f]{3,8})$/,vf=new RegExp(`^rgb\\(${mn},${mn},${mn}\\)$`),yf=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),mf=new RegExp(`^rgba\\(${mn},${mn},${mn},${jn}\\)$`),pf=new RegExp(`^rgba\\(${bt},${bt},${bt},${jn}\\)$`),wf=new RegExp(`^hsl\\(${jn},${bt},${bt}\\)$`),bf=new RegExp(`^hsla\\(${jn},${bt},${bt},${jn}\\)$`),ss={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};So(gr,er,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:as,formatHex:as,formatHex8:_f,formatHsl:xf,formatRgb:ls,toString:ls});function as(){return this.rgb().formatHex()}function _f(){return this.rgb().formatHex8()}function xf(){return el(this).formatHsl()}function ls(){return this.rgb().formatRgb()}function er(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$f.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cs(t):n===3?new tt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?br(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?br(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vf.exec(e))?new tt(t[1],t[2],t[3],1):(t=yf.exec(e))?new tt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mf.exec(e))?br(t[1],t[2],t[3],t[4]):(t=pf.exec(e))?br(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wf.exec(e))?fs(t[1],t[2]/100,t[3]/100,1):(t=bf.exec(e))?fs(t[1],t[2]/100,t[3]/100,t[4]):ss.hasOwnProperty(e)?cs(ss[e]):e==="transparent"?new tt(NaN,NaN,NaN,0):null}function cs(e){return new tt(e>>16&255,e>>8&255,e&255,1)}function br(e,t,n,r){return r<=0&&(e=t=n=NaN),new tt(e,t,n,r)}function kf(e){return e instanceof gr||(e=er(e)),e?(e=e.rgb(),new tt(e.r,e.g,e.b,e.opacity)):new tt}function eo(e,t,n,r){return arguments.length===1?kf(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}So(tt,eo,ja(gr,{brighter(e){return e=e==null?Fr:Math.pow(Fr,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jn:Math.pow(Jn,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tt(rn(this.r),rn(this.g),rn(this.b),Kr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:us,formatHex:us,formatHex8:Ef,formatRgb:ds,toString:ds}));function us(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function Ef(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ds(){const e=Kr(this.opacity);return`${e===1?"rgb(":"rgba("}${rn(this.r)}, ${rn(this.g)}, ${rn(this.b)}${e===1?")":`, ${e})`}`}function Kr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tn(e){return e=rn(e),(e<16?"0":"")+e.toString(16)}function fs(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gt(e,t,n,r)}function el(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof gr||(e=er(e)),!e)return new gt;if(e instanceof gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new gt(s,a,l,e.opacity)}function Sf(e,t,n,r){return arguments.length===1?el(e):new gt(e,t,n,r??1)}function gt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}So(gt,Sf,ja(gr,{brighter(e){return e=e==null?Fr:Math.pow(Fr,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jn:Math.pow(Jn,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new tt(Hi(e>=240?e-240:e+120,i,r),Hi(e,i,r),Hi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new gt(hs(this.h),_r(this.s),_r(this.l),Kr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kr(this.opacity);return`${e===1?"hsl(":"hsla("}${hs(this.h)}, ${_r(this.s)*100}%, ${_r(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hs(e){return e=(e||0)%360,e<0?e+360:e}function _r(e){return Math.max(0,Math.min(1,e||0))}function Hi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tl=e=>()=>e;function Pf(e,t){return function(n){return e+n*t}}function Cf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Nf(e){return(e=+e)==1?nl:function(t,n){return n-t?Cf(t,n,e):tl(isNaN(t)?n:t)}}function nl(e,t){var n=t-e;return n?Pf(e,n):tl(isNaN(e)?t:e)}const gs=function e(t){var n=Nf(t);function r(i,o){var s=n((i=eo(i)).r,(o=eo(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=nl(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=e,r}(1);function Bt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var to=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ti=new RegExp(to.source,"g");function Mf(e){return function(){return e}}function Af(e){return function(t){return e(t)+""}}function If(e,t){var n=to.lastIndex=Ti.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=to.exec(e))&&(i=Ti.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Bt(r,i)})),n=Ti.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Af(l[0].x):Mf(t):(t=l.length,function(c){for(var d=0,h;d<t;++d)a[(h=l[d]).i]=h.x(c);return a.join("")})}var $s=180/Math.PI,no={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rl(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*$s,skewX:Math.atan(l)*$s,scaleX:s,scaleY:a}}var xr;function zf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?no:rl(t.a,t.b,t.c,t.d,t.e,t.f)}function Hf(e){return e==null||(xr||(xr=document.createElementNS("http://www.w3.org/2000/svg","g")),xr.setAttribute("transform",e),!(e=xr.transform.baseVal.consolidate()))?no:(e=e.matrix,rl(e.a,e.b,e.c,e.d,e.e,e.f))}function il(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,d,h,f,g,m){if(c!==h||d!==f){var w=g.push("translate(",null,t,null,n);m.push({i:w-4,x:Bt(c,h)},{i:w-2,x:Bt(d,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Bt(c,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(c,d,h,f){c!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Bt(c,d)}):d&&h.push(i(h)+"skewX("+d+r)}function l(c,d,h,f,g,m){if(c!==h||d!==f){var w=g.push(i(g)+"scale(",null,",",null,")");m.push({i:w-4,x:Bt(c,h)},{i:w-2,x:Bt(d,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,f),s(c.rotate,d.rotate,h,f),a(c.skewX,d.skewX,h,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(g){for(var m=-1,w=f.length,y;++m<w;)h[(y=f[m]).i]=y.x(g);return h.join("")}}}var Tf=il(zf,"px, ","px)","deg)"),Of=il(Hf,", ",")",")"),Df=1e-12;function vs(e){return((e=Math.exp(e))+1/e)/2}function Rf(e){return((e=Math.exp(e))-1/e)/2}function Lf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Yf=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],d=s[0],h=s[1],f=s[2],g=d-a,m=h-l,w=g*g+m*m,y,p;if(w<Df)p=Math.log(f/c)/t,y=function(b){return[a+b*g,l+b*m,c*Math.exp(t*b*p)]};else{var H=Math.sqrt(w),_=(f*f-c*c+r*w)/(2*c*n*H),v=(f*f-c*c-r*w)/(2*f*n*H),N=Math.log(Math.sqrt(_*_+1)-_),z=Math.log(Math.sqrt(v*v+1)-v);p=(z-N)/t,y=function(b){var D=b*p,W=vs(N),K=c/(n*H)*(W*Lf(t*D+N)-Rf(N));return[a+K*g,l+K*m,c*W/vs(t*D+N)]}}return y.duration=p*1e3*t/Math.SQRT2,y}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Sn=0,Xn=0,Ln=0,ol=1e3,qr,Wn,Zr=0,sn=0,mi=0,tr=typeof performance=="object"&&performance.now?performance:Date,sl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Po(){return sn||(sl(Vf),sn=tr.now()+mi)}function Vf(){sn=0}function Gr(){this._call=this._time=this._next=null}Gr.prototype=al.prototype={constructor:Gr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Po():+n)+(t==null?0:+t),!this._next&&Wn!==this&&(Wn?Wn._next=this:qr=this,Wn=this),this._call=e,this._time=n,ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,ro())}};function al(e,t,n){var r=new Gr;return r.restart(e,t,n),r}function Xf(){Po(),++Sn;for(var e=qr,t;e;)(t=sn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sn}function ys(){sn=(Zr=tr.now())+mi,Sn=Xn=0;try{Xf()}finally{Sn=0,Bf(),sn=0}}function Wf(){var e=tr.now(),t=e-Zr;t>ol&&(mi-=t,Zr=e)}function Bf(){for(var e,t=qr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qr=n);Wn=e,ro(r)}function ro(e){if(!Sn){Xn&&(Xn=clearTimeout(Xn));var t=e-sn;t>24?(e<1/0&&(Xn=setTimeout(ys,e-tr.now()-mi)),Ln&&(Ln=clearInterval(Ln))):(Ln||(Zr=tr.now(),Ln=setInterval(Wf,ol)),Sn=1,sl(ys))}}function ms(e,t,n){var r=new Gr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ff=vi("start","end","cancel","interrupt"),Kf=[],ll=0,ps=1,io=2,zr=3,ws=4,oo=5,Hr=6;function pi(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;qf(e,n,{name:t,index:r,group:i,on:Ff,tween:Kf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ll})}function Co(e,t){var n=mt(e,t);if(n.state>ll)throw new Error("too late; already scheduled");return n}function St(e,t){var n=mt(e,t);if(n.state>zr)throw new Error("too late; already running");return n}function mt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function qf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=al(o,0,n.time);function o(c){n.state=ps,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,h,f,g;if(n.state!==ps)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===zr)return ms(s);g.state===ws?(g.state=Hr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[d]):+d<t&&(g.state=Hr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[d])}if(ms(function(){n.state===zr&&(n.state=ws,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=io,n.on.call("start",e,e.__data__,n.index,n.group),n.state===io){for(n.state=zr,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=oo,1),h=-1,f=i.length;++h<f;)i[h].call(e,d);n.state===oo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Hr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Tr(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>io&&r.state<oo,r.state=Hr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Zf(e){return this.each(function(){Tr(this,e)})}function Gf(e,t){var n,r;return function(){var i=St(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Uf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=St(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Qf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=mt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Gf:Uf)(n,e,t))}function No(e,t,n){var r=e._id;return e.each(function(){var i=St(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return mt(i,r).value[t]}}function cl(e,t){var n;return(typeof t=="number"?Bt:t instanceof er?gs:(n=er(t))?(t=n,gs):If)(e,t)}function Jf(e){return function(){this.removeAttribute(e)}}function jf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eh(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function th(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function nh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function rh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function ih(e,t){var n=yi(e),r=n==="transform"?Of:cl;return this.attrTween(e,typeof t=="function"?(n.local?rh:nh)(n,r,No(this,"attr."+e,t)):t==null?(n.local?jf:Jf)(n):(n.local?th:eh)(n,r,t))}function oh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ah(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&sh(e,o)),n}return i._value=t,i}function lh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&oh(e,o)),n}return i._value=t,i}function ch(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=yi(e);return this.tween(n,(r.local?ah:lh)(r,t))}function uh(e,t){return function(){Co(this,e).delay=+t.apply(this,arguments)}}function dh(e,t){return t=+t,function(){Co(this,e).delay=t}}function fh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uh:dh)(t,e)):mt(this.node(),t).delay}function hh(e,t){return function(){St(this,e).duration=+t.apply(this,arguments)}}function gh(e,t){return t=+t,function(){St(this,e).duration=t}}function $h(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hh:gh)(t,e)):mt(this.node(),t).duration}function vh(e,t){if(typeof t!="function")throw new Error;return function(){St(this,e).ease=t}}function yh(e){var t=this._id;return arguments.length?this.each(vh(t,e)):mt(this.node(),t).ease}function mh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;St(this,e).ease=n}}function ph(e){if(typeof e!="function")throw new Error;return this.each(mh(this._id,e))}function wh(e){typeof e!="function"&&(e=Ya(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Dt(r,this._parents,this._name,this._id)}function bh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],d=l.length,h=s[a]=new Array(d),f,g=0;g<d;++g)(f=l[g]||c[g])&&(h[g]=f);for(;a<r;++a)s[a]=t[a];return new Dt(s,this._parents,this._name,this._id)}function _h(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xh(e,t,n){var r,i,o=_h(t)?Co:St;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function kh(e,t){var n=this._id;return arguments.length<2?mt(this.node(),n).on.on(e):this.each(xh(n,e,t))}function Eh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sh(){return this.on("end.remove",Eh(this._id))}function Ph(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ko(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),d,h,f=0;f<l;++f)(d=a[f])&&(h=e.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,pi(c[f],t,n,f,c,mt(d,n)));return new Dt(o,this._parents,t,n)}function Ch(e){var t=this._name,n=this._id;typeof e!="function"&&(e=La(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,d,h=0;h<c;++h)if(d=l[h]){for(var f=e.call(d,d.__data__,h,l),g,m=mt(d,n),w=0,y=f.length;w<y;++w)(g=f[w])&&pi(g,t,n,w,f,m);o.push(f),s.push(d)}return new Dt(o,s,t,n)}var Nh=hr.prototype.constructor;function Mh(){return new Nh(this._groups,this._parents)}function Ah(e,t){var n,r,i;return function(){var o=En(this,e),s=(this.style.removeProperty(e),En(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ul(e){return function(){this.style.removeProperty(e)}}function Ih(e,t,n){var r,i=n+"",o;return function(){var s=En(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function zh(e,t,n){var r,i,o;return function(){var s=En(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),En(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function Hh(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=St(this,e),c=l.on,d=l.value[o]==null?a||(a=ul(t)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(s,i=d),l.on=r}}function Th(e,t,n){var r=(e+="")=="transform"?Tf:cl;return t==null?this.styleTween(e,Ah(e,r)).on("end.style."+e,ul(e)):typeof t=="function"?this.styleTween(e,zh(e,r,No(this,"style."+e,t))).each(Hh(this._id,e)):this.styleTween(e,Ih(e,r,t),n).on("end.style."+e,null)}function Oh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Dh(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Oh(e,s,n)),r}return o._value=t,o}function Rh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Dh(e,t,n??""))}function Lh(e){return function(){this.textContent=e}}function Yh(e){return function(){var t=e(this);this.textContent=t??""}}function Vh(e){return this.tween("text",typeof e=="function"?Yh(No(this,"text",e)):Lh(e==null?"":e+""))}function Xh(e){return function(t){this.textContent=e.call(this,t)}}function Wh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Xh(i)),t}return r._value=e,r}function Bh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Wh(e))}function Fh(){for(var e=this._name,t=this._id,n=dl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var d=mt(l,t);pi(l,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Dt(r,this._parents,e,n)}function Kh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=St(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&o()})}var qh=0;function Dt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dl(){return++qh}var Ct=hr.prototype;Dt.prototype={constructor:Dt,select:Ph,selectAll:Ch,selectChild:Ct.selectChild,selectChildren:Ct.selectChildren,filter:wh,merge:bh,selection:Mh,transition:Fh,call:Ct.call,nodes:Ct.nodes,node:Ct.node,size:Ct.size,empty:Ct.empty,each:Ct.each,on:kh,attr:ih,attrTween:ch,style:Th,styleTween:Rh,text:Vh,textTween:Bh,remove:Sh,tween:Qf,delay:fh,duration:$h,ease:yh,easeVarying:ph,end:Kh,[Symbol.iterator]:Ct[Symbol.iterator]};function Zh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Gh={time:null,delay:0,duration:250,ease:Zh};function Uh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Qh(e){var t,n;e instanceof Dt?(t=e._id,e=e._name):(t=dl(),(n=Gh).time=Po(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&pi(l,e,t,c,s,n||Uh(l,t));return new Dt(r,this._parents,e,t)}hr.prototype.interrupt=Zf;hr.prototype.transition=Qh;const kr=e=>()=>e;function Jh(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Mt(e,t,n){this.k=e,this.x=t,this.y=n}Mt.prototype={constructor:Mt,scale:function(e){return e===1?this:new Mt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Mt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wi=new Mt(1,0,0);fl.prototype=Mt.prototype;function fl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return wi;return e.__zoom}function Oi(e){e.stopImmediatePropagation()}function Yn(e){e.preventDefault(),e.stopImmediatePropagation()}function jh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function eg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function bs(){return this.__zoom||wi}function tg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ng(){return navigator.maxTouchPoints||"ontouchstart"in this}function rg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function hl(){var e=jh,t=eg,n=rg,r=tg,i=ng,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Yf,c=vi("start","zoom","end"),d,h,f,g=500,m=150,w=0,y=10;function p($){$.property("__zoom",bs).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",K).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function($,P,C,V){var Y=$.selection?$.selection():$;Y.property("__zoom",bs),$!==Y?N($,P,C,V):Y.interrupt().each(function(){z(this,arguments).event(V).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},p.scaleBy=function($,P,C,V){p.scaleTo($,function(){var Y=this.__zoom.k,T=typeof P=="function"?P.apply(this,arguments):P;return Y*T},C,V)},p.scaleTo=function($,P,C,V){p.transform($,function(){var Y=t.apply(this,arguments),T=this.__zoom,B=C==null?v(Y):typeof C=="function"?C.apply(this,arguments):C,Z=T.invert(B),se=typeof P=="function"?P.apply(this,arguments):P;return n(_(H(T,se),B,Z),Y,s)},C,V)},p.translateBy=function($,P,C,V){p.transform($,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),s)},null,V)},p.translateTo=function($,P,C,V,Y){p.transform($,function(){var T=t.apply(this,arguments),B=this.__zoom,Z=V==null?v(T):typeof V=="function"?V.apply(this,arguments):V;return n(wi.translate(Z[0],Z[1]).scale(B.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof C=="function"?-C.apply(this,arguments):-C),T,s)},V,Y)};function H($,P){return P=Math.max(o[0],Math.min(o[1],P)),P===$.k?$:new Mt(P,$.x,$.y)}function _($,P,C){var V=P[0]-C[0]*$.k,Y=P[1]-C[1]*$.k;return V===$.x&&Y===$.y?$:new Mt($.k,V,Y)}function v($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function N($,P,C,V){$.on("start.zoom",function(){z(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(V).end()}).tween("zoom",function(){var Y=this,T=arguments,B=z(Y,T).event(V),Z=t.apply(Y,T),se=C==null?v(Z):typeof C=="function"?C.apply(Y,T):C,de=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),ue=Y.__zoom,G=typeof P=="function"?P.apply(Y,T):P,J=l(ue.invert(se).concat(de/ue.k),G.invert(se).concat(de/G.k));return function(re){if(re===1)re=G;else{var ee=J(re),he=de/ee[2];re=new Mt(he,se[0]-ee[0]*he,se[1]-ee[1]*he)}B.zoom(null,re)}})}function z($,P,C){return!C&&$.__zooming||new b($,P)}function b($,P){this.that=$,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply($,P),this.taps=0}b.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,P){return this.mouse&&$!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var P=ot(this.that).datum();c.call($,this.that,new Jh($,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:c}),P)}};function D($,...P){if(!e.apply(this,arguments))return;var C=z(this,P).event($),V=this.__zoom,Y=Math.max(o[0],Math.min(o[1],V.k*Math.pow(2,r.apply(this,arguments)))),T=ft($);if(C.wheel)(C.mouse[0][0]!==T[0]||C.mouse[0][1]!==T[1])&&(C.mouse[1]=V.invert(C.mouse[0]=T)),clearTimeout(C.wheel);else{if(V.k===Y)return;C.mouse=[T,V.invert(T)],Tr(this),C.start()}Yn($),C.wheel=setTimeout(B,m),C.zoom("mouse",n(_(H(V,Y),C.mouse[0],C.mouse[1]),C.extent,s));function B(){C.wheel=null,C.end()}}function W($,...P){if(f||!e.apply(this,arguments))return;var C=$.currentTarget,V=z(this,P,!0).event($),Y=ot($.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",de,!0),T=ft($,C),B=$.clientX,Z=$.clientY;Ua($.view),Oi($),V.mouse=[T,this.__zoom.invert(T)],Tr(this),V.start();function se(ue){if(Yn(ue),!V.moved){var G=ue.clientX-B,J=ue.clientY-Z;V.moved=G*G+J*J>w}V.event(ue).zoom("mouse",n(_(V.that.__zoom,V.mouse[0]=ft(ue,C),V.mouse[1]),V.extent,s))}function de(ue){Y.on("mousemove.zoom mouseup.zoom",null),Qa(ue.view,V.moved),Yn(ue),V.event(ue).end()}}function K($,...P){if(e.apply(this,arguments)){var C=this.__zoom,V=ft($.changedTouches?$.changedTouches[0]:$,this),Y=C.invert(V),T=C.k*($.shiftKey?.5:2),B=n(_(H(C,T),V,Y),t.apply(this,P),s);Yn($),a>0?ot(this).transition().duration(a).call(N,B,V,$):ot(this).call(p.transform,B,V,$)}}function S($,...P){if(e.apply(this,arguments)){var C=$.touches,V=C.length,Y=z(this,P,$.changedTouches.length===V).event($),T,B,Z,se;for(Oi($),B=0;B<V;++B)Z=C[B],se=ft(Z,this),se=[se,this.__zoom.invert(se),Z.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==se[2]&&(Y.touch1=se,Y.taps=0):(Y.touch0=se,T=!0,Y.taps=1+!!d);d&&(d=clearTimeout(d)),T&&(Y.taps<2&&(h=se[0],d=setTimeout(function(){d=null},g)),Tr(this),Y.start())}}function M($,...P){if(this.__zooming){var C=z(this,P).event($),V=$.changedTouches,Y=V.length,T,B,Z,se;for(Yn($),T=0;T<Y;++T)B=V[T],Z=ft(B,this),C.touch0&&C.touch0[2]===B.identifier?C.touch0[0]=Z:C.touch1&&C.touch1[2]===B.identifier&&(C.touch1[0]=Z);if(B=C.that.__zoom,C.touch1){var de=C.touch0[0],ue=C.touch0[1],G=C.touch1[0],J=C.touch1[1],re=(re=G[0]-de[0])*re+(re=G[1]-de[1])*re,ee=(ee=J[0]-ue[0])*ee+(ee=J[1]-ue[1])*ee;B=H(B,Math.sqrt(re/ee)),Z=[(de[0]+G[0])/2,(de[1]+G[1])/2],se=[(ue[0]+J[0])/2,(ue[1]+J[1])/2]}else if(C.touch0)Z=C.touch0[0],se=C.touch0[1];else return;C.zoom("touch",n(_(B,Z,se),C.extent,s))}}function A($,...P){if(this.__zooming){var C=z(this,P).event($),V=$.changedTouches,Y=V.length,T,B;for(Oi($),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),T=0;T<Y;++T)B=V[T],C.touch0&&C.touch0[2]===B.identifier?delete C.touch0:C.touch1&&C.touch1[2]===B.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(B=ft(B,this),Math.hypot(h[0]-B[0],h[1]-B[1])<y)){var Z=ot(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return p.wheelDelta=function($){return arguments.length?(r=typeof $=="function"?$:kr(+$),p):r},p.filter=function($){return arguments.length?(e=typeof $=="function"?$:kr(!!$),p):e},p.touchable=function($){return arguments.length?(i=typeof $=="function"?$:kr(!!$),p):i},p.extent=function($){return arguments.length?(t=typeof $=="function"?$:kr([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),p):t},p.scaleExtent=function($){return arguments.length?(o[0]=+$[0],o[1]=+$[1],p):[o[0],o[1]]},p.translateExtent=function($){return arguments.length?(s[0][0]=+$[0][0],s[1][0]=+$[1][0],s[0][1]=+$[0][1],s[1][1]=+$[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function($){return arguments.length?(n=$,p):n},p.duration=function($){return arguments.length?(a=+$,p):a},p.interpolate=function($){return arguments.length?(l=$,p):l},p.on=function(){var $=c.on.apply(c,arguments);return $===c?p:$},p.clickDistance=function($){return arguments.length?(w=($=+$)*$,p):Math.sqrt(w)},p.tapDistance=function($){return arguments.length?(y=+$,p):y},p}const nr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},so=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gl=["Enter"," ","Escape"];var Pn;(function(e){e.Strict="strict",e.Loose="loose"})(Pn||(Pn={}));var Ut;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ut||(Ut={}));var Ur;(function(e){e.Partial="partial",e.Full="full"})(Ur||(Ur={}));const ao={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Kt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kt||(Kt={}));var rr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(rr||(rr={}));var ke;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ke||(ke={}));const _s={[ke.Left]:ke.Right,[ke.Right]:ke.Left,[ke.Top]:ke.Bottom,[ke.Bottom]:ke.Top};function ig(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function xs(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function og(e){return e===null?null:e?"valid":"invalid"}const $l=e=>"id"in e&&"source"in e&&"target"in e,sg=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Mo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ag=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(i=>{i.target===e.id&&r.add(i.source)}),t.filter(i=>r.has(i.id))},$r=(e,t=[0,0])=>{const{width:n,height:r}=en(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},lg=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Mo(i)?i:t.nodeLookup.get(i.id));const a=s?Qr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return bi(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _i(n)},vr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Qr(r);n=bi(n,i)}}),_i(n)},vl=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...yr(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const c of e.values()){const{measured:d,selectable:h=!0,hidden:f=!1}=c;if(s&&!h||f)continue;const g=d.width??c.width??c.initialWidth??null,m=d.height??c.height??c.initialHeight??null,w=ir(a,Nn(c)),y=(g??0)*(m??0),p=o&&w>0;(!c.internals.handleBounds||p||w>=y||c.dragging)&&l.push(c)}return l},cg=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function ug(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function dg({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=ug(e,s),l=vr(a),c=Ao(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function yl({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let h=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",nr.error005());else{const g=a.measured.width,m=a.measured.height;g&&m&&(h=[[l,c],[l+g,c+m]])}else a&&Mn(s.extent)&&(h=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const f=Mn(h)?an(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",nr.error015())),{position:{x:f.x-l+(s.measured.width??0)*d[0],y:f.y-c+(s.measured.height??0)*d[1]},positionAbsolute:f}}async function fg({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),m=!g&&f.parentId&&s.find(w=>w.id===f.parentId);(g||m)&&s.push(f)}const a=new Set(t.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),d=cg(s,l);for(const f of l)a.has(f.id)&&!d.find(m=>m.id===f.id)&&d.push(f);if(!i)return{edges:d,nodes:s};const h=await i({nodes:s,edges:d});return typeof h=="boolean"?h?{edges:d,nodes:s}:{edges:[],nodes:[]}:h}const Cn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),an=(e={x:0,y:0},t,n)=>({x:Cn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Cn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function ml(e,t,n){const{width:r,height:i}=en(n),{x:o,y:s}=n.internals.positionAbsolute;return an(e,[[o,s],[o+r,s+i]],t)}const ks=(e,t,n)=>e<t?Cn(Math.abs(e-t),1,t)/t:e>n?-Cn(Math.abs(e-n),1,t)/t:0,pl=(e,t,n=15,r=40)=>{const i=ks(e.x,r,t.width-r)*n,o=ks(e.y,r,t.height-r)*n;return[i,o]},bi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),lo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),_i=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Nn=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Mo(e)?e.internals.positionAbsolute:$r(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Qr=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Mo(e)?e.internals.positionAbsolute:$r(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},wl=(e,t)=>_i(bi(lo(e),lo(t))),ir=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Es=e=>At(e.width)&&At(e.height)&&At(e.x)&&At(e.y),At=e=>!isNaN(e)&&isFinite(e),hg=(e,t)=>{},xi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),yr=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?xi(a,s):a},Jr=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function hn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function gg(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=hn(e,n),i=hn(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=hn(e.top??e.y??0,n),i=hn(e.bottom??e.y??0,n),o=hn(e.left??e.x??0,t),s=hn(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function $g(e,t,n,r,i,o){const{x:s,y:a}=Jr(e,[t,n,r]),{x:l,y:c}=Jr({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=i-l,h=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(h)}}const Ao=(e,t,n,r,i,o)=>{const s=gg(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),d=Cn(c,r,i),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*d,m=n/2-f*d,w=$g(e,g,m,d,t,n),y={left:Math.min(w.left-s.left,0),top:Math.min(w.top-s.top,0),right:Math.min(w.right-s.right,0),bottom:Math.min(w.bottom-s.bottom,0)};return{x:g-y.left+y.right,y:m-y.top+y.bottom,zoom:d}},jr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Mn(e){return e!==void 0&&e!=="parent"}function en(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function bl(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function vg(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function Kn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=zt(e),a=yr({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:c}=n?xi(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const _l=e=>({width:e.offsetWidth,height:e.offsetHeight}),xl=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},yg=["INPUT","SELECT","TEXTAREA"];function kl(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:yg.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const El=e=>"clientX"in e,zt=(e,t)=>{var o,s;const n=El(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Ss=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,..._l(s)}})};function mg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,d=Math.abs(l-e),h=Math.abs(c-t);return[l,c,d,h]}function Er(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ps({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ke.Left:return[t-Er(t-r,o),n];case ke.Right:return[t+Er(r-t,o),n];case ke.Top:return[t,n-Er(n-i,o)];case ke.Bottom:return[t,n+Er(i-n,o)]}}function Sl({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:i,targetPosition:o=ke.Top,curvature:s=.25}){const[a,l]=Ps({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,d]=Ps({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,f,g,m]=mg({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${r},${i}`,h,f,g,m]}function Pl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function pg({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function wg({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=bi(Qr(e),Qr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return ir(s,_i(o))>0}const bg=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,_g=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),xg=(e,t)=>{if(!e.source||!e.target)return t;let n;return $l(e)?n={...e}:n={...e,id:bg(e)},_g(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Cl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Pl({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Cs={[ke.Left]:{x:-1,y:0},[ke.Right]:{x:1,y:0},[ke.Top]:{x:0,y:-1},[ke.Bottom]:{x:0,y:1}},kg=({source:e,sourcePosition:t=ke.Bottom,target:n})=>t===ke.Left||t===ke.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ns=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Eg({source:e,sourcePosition:t=ke.Bottom,target:n,targetPosition:r=ke.Top,center:i,offset:o}){const s=Cs[t],a=Cs[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},d=kg({source:l,sourcePosition:t,target:c}),h=d.x!==0?"x":"y",f=d[h];let g=[],m,w;const y={x:0,y:0},p={x:0,y:0},[H,_,v,N]=Pl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){m=i.x??H,w=i.y??_;const b=[{x:m,y:l.y},{x:m,y:c.y}],D=[{x:l.x,y:w},{x:c.x,y:w}];s[h]===f?g=h==="x"?b:D:g=h==="x"?D:b}else{const b=[{x:l.x,y:c.y}],D=[{x:c.x,y:l.y}];if(h==="x"?g=s.x===f?D:b:g=s.y===f?b:D,t===r){const A=Math.abs(e[h]-n[h]);if(A<=o){const $=Math.min(o-1,o-A);s[h]===f?y[h]=(l[h]>e[h]?-1:1)*$:p[h]=(c[h]>n[h]?-1:1)*$}}if(t!==r){const A=h==="x"?"y":"x",$=s[h]===a[A],P=l[A]>c[A],C=l[A]<c[A];(s[h]===1&&(!$&&P||$&&C)||s[h]!==1&&(!$&&C||$&&P))&&(g=h==="x"?b:D)}const W={x:l.x+y.x,y:l.y+y.y},K={x:c.x+p.x,y:c.y+p.y},S=Math.max(Math.abs(W.x-g[0].x),Math.abs(K.x-g[0].x)),M=Math.max(Math.abs(W.y-g[0].y),Math.abs(K.y-g[0].y));S>=M?(m=(W.x+K.x)/2,w=g[0].y):(m=g[0].x,w=(W.y+K.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...g,{x:c.x+p.x,y:c.y+p.y},n],m,w,v,N]}function Sg(e,t,n,r){const i=Math.min(Ns(e,t)/2,Ns(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*d}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Io({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:i,targetPosition:o=ke.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[d,h,f,g,m]=Eg({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:c});return[d.reduce((y,p,H)=>{let _="";return H>0&&H<d.length-1?_=Sg(d[H-1],p,d[H+1],s):_=`${H===0?"M":"L"}${p.x} ${p.y}`,y+=_,y},""),h,f,g,m]}function Ms(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Pg(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Ms(t)||!Ms(n))return null;const r=t.internals.handleBounds||As(t.handles),i=n.internals.handleBounds||As(n.handles),o=Is((r==null?void 0:r.source)??[],e.sourceHandle),s=Is(e.connectionMode===Pn.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",nr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ke.Bottom,l=(s==null?void 0:s.position)||ke.Top,c=or(t,o,a),d=or(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}function As(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function or(e,t,n=ke.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??en(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case ke.Top:return{x:i+s/2,y:o};case ke.Right:return{x:i+s,y:o+a/2};case ke.Bottom:return{x:i+s/2,y:o+a};case ke.Left:return{x:i,y:o+a/2}}}function Is(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function co(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Cg(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=co(l,t);o.has(c)||(s.push({id:c,color:l.color||n,...l}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const zo={nodeOrigin:[0,0],nodeExtent:so,elevateNodesOnSelect:!0,defaults:{}},Ng={...zo,checkEquality:!0};function Ho(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Mg(e,t,n){const r=Ho(zo,n);for(const i of e.values())if(i.parentId)To(i,e,t,r);else{const o=$r(i,r.nodeOrigin),s=Mn(i.extent)?i.extent:r.nodeExtent,a=an(o,s,en(i));i.internals.positionAbsolute=a}}function Ag(e,t,n,r){var l,c;const i=Ho(Ng,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){let h=s.get(d.id);if(i.checkEquality&&d===(h==null?void 0:h.internals.userNode))t.set(d.id,h);else{const f=$r(d,i.nodeOrigin),g=Mn(d.extent)?d.extent:i.nodeExtent,m=an(f,g,en(d));h={...i.defaults,...d,measured:{width:(l=d.measured)==null?void 0:l.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:m,handleBounds:d.measured?h==null?void 0:h.internals.handleBounds:void 0,z:Nl(d,a),userNode:d}},t.set(d.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(o=!1),d.parentId&&To(h,t,n,r)}return o}function Ig(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function To(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=Ho(zo,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Ig(e,n);const c=i?1e3:0,{x:d,y:h,z:f}=zg(e,l,o,s,c),{positionAbsolute:g}=e.internals,m=d!==g.x||h!==g.y;(m||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:d,y:h}:g,z:f}})}function Nl(e,t){return(At(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function zg(e,t,n,r,i){const{x:o,y:s}=t.internals.positionAbsolute,a=en(e),l=$r(e,n),c=Mn(e.extent)?an(l,e.extent,a):l;let d=an({x:o+c.x,y:s+c.y},r,a);e.extent==="parent"&&(d=ml(d,a,t));const h=Nl(e,i),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>h?f:h}}function Hg(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Nn(l),d=wl(c,a.rect);o.set(a.parentId,{expandedRect:d,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},c)=>{var _;const d=l.internals.positionAbsolute,h=en(l),f=l.origin??r,g=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,m=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,w=Math.max(h.width,Math.round(a.width)),y=Math.max(h.height,Math.round(a.height)),p=(w-h.width)*f[0],H=(y-h.height)*f[1];(g>0||m>0||p||H)&&(i.push({id:c,type:"position",position:{x:l.position.x-g+p,y:l.position.y-m+H}}),(_=n.get(c))==null||_.forEach(v=>{e.some(N=>N.id===v.id)||i.push({id:v.id,type:"position",position:{x:v.position.x+g,y:v.position.y+m}})})),(h.width<a.width||h.height<a.height||g||m)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:w+(g?f[0]*g-p:0),height:y+(m?f[1]*m-H:0)}})}),i}function Tg(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const m=_l(f.nodeElement),w=g.measured.width!==m.width||g.measured.height!==m.height;if(!!(m.width&&m.height&&(w||!g.internals.handleBounds||f.force))){const p=f.nodeElement.getBoundingClientRect(),H=Mn(g.extent)?g.extent:o;let{positionAbsolute:_}=g.internals;g.parentId&&g.extent==="parent"?_=ml(_,m,t.get(g.parentId)):H&&(_=an(_,H,m));const v={...g,measured:m,internals:{...g.internals,positionAbsolute:_,handleBounds:{source:Ss("source",f.nodeElement,p,d,g.id),target:Ss("target",f.nodeElement,p,d,g.id)}}};t.set(g.id,v),g.parentId&&To(v,t,n,{nodeOrigin:i}),a=!0,w&&(l.push({id:g.id,type:"dimensions",dimensions:m}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:Nn(v,i)}))}}if(h.length>0){const f=Hg(h,t,n,i);l.push(...f)}return{changes:l,updatedInternals:a}}async function Og({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function zs(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function Dg(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},c=`${i}-${s}--${o}-${a}`,d=`${o}-${a}--${i}-${s}`;zs("source",l,d,e,i,s),zs("target",l,c,e,o,a),t.set(r.id,r)}}function Ml(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ml(n,t):!1}function Hs(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Rg(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Ml(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Di({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[c,d]of t){const h=(s=n.get(c))==null?void 0:s.internals.userNode;h&&i.push({...h,position:d.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function Lg({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},d=null,h=!1,f=null,g=!1;function m({noDragClassName:y,handleSelector:p,domNode:H,isSelectable:_,nodeId:v,nodeClickDistance:N=0}){f=ot(H);function z({x:K,y:S},M){const{nodeLookup:A,nodeExtent:$,snapGrid:P,snapToGrid:C,nodeOrigin:V,onNodeDrag:Y,onSelectionDrag:T,onError:B,updateNodePositions:Z}=t();o={x:K,y:S};let se=!1,de={x:0,y:0,x2:0,y2:0};if(a.size>1&&$){const ue=vr(a);de=lo(ue)}for(const[ue,G]of a){if(!A.has(ue))continue;let J={x:K-G.distance.x,y:S-G.distance.y};C&&(J=xi(J,P));let re=[[$[0][0],$[0][1]],[$[1][0],$[1][1]]];if(a.size>1&&$&&!G.extent){const{positionAbsolute:fe}=G.internals,oe=fe.x-de.x+$[0][0],ie=fe.x+G.measured.width-de.x2+$[1][0],Q=fe.y-de.y+$[0][1],E=fe.y+G.measured.height-de.y2+$[1][1];re=[[oe,Q],[ie,E]]}const{position:ee,positionAbsolute:he}=yl({nodeId:ue,nextPosition:J,nodeLookup:A,nodeExtent:re,nodeOrigin:V,onError:B});se=se||G.position.x!==ee.x||G.position.y!==ee.y,G.position=ee,G.internals.positionAbsolute=he}if(se&&(Z(a,!0),M&&(r||Y||!v&&T))){const[ue,G]=Di({nodeId:v,dragItems:a,nodeLookup:A});r==null||r(M,a,ue,G),Y==null||Y(M,ue,G),v||T==null||T(M,G)}}async function b(){if(!d)return;const{transform:K,panBy:S,autoPanSpeed:M,autoPanOnNodeDrag:A}=t();if(!A){l=!1,cancelAnimationFrame(s);return}const[$,P]=pl(c,d,M);($!==0||P!==0)&&(o.x=(o.x??0)-$/K[2],o.y=(o.y??0)-P/K[2],await S({x:$,y:P})&&z(o,null)),s=requestAnimationFrame(b)}function D(K){var se;const{nodeLookup:S,multiSelectionActive:M,nodesDraggable:A,transform:$,snapGrid:P,snapToGrid:C,selectNodesOnDrag:V,onNodeDragStart:Y,onSelectionDragStart:T,unselectNodesAndEdges:B}=t();h=!0,(!V||!_)&&!M&&v&&((se=S.get(v))!=null&&se.selected||B()),_&&V&&v&&(e==null||e(v));const Z=Kn(K.sourceEvent,{transform:$,snapGrid:P,snapToGrid:C,containerBounds:d});if(o=Z,a=Rg(S,A,Z,v),a.size>0&&(n||Y||!v&&T)){const[de,ue]=Di({nodeId:v,dragItems:a,nodeLookup:S});n==null||n(K.sourceEvent,a,de,ue),Y==null||Y(K.sourceEvent,de,ue),v||T==null||T(K.sourceEvent,ue)}}const W=Ja().clickDistance(N).on("start",K=>{const{domNode:S,nodeDragThreshold:M,transform:A,snapGrid:$,snapToGrid:P}=t();d=(S==null?void 0:S.getBoundingClientRect())||null,g=!1,M===0&&D(K),o=Kn(K.sourceEvent,{transform:A,snapGrid:$,snapToGrid:P,containerBounds:d}),c=zt(K.sourceEvent,d)}).on("drag",K=>{const{autoPanOnNodeDrag:S,transform:M,snapGrid:A,snapToGrid:$,nodeDragThreshold:P,nodeLookup:C}=t(),V=Kn(K.sourceEvent,{transform:M,snapGrid:A,snapToGrid:$,containerBounds:d});if((K.sourceEvent.type==="touchmove"&&K.sourceEvent.touches.length>1||v&&!C.has(v))&&(g=!0),!g){if(!l&&S&&h&&(l=!0,b()),!h){const Y=V.xSnapped-(o.x??0),T=V.ySnapped-(o.y??0);Math.sqrt(Y*Y+T*T)>P&&D(K)}(o.x!==V.xSnapped||o.y!==V.ySnapped)&&a&&h&&(c=zt(K.sourceEvent,d),z(V,K.sourceEvent))}}).on("end",K=>{if(!(!h||g)&&(l=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:S,updateNodePositions:M,onNodeDragStop:A,onSelectionDragStop:$}=t();if(M(a,!1),i||A||!v&&$){const[P,C]=Di({nodeId:v,dragItems:a,nodeLookup:S,dragging:!1});i==null||i(K.sourceEvent,a,P,C),A==null||A(K.sourceEvent,P,C),v||$==null||$(K.sourceEvent,C)}}}).filter(K=>{const S=K.target;return!K.button&&(!y||!Hs(S,`.${y}`,H))&&(!p||Hs(S,p,H))});f.call(W)}function w(){f==null||f.on(".drag",null)}return{update:m,destroy:w}}function Yg(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())ir(i,Nn(o))>0&&r.push(o);return r}const Vg=250;function Xg(e,t,n,r){var a,l;let i=[],o=1/0;const s=Yg(e,n,t+Vg);for(const c of s){const d=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const h of d){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:f,y:g}=or(c,h,h.position,!0),m=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));m>t||(m<o?(i=[{...h,x:f,y:g}],o=m):m===o&&i.push({...h,x:f,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(d=>d.type===c)??i[0]}return i[0]}function Al(e,t,n,r,i,o=!1){var c,d,h;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...or(s,l,l.position,!0)}:l}function Il(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Wg(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const zl=()=>!0;function Bg(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:h,panBy:f,cancelConnection:g,onConnectStart:m,onConnect:w,onConnectEnd:y,isValidConnection:p=zl,onReconnectEnd:H,updateConnection:_,getTransform:v,getFromHandle:N,autoPanSpeed:z}){const b=xl(e.target);let D=0,W;const{x:K,y:S}=zt(e),M=b==null?void 0:b.elementFromPoint(K,S),A=Il(o,M),$=a==null?void 0:a.getBoundingClientRect();if(!$||!A)return;const P=Al(i,A,r,l,t);if(!P)return;let C=zt(e,$),V=!1,Y=null,T=!1,B=null;function Z(){if(!d||!$)return;const[he,fe]=pl(C,$,z);f({x:he,y:fe}),D=requestAnimationFrame(Z)}const se={...P,nodeId:i,type:A,position:P.position},de=l.get(i),G={inProgress:!0,isValid:null,from:or(de,se,ke.Left,!0),fromHandle:se,fromPosition:se.position,fromNode:de,to:C,toHandle:null,toPosition:_s[se.position],toNode:null};_(G);let J=G;m==null||m(e,{nodeId:i,handleId:r,handleType:A});function re(he){if(!N()||!se){ee(he);return}const fe=v();C=zt(he,$),W=Xg(yr(C,fe,!1,[1,1]),n,l,se),V||(Z(),V=!0);const oe=Hl(he,{handle:W,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:p,doc:b,lib:c,flowId:h,nodeLookup:l});B=oe.handleDomNode,Y=oe.connection,T=Wg(!!W,oe.isValid);const ie={...J,isValid:T,to:W&&T?Jr({x:W.x,y:W.y},fe):C,toHandle:oe.toHandle,toPosition:T&&oe.toHandle?oe.toHandle.position:_s[se.position],toNode:oe.toHandle?l.get(oe.toHandle.nodeId):null};T&&W&&J.toHandle&&ie.toHandle&&J.toHandle.type===ie.toHandle.type&&J.toHandle.nodeId===ie.toHandle.nodeId&&J.toHandle.id===ie.toHandle.id&&J.to.x===ie.to.x&&J.to.y===ie.to.y||(_(ie),J=ie)}function ee(he){(W||B)&&Y&&T&&(w==null||w(Y));const{inProgress:fe,...oe}=J,ie={...oe,toPosition:J.toHandle?J.toPosition:null};y==null||y(he,ie),o&&(H==null||H(he,ie)),g(),cancelAnimationFrame(D),V=!1,T=!1,Y=null,B=null,b.removeEventListener("mousemove",re),b.removeEventListener("mouseup",ee),b.removeEventListener("touchmove",re),b.removeEventListener("touchend",ee)}b.addEventListener("mousemove",re),b.addEventListener("mouseup",ee),b.addEventListener("touchmove",re),b.addEventListener("touchend",ee)}function Hl(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:c=zl,nodeLookup:d}){const h=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:m}=zt(e),w=s.elementFromPoint(g,m),y=w!=null&&w.classList.contains(`${a}-flow__handle`)?w:f,p={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const H=Il(void 0,y),_=y.getAttribute("data-nodeid"),v=y.getAttribute("data-handleid"),N=y.classList.contains("connectable"),z=y.classList.contains("connectableend");if(!_||!H)return p;const b={source:h?_:r,sourceHandle:h?v:i,target:h?r:_,targetHandle:h?i:v};p.connection=b;const W=N&&z&&(n===Pn.Strict?h&&H==="source"||!h&&H==="target":_!==r||v!==i);p.isValid=W&&c(b),p.toHandle=Al(_,H,v,d,n,!1)}return p}const Ts={onPointerDown:Bg,isValid:Hl};function Fg({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ot(e);function o({translateExtent:a,width:l,height:c,zoomStep:d=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const m=_=>{const v=n();if(_.sourceEvent.type!=="wheel"||!t)return;const N=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*d,z=v[2]*Math.pow(2,N);t.scaleTo(z)};let w=[0,0];const y=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(w=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},p=_=>{const v=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const N=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],z=[N[0]-w[0],N[1]-w[1]];w=N;const b=r()*Math.max(v[2],Math.log(v[2]))*(g?-1:1),D={x:v[0]-z[0]*b,y:v[1]-z[1]*b},W=[[0,0],[l,c]];t.setViewportConstrained({x:D.x,y:D.y,zoom:v[2]},W,a)},H=hl().on("start",y).on("zoom",h?p:null).on("zoom.wheel",f?m:null);i.call(H,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:ft}}const Kg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ki=e=>({x:e.x,y:e.y,zoom:e.k}),Ri=({x:e,y:t,zoom:n})=>wi.translate(e,t).scale(n),$n=(e,t)=>e.target.closest(`.${t}`),Tl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Li=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Ol=e=>{const t=e.ctrlKey&&jr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function qg({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return d=>{if($n(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(d.ctrlKey&&s){const y=ft(d),p=Ol(d),H=h*Math.pow(2,p);r.scaleTo(n,H,y,d);return}const f=d.deltaMode===1?20:1;let g=i===Ut.Vertical?0:d.deltaX*f,m=i===Ut.Horizontal?0:d.deltaY*f;!jr()&&d.shiftKey&&i!==Ut.Vertical&&(g=d.deltaY*f,m=0),r.translateBy(n,-(g/h)*o,-(m/h)*o,{internal:!0});const w=ki(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,w)),e.isPanScrolling&&(l==null||l(d,w),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,w),e.isPanScrolling=!1},150))}}function Zg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=$n(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function Gg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=ki(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Ug({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&Tl(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,ki(o.transform)))}}function Qg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&Tl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&Kg(e.prevViewport,s.transform))){const l=ki(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function Jg({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return d=>{var m;const h=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&($n(d,`${c}-flow__node`)||$n(d,`${c}-flow__edge`)))return!0;if(!r&&!h&&!i&&!o&&!n||s||$n(d,a)&&d.type==="wheel"||$n(d,l)&&(d.type!=="wheel"||i&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((m=d.touches)==null?void 0:m.length)>1)return d.preventDefault(),!1;if(!h&&!i&&!f&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&g}}function jg({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=hl().clickDistance(!At(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),g=ot(e).call(f);_({x:o.x,y:o.y,zoom:Cn(o.zoom,t,n)},[[0,0],[h.width,h.height]],i);const m=g.on("wheel.zoom"),w=g.on("dblclick.zoom");f.wheelDelta(Ol);function y(M,A){return g?new Promise($=>{f==null||f.transform(Li(g,A==null?void 0:A.duration,()=>$(!0)),M)}):Promise.resolve(!1)}function p({noWheelClassName:M,noPanClassName:A,onPaneContextMenu:$,userSelectionActive:P,panOnScroll:C,panOnDrag:V,panOnScrollMode:Y,panOnScrollSpeed:T,preventScrolling:B,zoomOnPinch:Z,zoomOnScroll:se,zoomOnDoubleClick:de,zoomActivationKeyPressed:ue,lib:G,onTransformChange:J}){P&&!d.isZoomingOrPanning&&H();const ee=C&&!ue&&!P?qg({zoomPanValues:d,noWheelClassName:M,d3Selection:g,d3Zoom:f,panOnScrollMode:Y,panOnScrollSpeed:T,zoomOnPinch:Z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):Zg({noWheelClassName:M,preventScrolling:B,d3ZoomHandler:m});if(g.on("wheel.zoom",ee,{passive:!1}),!P){const fe=Gg({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:a});f.on("start",fe);const oe=Ug({zoomPanValues:d,panOnDrag:V,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:J});f.on("zoom",oe);const ie=Qg({zoomPanValues:d,panOnDrag:V,panOnScroll:C,onPaneContextMenu:$,onPanZoomEnd:l,onDraggingChange:c});f.on("end",ie)}const he=Jg({zoomActivationKeyPressed:ue,panOnDrag:V,zoomOnScroll:se,panOnScroll:C,zoomOnDoubleClick:de,zoomOnPinch:Z,userSelectionActive:P,noPanClassName:A,noWheelClassName:M,lib:G});f.filter(he),de?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function H(){f.on("zoom",null)}async function _(M,A,$){const P=Ri(M),C=f==null?void 0:f.constrain()(P,A,$);return C&&await y(C),new Promise(V=>V(C))}async function v(M,A){const $=Ri(M);return await y($,A),new Promise(P=>P($))}function N(M){if(g){const A=Ri(M),$=g.property("__zoom");($.k!==M.zoom||$.x!==M.x||$.y!==M.y)&&(f==null||f.transform(g,A,null,{sync:!0}))}}function z(){const M=g?fl(g.node()):{x:0,y:0,k:1};return{x:M.x,y:M.y,zoom:M.k}}function b(M,A){return g?new Promise($=>{f==null||f.scaleTo(Li(g,A==null?void 0:A.duration,()=>$(!0)),M)}):Promise.resolve(!1)}function D(M,A){return g?new Promise($=>{f==null||f.scaleBy(Li(g,A==null?void 0:A.duration,()=>$(!0)),M)}):Promise.resolve(!1)}function W(M){f==null||f.scaleExtent(M)}function K(M){f==null||f.translateExtent(M)}function S(M){const A=!At(M)||M<0?0:M;f==null||f.clickDistance(A)}return{update:p,destroy:H,setViewport:v,setViewportConstrained:_,getViewport:z,scaleTo:b,scaleBy:D,setScaleExtent:W,setTranslateExtent:K,syncViewport:N,setClickDistance:S}}var vn;(function(e){e.Line="line",e.Handle="handle"})(vn||(vn={}));function e$({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function t$(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Vt(e,t){return Math.max(0,t-e)}function Xt(e,t){return Math.max(0,e-t)}function Sr(e,t,n){return Math.max(0,t-e,e-n)}function Os(e,t){return e?!t:t}function n$(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:h}=t,f=d&&h,{xSnapped:g,ySnapped:m}=n,{minWidth:w,maxWidth:y,minHeight:p,maxHeight:H}=r,{x:_,y:v,width:N,height:z,aspectRatio:b}=e;let D=Math.floor(d?g-e.pointerX:0),W=Math.floor(h?m-e.pointerY:0);const K=N+(l?-D:D),S=z+(c?-W:W),M=-o[0]*N,A=-o[1]*z;let $=Sr(K,w,y),P=Sr(S,p,H);if(s){let Y=0,T=0;l&&D<0?Y=Vt(_+D+M,s[0][0]):!l&&D>0&&(Y=Xt(_+K+M,s[1][0])),c&&W<0?T=Vt(v+W+A,s[0][1]):!c&&W>0&&(T=Xt(v+S+A,s[1][1])),$=Math.max($,Y),P=Math.max(P,T)}if(a){let Y=0,T=0;l&&D>0?Y=Xt(_+D,a[0][0]):!l&&D<0&&(Y=Vt(_+K,a[1][0])),c&&W>0?T=Xt(v+W,a[0][1]):!c&&W<0&&(T=Vt(v+S,a[1][1])),$=Math.max($,Y),P=Math.max(P,T)}if(i){if(d){const Y=Sr(K/b,p,H)*b;if($=Math.max($,Y),s){let T=0;!l&&!c||l&&!c&&f?T=Xt(v+A+K/b,s[1][1])*b:T=Vt(v+A+(l?D:-D)/b,s[0][1])*b,$=Math.max($,T)}if(a){let T=0;!l&&!c||l&&!c&&f?T=Vt(v+K/b,a[1][1])*b:T=Xt(v+(l?D:-D)/b,a[0][1])*b,$=Math.max($,T)}}if(h){const Y=Sr(S*b,w,y)/b;if(P=Math.max(P,Y),s){let T=0;!l&&!c||c&&!l&&f?T=Xt(_+S*b+M,s[1][0])/b:T=Vt(_+(c?W:-W)*b+M,s[0][0])/b,P=Math.max(P,T)}if(a){let T=0;!l&&!c||c&&!l&&f?T=Vt(_+S*b,a[1][0])/b:T=Xt(_+(c?W:-W)*b,a[0][0])/b,P=Math.max(P,T)}}}W=W+(W<0?P:-P),D=D+(D<0?$:-$),i&&(f?K>S*b?W=(Os(l,c)?-D:D)/b:D=(Os(l,c)?-W:W)*b:d?(W=D/b,c=l):(D=W*b,l=c));const C=l?_+D:_,V=c?v+W:v;return{width:N+(l?-D:D),height:z+(c?-W:W),x:o[0]*D*(l?-1:1)+C,y:o[1]*W*(c?-1:1)+V}}const Dl={width:0,height:0,x:0,y:0},r$={...Dl,pointerX:0,pointerY:0,aspectRatio:1};function i$(e){return[[0,0],[e.measured.width,e.measured.height]]}function o$(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function s$({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=ot(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:d,resizeDirection:h,onResizeStart:f,onResize:g,onResizeEnd:m,shouldResize:w}){let y={...Dl},p={...r$};const H=t$(l);let _,v=null,N=[],z,b,D;const W=Ja().on("start",K=>{const{nodeLookup:S,transform:M,snapGrid:A,snapToGrid:$,nodeOrigin:P,paneDomNode:C}=n();if(_=S.get(t),!_)return;v=(C==null?void 0:C.getBoundingClientRect())??null;const{xSnapped:V,ySnapped:Y}=Kn(K.sourceEvent,{transform:M,snapGrid:A,snapToGrid:$,containerBounds:v});y={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},p={...y,pointerX:V,pointerY:Y,aspectRatio:y.width/y.height},z=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(z=S.get(_.parentId),b=z&&_.extent==="parent"?i$(z):void 0),N=[],D=void 0;for(const[T,B]of S)if(B.parentId===t&&(N.push({id:T,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const Z=o$(B,_,B.origin??P);D?D=[[Math.min(Z[0][0],D[0][0]),Math.min(Z[0][1],D[0][1])],[Math.max(Z[1][0],D[1][0]),Math.max(Z[1][1],D[1][1])]]:D=Z}f==null||f(K,{...y})}).on("drag",K=>{const{transform:S,snapGrid:M,snapToGrid:A,nodeOrigin:$}=n(),P=Kn(K.sourceEvent,{transform:S,snapGrid:M,snapToGrid:A,containerBounds:v}),C=[];if(!_)return;const{x:V,y:Y,width:T,height:B}=y,Z={},se=_.origin??$,{width:de,height:ue,x:G,y:J}=n$(p,H,P,c,d,se,b,D),re=de!==T,ee=ue!==B,he=G!==V&&re,fe=J!==Y&&ee;if(!he&&!fe&&!re&&!ee)return;if((he||fe||se[0]===1||se[1]===1)&&(Z.x=he?G:y.x,Z.y=fe?J:y.y,y.x=Z.x,y.y=Z.y,N.length>0)){const E=G-V,L=J-Y;for(const X of N)X.position={x:X.position.x-E+se[0]*(de-T),y:X.position.y-L+se[1]*(ue-B)},C.push(X)}if((re||ee)&&(Z.width=re&&(!h||h==="horizontal")?de:y.width,Z.height=ee&&(!h||h==="vertical")?ue:y.height,y.width=Z.width,y.height=Z.height),z&&_.expandParent){const E=se[0]*(Z.width??0);Z.x&&Z.x<E&&(y.x=E,p.x=p.x-(Z.x-E));const L=se[1]*(Z.height??0);Z.y&&Z.y<L&&(y.y=L,p.y=p.y-(Z.y-L))}const oe=e$({width:y.width,prevWidth:T,height:y.height,prevHeight:B,affectsX:H.affectsX,affectsY:H.affectsY}),ie={...y,direction:oe};(w==null?void 0:w(K,ie))!==!1&&(g==null||g(K,ie),r(Z,C))}).on("end",K=>{m==null||m(K,{...y}),i==null||i({...y})});o.call(W)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var a$=De("<div><!></div>");function An(e,t){Ie(t,!0);let n=j(t,"id",3,null),r=j(t,"type",3,"source"),i=j(t,"position",19,()=>ke.Top),o=j(t,"isConnectableStart",3,!0),s=j(t,"isConnectableEnd",3,!0),a=Yt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=bn("svelteflow__node_id"),c=bn("svelteflow__node_connectable");let d=x(()=>r()==="target"),h=x(()=>t.isConnectable!==void 0?t.isConnectable:c.value),f=Pt(),g=null;mo(()=>{if(t.onconnect||t.ondisconnect){f.edges;let S=f.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(g&&!ig(S,g)){const M=S??new Map;xs(g,M,t.ondisconnect),xs(M,g,t.onconnect)}g=new Map(S)}});let m=x(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:S,toHandle:M,isValid:A}=f.connection,$=S&&S.nodeId===l&&S.type===r()&&S.id===n(),P=M&&M.nodeId===l&&M.type===r()&&M.id===n(),C=f.connectionMode===Pn.Strict?(S==null?void 0:S.type)!==r():l!==(S==null?void 0:S.nodeId)||n()!==(S==null?void 0:S.id);return[!0,$,P,C,P&&A]}),w=x(()=>{let[S,M,A,$,P]=u(m);return S}),y=x(()=>{let[S,M,A,$,P]=u(m);return M}),p=x(()=>{let[S,M,A,$,P]=u(m);return A}),H=x(()=>{let[S,M,A,$,P]=u(m);return $}),_=x(()=>{let[S,M,A,$,P]=u(m);return P});function v(S){var A,$;const M=((A=f.onbeforeconnect)==null?void 0:A.call(f,S))??S;M&&(f.addEdge(M),($=f.onconnect)==null||$.call(f,S))}function N(S){const M=El(S);(M&&S.button===0||!M)&&Ts.onPointerDown(S,{handleId:n(),nodeId:l,isTarget:u(d),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:v,onConnectStart:(A,$)=>{var P;(P=f.onconnectstart)==null||P.call(f,A,{nodeId:$.nodeId,handleId:$.handleId,handleType:$.handleType})},onConnectEnd:(A,$)=>{var P;(P=f.onconnectend)==null||P.call(f,A,$)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle})}function z(S){var Z,se;if(!l||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){(Z=f.onclickconnectstart)==null||Z.call(f,S,{nodeId:l,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const M=xl(S.target),A=t.isValidConnection??f.isValidConnection,{connectionMode:$,clickConnectStartHandle:P,flowId:C,nodeLookup:V}=f,{connection:Y,isValid:T}=Ts.isValid(S,{handle:{nodeId:l,id:n(),type:r()},connectionMode:$,fromNodeId:P.nodeId,fromHandleId:P.id??null,fromType:P.type,isValidConnection:A,flowId:C,doc:M,lib:"svelte",nodeLookup:V});T&&Y&&v(Y);const B=structuredClone(ta(f.connection));delete B.inProgress,B.toPosition=B.toHandle?B.toHandle.position:null,(se=f.onclickconnectend)==null||se.call(f,S,B),f.clickConnectStartHandle=null}var b=a$(),D=()=>{};let W;var K=He(b);nt(K,()=>t.children??Rt),Te(S=>W=dn(b,W,{"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${f.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:N,ontouchstart:N,onclick:f.clickConnect?z:void 0,onkeypress:D,style:t.style,role:"button",tabindex:"-1",...a,[gn]:S}),[()=>({valid:u(_),connectingto:u(p),connectingfrom:u(y),source:!u(d),target:u(d),connectablestart:o(),connectableend:s(),connectable:u(h),connectionindicator:u(h)&&(!u(w)||u(H))&&(u(w)||f.clickConnectStartHandle?s():o())})]),ge(e,b),ze()}var l$=De("<!> <!>",1);function Rl(e,t){Ie(t,!0);let n=j(t,"targetPosition",19,()=>ke.Top),r=j(t,"sourcePosition",19,()=>ke.Bottom);var i=l$(),o=Re(i);An(o,{type:"target",get position(){return n()}});var s=xe(o),a=xe(s);An(a,{type:"source",get position(){return r()}}),Te(()=>{var l;return un(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),ge(e,i),ze()}var c$=De(" <!>",1);function u$(e,t){Ie(t,!0);let n=j(t,"data",19,()=>({label:"Node"})),r=j(t,"sourcePosition",19,()=>ke.Bottom);var i=c$(),o=Re(i),s=xe(o);An(s,{type:"source",get position(){return r()}}),Te(()=>{var a;return un(o,`${((a=n())==null?void 0:a.label)??""} `)}),ge(e,i),ze()}var d$=De(" <!>",1);function f$(e,t){Ie(t,!0);let n=j(t,"data",19,()=>({label:"Node"})),r=j(t,"targetPosition",19,()=>ke.Top);var i=d$(),o=Re(i),s=xe(o);An(s,{type:"target",get position(){return r()}}),Te(()=>{var a;return un(o,`${((a=n())==null?void 0:a.label)??""} `)}),ge(e,i),ze()}function h$(e,t){}function Ds(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Yi(e,t){const n=Pt();let r=t;return Ds(e,n.domNode,t),{async update(i){var o;i!==r&&((o=e.parentNode)==null||o.removeChild(e),r=i),Ds(e,n.domNode,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}const Rs=e=>sg(e),g$=e=>$l(e);function kt(e){return e===void 0?void 0:`${e}px`}const ei={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var $$=De("<div><!></div>");function v$(e,t){Ie(t,!0);let n=j(t,"x",3,0),r=j(t,"y",3,0),i=j(t,"selectEdgeOnClick",3,!1),o=j(t,"transparent",3,!1),s=Yt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Pt(),l=bn("svelteflow__edge_id");let c=x(()=>{var m;return(m=a.visible.edges.get(l))==null?void 0:m.zIndex});var d=$$(),h=()=>{i()&&l&&a.handleEdgeSelection(l)};let f;var g=He(d);nt(g,()=>t.children??Rt),Ze(d,(m,w)=>Yi==null?void 0:Yi(m,w),()=>"edge-labels"),Te((m,w)=>f=dn(d,f,{class:["svelte-flow__edge-label",{transparent:o()},t.class],role:"button",tabindex:"-1",onclick:h,...s,[pt]:{cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:m,height:w,"z-index":u(c)}},"svelte-w2n27y"),[()=>kt(t.width),()=>kt(t.height)]),ge(e,d),ze()}var y$=We("<path></path>"),m$=We('<path fill="none"></path><!><!>',1);function Ei(e,t){let n=j(t,"interactionWidth",3,20),r=Yt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=m$(),o=Re(i),s=xe(o);{var a=d=>{var h=y$();let f;Te(()=>f=dn(h,f,{d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),ge(d,h)};Xe(s,d=>{n()>0&&d(a)})}var l=xe(s);{var c=d=>{v$(d,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{var g=Ma();Te(()=>un(g,t.label)),ge(h,g)},$$slots:{default:!0}})};Xe(l,d=>{t.label&&d(c)})}Te(()=>{_e(o,"id",t.id),_e(o,"d",t.path),yt(o,0,Et(["svelte-flow__edge-path",t.class])),_e(o,"marker-start",t.markerStart),_e(o,"marker-end",t.markerEnd),at(o,t.style)}),ge(e,i)}function Ll(e,t){Ie(t,!0);let n=x(()=>{var s;return Sl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(s=t.pathOptions)==null?void 0:s.curvature})}),r=x(()=>{let[s,a,l]=u(n);return s}),i=x(()=>{let[s,a,l]=u(n);return a}),o=x(()=>{let[s,a,l]=u(n);return l});Ei(e,{get id(){return t.id},get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ze()}function p$(e,t){Ie(t,!0);let n=x(()=>Io({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=x(()=>{let[s,a,l]=u(n);return s}),i=x(()=>{let[s,a,l]=u(n);return a}),o=x(()=>{let[s,a,l]=u(n);return l});Ei(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ze()}function w$(e,t){Ie(t,!0);let n=x(()=>Cl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=x(()=>{let[s,a,l]=u(n);return s}),i=x(()=>{let[s,a,l]=u(n);return a}),o=x(()=>{let[s,a,l]=u(n);return l});Ei(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ze()}function b$(e,t){Ie(t,!0);let n=x(()=>Io({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=x(()=>{let[s,a,l]=u(n);return s}),i=x(()=>{let[s,a,l]=u(n);return a}),o=x(()=>{let[s,a,l]=u(n);return l});Ei(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ze()}function _$(e){q(e,e.v+1)}function x$(e){let t=0,n=xn(0),r;return()=>{Hc()&&(u(n),Tn(()=>(t===0&&(r=Ue(()=>e(()=>_$(n)))),t+=1,()=>{qc().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}var ar,lr;class k${constructor(t,n){le(this,ar);le(this,lr);Dn(this,ar,t),Dn(this,lr,x$(n))}get current(){return I(this,lr).call(this),I(this,ar).call(this)}}ar=new WeakMap,lr=new WeakMap;const E$=/\(.+\)/;class S$ extends k${constructor(t,n){let r=E$.test(t)?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Ui(i,"change",o))}}function P$(e,t,n,r){const i=new Map;return vl(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Ls(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l}=e,c=new Map;for(const d of t){const h=r.get(d.source),f=r.get(d.target);if(!h||!f)continue;if(a){const{visibleNodes:w,transform:y,width:p,height:H}=e;if(wg({sourceNode:h,targetNode:f,width:p,height:H,transform:y}))w.set(h.id,h),w.set(f.id,f);else continue}const g=i.get(d.id);if(g&&d===g.edge&&h==g.sourceNode&&f==g.targetNode){c.set(d.id,g);continue}const m=Pg({id:d.id,sourceNode:h,targetNode:f,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:o,onError:s});m&&c.set(d.id,{...n,...d,...m,zIndex:pg({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:l}),sourceNode:h,targetNode:f,edge:d})}return c}const Yl={input:u$,output:f$,default:Rl,group:h$},Vl={straight:w$,smoothstep:p$,default:Ll,step:b$};function C$(e){var n,r,i,o,s,a,l,c,d,h,f,g,m,w,y,p,H,_,v,N,z,b,D,W,K,S,M,A,$,P,C,V,Y,T,B,Z,se,de,ue,G,J,re,ee,he,fe,oe,ie,Q,E,L,X,O,R,F,U,ne,te,ae,ce,me,pe,$e,ve,ye,we,be,Pe,Ce,Ne,Ae,Se;class t{constructor(){le(this,n,x(()=>e.props.id??"1"));le(this,r,Me(null));le(this,i,Me(null));le(this,o,Me(Ke(e.width??0)));le(this,s,Me(Ke(e.height??0)));le(this,a,x(()=>{var Be;const k=Ag(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&k&&((Be=this.fitViewOptions)!=null&&Be.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),k}));le(this,l,x(()=>this.panZoom!==null));le(this,c,x(()=>(Dg(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Fe(this,"_prevSelectedNodes",[]);Fe(this,"_prevSelectedNodeIds",new Set);le(this,d,x(()=>{const k=this._prevSelectedNodeIds.size,Be=new Set,On=this.nodes.filter(ct=>(ct.selected&&(Be.add(ct.id),this._prevSelectedNodeIds.delete(ct.id)),ct.selected));return(k!==Be.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=On),this._prevSelectedNodeIds=Be,this._prevSelectedNodes}));Fe(this,"_prevSelectedEdges",[]);Fe(this,"_prevSelectedEdgeIds",new Set);le(this,h,x(()=>{const k=this._prevSelectedEdgeIds.size,Be=new Set,On=this.edges.filter(ct=>(ct.selected&&(Be.add(ct.id),this._prevSelectedEdgeIds.delete(ct.id)),ct.selected));return(k!==Be.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=On),this._prevSelectedEdgeIds=Be,this._prevSelectedEdges}));Fe(this,"selectionChangeHandlers",new Map);Fe(this,"nodeLookup",new Map);Fe(this,"parentLookup",new Map);Fe(this,"connectionLookup",new Map);Fe(this,"edgeLookup",new Map);Fe(this,"_prevVisibleEdges",new Map);le(this,f,x(()=>{const{nodes:k,_edges:Be,_prevVisibleEdges:On,nodeLookup:ct,connectionMode:Kl,onerror:ql,onlyRenderVisibleElements:Zl,defaultEdgeOptions:Gl}=this;let mr,Pi;const Do={edges:Be,defaultEdgeOptions:Gl,previousEdges:On,nodeLookup:ct,connectionMode:Kl,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:ql};if(Zl){const{viewport:Ci,width:Ro,height:Lo}=this,Yo=[Ci.x,Ci.y,Ci.zoom];mr=P$(ct,Yo,Ro,Lo),Pi=Ls({...Do,onlyRenderVisible:!0,visibleNodes:mr,transform:Yo,width:Ro,height:Lo})}else mr=this.nodeLookup,Pi=Ls(Do);return{nodes:mr,edges:Pi}}));le(this,g,x(()=>e.props.nodesDraggable??!0));le(this,m,x(()=>e.props.nodesConnectable??!0));le(this,w,x(()=>e.props.elementsSelectable??!0));le(this,y,x(()=>e.props.nodesFocusable??!0));le(this,p,x(()=>e.props.edgesFocusable??!0));le(this,H,x(()=>e.props.disableKeyboardA11y??!1));le(this,_,x(()=>e.props.minZoom??.5));le(this,v,x(()=>e.props.maxZoom??2));le(this,N,x(()=>e.props.nodeOrigin??[0,0]));le(this,z,x(()=>e.props.nodeExtent??so));le(this,b,x(()=>e.props.translateExtent??so));le(this,D,x(()=>e.props.defaultEdgeOptions??{}));le(this,W,x(()=>e.props.nodeDragThreshold??1));le(this,K,x(()=>e.props.autoPanOnNodeDrag??!0));le(this,S,x(()=>e.props.autoPanOnConnect??!0));Fe(this,"fitViewQueued",e.props.fitView??!1);Fe(this,"fitViewOptions",e.props.fitViewOptions);Fe(this,"fitViewResolver",null);le(this,M,x(()=>e.props.snapGrid??null));le(this,A,Me(!1));le(this,$,Me(null));le(this,P,Me(!1));le(this,C,Me(!1));le(this,V,Me(!1));le(this,Y,Me(!1));le(this,T,Me(!1));le(this,B,Me(null));le(this,Z,Me(""));le(this,se,x(()=>e.props.selectionMode??Ur.Partial));le(this,de,x(()=>({...Yl,...e.props.nodeTypes})));le(this,ue,x(()=>({...Vl,...e.props.edgeTypes})));le(this,G,x(()=>e.props.noPanClass??"nopan"));le(this,J,x(()=>e.props.noDragClass??"nodrag"));le(this,re,x(()=>e.props.noWheelClass??"nowheel"));le(this,ee,Me(Ke(e.props.initialViewport??{x:0,y:0,zoom:1})));le(this,he,Me(Ke(ao)));le(this,fe,x(()=>this._connection.inProgress?{...this._connection,to:yr(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));le(this,oe,x(()=>e.props.connectionMode??Pn.Strict));le(this,ie,x(()=>e.props.connectionRadius??20));le(this,Q,x(()=>e.props.isValidConnection??(()=>!0)));le(this,E,x(()=>e.props.selectNodesOnDrag??!0));le(this,L,x(()=>e.props.defaultMarkerColor??"#b1b1b7"));le(this,X,x(()=>Cg(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));le(this,O,x(()=>e.props.onlyRenderVisibleElements??!1));le(this,R,x(()=>e.props.onflowerror??hg));le(this,F,x(()=>e.props.ondelete));le(this,U,x(()=>e.props.onbeforedelete));le(this,ne,x(()=>e.props.onbeforeconnect));le(this,te,x(()=>e.props.onconnect));le(this,ae,x(()=>e.props.onconnectstart));le(this,ce,x(()=>e.props.onconnectend));le(this,me,x(()=>e.props.onbeforereconnect));le(this,pe,x(()=>e.props.onreconnect));le(this,$e,x(()=>e.props.onreconnectstart));le(this,ve,x(()=>e.props.onreconnectend));le(this,ye,x(()=>e.props.clickConnect??!0));le(this,we,x(()=>e.props.onclickconnectstart));le(this,be,x(()=>e.props.onclickconnectend));le(this,Pe,Me(null));le(this,Ce,x(()=>e.props.onselectiondrag));le(this,Ne,x(()=>e.props.onselectiondragstart));le(this,Ae,x(()=>e.props.onselectiondragstop));Fe(this,"resolveFitView",async()=>{var k;this.panZoom&&(await dg({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(k=this.fitViewResolver)==null||k.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Fe(this,"_prefersDark",new S$("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));le(this,Se,x(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"));if(e.props.fitView&&!e.props.initialViewport&&this.width&&this.height){const k=vr(this.nodeLookup,{filter:Be=>!!((Be.width||Be.initialWidth)&&(Be.height||Be.initialHeight))});this.viewport=Ao(k,this.width,this.height,.5,2,.1)}}get flowId(){return u(I(this,n))}set flowId(k){q(I(this,n),k)}get domNode(){return u(I(this,r))}set domNode(k){q(I(this,r),k,!0)}get panZoom(){return u(I(this,i))}set panZoom(k){q(I(this,i),k,!0)}get width(){return u(I(this,o))}set width(k){q(I(this,o),k,!0)}get height(){return u(I(this,s))}set height(k){q(I(this,s),k,!0)}get nodesInitialized(){return u(I(this,a))}set nodesInitialized(k){q(I(this,a),k)}get viewportInitialized(){return u(I(this,l))}set viewportInitialized(k){q(I(this,l),k)}get _edges(){return u(I(this,c))}set _edges(k){q(I(this,c),k)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(k){e.nodes=k}get edges(){return this._edges}set edges(k){e.edges=k}get selectedNodes(){return u(I(this,d))}set selectedNodes(k){q(I(this,d),k)}get selectedEdges(){return u(I(this,h))}set selectedEdges(k){q(I(this,h),k)}get visible(){return u(I(this,f))}set visible(k){q(I(this,f),k)}get nodesDraggable(){return u(I(this,g))}set nodesDraggable(k){q(I(this,g),k)}get nodesConnectable(){return u(I(this,m))}set nodesConnectable(k){q(I(this,m),k)}get elementsSelectable(){return u(I(this,w))}set elementsSelectable(k){q(I(this,w),k)}get nodesFocusable(){return u(I(this,y))}set nodesFocusable(k){q(I(this,y),k)}get edgesFocusable(){return u(I(this,p))}set edgesFocusable(k){q(I(this,p),k)}get disableKeyboardA11y(){return u(I(this,H))}set disableKeyboardA11y(k){q(I(this,H),k)}get minZoom(){return u(I(this,_))}set minZoom(k){q(I(this,_),k)}get maxZoom(){return u(I(this,v))}set maxZoom(k){q(I(this,v),k)}get nodeOrigin(){return u(I(this,N))}set nodeOrigin(k){q(I(this,N),k)}get nodeExtent(){return u(I(this,z))}set nodeExtent(k){q(I(this,z),k)}get translateExtent(){return u(I(this,b))}set translateExtent(k){q(I(this,b),k)}get defaultEdgeOptions(){return u(I(this,D))}set defaultEdgeOptions(k){q(I(this,D),k)}get nodeDragThreshold(){return u(I(this,W))}set nodeDragThreshold(k){q(I(this,W),k)}get autoPanOnNodeDrag(){return u(I(this,K))}set autoPanOnNodeDrag(k){q(I(this,K),k)}get autoPanOnConnect(){return u(I(this,S))}set autoPanOnConnect(k){q(I(this,S),k)}get snapGrid(){return u(I(this,M))}set snapGrid(k){q(I(this,M),k)}get dragging(){return u(I(this,A))}set dragging(k){q(I(this,A),k,!0)}get selectionRect(){return u(I(this,$))}set selectionRect(k){q(I(this,$),k,!0)}get selectionKeyPressed(){return u(I(this,P))}set selectionKeyPressed(k){q(I(this,P),k,!0)}get multiselectionKeyPressed(){return u(I(this,C))}set multiselectionKeyPressed(k){q(I(this,C),k,!0)}get deleteKeyPressed(){return u(I(this,V))}set deleteKeyPressed(k){q(I(this,V),k,!0)}get panActivationKeyPressed(){return u(I(this,Y))}set panActivationKeyPressed(k){q(I(this,Y),k,!0)}get zoomActivationKeyPressed(){return u(I(this,T))}set zoomActivationKeyPressed(k){q(I(this,T),k,!0)}get selectionRectMode(){return u(I(this,B))}set selectionRectMode(k){q(I(this,B),k,!0)}get ariaLiveMessage(){return u(I(this,Z))}set ariaLiveMessage(k){q(I(this,Z),k,!0)}get selectionMode(){return u(I(this,se))}set selectionMode(k){q(I(this,se),k)}get nodeTypes(){return u(I(this,de))}set nodeTypes(k){q(I(this,de),k)}get edgeTypes(){return u(I(this,ue))}set edgeTypes(k){q(I(this,ue),k)}get noPanClass(){return u(I(this,G))}set noPanClass(k){q(I(this,G),k)}get noDragClass(){return u(I(this,J))}set noDragClass(k){q(I(this,J),k)}get noWheelClass(){return u(I(this,re))}set noWheelClass(k){q(I(this,re),k)}get _viewport(){return u(I(this,ee))}set _viewport(k){q(I(this,ee),k,!0)}get viewport(){return e.viewport??this._viewport}set viewport(k){e.viewport&&(e.viewport=k),this._viewport=k}get _connection(){return u(I(this,he))}set _connection(k){q(I(this,he),k,!0)}get connection(){return u(I(this,fe))}set connection(k){q(I(this,fe),k)}get connectionMode(){return u(I(this,oe))}set connectionMode(k){q(I(this,oe),k)}get connectionRadius(){return u(I(this,ie))}set connectionRadius(k){q(I(this,ie),k)}get isValidConnection(){return u(I(this,Q))}set isValidConnection(k){q(I(this,Q),k)}get selectNodesOnDrag(){return u(I(this,E))}set selectNodesOnDrag(k){q(I(this,E),k)}get defaultMarkerColor(){return u(I(this,L))}set defaultMarkerColor(k){q(I(this,L),k)}get markers(){return u(I(this,X))}set markers(k){q(I(this,X),k)}get onlyRenderVisibleElements(){return u(I(this,O))}set onlyRenderVisibleElements(k){q(I(this,O),k)}get onerror(){return u(I(this,R))}set onerror(k){q(I(this,R),k)}get ondelete(){return u(I(this,F))}set ondelete(k){q(I(this,F),k)}get onbeforedelete(){return u(I(this,U))}set onbeforedelete(k){q(I(this,U),k)}get onbeforeconnect(){return u(I(this,ne))}set onbeforeconnect(k){q(I(this,ne),k)}get onconnect(){return u(I(this,te))}set onconnect(k){q(I(this,te),k)}get onconnectstart(){return u(I(this,ae))}set onconnectstart(k){q(I(this,ae),k)}get onconnectend(){return u(I(this,ce))}set onconnectend(k){q(I(this,ce),k)}get onbeforereconnect(){return u(I(this,me))}set onbeforereconnect(k){q(I(this,me),k)}get onreconnect(){return u(I(this,pe))}set onreconnect(k){q(I(this,pe),k)}get onreconnectstart(){return u(I(this,$e))}set onreconnectstart(k){q(I(this,$e),k)}get onreconnectend(){return u(I(this,ve))}set onreconnectend(k){q(I(this,ve),k)}get clickConnect(){return u(I(this,ye))}set clickConnect(k){q(I(this,ye),k)}get onclickconnectstart(){return u(I(this,we))}set onclickconnectstart(k){q(I(this,we),k)}get onclickconnectend(){return u(I(this,be))}set onclickconnectend(k){q(I(this,be),k)}get clickConnectStartHandle(){return u(I(this,Pe))}set clickConnectStartHandle(k){q(I(this,Pe),k,!0)}get onselectiondrag(){return u(I(this,Ce))}set onselectiondrag(k){q(I(this,Ce),k)}get onselectiondragstart(){return u(I(this,Ne))}set onselectiondragstart(k){q(I(this,Ne),k)}get onselectiondragstop(){return u(I(this,Ae))}set onselectiondragstop(k){q(I(this,Ae),k)}get colorMode(){return u(I(this,Se))}set colorMode(k){q(I(this,Se),k)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=ao,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,w=new WeakMap,y=new WeakMap,p=new WeakMap,H=new WeakMap,_=new WeakMap,v=new WeakMap,N=new WeakMap,z=new WeakMap,b=new WeakMap,D=new WeakMap,W=new WeakMap,K=new WeakMap,S=new WeakMap,M=new WeakMap,A=new WeakMap,$=new WeakMap,P=new WeakMap,C=new WeakMap,V=new WeakMap,Y=new WeakMap,T=new WeakMap,B=new WeakMap,Z=new WeakMap,se=new WeakMap,de=new WeakMap,ue=new WeakMap,G=new WeakMap,J=new WeakMap,re=new WeakMap,ee=new WeakMap,he=new WeakMap,fe=new WeakMap,oe=new WeakMap,ie=new WeakMap,Q=new WeakMap,E=new WeakMap,L=new WeakMap,X=new WeakMap,O=new WeakMap,R=new WeakMap,F=new WeakMap,U=new WeakMap,ne=new WeakMap,te=new WeakMap,ae=new WeakMap,ce=new WeakMap,me=new WeakMap,pe=new WeakMap,$e=new WeakMap,ve=new WeakMap,ye=new WeakMap,we=new WeakMap,be=new WeakMap,Pe=new WeakMap,Ce=new WeakMap,Ne=new WeakMap,Ae=new WeakMap,Se=new WeakMap,new t}function Pt(){const e=bn(ti);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const ti=Symbol();function Xl(e){const t=C$(e);function n(S){t.nodeTypes={...Yl,...S}}function r(S){t.edgeTypes={...Vl,...S}}function i(S){t.edges=xg(S,t.edges)}const o=(S,M=!1)=>{t.nodes=t.nodes.map(A=>{const $=S.get(A.id);return $?{...A,position:$.position,dragging:M}:A})};function s(S){var P,C,V;const{changes:M,updatedInternals:A}=Tg(S,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!A)return;Mg(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const $=new Map;for(const Y of M){const T=(P=t.nodeLookup.get(Y.id))==null?void 0:P.internals.userNode;if(!T)continue;const B={...T};switch(Y.type){case"dimensions":{const Z={...B.measured,...Y.dimensions};Y.setAttributes&&(B.width=((C=Y.dimensions)==null?void 0:C.width)??B.width,B.height=((V=Y.dimensions)==null?void 0:V.height)??B.height),B.measured=Z;break}case"position":B.position=Y.position??B.position;break}$.set(Y.id,B)}t.nodes=t.nodes.map(Y=>$.get(Y.id)??Y),t.nodesInitialized||(t.nodesInitialized=!0)}function a(S){const M=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=S,t.fitViewResolver=M,t.nodes=[...t.nodes],M.promise}function l(S,M){const A=t.panZoom;return A?A.scaleBy(S,M):Promise.resolve(!1)}function c(S){return l(1.2,S)}function d(S){return l(1/1.2,S)}function h(S){const M=t.panZoom;M&&(M.setScaleExtent([S,t.maxZoom]),t.minZoom=S)}function f(S){const M=t.panZoom;M&&(M.setScaleExtent([t.minZoom,S]),t.maxZoom=S)}function g(S){const M=t.panZoom;M&&(M.setTranslateExtent(S),t.translateExtent=S)}function m(S){var M;(M=t.panZoom)==null||M.setClickDistance(S)}function w(S,M=null){let A=!1;const $=S.map(P=>(M?M.has(P.id):!0)&&P.selected?(A=!0,{...P,selected:!1}):P);return[A,$]}function y(S){const M=S!=null&&S.nodes?new Set(S.nodes.map(Y=>Y.id)):null,[A,$]=w(t.nodes,M);A&&(t.nodes=$);const P=S!=null&&S.edges?new Set(S.edges.map(Y=>Y.id)):null,[C,V]=w(t.edges,P);C&&(t.edges=V)}function p(S){const M=t.multiselectionKeyPressed;t.nodes=t.nodes.map(A=>{const $=S.includes(A.id),P=M&&A.selected||$;if(A.selected!==P){const C=t.nodeLookup.get(A.id);return C&&(C.selected=P),A.selected=P,{...A}}return A}),M||y({nodes:[]})}function H(S){const M=t.multiselectionKeyPressed;t.edges=t.edges.map(A=>{const $=S.includes(A.id),P=M&&A.selected||$;return A.selected!==P?{...A,selected:P}:A}),M||y({edges:[]})}function _(S,M,A){const $=t.nodeLookup.get(S);if(!$){console.warn("012",nr.error012(S));return}t.selectionRect=null,t.selectionRectMode=null,$.selected?(M||$.selected&&t.multiselectionKeyPressed)&&(y({nodes:[$],edges:[]}),requestAnimationFrame(()=>A==null?void 0:A.blur())):p([S])}function v(S){const M=t.edgeLookup.get(S);if(!M){console.warn("012",nr.error012(S));return}(M.selectable||t.elementsSelectable&&typeof M.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,M.selected?M.selected&&t.multiselectionKeyPressed&&y({nodes:[],edges:[M]}):H([S]))}function N(S,M){const{nodeExtent:A,snapGrid:$,nodeOrigin:P,nodeLookup:C,nodesDraggable:V,onerror:Y}=t,T=new Map,B=($==null?void 0:$[0])??5,Z=($==null?void 0:$[1])??5,se=S.x*B*M,de=S.y*Z*M;for(const ue of C.values()){if(!(ue.selected&&(ue.draggable||V&&typeof ue.draggable>"u")))continue;let J={x:ue.internals.positionAbsolute.x+se,y:ue.internals.positionAbsolute.y+de};$&&(J=xi(J,$));const{position:re,positionAbsolute:ee}=yl({nodeId:ue.id,nextPosition:J,nodeLookup:C,nodeExtent:A,nodeOrigin:P,onError:Y});ue.position=re,ue.internals.positionAbsolute=ee,T.set(ue.id,ue)}o(T)}function z(S){return Og({delta:S,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const b=S=>{t._connection={...S}};function D(){t._connection=ao}function W(){t.resetStoreValues(),y()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:c,zoomOut:d,fitView:a,setMinZoom:h,setMaxZoom:f,setTranslateExtent:g,setPaneClickDistance:m,unselectNodesAndEdges:y,addSelectedNodes:p,addSelectedEdges:H,handleNodeSelection:_,handleEdgeSelection:v,moveSelectedNodes:N,panBy:z,updateConnection:b,cancelConnection:D,reset:W})}function Vi(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,translateExtent:o,paneClickDistance:s,setPanZoomInstance:a,onDraggingChange:l,onTransformChange:c}=t,d=jg({domNode:e,minZoom:n,maxZoom:r,translateExtent:o,viewport:i,paneClickDistance:s,onDraggingChange:l}),h=d.getViewport();return(i.x!==h.x||i.y!==h.y||i.zoom!==h.zoom)&&c([h.x,h.y,h.zoom]),a(d),d.update(t),{update(f){d.update(f)}}}var N$=De('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function M$(e,t){Ie(t,!0);let n=j(t,"store",15),r=j(t,"panOnScrollMode",19,()=>Ut.Free),i=j(t,"preventScrolling",3,!0),o=j(t,"zoomOnScroll",3,!0),s=j(t,"zoomOnDoubleClick",3,!0),a=j(t,"zoomOnPinch",3,!0),l=j(t,"panOnDrag",3,!0),c=j(t,"panOnScroll",3,!1),d=j(t,"paneClickDistance",3,1),h=x(()=>n().panActivationKeyPressed||l()),f=x(()=>n().panActivationKeyPressed||c());const{viewport:g}=n();let m=!1;Ht(()=>{var p;!m&&n().viewportInitialized&&((p=t.oninit)==null||p.call(t),m=!0)});var w=N$(),y=He(w);nt(y,()=>t.children),Ze(w,(p,H)=>Vi==null?void 0:Vi(p,H),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:p=>{n(n().dragging=p,!0)},setPanZoomInstance:p=>{n(n().panZoom=p,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:o(),zoomOnDoubleClick:s(),zoomOnPinch:a(),panOnScroll:u(f),panOnDrag:u(h),panOnScrollSpeed:.5,panOnScrollMode:r()||Ut.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof i()=="boolean"?i():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:d(),onTransformChange:p=>{n(n().viewport={x:p[0],y:p[1],zoom:p[2]},!0)}})),ge(e,w),ze()}function Ys(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Vs(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Xs(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var A$=De("<div><!></div>");function I$(e,t){Ie(t,!0);let n=j(t,"store",15),r=j(t,"panOnDrag",3,!0),i,o=null,s=new Set,a=new Set,l=x(()=>n().panActivationKeyPressed||r()),c=x(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&u(l)!==!0),d=x(()=>n().elementsSelectable&&(u(c)||n().selectionRectMode==="user")),h=!1;function f(z){var b;if(h||n().connection.inProgress){h=!1;return}(b=t.onpaneclick)==null||b.call(t,{event:z}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(z){var W,K,S;if(o=i==null?void 0:i.getBoundingClientRect(),!n().elementsSelectable||!u(c)||z.button!==0||z.target!==i||!o)return;(K=(W=z.target)==null?void 0:W.setPointerCapture)==null||K.call(W,z.pointerId);const{x:b,y:D}=zt(z,o);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:b,startY:D,x:b,y:D},!0),(S=t.onselectionstart)==null||S.call(t,z)}function m(z){if(!u(c)||!o||!n().selectionRect)return;h=!0;const b=zt(z,o),{startX:D=0,startY:W=0}=n().selectionRect,K={...n().selectionRect,x:b.x<D?b.x:D,y:b.y<W?b.y:W,width:Math.abs(b.x-D),height:Math.abs(b.y-W)},S=s,M=a;s=new Set(vl(n().nodeLookup,K,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Ur.Partial,!0).map($=>$.id));const A=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const $ of s){const P=n().connectionLookup.get($);if(P)for(const{edgeId:C}of P.values()){const V=n().edgeLookup.get(C);V&&(V.selectable??A)&&a.add(C)}}Xs(S,s)||n(n().nodes=n().nodes.map(Vs(s)),!0),Xs(M,a)||n(n().edges=n().edges.map(Vs(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=K,!0)}function w(z){var b,D,W;z.button===0&&((D=(b=z.target)==null?void 0:b.releasePointerCapture)==null||D.call(b,z.pointerId),!u(c)&&n().selectionRectMode==="user"&&z.target===i&&(f==null||f(z)),n(n().selectionRect=null,!0),s.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),(W=t.onselectionend)==null||W.call(t,z))}const y=z=>{var b;if(Array.isArray(u(l))&&u(l).includes(2)){z.preventDefault();return}(b=t.onpanecontextmenu)==null||b.call(t,{event:z})};var p=A$();let H;var _=x(()=>u(d)?void 0:Ys(f,i));p.__click=function(...z){var b;(b=u(_))==null||b.apply(this,z)},p.__pointerdown=function(...z){var b;(b=u(d)?g:void 0)==null||b.apply(this,z)},p.__pointermove=function(...z){var b;(b=u(d)?m:void 0)==null||b.apply(this,z)},p.__pointerup=function(...z){var b;(b=u(d)?w:void 0)==null||b.apply(this,z)};var v=x(()=>Ys(y,i));p.__contextmenu=function(...z){var b;(b=u(v))==null||b.apply(this,z)};var N=He(p);nt(N,()=>t.children),Ot(p,z=>i=z,()=>i),Te(z=>H=yt(p,1,"svelte-flow__pane svelte-flow__container",null,H,z),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:u(c)})]),ge(e,p),ze()}cn(["click","pointerdown","pointermove","pointerup","contextmenu"]);var z$=De('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function H$(e,t){Ie(t,!0);var n=z$();let r;var i=He(n);nt(i,()=>t.children),Te(()=>r=at(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),ge(e,n),ze()}function pn(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=Lg({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:d}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(c,d){if(d.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){a.destroy()}}}var T$=De('<div aria-live="assertive" aria-atomic="true" style="position: absolute; width: 1px; height: 1px; margin: -1px; border: 0; padding: 0; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); clip-path: inset(100%);"> </div>'),O$=De(`<div style="display: none;">Press enter or space to select a node. <!> Press delete to remove it and escape to cancel.</div> <div style="display: none;">Press enter or space to select an edge. You can then press delete to remove it or escape to
  cancel.</div> <!>`,1);function D$(e,t){Ie(t,!0);var n=O$(),r=Re(n),i=xe(He(r));{var o=c=>{var d=Ma("You can then use the arrow keys to move the node around.");ge(c,d)};Xe(i,c=>{t.store.disableKeyboardA11y||c(o)})}var s=xe(r,2),a=xe(s,2);{var l=c=>{var d=T$(),h=He(d);Te(()=>{_e(d,"id",`${R$}-${t.store.flowId}`),un(h,t.store.ariaLiveMessage)}),ge(c,d)};Xe(a,c=>{t.store.disableKeyboardA11y||c(l)})}Te(()=>{_e(r,"id",`${Wl}-${t.store.flowId}`),_e(s,"id",`${Bl}-${t.store.flowId}`)}),ge(e,n),ze()}const Wl="svelte-flow__node-desc",Bl="svelte-flow__edge-desc",R$="svelte-flow__aria-live";function L$(e,t,n,r,i,o,s){var a;u(t)&&(!n().selectNodesOnDrag||!u(r)||n().nodeDragThreshold>0)&&n().handleNodeSelection(i),(a=o.onnodeclick)==null||a.call(o,{node:u(s),event:e})}var Y$=De("<div><!></div>");function V$(e,t){Ie(t,!0);let n=j(t,"store",15),r=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Q}),i=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return E}),o=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return L}),s=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return X}),a=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return O}),l=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return R}),c=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return F}),d=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return U}),h=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return ne}),f=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return te}),g=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return ae}),m=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return ce}),w=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return me}),y=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return pe}),p=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return $e}),H=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return ve}),_=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return ye}),v=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return we}),N=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return be}),z=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Pe}),b=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Ce}),D=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Ne}),W=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Ae}),K=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Se}),S=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return Ee}),M=x(()=>{let{data:Q={},selected:E=!1,draggable:L,selectable:X,deletable:O=!0,connectable:R,focusable:F,hidden:U=!1,dragging:ne=!1,style:te="",class:ae,type:ce="default",parentId:me,sourcePosition:pe,targetPosition:$e,measured:{width:ve,height:ye}={width:0,height:0},initialWidth:we,initialHeight:be,width:Pe,height:Ce,dragHandle:Ne,internals:{z:Ae=0,positionAbsolute:{x:Se,y:Ee},userNode:k}}=t.node;return k}),{id:A}=t.node,$=x(()=>u(o)??n().nodesDraggable),P=x(()=>u(s)??n().elementsSelectable),C=x(()=>u(l)??n().nodesConnectable),V=x(()=>bl(t.node)&&!!t.node.internals.handleBounds),Y=x(()=>u(c)??n().nodesFocusable);function T(Q){return n().parentLookup.has(Q)}let B=x(()=>T(A)),Z=Me(null),se=null,de=u(m),ue=u(y),G=u(p),J=x(()=>n().nodeTypes[u(m)]??Rl);qn("svelteflow__node_connectable",{get value(){return u(C)}}),qn("svelteflow__node_id",A);let ee=x(()=>{const Q=u(H)===void 0?u(z)??u(v):u(z),E=u(_)===void 0?u(b)??u(N):u(b);if(!(Q===void 0&&E===void 0&&u(f)===void 0))return`${u(f)};${Q?`width:${kt(Q)};`:""}${E?`height:${kt(E)};`:""}`});Ht(()=>{(u(m)!==de||u(y)!==ue||u(p)!==G)&&u(Z)!==null&&requestAnimationFrame(()=>{u(Z)!==null&&n().updateNodeInternals(new Map([[A,{id:A,nodeElement:u(Z),force:!0}]]))}),de=u(m),ue=u(y),G=u(p)}),Ht(()=>{t.resizeObserver&&(!u(V)||u(Z)!==se)&&(se&&t.resizeObserver.unobserve(se),u(Z)&&t.resizeObserver.observe(u(Z)),se=u(Z))}),$i(()=>{var Q;se&&((Q=t.resizeObserver)==null||Q.unobserve(se))});function he(Q){if(!(kl(Q)||n().disableKeyboardA11y))if(gl.includes(Q.key)&&u(P)){const E=Q.key==="Escape";n().handleNodeSelection(A,E,u(Z))}else u($)&&t.node.selected&&Object.prototype.hasOwnProperty.call(ei,Q.key)&&(Q.preventDefault(),n(n().ariaLiveMessage=`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${t.node.internals.positionAbsolute.x}, y: ${t.node.internals.positionAbsolute.y}`,!0),n().moveSelectedNodes(ei[Q.key],Q.shiftKey?4:1))}var fe=et(),oe=Re(fe);{var ie=Q=>{var E=Y$();_e(E,"data-id",A);let L,X;E.__click=[L$,P,n,$,A,t,M],E.__pointermove=function(...R){var F;(F=t.onnodepointermove?U=>t.onnodepointermove({node:u(M),event:U}):void 0)==null||F.apply(this,R)},E.__contextmenu=function(...R){var F;(F=t.onnodecontextmenu?U=>t.onnodecontextmenu({node:u(M),event:U}):void 0)==null||F.apply(this,R)},E.__keydown=function(...R){var F;(F=u(Y)?he:void 0)==null||F.apply(this,R)};var O=He(E);_o(O,()=>u(J),(R,F)=>{F(R,{get data(){return u(r)},id:A,get selected(){return u(i)},get selectable(){return u(P)},get deletable(){return u(a)},get sourcePosition(){return u(y)},get targetPosition(){return u(p)},get zIndex(){return u(W)},get dragging(){return u(h)},get draggable(){return u($)},get dragHandle(){return u(D)},get parentId(){return u(w)},get type(){return u(m)},get isConnectable(){return u(C)},get positionAbsoluteX(){return u(K)},get positionAbsoluteY(){return u(S)},get width(){return u(z)},get height(){return u(b)}})}),Ze(E,(R,F)=>pn==null?void 0:pn(R,F),()=>({nodeId:A,isSelectable:u(P),disabled:!u($),handleSelector:u(D),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(R,F,U,ne)=>{var te;(te=t.onnodedrag)==null||te.call(t,{event:R,targetNode:U,nodes:ne})},onDragStart:(R,F,U,ne)=>{var te;(te=t.onnodedragstart)==null||te.call(t,{event:R,targetNode:U,nodes:ne})},onDragStop:(R,F,U,ne)=>{var te;(te=t.onnodedragstop)==null||te.call(t,{event:R,targetNode:U,nodes:ne})},store:n()})),Ot(E,R=>q(Z,R),()=>u(Z)),Te(R=>{L=yt(E,1,Et(["svelte-flow__node",`svelte-flow__node-${u(m)}`,u(g)]),null,L,R),X=at(E,u(ee),X,{"z-index":u(W),transform:`translate(${u(K)??""}px, ${u(S)??""}px)`,visibility:u(V)?"visible":"hidden"}),_e(E,"tabindex",u(Y)?0:void 0),_e(E,"role",u(Y)?"button":void 0),_e(E,"aria-describedby",n().disableKeyboardA11y?void 0:`${Wl}-${n().flowId}`)},[()=>({dragging:u(h),selected:u(i),draggable:u($),connectable:u(C),selectable:u(P),nopan:u($),parent:u(B)})]),je("pointerenter",E,function(...R){var F;(F=t.onnodepointerenter?U=>t.onnodepointerenter({node:u(M),event:U}):void 0)==null||F.apply(this,R)}),je("pointerleave",E,function(...R){var F;(F=t.onnodepointerleave?U=>t.onnodepointerleave({node:u(M),event:U}):void 0)==null||F.apply(this,R)}),ge(Q,E)};Xe(oe,Q=>{u(d)||Q(ie)})}ge(e,fe),ze()}cn(["click","pointermove","contextmenu","keydown"]);var X$=De('<div class="svelte-flow__nodes"></div>');function W$(e,t){Ie(t,!0);let n=j(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});$i(()=>{r==null||r.disconnect()});var i=X$();gi(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{V$(o,{get node(){return u(s)},resizeObserver:r,get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),ge(e,i),ze()}var B$=We('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function F$(e,t){Ie(t,!0);let n=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return G}),r=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return J}),i=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return re}),o=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ee}),s=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return he}),a=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return fe}),l=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return oe}),c=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ie}),d=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return Q}),h=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return E}),f=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return L}),g=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return X}),m=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return O}),w=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return R}),y=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return F}),p=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return U}),H=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ne}),_=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return te}),v=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ae}),N=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ce}),z=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return me}),b=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return pe}),D=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return $e}),W=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ve}),K=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return ye}),S=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return we}),M=x(()=>{let{source:G,target:J,sourceX:re,sourceY:ee,targetX:he,targetY:fe,sourcePosition:oe,targetPosition:ie,animated:Q=!1,selected:E=!1,label:L,labelStyle:X,data:O={},style:R,interactionWidth:F,type:U="default",sourceHandle:ne,targetHandle:te,markerStart:ae,markerEnd:ce,selectable:me,focusable:pe,deletable:$e=!0,hidden:ve,zIndex:ye,class:we,ariaLabel:be}=t.edge;return be}),A=null;const{id:$}=t.edge;qn("svelteflow__edge_id",$);let P=x(()=>u(z)??t.store.elementsSelectable),C=x(()=>u(b)??t.store.edgesFocusable),V=x(()=>t.store.edgeTypes[u(p)]??Ll),Y=x(()=>u(v)?`url('#${co(u(v),t.store.flowId)}')`:void 0),T=x(()=>u(N)?`url('#${co(u(N),t.store.flowId)}')`:void 0);function B(G){var re;const J=t.store.edgeLookup.get($);J&&(u(P)&&t.store.handleEdgeSelection($),(re=t.onedgeclick)==null||re.call(t,{event:G,edge:J}))}function Z(G,J){const re=t.store.edgeLookup.get($);re&&J({event:G,edge:re})}onkeydown=G=>{if(!t.store.disableKeyboardA11y&&gl.includes(G.key)&&u(P)){const{unselectNodesAndEdges:J,addSelectedEdges:re}=t.store;G.key==="Escape"?(A==null||A.blur(),J({edges:[t.edge]})):re([$])}};var se=et(),de=Re(se);{var ue=G=>{var J=B$();let re;var ee=He(J);let he;_e(ee,"data-id",$),ee.__click=B,ee.__contextmenu=function(...oe){var ie;(ie=t.onedgecontextmenu?Q=>{Z(Q,t.onedgecontextmenu)}:void 0)==null||ie.apply(this,oe)},ee.__keydown=function(...oe){var ie;(ie=u(C)?onkeydown:void 0)==null||ie.apply(this,oe)};var fe=He(ee);_o(fe,()=>u(V),(oe,ie)=>{ie(oe,{id:$,get source(){return u(n)},get target(){return u(r)},get sourceX(){return u(i)},get sourceY(){return u(o)},get targetX(){return u(s)},get targetY(){return u(a)},get sourcePosition(){return u(l)},get targetPosition(){return u(c)},get animated(){return u(d)},get selected(){return u(h)},get label(){return u(f)},get labelStyle(){return u(g)},get data(){return u(m)},get style(){return u(w)},get interactionWidth(){return u(y)},get selectable(){return u(P)},get deletable(){return u(D)},get type(){return u(p)},get sourceHandleId(){return u(H)},get targetHandleId(){return u(_)},get markerStart(){return u(Y)},get markerEnd(){return u(T)}})}),Ot(ee,oe=>A=oe,()=>A),Te(oe=>{re=at(J,"",re,{"z-index":u(K)}),he=yt(ee,0,Et(["svelte-flow__edge",u(S)]),null,he,oe),_e(ee,"aria-label",u(M)===null?void 0:u(M)?u(M):`Edge from ${u(n)} to ${u(r)}`),_e(ee,"aria-describedby",u(C)?`${Bl}-${t.store.flowId}`:void 0),_e(ee,"role",u(C)?"button":"img"),_e(ee,"tabindex",u(C)?0:void 0)},[()=>({animated:u(d),selected:u(h),selectable:u(P)})]),je("pointerenter",ee,function(...oe){var ie;(ie=t.onedgepointerenter?Q=>{Z(Q,t.onedgepointerenter)}:void 0)==null||ie.apply(this,oe)}),je("pointerleave",ee,function(...oe){var ie;(ie=t.onedgepointerleave?Q=>{Z(Q,t.onedgepointerleave)}:void 0)==null||ie.apply(this,oe)}),ge(G,J)};Xe(de,G=>{u(W)||G(ue)})}ge(e,se),ze()}cn(["click","contextmenu","keydown"]);$c();var K$=We("<defs></defs>");function q$(e,t){Ie(t,!1);const n=Pt();bu();var r=K$();gi(r,5,()=>n.markers,i=>i.id,(i,o)=>{Q$(i,Ft(()=>u(o)))}),ge(e,r),ze()}var Z$=We('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),G$=We('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),U$=We('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Q$(e,t){Ie(t,!0);let n=j(t,"width",3,12.5),r=j(t,"height",3,12.5),i=j(t,"markerUnits",3,"strokeWidth"),o=j(t,"orient",3,"auto-start-reverse");var s=U$(),a=He(s);{var l=d=>{var h=Z$();Te(()=>{_e(h,"stroke",t.color),_e(h,"stroke-width",t.strokeWidth)}),ge(d,h)},c=(d,h)=>{{var f=g=>{var m=G$();Te(()=>{_e(m,"stroke",t.color),_e(m,"stroke-width",t.strokeWidth),_e(m,"fill",t.color)}),ge(g,m)};Xe(d,g=>{t.type===rr.ArrowClosed&&g(f)},h)}};Xe(a,d=>{t.type===rr.Arrow?d(l):d(c,!1)})}Te(()=>{_e(s,"id",t.id),_e(s,"markerWidth",`${n()}`),_e(s,"markerHeight",`${r()}`),_e(s,"markerUnits",i()),_e(s,"orient",o())}),ge(e,s),ze()}var J$=De('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function j$(e,t){Ie(t,!0);let n=j(t,"store",15);var r=J$(),i=He(r),o=He(i);q$(o,{});var s=xe(i,2);gi(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{F$(a,{get edge(){return u(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),ge(e,r),ze()}var e0=De('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Fl(e,t){Ie(t,!0);let n=j(t,"x",3,0),r=j(t,"y",3,0),i=j(t,"width",3,0),o=j(t,"height",3,0),s=j(t,"isVisible",3,!0);var a=et(),l=Re(a);{var c=d=>{var h=e0();let f;Te((g,m)=>f=at(h,"",f,{width:g,height:m,transform:`translate(${n()}px, ${r()}px)`}),[()=>typeof i()=="string"?i():kt(i()),()=>typeof o()=="string"?o():kt(o())]),ge(d,h)};Xe(l,d=>{s()&&d(c)})}ge(e,a),ze()}function t0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectioncontextmenu)==null||r.call(t,{nodes:n,event:e})}function n0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectionclick)==null||r.call(t,{nodes:n,event:e})}var r0=De("<div><!></div>");function i0(e,t){Ie(t,!0);let n=Me(void 0);Ht(()=>{var l;t.store.disableKeyboardA11y||(l=u(n))==null||l.focus({preventScroll:!0})});let r=x(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,vr(t.store.nodeLookup,{filter:l=>!!l.selected})):null);function i(l){Object.prototype.hasOwnProperty.call(ei,l.key)&&(l.preventDefault(),t.store.moveSelectedNodes(ei[l.key],l.shiftKey?4:1))}var o=et(),s=Re(o);{var a=l=>{var c=r0();c.__contextmenu=[t0,t],c.__click=[n0,t],c.__keydown=function(...f){var g;(g=t.store.disableKeyboardA11y?void 0:i)==null||g.apply(this,f)};let d;var h=He(c);Fl(h,{width:"100%",height:"100%",x:0,y:0}),Ze(c,(f,g)=>pn==null?void 0:pn(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,m,w)=>{var y;(y=t.onnodedrag)==null||y.call(t,{event:f,targetNode:null,nodes:w})},onDragStart:(f,g,m,w)=>{var y;(y=t.onnodedragstart)==null||y.call(t,{event:f,targetNode:null,nodes:w})},onDragStop:(f,g,m,w)=>{var y;(y=t.onnodedragstop)==null||y.call(t,{event:f,targetNode:null,nodes:w})}})),Ot(c,f=>q(n,f),()=>u(n)),Te((f,g)=>{yt(c,1,Et(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),_e(c,"role",t.store.disableKeyboardA11y?void 0:"button"),_e(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),d=at(c,"",d,{width:f,height:g,transform:`translate(${u(r).x??""}px, ${u(r).y??""}px)`})},[()=>kt(u(r).width),()=>kt(u(r).height)]),ge(l,c)};Xe(s,l=>{t.store.selectionRectMode==="nodes"&&u(r)&&At(u(r).x)&&At(u(r).y)&&l(a)})}ge(e,o),ze()}cn(["contextmenu","click","keydown"]);function o0(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Oe(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var d;const l=Array.isArray(r)?r:[r],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,f,g)=>f?h|1<<g:h,0);for(const h of l){const f={preventDefault:!1,enabled:!0,...h},{modifier:g,key:m,callback:w,preventDefault:y,enabled:p}=f;if(p){if(a.key!==m)continue;if(g===null||g===!1){if(c!==0)continue}else if(g!==void 0&&((d=g==null?void 0:g[0])==null?void 0:d.length)>0){const _=Array.isArray(g)?g:[g];let v=!1;for(const N of _)if((Array.isArray(N)?N:[N]).reduce((b,D)=>b|o0(D),0)===c){v=!0;break}if(!v)continue}y&&a.preventDefault();const H={node:e,trigger:f,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:H})),w==null||w(H)}}}let s;return n&&(s=Ui(e,i,o)),{update:a=>{const{enabled:l=!0,type:c="keydown"}=a;n&&(!l||i!==c)?s==null||s():!n&&l&&(s=Ui(e,c,o)),n=l,i=c,r=a.trigger},destroy:()=>{s==null||s()}}}function Oo(){const e=x(Pt),t=o=>{var c,d;const s=Rs(o)?o:u(e).nodeLookup.get(o.id),a=s.parentId?vg(s.position,s.measured,s.parentId,u(e).nodeLookup,u(e).nodeOrigin):s.position,l={...s,position:a,width:((c=s.measured)==null?void 0:c.width)??s.width,height:((d=s.measured)==null?void 0:d.height)??s.height};return Nn(l)};function n(o,s,a={replace:!1}){u(e).nodes=Ue(()=>u(e).nodes).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a!=null&&a.replace&&Rs(c)?c:{...l,...c}}return l})}function r(o,s,a={replace:!1}){u(e).edges=Ue(()=>u(e).edges).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a.replace&&g$(c)?c:{...l,...c}}return l})}const i=o=>u(e).nodeLookup.get(o);return{zoomIn:u(e).zoomIn,zoomOut:u(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?u(e).nodes:Ws(u(e).nodeLookup,o),getEdge:o=>u(e).edgeLookup.get(o),getEdges:o=>o===void 0?u(e).edges:Ws(u(e).edgeLookup,o),setZoom:(o,s)=>{const a=u(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>u(e).viewport.zoom,setViewport:async(o,s)=>{const a=u(e).viewport;return u(e).panZoom?(await u(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},{duration:s==null?void 0:s.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>ta(u(e).viewport),setCenter:async(o,s,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:u(e).maxZoom,c=u(e).panZoom;return c?(await c.setViewport({x:u(e).width/2-o*l,y:u(e).height/2-s*l,zoom:l},{duration:a==null?void 0:a.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:o=>u(e).fitView(o),fitBounds:async(o,s)=>{if(!u(e).panZoom)return Promise.resolve(!1);const a=Ao(o,u(e).width,u(e).height,u(e).minZoom,u(e).maxZoom,(s==null?void 0:s.padding)??.1);return await u(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=Es(o),c=l?o:t(o);return c?(a||u(e).nodes).filter(d=>{const h=u(e).nodeLookup.get(d.id);if(!h||!l&&d.id===o.id)return!1;const f=Nn(h),g=ir(f,c);return s&&g>0||g>=c.width*c.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const c=Es(o)?o:t(o);if(!c)return!1;const d=ir(c,s);return a&&d>0||d>=c.width*c.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{const{nodes:a,edges:l}=await fg({nodesToRemove:o,edgesToRemove:s,nodes:u(e).nodes,edges:u(e).edges,onBeforeDelete:u(e).onbeforedelete});return a&&(u(e).nodes=Ue(()=>u(e).nodes).filter(c=>!a.some(({id:d})=>d===c.id))),l&&(u(e).edges=Ue(()=>u(e).edges).filter(c=>!l.some(({id:d})=>d===c.id))),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!u(e).domNode)return o;const a=s.snapToGrid?u(e).snapGrid:!1,{x:l,y:c,zoom:d}=u(e).viewport,{x:h,y:f}=u(e).domNode.getBoundingClientRect(),g={x:o.x-h,y:o.y-f};return yr(g,[l,c,d],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!u(e).domNode)return o;const{x:s,y:a,zoom:l}=u(e).viewport,{x:c,y:d}=u(e).domNode.getBoundingClientRect(),h=Jr(o,[s,a,l]);return{x:h.x+c,y:h.y+d}},toObject:()=>structuredClone({nodes:[...u(e).nodes],edges:[...u(e).edges],viewport:{...u(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var d;const l=(d=u(e).nodeLookup.get(o))==null?void 0:d.internals.userNode;if(!l)return;const c=typeof s=="function"?s(l):s;n(o,h=>({...h,data:a!=null&&a.replace?c:{...h.data,...c}}))},updateEdge:r,getNodesBounds:o=>lg(o,{nodeLookup:u(e).nodeLookup,nodeOrigin:u(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=u(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function Ws(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function s0(e,t){Ie(t,!0);let n=j(t,"store",15),r=j(t,"selectionKey",3,"Shift"),i=j(t,"multiSelectionKey",19,()=>jr()?"Meta":"Control"),o=j(t,"deleteKey",3,"Backspace"),s=j(t,"panActivationKey",3," "),a=j(t,"zoomActivationKey",19,()=>jr()?"Meta":"Control"),{deleteElements:l}=Oo();function c(w){return w!==null&&typeof w=="object"}function d(w){return c(w)?w.modifier||[]:[]}function h(w){return w==null?"":c(w)?w.key:w}function f(w,y){return(Array.isArray(w)?w:[w]).map(H=>{const _=h(H);return{key:_,modifier:d(H),enabled:_!==null,callback:y}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function m(){var _,v;const w=n().nodes.filter(N=>N.selected),y=n().edges.filter(N=>N.selected),{deletedNodes:p,deletedEdges:H}=await l({nodes:w,edges:y});(p.length>0||H.length>0)&&((v=(_=n()).ondelete)==null||v.call(_,{nodes:p,edges:H}))}je("blur",qe,g),je("contextmenu",qe,g),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(o(),w=>{!(w.originalEvent.ctrlKey||w.originalEvent.metaKey||w.originalEvent.shiftKey)&&!kl(w.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),m())}),type:"keydown"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Ze(qe,(w,y)=>Oe==null?void 0:Oe(w,y),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),ze()}var a0=We('<path fill="none" class="svelte-flow__connection-path"></path>'),l0=We('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function c0(e,t){Ie(t,!0);let n=x(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case Kt.Bezier:{const[a]=Sl(s);return a}case Kt.Straight:{const[a]=Cl(s);return a}case Kt.Step:case Kt.SmoothStep:{const[a]=Io({...s,borderRadius:t.type===Kt.Step?0:void 0});return a}}});var r=et(),i=Re(r);{var o=s=>{var a=l0(),l=He(a),c=He(l);{var d=f=>{var g=et(),m=Re(g);_o(m,()=>t.LineComponent,(w,y)=>{y(w,{})}),ge(f,g)},h=f=>{var g=a0();Te(()=>{_e(g,"d",u(n)),at(g,t.style)}),ge(f,g)};Xe(c,f=>{t.LineComponent?f(d):f(h,!1)})}Te(f=>{_e(a,"width",t.store.width),_e(a,"height",t.store.height),at(a,t.containerStyle),yt(l,0,f)},[()=>Et(["svelte-flow__connection",og(t.store.connection.isValid)])]),ge(s,a)};Xe(i,s=>{t.store.connection.inProgress&&s(o)})}ge(e,r),ze()}var u0=De("<div><!></div>");function Si(e,t){Ie(t,!0);let n=j(t,"position",3,"top-right"),r=Yt(t,["$$slots","$$events","$$legacy","position","style","class","children"]);const i=Pt();let o=x(()=>`${n()}`.split("-"));var s=u0();let a;var l=He(s);nt(l,()=>t.children??Rt),Te(c=>a=dn(s,a,{class:c,style:t.style,...r,[pt]:{"pointer-events":i.selectionRectMode?"none":""}}),[()=>["svelte-flow__panel",t.class,...u(o)]]),ge(e,s),ze()}var d0=De('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function f0(e,t){Ie(t,!0);let n=j(t,"position",3,"bottom-right");var r=et(),i=Re(r);{var o=s=>{Si(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var c=d0();ge(a,c)},$$slots:{default:!0}})};Xe(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}ge(e,r),ze()}var h0=De("<div><!></div>");function g0(e,t){Ie(t,!0);let n=j(t,"domNode",15),r=j(t,"clientWidth",15),i=j(t,"clientHeight",15),o=x(()=>{let{id:d,class:h,nodeTypes:f,edgeTypes:g,colorMode:m,isValidConnection:w,onmove:y,onmovestart:p,onmoveend:H,onflowerror:_,ondelete:v,onbeforedelete:N,onbeforeconnect:z,onconnect:b,onconnectstart:D,onconnectend:W,onbeforereconnect:K,onreconnect:S,onreconnectstart:M,onreconnectend:A,onclickconnectstart:$,onclickconnectend:P,oninit:C,onselectionchange:V,onselectiondragstart:Y,onselectiondrag:T,onselectiondragstop:B,onselectionstart:Z,onselectionend:se,clickConnect:de,fitView:ue,fitViewOptions:G,nodeOrigin:J,nodeDragThreshold:re,minZoom:ee,maxZoom:he,initialViewport:fe,connectionRadius:oe,connectionMode:ie,selectionMode:Q,selectNodesOnDrag:E,snapGrid:L,defaultMarkerColor:X,translateExtent:O,nodeExtent:R,onlyRenderVisibleElements:F,autoPanOnConnect:U,autoPanOnNodeDrag:ne,colorModeSSR:te,style:ae,defaultEdgeOptions:ce,elevateNodesOnSelect:me,elevateEdgesOnSelect:pe,nodesDraggable:$e,nodesConnectable:ve,elementsSelectable:ye,nodesFocusable:we,edgesFocusable:be,disableKeyboardA11y:Pe,noDragClass:Ce,noPanClass:Ne,noWheelClass:Ae,...Se}=t.rest;return h}),s=x(()=>{let{id:d,class:h,nodeTypes:f,edgeTypes:g,colorMode:m,isValidConnection:w,onmove:y,onmovestart:p,onmoveend:H,onflowerror:_,ondelete:v,onbeforedelete:N,onbeforeconnect:z,onconnect:b,onconnectstart:D,onconnectend:W,onbeforereconnect:K,onreconnect:S,onreconnectstart:M,onreconnectend:A,onclickconnectstart:$,onclickconnectend:P,oninit:C,onselectionchange:V,onselectiondragstart:Y,onselectiondrag:T,onselectiondragstop:B,onselectionstart:Z,onselectionend:se,clickConnect:de,fitView:ue,fitViewOptions:G,nodeOrigin:J,nodeDragThreshold:re,minZoom:ee,maxZoom:he,initialViewport:fe,connectionRadius:oe,connectionMode:ie,selectionMode:Q,selectNodesOnDrag:E,snapGrid:L,defaultMarkerColor:X,translateExtent:O,nodeExtent:R,onlyRenderVisibleElements:F,autoPanOnConnect:U,autoPanOnNodeDrag:ne,colorModeSSR:te,style:ae,defaultEdgeOptions:ce,elevateNodesOnSelect:me,elevateEdgesOnSelect:pe,nodesDraggable:$e,nodesConnectable:ve,elementsSelectable:ye,nodesFocusable:we,edgesFocusable:be,disableKeyboardA11y:Pe,noDragClass:Ce,noPanClass:Ne,noWheelClass:Ae,...Se}=t.rest;return Se});var a=h0();let l;var c=He(a);nt(c,()=>t.children??Rt),Ot(a,d=>n(d),()=>n()),Te((d,h)=>l=dn(a,l,{class:["svelte-flow","svelte-flow__container",u(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",...u(s),[pt]:{width:d,height:h}},"svelte-12wlba6"),[()=>kt(t.width),()=>kt(t.height)]),es(a,"clientHeight",i),es(a,"clientWidth",r),ge(e,a),ze()}var $0=De('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),v0=De("<!> <!>",1),y0=De("<!> <!> <!> <!> <!>",1);function m0(e,t){Ie(t,!0);let n=j(t,"paneClickDistance",3,1),r=j(t,"nodeClickDistance",3,1),i=j(t,"panOnScrollMode",19,()=>Ut.Free),o=j(t,"preventScrolling",3,!0),s=j(t,"zoomOnScroll",3,!0),a=j(t,"zoomOnDoubleClick",3,!0),l=j(t,"zoomOnPinch",3,!0),c=j(t,"panOnScroll",3,!1),d=j(t,"panOnDrag",3,!0),h=j(t,"selectionOnDrag",3,!0),f=j(t,"connectionLineType",19,()=>Kt.Bezier),g=j(t,"nodes",31,()=>Ke([])),m=j(t,"edges",31,()=>Ke([])),w=j(t,"viewport",15,void 0),y=Yt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),p=Xl({props:y,width:t.width,height:t.height,get nodes(){return g()},set nodes(_){g(_)},get edges(){return m()},set edges(_){m(_)},get viewport(){return w()},set viewport(_){w(_)}});const H=bn(ti);H&&H.setStore&&H.setStore(p),qn(ti,{provider:!1,getStore(){return p}}),Ht(()=>{var v;const _={nodes:p.selectedNodes,edges:p.selectedEdges};(v=Ue(()=>t.onselectionchange))==null||v(_);for(const N of p.selectionChangeHandlers.values())N(_)}),$i(()=>{p.reset()}),g0(e,{get colorMode(){return p.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return y},get domNode(){return p.domNode},set domNode(_){p.domNode=_},get clientWidth(){return p.width},set clientWidth(_){p.width=_},get clientHeight(){return p.height},set clientHeight(_){p.height=_},children:(_,v)=>{var N=y0(),z=Re(N);s0(z,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return p},set store(S){p=S}});var b=xe(z,2);M$(b,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return c()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return p},set store(S){p=S},children:(S,M)=>{I$(S,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get selectionOnDrag(){return h()},get store(){return p},set store(A){p=A},children:(A,$)=>{var P=v0(),C=Re(P);H$(C,{get store(){return p},set store(de){p=de},children:(de,ue)=>{var G=$0(),J=xe(Re(G),2);j$(J,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return p},set store(fe){p=fe}});var re=xe(J,4);c0(re,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return p},set store(fe){p=fe}});var ee=xe(re,2);W$(ee,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return p},set store(fe){p=fe}});var he=xe(ee,2);i0(he,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return p},set store(fe){p=fe}}),ge(de,G)},$$slots:{default:!0}});var V=xe(C,2);const Y=x(()=>!!(p.selectionRect&&p.selectionRectMode==="user")),T=x(()=>{var de;return(de=p.selectionRect)==null?void 0:de.width}),B=x(()=>{var de;return(de=p.selectionRect)==null?void 0:de.height}),Z=x(()=>{var de;return(de=p.selectionRect)==null?void 0:de.x}),se=x(()=>{var de;return(de=p.selectionRect)==null?void 0:de.y});Fl(V,{get isVisible(){return u(Y)},get width(){return u(T)},get height(){return u(B)},get x(){return u(Z)},get y(){return u(se)}}),ge(A,P)},$$slots:{default:!0}})},$$slots:{default:!0}});var D=xe(b,2);f0(D,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var W=xe(D,2);D$(W,{store:p});var K=xe(W,2);nt(K,()=>t.children??Rt),ge(_,N)},$$slots:{default:!0}}),ze()}function p0(e,t){Ie(t,!0);let n=Me(Xl({props:{},nodes:[],edges:[]}));qn(ti,{provider:!0,getStore(){return u(n)},setStore:o=>{q(n,o)}}),$i(()=>{u(n).reset()});var r=et(),i=Re(r);nt(i,()=>t.children??Rt),ge(e,r),ze()}var w0=De("<button><!></button>");function Pr(e,t){let n=Yt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=w0();let i;var o=He(r);nt(o,()=>t.children??Rt),Te(()=>i=dn(r,i,{type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[pt]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}})),ge(e,r)}var b0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function _0(e){var t=b0();ge(e,t)}var x0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function k0(e){var t=x0();ge(e,t)}var E0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function S0(e){var t=E0();ge(e,t)}var P0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function C0(e){var t=P0();ge(e,t)}var N0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function M0(e){var t=N0();ge(e,t)}var A0=De("<!> <!>",1),I0=De("<!> <!> <!> <!> <!> <!>",1);function z0(e,t){Ie(t,!0);let n=j(t,"position",3,"bottom-left"),r=j(t,"orientation",3,"vertical"),i=j(t,"showZoom",3,!0),o=j(t,"showFitView",3,!0),s=j(t,"showLock",3,!0),a=Yt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","aria-label","fitViewOptions","children","before","after"]);const l=Pt(),c={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let d=Me(Ke(l.nodesDraggable||l.nodesConnectable||l.elementsSelectable)),h=x(()=>l.viewport.zoom<=l.minZoom),f=x(()=>l.viewport.zoom>=l.maxZoom),g=x(()=>r()==="horizontal"?"horizontal":"vertical");const m=()=>{l.zoomIn()},w=()=>{l.zoomOut()},y=()=>{l.fitView(t.fitViewOptions)},p=()=>{q(d,!u(d)),l.nodesDraggable=u(d),l.nodesConnectable=u(d),l.elementsSelectable=u(d)},H=x(()=>["svelte-flow__controls",u(g),t.class]),_=x(()=>t["aria-label"]??"Svelte Flow controls");Si(e,Ft({get class(){return u(H)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return u(_)},get style(){return t.style}},()=>a,{children:(v,N)=>{var z=I0(),b=Re(z);{var D=T=>{var B=et(),Z=Re(B);nt(Z,()=>t.before),ge(T,B)};Xe(b,T=>{t.before&&T(D)})}var W=xe(b,2);{var K=T=>{var B=A0(),Z=Re(B);Pr(Z,Ft({onclick:m,class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return u(f)}},c,{children:(de,ue)=>{_0(de)},$$slots:{default:!0}}));var se=xe(Z,2);Pr(se,Ft({onclick:w,class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return u(h)}},c,{children:(de,ue)=>{k0(de)},$$slots:{default:!0}})),ge(T,B)};Xe(W,T=>{i()&&T(K)})}var S=xe(W,2);{var M=T=>{Pr(T,Ft({class:"svelte-flow__controls-fitview",onclick:y,title:"fit view","aria-label":"fit view"},c,{children:(B,Z)=>{S0(B)},$$slots:{default:!0}}))};Xe(S,T=>{o()&&T(M)})}var A=xe(S,2);{var $=T=>{Pr(T,Ft({class:"svelte-flow__controls-interactive",onclick:p,title:"toggle interactivity","aria-label":"toggle interactivity"},c,{children:(B,Z)=>{var se=et(),de=Re(se);{var ue=J=>{M0(J)},G=J=>{C0(J)};Xe(de,J=>{u(d)?J(ue):J(G,!1)})}ge(B,se)},$$slots:{default:!0}}))};Xe(A,T=>{s()&&T($)})}var P=xe(A,2);{var C=T=>{var B=et(),Z=Re(B);nt(Z,()=>t.children),ge(T,B)};Xe(P,T=>{t.children&&T(C)})}var V=xe(P,2);{var Y=T=>{var B=et(),Z=Re(B);nt(Z,()=>t.after),ge(T,B)};Xe(V,T=>{t.after&&T(Y)})}ge(v,z)},$$slots:{default:!0}})),ze()}var Qt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Qt||(Qt={}));var H0=We("<circle></circle>");function T0(e,t){var n=H0();Te(()=>{_e(n,"cx",t.radius),_e(n,"cy",t.radius),_e(n,"r",t.radius),yt(n,0,Et(["svelte-flow__background-pattern","dots",t.class]))}),ge(e,n)}var O0=We("<path></path>");function D0(e,t){Ie(t,!0);var n=O0();Te(()=>{_e(n,"stroke-width",t.lineWidth),_e(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),yt(n,0,Et(["svelte-flow__background-pattern",t.variant,t.class]))}),ge(e,n),ze()}const R0={[Qt.Dots]:1,[Qt.Lines]:1,[Qt.Cross]:6};var L0=We('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Y0(e,t){Ie(t,!0);let n=j(t,"variant",19,()=>Qt.Dots),r=j(t,"gap",3,20),i=j(t,"lineWidth",3,1);const o=Pt(),s=x(()=>n()===Qt.Dots),a=x(()=>n()===Qt.Cross),l=x(()=>Array.isArray(r())?r():[r(),r()]);let c=x(()=>`background-pattern-${o.flowId}-${t.id??""}`),d=x(()=>[u(l)[0]*o.viewport.zoom||1,u(l)[1]*o.viewport.zoom||1]),h=x(()=>(t.size??R0[n()])*o.viewport.zoom),f=x(()=>u(a)?[u(h),u(h)]:u(d)),g=x(()=>u(s)?[u(h)/2,u(h)/2]:[u(f)[0]/2,u(f)[1]/2]);var m=L0();let w;var y=He(m),p=He(y);{var H=N=>{const z=x(()=>u(h)/2);T0(N,{get radius(){return u(z)},get class(){return t.patternClass}})},_=N=>{D0(N,{get dimensions(){return u(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};Xe(p,N=>{u(s)?N(H):N(_,!1)})}var v=xe(y);Te(()=>{yt(m,0,Et(["svelte-flow__background","svelte-flow__container",t.class])),w=at(m,"",w,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),_e(y,"id",u(c)),_e(y,"x",o.viewport.x%u(d)[0]),_e(y,"y",o.viewport.y%u(d)[1]),_e(y,"width",u(d)[0]),_e(y,"height",u(d)[1]),_e(y,"patternTransform",`translate(-${u(g)[0]},-${u(g)[1]})`),_e(v,"fill",`url(#${u(c)})`)}),ge(e,m),ze()}var V0=We("<rect></rect>");function X0(e,t){let n=j(t,"borderRadius",3,5),r=j(t,"strokeWidth",3,2);var i=V0();let o,s;Te(a=>{o=yt(i,0,Et(["svelte-flow__minimap-node",t.class]),null,o,a),_e(i,"x",t.x),_e(i,"y",t.y),_e(i,"rx",n()),_e(i,"ry",n()),_e(i,"width",t.width),_e(i,"height",t.height),_e(i,"shape-rendering",t.shapeRendering),s=at(i,"",s,{fill:t.color,stroke:t.strokeColor,"stroke-width":r()})},[()=>({selected:t.selected})]),ge(e,i)}function Xi(e,t){const n=Fg({domNode:e,panZoom:t.panZoom,getTransform:()=>{const{viewport:i}=t.store;return[i.x,i.y,i.zoom]},getViewScale:t.getViewScale});n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable});function r(i){n.update({translateExtent:i.translateExtent,width:i.width,height:i.height,inversePan:i.inversePan,zoomStep:i.zoomStep,pannable:i.pannable,zoomable:i.zoomable})}return{update:r,destroy(){n.destroy()}}}const Wi=e=>e instanceof Function?e:()=>e;var W0=We("<title> </title>"),B0=We('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),F0=De('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function K0(e,t){Ie(t,!0);let n=j(t,"position",3,"bottom-right"),r=j(t,"ariaLabel",3,"Mini map"),i=j(t,"nodeStrokeColor",3,"transparent"),o=j(t,"nodeClass",3,""),s=j(t,"nodeBorderRadius",3,5),a=j(t,"nodeStrokeWidth",3,2),l=j(t,"width",3,200),c=j(t,"height",3,150),d=j(t,"pannable",3,!0),h=j(t,"zoomable",3,!0),f=Yt(t,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),g=Pt();const m=t.nodeColor===void 0?void 0:Wi(t.nodeColor),w=Wi(i()),y=Wi(o()),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let H=x(()=>`svelte-flow__minimap-desc-${g.flowId}`),_=x(()=>({x:-g.viewport.x/g.viewport.zoom,y:-g.viewport.y/g.viewport.zoom,width:g.width/g.viewport.zoom,height:g.height/g.viewport.zoom})),v=x(()=>g.nodeLookup.size>0?wl(vr(g.nodeLookup,{filter:T=>!T.hidden}),u(_)):u(_)),N=x(()=>u(v).width/l()),z=x(()=>u(v).height/c()),b=x(()=>Math.max(u(N),u(z))),D=x(()=>u(b)*l()),W=x(()=>u(b)*c()),K=x(()=>5*u(b)),S=x(()=>u(v).x-(u(D)-u(v).width)/2-u(K)),M=x(()=>u(v).y-(u(W)-u(v).height)/2-u(K)),A=x(()=>u(D)+u(K)*2),$=x(()=>u(W)+u(K)*2);const P=()=>u(b);var C=F0(),V=Re(C);const Y=x(()=>["svelte-flow__minimap",t.class]);au(V,()=>({"--xy-minimap-background-color-props":t.bgColor})),Si(V.lastChild,Ft({get position(){return n()},get class(){return u(Y)},"data-testid":"svelte-flow__minimap"},()=>f,{children:(T,B)=>{var Z=et(),se=Re(Z);{var de=ue=>{var G=B0();let J;var re=He(G);{var ee=oe=>{var ie=W0(),Q=He(ie);Te(()=>{_e(ie,"id",u(H)),un(Q,r())}),ge(oe,ie)};Xe(re,oe=>{r()&&oe(ee)})}var he=xe(re);gi(he,17,()=>g.nodes,oe=>oe.id,(oe,ie)=>{var Q=et();const E=x(()=>g.nodeLookup.get(u(ie).id));var L=Re(Q);{var X=O=>{const R=x(()=>en(u(E))),F=x(()=>m==null?void 0:m(u(E))),U=x(()=>w(u(E))),ne=x(()=>y(u(E)));X0(O,Ft({get x(){return u(E).internals.positionAbsolute.x},get y(){return u(E).internals.positionAbsolute.y}},()=>u(R),{get selected(){return u(E).selected},get color(){return u(F)},get borderRadius(){return s()},get strokeColor(){return u(U)},get strokeWidth(){return a()},shapeRendering:p,get class(){return u(ne)}}))};Xe(L,O=>{u(E)&&bl(u(E))&&O(X)})}ge(oe,Q)});var fe=xe(he);Ze(G,(oe,ie)=>Xi==null?void 0:Xi(oe,ie),()=>({store:g,panZoom:g.panZoom,getViewScale:P,translateExtent:g.translateExtent,width:g.width,height:g.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:d(),zoomable:h()})),Te(()=>{_e(G,"width",l()),_e(G,"height",c()),_e(G,"viewBox",`${u(S)??""} ${u(M)??""} ${u(A)??""} ${u($)??""}`),_e(G,"aria-labelledby",u(H)),J=at(G,"",J,{"--xy-minimap-mask-background-color-props":t.maskColor,"--xy-minimap-mask-stroke-color-props":t.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":t.maskStrokeWidth?t.maskStrokeWidth*u(b):void 0}),_e(fe,"d",`M${u(S)-u(K)},${u(M)-u(K)}h${u(A)+u(K)*2}v${u($)+u(K)*2}h${-u(A)-u(K)*2}z
      M${u(_).x??""},${u(_).y??""}h${u(_).width??""}v${u(_).height??""}h${-u(_).width}z`)}),ge(ue,G)};Xe(se,ue=>{g.panZoom&&ue(de)})}ge(T,Z)},$$slots:{default:!0}})),ge(e,C),ze()}var q0=De("<div><!></div>");function Z0(e,t){Ie(t,!0);let n=j(t,"variant",19,()=>vn.Handle),r=j(t,"minWidth",3,10),i=j(t,"minHeight",3,10),o=j(t,"maxWidth",19,()=>Number.MAX_VALUE),s=j(t,"maxHeight",19,()=>Number.MAX_VALUE),a=j(t,"keepAspectRatio",3,!1),l=Yt(t,["$$slots","$$events","$$legacy","nodeId","position","variant","color","minWidth","minHeight","maxWidth","maxHeight","keepAspectRatio","shouldResize","onResizeStart","onResize","onResizeEnd","class","children"]);const c=Pt();let d=x(()=>typeof t.nodeId=="string"?t.nodeId:bn("svelteflow__node_id")),h,f=Me(null),g=x(()=>{let H=n()===vn.Line?"right":"bottom-right";return t.position??H}),m=x(()=>u(g).split("-"));xo(()=>(h&&q(f,s$({domNode:h,nodeId:u(d),getStoreItems:()=>({nodeLookup:c.nodeLookup,transform:[c.viewport.x,c.viewport.y,c.viewport.zoom],snapGrid:c.snapGrid??void 0,snapToGrid:!!c.snapGrid,nodeOrigin:c.nodeOrigin,paneDomNode:c.domNode}),onChange:(H,_)=>{const v=new Map;let N=H.x&&H.y?{x:H.x,y:H.y}:void 0;v.set(u(d),{...H,position:N});for(const z of _)v.set(z.id,{position:z.position});c.nodes=c.nodes.map(z=>{var D,W;const b=v.get(z.id);return b?{...z,position:{x:((D=b.position)==null?void 0:D.x)??z.position.x,y:((W=b.position)==null?void 0:W.y)??z.position.y},width:b.width??z.width,height:b.height??z.height}:z})}}),!0),()=>{var H;(H=u(f))==null||H.destroy()})),mo(()=>{var H;(H=u(f))==null||H.update({controlPosition:u(g),boundaries:{minWidth:r(),minHeight:i(),maxWidth:o(),maxHeight:s()},keepAspectRatio:!!a(),onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeEnd:t.onResizeEnd,shouldResize:t.shouldResize})});var w=q0();let y;var p=He(w);nt(p,()=>t.children??Rt),Ot(w,H=>h=H,()=>h),Te(H=>y=dn(w,y,{class:H,...l,[pt]:{"border-color":n()===vn.Line?t.color:void 0,"background-color":n()===vn.Line?void 0:t.color}}),[()=>["svelte-flow__resize-control",c.noDragClass,...u(m),n(),t.class]]),ge(e,w),ze()}const G0=(e,t,n,r)=>{t(n.id,{completed:u(r)}),dt.restyleGraph()};var U0=We('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" stroke-width="2" stroke="rgb(200, 200, 200)" fill="none" stroke-linecap="round" stroke-linejoin="round" style="position: absolute; right: 5px; bottom: 5px;"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><polyline points="16 20 20 20 20 16"></polyline><line x1="14" y1="14" x2="20" y2="20"></line><polyline points="8 4 4 4 4 8"></polyline><line x1="4" y1="4" x2="10" y2="10"></line></svg>'),Q0=De('<div class="control-panel"><input type="checkbox"></div> <div><!> <div class="sf-node"><div class="sf-node__label" contenteditable="true" spellcheck="false"> </div></div> <!> <!></div>',1);function J0(e,t){Ie(t,!0);const{updateNodeData:n}=Oo();let r=j(t,"data",7),i,o,s=Me(Ke(r().completed));const a=()=>u(s)?"opacity: 30%":"opacity: 100%",l=()=>{r().label=i.innerText,console.log(o.getBoundingClientRect())};xo(()=>{i.addEventListener("focus",()=>{const N=window.getSelection(),z=document.createRange();z.selectNodeContents(i),z.collapse(!1),N.removeAllRanges(),N.addRange(z)})});const c=N=>{N.stopPropagation()},d=()=>{};var h=Q0(),f=Re(h),g=He(f);g.__change=[G0,n,t,s];var m=xe(f,2),w=He(m);An(w,{type:"target",get position(){return ke.Left},get isConnectable(){return t.isConnectable}});var y=xe(w,2),p=He(y);p.__input=l;var H=He(p);Ot(p,N=>i=N,()=>i),Ot(y,N=>o=N,()=>o);var _=xe(y,2);Z0(_,{class:"node-hover",minWidth:100,minHeight:5,style:"background: transparent; border: none;",children:(N,z)=>{var b=U0();ge(N,b)},$$slots:{default:!0}});var v=xe(_,2);An(v,{type:"source",get position(){return ke.Right},get isConnectable(){return t.isConnectable}}),Te(N=>{at(m,N),un(H,r().label)},[a]),Ar(g,()=>u(s),N=>q(s,N)),je("mousedown",p,c,!0),je("mouseup",p,c,!0),je("click",p,c,!0),je("keydown",p,c,!0),je("compositionstart",p,c,!0),je("compositionend",p,c,!0),je("blur",p,d),ge(e,h),ze()}cn(["change","input"]);const j0={type:"custom",sourcePosition:ke.Right,targetPosition:ke.Left,origin:[.5,.5]},Bs={style:"stroke-width: 2px;",markerEnd:{type:rr.ArrowClosed,width:15,height:15},zIndex:1e4},Bi=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Cr=(e,t)=>({x:e.x-t.x,y:e.y-t.y});var ev=(e,t,n,r)=>t({nodes:u(n),edges:u(r)}),tv=De('<button>💾 Export</button> <button>📂 Import</button> <button>🗑️ Clear</button> <select><option>dark mode</option><option>light mode</option><option>system</option></select> <div style="color:#f8f8f8">Show</div> <div style="color:#f8f8f8"><input type="checkbox">past</div> <div style="color:#f8f8f8"><input type="checkbox">present</div> <div style="color:#f8f8f8"><input type="checkbox">future</div>',1),nv=De("<!> <!> <!> <!>",1),rv=De('<input type="file" accept="application/json" style="display: none;"> <!>',1);function iv(e,t){Ie(t,!0);const{screenToFlowPosition:n,getIntersectingNodes:r,getNodesBounds:i,updateNode:o,deleteElements:s,getNode:a,updateEdge:l}=Oo(),c="graph";let d=Me(!0),h=Me(!0),f=Me(!0),g;const m={nodes:[],edges:[]};try{const E=localStorage.getItem(c);g=E?JSON.parse(E):m}catch{g=m}const w={custom:J0};let y=Me(g.nodes),p=Me(g.edges),H=Me(!1);const _=E=>{u(H)&&(E.preventDefault(),E.returnValue="")};let v=0;const N=E=>/^-?\d+$/.test(E);for(const E of u(y))if(N(E.id)){const L=parseInt(E.id);L>v&&(v=L)}v++;const z=()=>`${v++}`,b=(E,L,X=null)=>{const O=n({x:E,y:L}),R=1e-5,F={...O,width:R,height:R},U=r(F);let ne;for(const te of U){if(te.id===X)continue;let ae=!1;for(const ce of U)if(ce.id!==X&&ce!=null&&ce.parentId&&(ce==null?void 0:ce.parentId)===te.id){ae=!0;break}if(!ae){ne=te;break}}return ne},D=E=>({x:E.measured.width*E.origin[0],y:E.measured.height*E.origin[1]}),W=E=>Cr(E.position,D(E)),K=(E,L,X)=>{let O=b(L,X),R=n({x:L,y:X});O&&(R=P(R,O.id));const F={id:E,data:{label:`Task ${E}`,completed:!1},position:R,parentId:O==null?void 0:O.id,...j0};if(O){const U=A(u(y));B(O.id,U)}return F},S=(E,L)=>({source:E,target:L,id:`${E}->${L}`,...Bs});let M=Me("dark");const A=E=>{const L={};for(const X of E)L[X.id]=X;return L},$=(E,L)=>{const O=A(u(y))[L];return O?O.parentId===null||O.parentId===void 0?Bi(E,W(O)):$(Bi(E,W(O)),O.parentId):E},P=(E,L)=>{const O=A(u(y))[L];return O?O.parentId===null||O.parentId===void 0?Cr(E,W(O)):P(Cr(E,W(O)),O.parentId):E},C=E=>{const L=new Map,X=[];for(const O of E)L.set(O.id,{...O,children:[]});for(const O of E){const R=L.get(O.id);if(O.parentId==null)X.push(R);else{const F=L.get(O.parentId);F&&F.children.push(R)}}return X},V=E=>{const L={...E};if(delete L.children,!E.children||E.children.length===0)return[L];const X=E.children.map(O=>V(O)).flat();return[L,...X]},Y=E=>{const X={children:C(E)};return V(X).slice(1)},T=(E,L)=>{const X=D(E),O={x:L.width*E.origin[0],y:L.height*E.origin[1]};return Cr(O,X)},B=(E,L)=>{console.log("resizing",E);const X=L[E],O=[];for(const te in L){const ae=L[te];(ae==null?void 0:ae.parentId)===E&&O.push(ae)}console.log(X);const R=i(O);P(R,E);const F=50,U={width:R.width+F,height:R.height+F};console.log(U);const ne=T(X,U);for(const te of O){const ae=Bi(te.position,ne);o(te.id,{position:ae})}o(X.id,{width:U.width,height:U.height}),X.parentId!==null&&X.parentId!==void 0&&B(X.parentId,L)},Z=E=>{q(H,!0);const{clientX:L,clientY:X}=E==null?void 0:E.event,O=E.targetNode,R=b(L,X,O.id),F=O.parentId,U=R==null?void 0:R.id;if(R&&R.id!==O.id){const te=$(O.position,O.parentId),ae=P(te,R.id);o(O.id,{parentId:R.id,position:ae})}else if(O.parentId!==null&&O.parentId!==void 0){const te=$(O.position,O.parentId);o(O.id,{parentId:void 0,position:te})}const ne=A(u(y));U!=null&&B(U,ne),F!=null&&B(F,ne),q(y,Y(u(y)))},se=({event:E,node:L})=>{q(H,!0),E.preventDefault();const{clientX:X,clientY:O}=E,R=z();q(y,[...u(y),K(R,X,O)]),dt.restyleGraph()},de=({event:E})=>{q(H,!0),E.preventDefault();const{clientX:L,clientY:X}=E,O=z();q(y,[...u(y),K(O,L,X)]),dt.restyleGraph()},ue=(E,L)=>{var ae,ce;if(q(H,!0),L.isValid){dt.restyleGraph();return}const X=((ae=L.fromHandle)==null?void 0:ae.type)==="source",O=((ce=L.fromNode)==null?void 0:ce.id)??"1",{clientX:R,clientY:F}="changedTouches"in E?E.changedTouches[0]:E,U=z(),ne=K(U,R,F),te=X?S(O,U):S(U,O);q(y,[...u(y),ne]),q(p,[...u(p),te]),dt.restyleGraph()};let G;const J=()=>{(u(y).length>0||u(p).length>0)&&!window.confirm("You have unsaved changes - importing from a file will discard them. Continue?")||G.click()},re=async E=>{const[L]=E.target.files;if(L)try{const X=await L.text(),O=JSON.parse(X);await s({nodes:u(y),edges:u(p)}),q(y,O.nodes),q(p,O.edges);for(const R of u(y))if(R.hidden=!1,N(R.id)){const F=parseInt(R.id);F>v&&(v=F)}v++,q(H,!1)}catch(X){console.error("Failed to load/parse JSON",X)}finally{E.target.value=""}},ee=E=>{const L=JSON.stringify(E,null,2),X=new Blob([L],{type:"application/json"}),O=URL.createObjectURL(X),R=document.createElement("a");R.download="graph-project.json",R.href=O,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(O),q(H,!1)},he=()=>{(u(y).length>0||u(p).length>0)&&!window.confirm("Clear entire graph?")||(q(y,[]),q(p,[]),v=1,q(H,!1))},fe=()=>{localStorage.setItem(c,JSON.stringify({nodes:u(y).map(E=>({...E,hidden:!1})),edges:u(p).map(E=>({...E,hidden:!1}))})),q(H,!1)};dt.screenToFlowPosition=n,dt.restyleGraph=()=>{var E,L,X;for(const O of u(y)){let R=!0;const F=ag(O,u(y),u(p));for(const ne of F)ne.data.completed||(R=!1);const U=!(O.data.completed?u(d):u(R?h:f));o(O.id,{hidden:U})}for(const O of u(p)){const R=(E=a(O.source))==null?void 0:E.hidden,F=(L=a(O.target))==null?void 0:L.hidden,U=R||F;(X=a(O.target))==null||X.data.completed,l(O.id,{hidden:U??void 0})}},dt.restyleGraph(),Ht(()=>{fe()});var oe=rv();je("beforeunload",qe,_);var ie=Re(oe);ie.__change=re,Ot(ie,E=>G=E,()=>G);var Q=xe(ie,2);m0(Q,{get colorMode(){return u(M)},nodeTypes:w,defaultEdgeOptions:Bs,fitView:!0,onconnectend:ue,onnodedragstop:Z,onpanecontextmenu:de,onnodecontextmenu:se,minZoom:.2,maxZoom:6,get nodes(){return u(y)},set nodes(E){q(y,E)},get edges(){return u(p)},set edges(E){q(p,E)},children:(E,L)=>{var X=nv(),O=Re(X);Y0(O,{});var R=xe(O,2);z0(R,{});var F=xe(R,2);K0(F,{});var U=xe(F,2);Si(U,{style:"display:flex; flex-direction: column; gap:2px;",children:(ne,te)=>{var ae=tv(),ce=Re(ae);ce.__click=[ev,ee,y,p];var me=xe(ce,2);me.__click=J;var pe=xe(me,2);pe.__click=he;var $e=xe(pe,2),ve=He($e);ve.value=ve.__value="dark";var ye=xe(ve);ye.value=ye.__value="light";var we=xe(ye);we.value=we.__value="system";var be=xe($e,4),Pe=He(be);Pe.__change=function(...Ee){var k;(k=dt.restyleGraph)==null||k.apply(this,Ee)};var Ce=xe(be,2),Ne=He(Ce);Ne.__change=function(...Ee){var k;(k=dt.restyleGraph)==null||k.apply(this,Ee)};var Ae=xe(Ce,2),Se=He(Ae);Se.__change=function(...Ee){var k;(k=dt.restyleGraph)==null||k.apply(this,Ee)},mu($e,()=>u(M),Ee=>q(M,Ee)),Ar(Pe,()=>u(d),Ee=>q(d,Ee)),Ar(Ne,()=>u(h),Ee=>q(h,Ee)),Ar(Se,()=>u(f),Ee=>q(f,Ee)),ge(ne,ae)},$$slots:{default:!0}}),ge(E,X)},$$slots:{default:!0}}),ge(e,oe),ze()}cn(["change","click"]);const dt=Ke({restyleGraph:null,screenToFlowPosition:null});function ov(e){p0(e,{children:(t,n)=>{iv(t,{})},$$slots:{default:!0}})}iu(ov,{target:document.getElementById("app")});
