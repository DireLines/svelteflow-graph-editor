var Zl=Object.defineProperty;var Lo=e=>{throw TypeError(e)};var Gl=(e,t,n)=>t in e?Zl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fe=(e,t,n)=>Gl(e,typeof t!="symbol"?t+"":t,n),Pi=(e,t,n)=>t.has(e)||Lo("Cannot "+n);var A=(e,t,n)=>(Pi(e,t,"read from private field"),n?n.call(e):t.get(e)),ae=(e,t,n)=>t.has(e)?Lo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),On=(e,t,n,r)=>(Pi(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Yo=(e,t,n)=>(Pi(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Vo=!1;var ni=Array.isArray,Ul=Array.prototype.indexOf,lo=Array.from,Ql=Object.defineProperty,qt=Object.getOwnPropertyDescriptor,Bs=Object.getOwnPropertyDescriptors,Fs=Object.prototype,Jl=Array.prototype,ri=Object.getPrototypeOf,Xo=Object.isExtensible;function Dn(e){return typeof e=="function"}const Ot=()=>{};function jl(e){return e()}function Hr(e){for(var t=0;t<e.length;t++)e[t]()}const gt=2,Ks=4,ii=8,co=16,Dt=32,An=64,Tr=128,st=256,Or=512,rt=1024,bt=2048,an=4096,At=8192,oi=16384,ec=32768,lr=65536,tc=1<<17,nc=1<<19,qs=1<<20,Wi=1<<21,pt=Symbol("$state"),Zs=Symbol("legacy props"),rc=Symbol("");function Gs(e){return e===this.v}function Us(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function uo(e){return!Us(e,this.v)}function ic(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function oc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function sc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ac(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function lc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function cc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function uc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function dc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let In=!1,fc=!1;function hc(){In=!0}const fo=1,ho=2,Qs=4,gc=8,$c=16,vc=1,yc=2,mc=4,pc=8,wc=16,Js=1,bc=2,Je=Symbol(),_c="http://www.w3.org/1999/xhtml",xc="@attach",kc=[];function js(e,t=!1){return Cr(e,new Map,"",kc)}function Cr(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ni(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var a=0;a<e.length;a+=1){var l=e[a];a in e&&(s[a]=Cr(l,t,n,r))}return s}if(ri(e)===Fs){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=Cr(e[c],t,n,r);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Cr(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function go(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let De=null;function Wo(e){De=e}function wn(e){return ea().get(e)}function Kn(e,t){return ea().set(e,t),t}function Ee(e,t=!1,n){var r=De={p:De,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};In&&!t&&(De.l={s:null,u:null,r1:[],r2:_n(!1)}),$o(()=>{r.d=!0})}function Se(e){const t=De;if(t!==null){const s=t.e;if(s!==null){var n=Ve,r=Le;t.e=null;try{for(var i=0;i<s.length;i++){var o=s[i];Ut(o.effect),_t(o.reaction),Qt(o.fn)}}finally{Ut(n),_t(r)}}De=t.p,t.m=!0}return{}}function si(){return!In||De!==null&&De.l===null}function ea(e){return De===null&&go(),De.c??(De.c=new Map(Ec(De)||void 0))}function Ec(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Ge(e){if(typeof e!="object"||e===null||pt in e)return e;const t=ri(e);if(t!==Fs&&t!==Jl)return e;var n=new Map,r=ni(e),i=Ie(0),o=Le,s=a=>{var l=Le;_t(o);var c=a();return _t(l),c};return r&&n.set("length",Ie(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&cc();var u=n.get(l);return u===void 0?(u=s(()=>Ie(c.value)),n.set(l,u)):Z(u,s(()=>Ge(c.value))),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0)l in a&&(n.set(l,s(()=>Ie(Je))),Ci(i));else{if(r&&typeof l=="string"){var u=n.get("length"),h=Number(l);Number.isInteger(h)&&h<u.v&&Z(u,h)}Z(c,Je),Ci(i)}return!0},get(a,l,c){var g;if(l===pt)return e;var u=n.get(l),h=l in a;if(u===void 0&&(!h||(g=qt(a,l))!=null&&g.writable)&&(u=s(()=>Ie(Ge(h?a[l]:Je))),n.set(l,u)),u!==void 0){var f=d(u);return f===Je?void 0:f}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var u=n.get(l);u&&(c.value=d(u))}else if(c===void 0){var h=n.get(l),f=h==null?void 0:h.v;if(h!==void 0&&f!==Je)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(a,l){var f;if(l===pt)return!0;var c=n.get(l),u=c!==void 0&&c.v!==Je||Reflect.has(a,l);if(c!==void 0||Ve!==null&&(!u||(f=qt(a,l))!=null&&f.writable)){c===void 0&&(c=s(()=>Ie(u?Ge(a[l]):Je)),n.set(l,c));var h=d(c);if(h===Je)return!1}return u},set(a,l,c,u){var O;var h=n.get(l),f=l in a;if(r&&l==="length")for(var g=c;g<h.v;g+=1){var y=n.get(g+"");y!==void 0?Z(y,Je):g in a&&(y=s(()=>Ie(Je)),n.set(g+"",y))}h===void 0?(!f||(O=qt(a,l))!=null&&O.writable)&&(h=s(()=>Ie(void 0)),Z(h,s(()=>Ge(c))),n.set(l,h)):(f=h.v!==Je,Z(h,s(()=>Ge(c))));var p=Reflect.getOwnPropertyDescriptor(a,l);if(p!=null&&p.set&&p.set.call(u,c),!f){if(r&&typeof l=="string"){var m=n.get("length"),w=Number(l);Number.isInteger(w)&&w>=m.v&&Z(m,w+1)}Ci(i)}return!0},ownKeys(a){d(i);var l=Reflect.ownKeys(a).filter(h=>{var f=n.get(h);return f===void 0||f.v!==Je});for(var[c,u]of n)u.v!==Je&&!(c in a)&&l.push(c);return l},setPrototypeOf(){uc()}})}function Ci(e,t=1){Z(e,e.v+t)}function Bo(e){try{if(e!==null&&typeof e=="object"&&pt in e)return e[pt]}catch{}return e}function Sc(e,t){return Object.is(Bo(e),Bo(t))}function bn(e){var t=gt|bt,n=Le!==null&&(Le.f&gt)!==0?Le:null;return Ve===null||n!==null&&(n.f&st)!==0?t|=st:Ve.f|=qs,{ctx:De,deps:null,effects:null,equals:Gs,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??Ve}}function x(e){const t=bn(e);return ya(t),t}function ta(e){const t=bn(e);return t.equals=uo,t}function na(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ht(t[n])}}function Pc(e){for(var t=e.parent;t!==null;){if((t.f&gt)===0)return t;t=t.parent}return null}function ra(e){var t,n=Ve;Ut(Pc(e));try{na(e),t=ba(e)}finally{Ut(n)}return t}function ia(e){var t=ra(e),n=(Kt||(e.f&st)!==0)&&e.deps!==null?an:rt;$t(e,n),e.equals(t)||(e.v=t,e.wv=pa())}const qn=new Map;function _n(e,t){var n={f:0,v:e,reactions:null,equals:Gs,rv:0,wv:0};return n}function Ie(e,t){const n=_n(e);return ya(n),n}function oa(e,t=!1){var r;const n=_n(e);return t||(n.equals=uo),In&&De!==null&&De.l!==null&&((r=De.l).s??(r.s=[])).push(n),n}function Z(e,t,n=!1){Le!==null&&!ft&&si()&&(Le.f&(gt|co))!==0&&!(Qe!=null&&Qe.includes(e))&&dc();let r=n?Ge(t):t;return Bi(e,r)}function Bi(e,t){if(!e.equals(t)){var n=e.v;ur?qn.set(e,t):qn.set(e,n),e.v=t,(e.f&gt)!==0&&((e.f&bt)!==0&&ra(e),$t(e,(e.f&st)===0?rt:an)),e.wv=pa(),sa(e,bt),si()&&Ve!==null&&(Ve.f&rt)!==0&&(Ve.f&(Dt|An))===0&&(ut===null?Rc([e]):ut.push(e))}return t}function sa(e,t){var n=e.reactions;if(n!==null)for(var r=si(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;(a&bt)===0&&(!r&&s===Ve||($t(s,t),(a&(rt|st))!==0&&((a&gt)!==0?sa(s,an):di(s))))}}let Cc=!1;var Ke,aa,la,ca;function Nc(){if(Ke===void 0){Ke=window,aa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;la=qt(t,"firstChild").get,ca=qt(t,"nextSibling").get,Xo(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xo(n)&&(n.__t=void 0)}}function ai(e=""){return document.createTextNode(e)}function Ct(e){return la.call(e)}function li(e){return ca.call(e)}function Re(e,t){return Ct(e)}function Oe(e,t){{var n=Ct(e);return n instanceof Comment&&n.data===""?li(n):n}}function ke(e,t=1,n=!1){let r=e;for(;t--;)r=li(r);return r}function Mc(e){e.textContent=""}function ua(e){Ve===null&&Le===null&&sc(),Le!==null&&(Le.f&st)!==0&&Ve===null&&oc(),ur&&ic()}function Ac(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function zn(e,t,n,r=!0){var i=Ve,o={ctx:De,deps:null,nodes_start:null,nodes_end:null,f:e|bt,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{mo(o),o.f|=ec}catch(l){throw Ht(o),l}else t!==null&&di(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(qs|Tr))===0;if(!s&&r&&(i!==null&&Ac(o,i),Le!==null&&(Le.f&gt)!==0)){var a=Le;(a.effects??(a.effects=[])).push(o)}return o}function Ic(){return Le!==null&&!ft}function $o(e){const t=zn(ii,null,!1);return $t(t,rt),t.teardown=e,t}function zt(e){ua();var t=Ve!==null&&(Ve.f&Dt)!==0&&De!==null&&!De.m;if(t){var n=De;(n.e??(n.e=[])).push({fn:e,effect:Ve,reaction:Le})}else{var r=Qt(e);return r}}function vo(e){return ua(),Hn(e)}function zc(e){const t=zn(An,e,!0);return(n={})=>new Promise(r=>{n.outro?Zn(t,()=>{Ht(t),r(void 0)}):(Ht(t),r(void 0))})}function Qt(e){return zn(Ks,e,!1)}function Hn(e){return zn(ii,e,!0)}function ze(e,t=[],n=bn){const r=t.map(n);return cr(()=>e(...r.map(d)))}function cr(e,t=0){return zn(ii|co|t,e,!0)}function rn(e,t=!0){return zn(ii|Dt,e,!0,t)}function da(e){var t=e.teardown;if(t!==null){const n=ur,r=Le;Fo(!0),_t(null);try{t.call(null)}finally{Fo(n),_t(r)}}}function fa(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&An)!==0?n.parent=null:Ht(n,t),n=r}}function Hc(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Dt)===0&&Ht(t),t=n}}function Ht(e,t=!0){var n=!1;(t||(e.f&nc)!==0)&&e.nodes_start!==null&&(Tc(e.nodes_start,e.nodes_end),n=!0),fa(e,t&&!n),Vr(e,0),$t(e,oi);var r=e.transitions;if(r!==null)for(const o of r)o.stop();da(e);var i=e.parent;i!==null&&i.first!==null&&ha(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Tc(e,t){for(;e!==null;){var n=e===t?null:li(e);e.remove(),e=n}}function ha(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Zn(e,t){var n=[];yo(e,n,!0),ga(n,()=>{Ht(e),t&&t()})}function ga(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function yo(e,t,n){if((e.f&At)===0){if(e.f^=At,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&lr)!==0||(r.f&Dt)!==0;yo(r,t,o?n:!1),r=i}}}function Dr(e){$a(e,!0)}function $a(e,t){if((e.f&At)!==0){e.f^=At,(e.f&rt)===0&&(e.f^=rt),dr(e)&&($t(e,bt),di(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&lr)!==0||(n.f&Dt)!==0;$a(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Gn=[],Fi=[];function va(){var e=Gn;Gn=[],Hr(e)}function Oc(){var e=Fi;Fi=[],Hr(e)}function ci(e){Gn.length===0&&queueMicrotask(va),Gn.push(e)}function Dc(){Gn.length>0&&va(),Fi.length>0&&Oc()}let Nr=!1,Rr=!1,Lr=null,tn=!1,ur=!1;function Fo(e){ur=e}let Wn=[];let Le=null,ft=!1;function _t(e){Le=e}let Ve=null;function Ut(e){Ve=e}let Qe=null;function ya(e){Le!==null&&Le.f&Wi&&(Qe===null?Qe=[e]:Qe.push(e))}let Ze=null,it=0,ut=null;function Rc(e){ut=e}let ma=1,Yr=0,Kt=!1;function pa(){return++ma}function dr(e){var h;var t=e.f;if((t&bt)!==0)return!0;if((t&an)!==0){var n=e.deps,r=(t&st)!==0;if(n!==null){var i,o,s=(t&Or)!==0,a=r&&Ve!==null&&!Kt,l=n.length;if(s||a){var c=e,u=c.parent;for(i=0;i<l;i++)o=n[i],(s||!((h=o==null?void 0:o.reactions)!=null&&h.includes(c)))&&(o.reactions??(o.reactions=[])).push(c);s&&(c.f^=Or),a&&u!==null&&(u.f&st)===0&&(c.f^=st)}for(i=0;i<l;i++)if(o=n[i],dr(o)&&ia(o),o.wv>e.wv)return!0}(!r||Ve!==null&&!Kt)&&$t(e,rt)}return!1}function Lc(e,t){for(var n=t;n!==null;){if((n.f&Tr)!==0)try{n.fn(e);return}catch{n.f^=Tr}n=n.parent}throw Nr=!1,e}function Ko(e){return(e.f&oi)===0&&(e.parent===null||(e.parent.f&Tr)===0)}function ui(e,t,n,r){if(Nr){if(n===null&&(Nr=!1),Ko(t))throw e;return}if(n!==null&&(Nr=!0),Lc(e,t),Ko(t))throw e}function wa(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];Qe!=null&&Qe.includes(e)||((o.f&gt)!==0?wa(o,t,!1):t===o&&(n?$t(o,bt):(o.f&rt)!==0&&$t(o,an),di(o)))}}function ba(e){var g;var t=Ze,n=it,r=ut,i=Le,o=Kt,s=Qe,a=De,l=ft,c=e.f;Ze=null,it=0,ut=null,Kt=(c&st)!==0&&(ft||!tn||Le===null),Le=(c&(Dt|An))===0?e:null,Qe=null,Wo(e.ctx),ft=!1,Yr++,e.f|=Wi;try{var u=(0,e.fn)(),h=e.deps;if(Ze!==null){var f;if(Vr(e,it),h!==null&&it>0)for(h.length=it+Ze.length,f=0;f<Ze.length;f++)h[it+f]=Ze[f];else e.deps=h=Ze;if(!Kt)for(f=it;f<h.length;f++)((g=h[f]).reactions??(g.reactions=[])).push(e)}else h!==null&&it<h.length&&(Vr(e,it),h.length=it);if(si()&&ut!==null&&!ft&&h!==null&&(e.f&(gt|an|bt))===0)for(f=0;f<ut.length;f++)wa(ut[f],e);return i!==null&&i!==e&&(Yr++,ut!==null&&(r===null?r=ut:r.push(...ut))),u}finally{Ze=t,it=n,ut=r,Le=i,Kt=o,Qe=s,Wo(a),ft=l,e.f^=Wi}}function Yc(e,t){let n=t.reactions;if(n!==null){var r=Ul.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&gt)!==0&&(Ze===null||!Ze.includes(t))&&($t(t,an),(t.f&(st|Or))===0&&(t.f^=Or),na(t),Vr(t,0))}function Vr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Yc(e,n[r])}function mo(e){var t=e.f;if((t&oi)===0){$t(e,rt);var n=Ve,r=De,i=tn;Ve=e,tn=!0;try{(t&co)!==0?Hc(e):fa(e),da(e);var o=ba(e);e.teardown=typeof o=="function"?o:null,e.wv=ma;var s=e.deps,a;Vo&&fc&&e.f&bt}catch(l){ui(l,e,n,r||e.ctx)}finally{tn=i,Ve=n}}}function Vc(){try{ac()}catch(e){if(Lr!==null)ui(e,Lr,null);else throw e}}function _a(){var e=tn;try{var t=0;for(tn=!0;Wn.length>0;){t++>1e3&&Vc();var n=Wn,r=n.length;Wn=[];for(var i=0;i<r;i++){var o=Wc(n[i]);Xc(o)}qn.clear()}}finally{Rr=!1,tn=e,Lr=null}}function Xc(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(oi|At))===0)try{dr(r)&&(mo(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?ha(r):r.fn=null))}catch(i){ui(i,r,null,r.ctx)}}}function di(e){Rr||(Rr=!0,queueMicrotask(_a));for(var t=Lr=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(An|Dt))!==0){if((n&rt)===0)return;t.f^=rt}}Wn.push(t)}function Wc(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(Dt|An))!==0,o=i&&(r&rt)!==0;if(!o&&(r&At)===0){if((r&Ks)!==0)t.push(n);else if(i)n.f^=rt;else try{dr(n)&&mo(n)}catch(l){ui(l,n,null,n.ctx)}var s=n.first;if(s!==null){n=s;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}return t}function Bc(e){for(var t;;){if(Dc(),Wn.length===0)return t;Rr=!0,_a()}}async function Fc(){await Promise.resolve(),Bc()}function d(e){var t=e.f,n=(t&gt)!==0;if(Le!==null&&!ft){if(!(Qe!=null&&Qe.includes(e))){var r=Le.deps;e.rv<Yr&&(e.rv=Yr,Ze===null&&r!==null&&r[it]===e?it++:Ze===null?Ze=[e]:(!Kt||!Ze.includes(e))&&Ze.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&st)===0&&(i.f^=st)}return n&&(i=e,dr(i)&&ia(i)),ur&&qn.has(e)?qn.get(e):e.v}function Ue(e){var t=ft;try{return ft=!0,e()}finally{ft=t}}const Kc=-7169;function $t(e,t){e.f=e.f&Kc|t}function xa(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(pt in e)Ki(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&pt in n&&Ki(n)}}}function Ki(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Ki(e[r],t)}catch{}const n=ri(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Bs(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function qc(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Zc=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Gc(e){return Zc.includes(e)}const Uc={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Qc(e){return e=e.toLowerCase(),Uc[e]??e}const Jc=["touchstart","touchmove"];function jc(e){return Jc.includes(e)}function eu(e,t){if(t){const n=document.body;e.autofocus=!0,ci(()=>{document.activeElement===n&&e.focus()})}}let qo=!1;function tu(){qo||(qo=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ka(e){var t=Le,n=Ve;_t(null),Ut(null);try{return e()}finally{_t(t),Ut(n)}}function Ea(e,t,n,r=n){e.addEventListener(t,()=>ka(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),tu()}const Sa=new Set,qi=new Set;function po(e,t,n,r={}){function i(o){if(r.capture||Yn.call(t,o),!o.cancelBubble)return ka(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ci(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Zi(e,t,n,r={}){var i=po(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function je(e,t,n,r,i){var o={capture:r,passive:i},s=po(e,t,n,o);(t===document.body||t===window||t===document)&&$o(()=>{t.removeEventListener(e,s,o)})}function ln(e){for(var t=0;t<e.length;t++)Sa.add(e[t]);for(var n of qi)n(e)}function Yn(e){var O;var t=this,n=t.ownerDocument,r=e.type,i=((O=e.composedPath)==null?void 0:O.call(e))||[],o=i[0]||e.target,s=0,a=e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){Ql(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=Le,h=Ve;_t(null),Ut(null);try{for(var f,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+r];if(p!=null&&(!o.disabled||e.target===o))if(ni(p)){var[m,...w]=p;m.apply(o,[e,...w])}else p.call(o,e)}catch(_){f?g.push(_):f=_}if(e.cancelBubble||y===t||y===null)break;o=y}if(f){for(let _ of g)queueMicrotask(()=>{throw _});throw f}}finally{e.__root=t,delete e.currentTarget,_t(u),Ut(h)}}}function Pa(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function xn(e,t){var n=Ve;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Te(e,t){var n=(t&Js)!==0,r=(t&bc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Pa(o?e:"<!>"+e),n||(i=Ct(i)));var s=r||aa?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Ct(s),l=s.lastChild;xn(a,l)}else xn(s,s);return s}}function We(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&Js)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=Pa(o),l=Ct(a);if(i)for(s=document.createDocumentFragment();Ct(l);)s.appendChild(Ct(l));else s=Ct(l)}var c=s.cloneNode(!0);if(i){var u=Ct(c),h=c.lastChild;xn(u,h)}else xn(c,c);return c}}function Ca(e=""){{var t=ai(e+"");return xn(t,t),t}}function et(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ai();return e.append(t,n),xn(t,n),e}function fe(e,t){e!==null&&e.before(t)}function cn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function nu(e,t){return ru(e,t)}const dn=new Map;function ru(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){Nc();var a=new Set,l=h=>{for(var f=0;f<h.length;f++){var g=h[f];if(!a.has(g)){a.add(g);var y=jc(g);t.addEventListener(g,Yn,{passive:y});var p=dn.get(g);p===void 0?(document.addEventListener(g,Yn,{passive:y}),dn.set(g,1)):dn.set(g,p+1)}}};l(lo(Sa)),qi.add(l);var c=void 0,u=zc(()=>{var h=n??t.appendChild(ai());return rn(()=>{if(o){Ee({});var f=De;f.c=o}i&&(r.$$events=i),c=e(h,r)||{},o&&Se()}),()=>{var y;for(var f of a){t.removeEventListener(f,Yn);var g=dn.get(f);--g===0?(document.removeEventListener(f,Yn),dn.delete(f)):dn.set(f,g)}qi.delete(l),h!==n&&((y=h.parentNode)==null||y.removeChild(h))}});return iu.set(c,u),c}let iu=new WeakMap;function Xe(e,t,[n,r]=[0,0]){var i=e,o=null,s=null,a=Je,l=n>0?lr:0,c=!1;const u=(f,g=!0)=>{c=!0,h(g,f)},h=(f,g)=>{a!==(a=f)&&(a?(o?Dr(o):g&&(o=rn(()=>g(i))),s&&Zn(s,()=>{s=null})):(s?Dr(s):g&&(s=rn(()=>g(i,[n+1,r]))),o&&Zn(o,()=>{o=null})))};cr(()=>{c=!1,t(u),c||h(null,null)},l)}function ou(e,t){Hn(()=>{var n=t();for(var r in n){var i=n[r];i?e.style.setProperty(r,i):e.style.removeProperty(r)}}),$o(()=>{e.remove()})}function su(e,t,n,r){for(var i=[],o=t.length,s=0;s<o;s++)yo(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;Mc(l),l.append(n),r.clear(),Vt(e,t[0].prev,t[o-1].next)}ga(i,()=>{for(var c=0;c<o;c++){var u=t[c];a||(r.delete(u.k),Vt(e,u.prev,u.next)),Ht(u.e,!a)}})}function fi(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&Qs)!==0;if(l){var c=e;s=c.appendChild(ai())}var u=null,h=!1,f=ta(()=>{var g=n();return ni(g)?g:g==null?[]:lo(g)});cr(()=>{var g=d(f),y=g.length;h&&y===0||(h=y===0,au(g,a,s,i,t,r,n),o!==null&&(y===0?u?Dr(u):u=rn(()=>o(s)):u!==null&&Zn(u,()=>{u=null})),d(f))})}function au(e,t,n,r,i,o,s){var $,S,P,V;var a=(i&gc)!==0,l=(i&(fo|ho))!==0,c=e.length,u=t.items,h=t.first,f=h,g,y=null,p,m=[],w=[],O,_,v,N;if(a)for(N=0;N<c;N+=1)O=e[N],_=o(O,N),v=u.get(_),v!==void 0&&(($=v.a)==null||$.measure(),(p??(p=new Set)).add(v));for(N=0;N<c;N+=1){if(O=e[N],_=o(O,N),v=u.get(_),v===void 0){var z=f?f.e.nodes_start:n;y=cu(z,t,y,y===null?t.first:y.next,O,_,N,r,i,s),u.set(_,y),m=[],w=[],f=y.next;continue}if(l&&lu(v,O,N,i),(v.e.f&At)!==0&&(Dr(v.e),a&&((S=v.a)==null||S.unfix(),(p??(p=new Set)).delete(v))),v!==f){if(g!==void 0&&g.has(v)){if(m.length<w.length){var b=w[0],R;y=b.prev;var W=m[0],K=m[m.length-1];for(R=0;R<m.length;R+=1)Zo(m[R],b,n);for(R=0;R<w.length;R+=1)g.delete(w[R]);Vt(t,W.prev,K.next),Vt(t,y,W),Vt(t,K,b),f=b,y=K,N-=1,m=[],w=[]}else g.delete(v),Zo(v,f,n),Vt(t,v.prev,v.next),Vt(t,v,y===null?t.first:y.next),Vt(t,y,v),y=v;continue}for(m=[],w=[];f!==null&&f.k!==_;)(f.e.f&At)===0&&(g??(g=new Set)).add(f),w.push(f),f=f.next;if(f===null)continue;v=f}m.push(v),y=v,f=v.next}if(f!==null||g!==void 0){for(var k=g===void 0?[]:lo(g);f!==null;)(f.e.f&At)===0&&k.push(f),f=f.next;var C=k.length;if(C>0){var M=(i&Qs)!==0&&c===0?n:null;if(a){for(N=0;N<C;N+=1)(P=k[N].a)==null||P.measure();for(N=0;N<C;N+=1)(V=k[N].a)==null||V.fix()}su(t,k,M,u)}}a&&ci(()=>{var L;if(p!==void 0)for(v of p)(L=v.a)==null||L.apply()}),Ve.first=t.first&&t.first.e,Ve.last=y&&y.e}function lu(e,t,n,r){(r&fo)!==0&&Bi(e.v,t),(r&ho)!==0?Bi(e.i,n):e.i=n}function cu(e,t,n,r,i,o,s,a,l,c){var u=(l&fo)!==0,h=(l&$c)===0,f=u?h?oa(i):_n(i):i,g=(l&ho)===0?s:_n(s),y={i:g,v:f,k:o,a:null,e:null,prev:n,next:r};try{return y.e=rn(()=>a(e,f,g,c),Cc),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function Zo(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var s=li(o);i.before(o),o=s}}function Vt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function nt(e,t,...n){var r=e,i=Ot,o;cr(()=>{i!==(i=t())&&(o&&(Ht(o),o=null),o=rn(()=>i(r,...n)))},lr)}function wo(e,t,n){var r=e,i,o;cr(()=>{i!==(i=t())&&(o&&(Zn(o),o=null),i&&(o=rn(()=>n(r,i))))},lr)}function qe(e,t,n){Qt(()=>{var r=Ue(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};Hn(()=>{var s=n();xa(s),i&&Us(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function uu(e,t){Qt(()=>{const n=t();return n&&n(e)})}function Na(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Na(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function du(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Na(e))&&(r&&(r+=" "),r+=t);return r}function kt(e){return typeof e=="object"?du(e):e??""}const Go=[...` 	
\r\fÂ \v\uFEFF`];function fu(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||Go.includes(r[s-1]))&&(a===r.length||Go.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function Uo(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function Ni(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function hu(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(Ni)),i&&l.push(...Object.keys(i).map(Ni));var c=0,u=-1;const p=e.length;for(var h=0;h<p;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):o?o===f&&(o=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!a&&o===!1&&s===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===p-1){if(u!==-1){var g=Ni(e.substring(c,u).trim());if(!l.includes(g)){f!==";"&&h++;var y=e.substring(c,h).trim();n+=" "+y+";"}}c=h+1,u=-1}}}}return r&&(n+=Uo(r)),i&&(n+=Uo(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function vt(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=fu(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var c=!!o[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return o}function Mi(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function at(e,t,n,r){var i=e.__style;if(i!==t){var o=hu(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(Mi(e,n==null?void 0:n[0],r[0]),Mi(e,n==null?void 0:n[1],r[1],"important")):Mi(e,n,r));return r}const hn=Symbol("class"),mt=Symbol("style"),Ma=Symbol("is custom element"),Aa=Symbol("is html");function gu(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function _e(e,t,n,r){var i=Ia(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[rc]=n),n==null?e.removeAttribute(t):typeof n!="string"&&za(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function un(e,t,n,r,i=!1){var o=Ia(e),s=o[Ma],a=!o[Aa],l=t||{},c=e.tagName==="OPTION";for(var u in t)u in n||(n[u]=null);n.class?n.class=kt(n.class):(r||n[hn])&&(n.class=null),n[mt]&&(n.style??(n.style=null));var h=za(e);for(const _ in n){let v=n[_];if(c&&_==="value"&&v==null){e.value=e.__value="",l[_]=v;continue}if(_==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";vt(e,f,v,r,t==null?void 0:t[hn],n[hn]),l[_]=v,l[hn]=n[hn];continue}if(_==="style"){at(e,v,t==null?void 0:t[mt],n[mt]),l[_]=v,l[mt]=n[mt];continue}var g=l[_];if(v!==g){l[_]=v;var y=_[0]+_[1];if(y!=="$$")if(y==="on"){const N={},z="$$"+_;let b=_.slice(2);var p=Gc(b);if(qc(b)&&(b=b.slice(0,-7),N.capture=!0),!p&&g){if(v!=null)continue;e.removeEventListener(b,l[z],N),l[z]=null}if(v!=null)if(p)e[`__${b}`]=v,ln([b]);else{let R=function(W){l[_].call(this,W)};var O=R;l[z]=po(b,e,R,N)}else p&&(e[`__${b}`]=void 0)}else if(_==="style")_e(e,_,v);else if(_==="autofocus")eu(e,!!v);else if(!s&&(_==="__value"||_==="value"&&v!=null))e.value=e.__value=v;else if(_==="selected"&&c)gu(e,v);else{var m=_;a||(m=Qc(m));var w=m==="defaultValue"||m==="defaultChecked";if(v==null&&!s&&!w)if(o[_]=null,m==="value"||m==="checked"){let N=e;const z=t===void 0;if(m==="value"){let b=N.defaultValue;N.removeAttribute(m),N.defaultValue=b,N.value=N.__value=z?b:null}else{let b=N.defaultChecked;N.removeAttribute(m),N.defaultChecked=b,N.checked=z?b:!1}}else e.removeAttribute(_);else w||h.includes(m)&&(s||typeof v!="string")?e[m]=v:typeof v!="function"&&_e(e,m,v)}}}for(let _ of Object.getOwnPropertySymbols(n))_.description===xc&&uu(e,()=>n[_]);return l}function Ia(e){return e.__attributes??(e.__attributes={[Ma]:e.nodeName.includes("-"),[Aa]:e.namespaceURI===_c})}var Qo=new Map;function za(e){var t=Qo.get(e.nodeName);if(t)return t;Qo.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Bs(r);for(var o in n)n[o].set&&t.push(o);r=ri(r)}return t}function $u(e,t,n=t){Ea(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),Ue(t)==null&&n(e.checked),Hn(()=>{var r=t();e.checked=!!r})}function Ha(e,t,n){if(e.multiple)return mu(e,t);for(var r of e.options){var i=Bn(r);if(Sc(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function vu(e,t){Qt(()=>{var n=new MutationObserver(()=>{var r=e.__value;Ha(e,r)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function yu(e,t,n=t){var r=!0;Ea(e,"change",i=>{var o=i?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(o),Bn);else{var a=e.querySelector(o)??e.querySelector("option:not([disabled])");s=a&&Bn(a)}n(s)}),Qt(()=>{var i=t();if(Ha(e,i,r),r&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Bn(o),n(i))}e.__value=i,r=!1}),vu(e)}function mu(e,t){for(var n of e.options)n.selected=~t.indexOf(Bn(n))}function Bn(e){return"__value"in e?e.__value:e.value}var Ft,pn,or,ei,Ta;const ti=class ti{constructor(t){ae(this,ei);ae(this,Ft,new WeakMap);ae(this,pn);ae(this,or);On(this,or,t)}observe(t,n){var r=A(this,Ft).get(t)||new Set;return r.add(n),A(this,Ft).set(t,r),Yo(this,ei,Ta).call(this).observe(t,A(this,or)),()=>{var i=A(this,Ft).get(t);i.delete(n),i.size===0&&(A(this,Ft).delete(t),A(this,pn).unobserve(t))}}};Ft=new WeakMap,pn=new WeakMap,or=new WeakMap,ei=new WeakSet,Ta=function(){return A(this,pn)??On(this,pn,new ResizeObserver(t=>{for(var n of t){ti.entries.set(n.target,n);for(var r of A(this,Ft).get(n.target)||[])r(n)}}))},Fe(ti,"entries",new WeakMap);let Gi=ti;var pu=new Gi({box:"border-box"});function Jo(e,t,n){var r=pu.observe(e,()=>n(e[t]));Qt(()=>(Ue(()=>n(e[t])),r))}function jo(e,t){return e===t||(e==null?void 0:e[pt])===t}function Jt(e={},t,n,r){return Qt(()=>{var i,o;return Hn(()=>{i=o,o=[],Ue(()=>{e!==n(...o)&&(t(e,...o),i&&jo(n(...i),e)&&t(null,...i))})}),()=>{ci(()=>{o&&jo(n(...o),e)&&t(null,...o)})}}),e}function wu(e=!1){const t=De,n=t.l.u;if(!n)return;let r=()=>xa(t.s);if(e){let i=0,o={};const s=bn(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&i++,i});r=()=>d(s)}n.b.length&&vo(()=>{es(t,r),Hr(n.b)}),zt(()=>{const i=Ue(()=>n.m.map(jl));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&zt(()=>{es(t,r),Hr(n.a)})}function es(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}let mr=!1;function bu(e){var t=mr;try{return mr=!1,[e(),mr]}finally{mr=t}}const _u={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Rt(e,t,n){return new Proxy({props:e,exclude:t},_u)}const xu={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Dn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Dn(i)&&(i=i());const o=qt(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Dn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=qt(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===pt||t===Zs)return!1;for(let n of e.props)if(Dn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Dn(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function Wt(...e){return new Proxy({props:e},xu)}function ts(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function ee(e,t,n,r){var z;var i=(n&vc)!==0,o=!In||(n&yc)!==0,s=(n&pc)!==0,a=(n&wc)!==0,l=!1,c;s?[c,l]=bu(()=>e[t]):c=e[t];var u=pt in e||Zs in e,h=s&&(((z=qt(e,t))==null?void 0:z.set)??(u&&t in e&&(b=>e[t]=b)))||void 0,f=r,g=!0,y=!1,p=()=>(y=!0,g&&(g=!1,a?f=Ue(r):f=r),f);c===void 0&&r!==void 0&&(h&&o&&lc(),c=p(),h&&h(c));var m;if(o)m=()=>{var b=e[t];return b===void 0?p():(g=!0,y=!1,b)};else{var w=(i?bn:ta)(()=>e[t]);w.f|=tc,m=()=>{var b=d(w);return b!==void 0&&(f=void 0),b===void 0?f:b}}if((n&mc)===0)return m;if(h){var O=e.$$legacy;return function(b,R){return arguments.length>0?((!o||!R||O||l)&&h(R?m():b),b):m()}}var _=!1,v=oa(c),N=bn(()=>{var b=m(),R=d(v);return _?(_=!1,R):v.v=b});return s&&d(N),i||(N.equals=uo),function(b,R){if(arguments.length>0){const W=R?d(N):o&&s?Ge(b):b;if(!N.equals(W)){if(_=!0,Z(v,W),y&&f!==void 0&&(f=W),ts(N))return b;Ue(()=>d(N))}return b}return ts(N)?N.v:d(N)}}function bo(e){De===null&&go(),In&&De.l!==null?ku(De).m.push(e):zt(()=>{const t=Ue(e);if(typeof t=="function")return t})}function hi(e){De===null&&go(),bo(()=>()=>Ue(e))}function ku(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Eu="5";var Ws;typeof window<"u"&&((Ws=window.__svelte??(window.__svelte={})).v??(Ws.v=new Set)).add(Eu);var Su={value:()=>{}};function gi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mr(n)}function Mr(e){this._=e}function Pu(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mr.prototype=gi.prototype={constructor:Mr,on:function(e,t){var n=this._,r=Pu(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Cu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=ns(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ns(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Cu(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ns(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Su,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ui="http://www.w3.org/1999/xhtml";const rs={svg:"http://www.w3.org/2000/svg",xhtml:Ui,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $i(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),rs.hasOwnProperty(t)?{space:rs[t],local:e}:e}function Nu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ui&&t.documentElement.namespaceURI===Ui?t.createElement(e):t.createElementNS(n,e)}}function Mu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Oa(e){var t=$i(e);return(t.local?Mu:Nu)(t)}function Au(){}function _o(e){return e==null?Au:function(){return this.querySelector(e)}}function Iu(e){typeof e!="function"&&(e=_o(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new lt(r,this._parents)}function zu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hu(){return[]}function Da(e){return e==null?Hu:function(){return this.querySelectorAll(e)}}function Tu(e){return function(){return zu(e.apply(this,arguments))}}function Ou(e){typeof e=="function"?e=Tu(e):e=Da(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),i.push(l));return new lt(r,i)}function Ra(e){return function(){return this.matches(e)}}function La(e){return function(t){return t.matches(e)}}var Du=Array.prototype.find;function Ru(e){return function(){return Du.call(this.children,e)}}function Lu(){return this.firstElementChild}function Yu(e){return this.select(e==null?Lu:Ru(typeof e=="function"?e:La(e)))}var Vu=Array.prototype.filter;function Xu(){return Array.from(this.children)}function Wu(e){return function(){return Vu.call(this.children,e)}}function Bu(e){return this.selectAll(e==null?Xu:Wu(typeof e=="function"?e:La(e)))}function Fu(e){typeof e!="function"&&(e=Ra(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new lt(r,this._parents)}function Ya(e){return new Array(e.length)}function Ku(){return new lt(this._enter||this._groups.map(Ya),this._parents)}function Xr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xr.prototype={constructor:Xr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qu(e){return function(){return e}}function Zu(e,t,n,r,i,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Xr(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Gu(e,t,n,r,i,o,s){var a,l,c=new Map,u=t.length,h=o.length,f=new Array(u),g;for(a=0;a<u;++a)(l=t[a])&&(f[a]=g=s.call(l,l.__data__,a,t)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(l=c.get(g))?(r[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new Xr(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(i[a]=l)}function Uu(e){return e.__data__}function Qu(e,t){if(!arguments.length)return Array.from(this,Uu);var n=t?Gu:Zu,r=this._parents,i=this._groups;typeof e!="function"&&(e=qu(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],f=h.length,g=Ju(e.call(u,u&&u.__data__,c,r)),y=g.length,p=a[c]=new Array(y),m=s[c]=new Array(y),w=l[c]=new Array(f);n(u,h,p,m,w,g,t);for(var O=0,_=0,v,N;O<y;++O)if(v=p[O]){for(O>=_&&(_=O+1);!(N=m[_])&&++_<y;);v._next=N||null}}return s=new lt(s,r),s._enter=a,s._exit=l,s}function Ju(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ju(){return new lt(this._exit||this._groups.map(Ya),this._parents)}function ed(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function td(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],h=c.length,f=a[l]=new Array(h),g,y=0;y<h;++y)(g=c[y]||u[y])&&(f[y]=g);for(;l<i;++l)a[l]=n[l];return new lt(a,this._parents)}function nd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function rd(e){e||(e=id);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new lt(i,this._parents).order()}function id(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function od(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sd(){return Array.from(this)}function ad(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ld(){let e=0;for(const t of this)++e;return e}function cd(){return!this.node()}function ud(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function dd(e){return function(){this.removeAttribute(e)}}function fd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hd(e,t){return function(){this.setAttribute(e,t)}}function gd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $d(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yd(e,t){var n=$i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?fd:dd:typeof t=="function"?n.local?vd:$d:n.local?gd:hd)(n,t))}function Va(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function md(e){return function(){this.style.removeProperty(e)}}function pd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wd(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function bd(e,t,n){return arguments.length>1?this.each((t==null?md:typeof t=="function"?wd:pd)(e,t,n??"")):kn(this.node(),e)}function kn(e,t){return e.style.getPropertyValue(t)||Va(e).getComputedStyle(e,null).getPropertyValue(t)}function _d(e){return function(){delete this[e]}}function xd(e,t){return function(){this[e]=t}}function kd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ed(e,t){return arguments.length>1?this.each((t==null?_d:typeof t=="function"?kd:xd)(e,t)):this.node()[e]}function Xa(e){return e.trim().split(/^|\s+/)}function xo(e){return e.classList||new Wa(e)}function Wa(e){this._node=e,this._names=Xa(e.getAttribute("class")||"")}Wa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ba(e,t){for(var n=xo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Fa(e,t){for(var n=xo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Sd(e){return function(){Ba(this,e)}}function Pd(e){return function(){Fa(this,e)}}function Cd(e,t){return function(){(t.apply(this,arguments)?Ba:Fa)(this,e)}}function Nd(e,t){var n=Xa(e+"");if(arguments.length<2){for(var r=xo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Cd:t?Sd:Pd)(n,t))}function Md(){this.textContent=""}function Ad(e){return function(){this.textContent=e}}function Id(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zd(e){return arguments.length?this.each(e==null?Md:(typeof e=="function"?Id:Ad)(e)):this.node().textContent}function Hd(){this.innerHTML=""}function Td(e){return function(){this.innerHTML=e}}function Od(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Dd(e){return arguments.length?this.each(e==null?Hd:(typeof e=="function"?Od:Td)(e)):this.node().innerHTML}function Rd(){this.nextSibling&&this.parentNode.appendChild(this)}function Ld(){return this.each(Rd)}function Yd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vd(){return this.each(Yd)}function Xd(e){var t=typeof e=="function"?e:Oa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wd(){return null}function Bd(e,t){var n=typeof e=="function"?e:Oa(e),r=t==null?Wd:typeof t=="function"?t:_o(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Fd(){var e=this.parentNode;e&&e.removeChild(this)}function Kd(){return this.each(Fd)}function qd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gd(e){return this.select(e?Zd:qd)}function Ud(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qd(e){return function(t){e.call(this,t,this.__data__)}}function Jd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jd(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function ef(e,t,n){return function(){var r=this.__on,i,o=Qd(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function tf(e,t,n){var r=Jd(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?ef:jd,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Ka(e,t,n){var r=Va(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nf(e,t){return function(){return Ka(this,e,t)}}function rf(e,t){return function(){return Ka(this,e,t.apply(this,arguments))}}function of(e,t){return this.each((typeof t=="function"?rf:nf)(e,t))}function*sf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var qa=[null];function lt(e,t){this._groups=e,this._parents=t}function fr(){return new lt([[document.documentElement]],qa)}function af(){return this}lt.prototype=fr.prototype={constructor:lt,select:Iu,selectAll:Ou,selectChild:Yu,selectChildren:Bu,filter:Fu,data:Qu,enter:Ku,exit:ju,join:ed,merge:td,selection:af,order:nd,sort:rd,call:od,nodes:sd,node:ad,size:ld,empty:cd,each:ud,attr:yd,style:bd,property:Ed,classed:Nd,text:zd,html:Dd,raise:Ld,lower:Vd,append:Xd,insert:Bd,remove:Kd,clone:Gd,datum:Ud,on:tf,dispatch:of,[Symbol.iterator]:sf};function ot(e){return typeof e=="string"?new lt([[document.querySelector(e)]],[document.documentElement]):new lt([[e]],qa)}function lf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function dt(e,t){if(e=lf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const cf={passive:!1},Un={capture:!0,passive:!1};function Ai(e){e.stopImmediatePropagation()}function vn(e){e.preventDefault(),e.stopImmediatePropagation()}function Za(e){var t=e.document.documentElement,n=ot(e).on("dragstart.drag",vn,Un);"onselectstart"in t?n.on("selectstart.drag",vn,Un):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ga(e,t){var n=e.document.documentElement,r=ot(e).on("dragstart.drag",null);t&&(r.on("click.drag",vn,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pr=e=>()=>e;function Qi(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Qi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uf(e){return!e.ctrlKey&&!e.button}function df(){return this.parentNode}function ff(e,t){return t??{x:e.x,y:e.y}}function hf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ua(){var e=uf,t=df,n=ff,r=hf,i={},o=gi("start","drag","end"),s=0,a,l,c,u,h=0;function f(v){v.on("mousedown.drag",g).filter(r).on("touchstart.drag",m).on("touchmove.drag",w,cf).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(v,N){if(!(u||!e.call(this,v,N))){var z=_(this,t.call(this,v,N),v,N,"mouse");z&&(ot(v.view).on("mousemove.drag",y,Un).on("mouseup.drag",p,Un),Za(v.view),Ai(v),c=!1,a=v.clientX,l=v.clientY,z("start",v))}}function y(v){if(vn(v),!c){var N=v.clientX-a,z=v.clientY-l;c=N*N+z*z>h}i.mouse("drag",v)}function p(v){ot(v.view).on("mousemove.drag mouseup.drag",null),Ga(v.view,c),vn(v),i.mouse("end",v)}function m(v,N){if(e.call(this,v,N)){var z=v.changedTouches,b=t.call(this,v,N),R=z.length,W,K;for(W=0;W<R;++W)(K=_(this,b,v,N,z[W].identifier,z[W]))&&(Ai(v),K("start",v,z[W]))}}function w(v){var N=v.changedTouches,z=N.length,b,R;for(b=0;b<z;++b)(R=i[N[b].identifier])&&(vn(v),R("drag",v,N[b]))}function O(v){var N=v.changedTouches,z=N.length,b,R;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),b=0;b<z;++b)(R=i[N[b].identifier])&&(Ai(v),R("end",v,N[b]))}function _(v,N,z,b,R,W){var K=o.copy(),k=dt(W||z,N),C,M,$;if(($=n.call(v,new Qi("beforestart",{sourceEvent:z,target:f,identifier:R,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:K}),b))!=null)return C=$.x-k[0]||0,M=$.y-k[1]||0,function S(P,V,L){var T=k,F;switch(P){case"start":i[R]=S,F=s++;break;case"end":delete i[R],--s;case"drag":k=dt(L||V,N),F=s;break}K.call(P,v,new Qi(P,{sourceEvent:V,subject:$,target:f,identifier:R,active:F,x:k[0]+C,y:k[1]+M,dx:k[0]-T[0],dy:k[1]-T[1],dispatch:K}),b)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:pr(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:pr(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:pr(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:pr(!!v),f):r},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,f):Math.sqrt(h)},f}function ko(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hr(){}var Qn=.7,Wr=1/Qn,yn="\\s*([+-]?\\d+)\\s*",Jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gf=/^#([0-9a-f]{3,8})$/,$f=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),vf=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),yf=new RegExp(`^rgba\\(${yn},${yn},${yn},${Jn}\\)$`),mf=new RegExp(`^rgba\\(${wt},${wt},${wt},${Jn}\\)$`),pf=new RegExp(`^hsl\\(${Jn},${wt},${wt}\\)$`),wf=new RegExp(`^hsla\\(${Jn},${wt},${wt},${Jn}\\)$`),is={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ko(hr,jn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:os,formatHex:os,formatHex8:bf,formatHsl:_f,formatRgb:ss,toString:ss});function os(){return this.rgb().formatHex()}function bf(){return this.rgb().formatHex8()}function _f(){return Ja(this).formatHsl()}function ss(){return this.rgb().formatRgb()}function jn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?as(t):n===3?new tt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$f.exec(e))?new tt(t[1],t[2],t[3],1):(t=vf.exec(e))?new tt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yf.exec(e))?wr(t[1],t[2],t[3],t[4]):(t=mf.exec(e))?wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pf.exec(e))?us(t[1],t[2]/100,t[3]/100,1):(t=wf.exec(e))?us(t[1],t[2]/100,t[3]/100,t[4]):is.hasOwnProperty(e)?as(is[e]):e==="transparent"?new tt(NaN,NaN,NaN,0):null}function as(e){return new tt(e>>16&255,e>>8&255,e&255,1)}function wr(e,t,n,r){return r<=0&&(e=t=n=NaN),new tt(e,t,n,r)}function xf(e){return e instanceof hr||(e=jn(e)),e?(e=e.rgb(),new tt(e.r,e.g,e.b,e.opacity)):new tt}function Ji(e,t,n,r){return arguments.length===1?xf(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ko(tt,Ji,Qa(hr,{brighter(e){return e=e==null?Wr:Math.pow(Wr,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qn:Math.pow(Qn,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tt(nn(this.r),nn(this.g),nn(this.b),Br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ls,formatHex:ls,formatHex8:kf,formatRgb:cs,toString:cs}));function ls(){return`#${en(this.r)}${en(this.g)}${en(this.b)}`}function kf(){return`#${en(this.r)}${en(this.g)}${en(this.b)}${en((isNaN(this.opacity)?1:this.opacity)*255)}`}function cs(){const e=Br(this.opacity);return`${e===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${e===1?")":`, ${e})`}`}function Br(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function en(e){return e=nn(e),(e<16?"0":"")+e.toString(16)}function us(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ht(e,t,n,r)}function Ja(e){if(e instanceof ht)return new ht(e.h,e.s,e.l,e.opacity);if(e instanceof hr||(e=jn(e)),!e)return new ht;if(e instanceof ht)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ht(s,a,l,e.opacity)}function Ef(e,t,n,r){return arguments.length===1?Ja(e):new ht(e,t,n,r??1)}function ht(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ko(ht,Ef,Qa(hr,{brighter(e){return e=e==null?Wr:Math.pow(Wr,e),new ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qn:Math.pow(Qn,e),new ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new tt(Ii(e>=240?e-240:e+120,i,r),Ii(e,i,r),Ii(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ht(ds(this.h),br(this.s),br(this.l),Br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Br(this.opacity);return`${e===1?"hsl(":"hsla("}${ds(this.h)}, ${br(this.s)*100}%, ${br(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ds(e){return e=(e||0)%360,e<0?e+360:e}function br(e){return Math.max(0,Math.min(1,e||0))}function Ii(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ja=e=>()=>e;function Sf(e,t){return function(n){return e+n*t}}function Pf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Cf(e){return(e=+e)==1?el:function(t,n){return n-t?Pf(t,n,e):ja(isNaN(t)?n:t)}}function el(e,t){var n=t-e;return n?Sf(e,n):ja(isNaN(e)?t:e)}const fs=function e(t){var n=Cf(t);function r(i,o){var s=n((i=Ji(i)).r,(o=Ji(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=el(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function Xt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zi=new RegExp(ji.source,"g");function Nf(e){return function(){return e}}function Mf(e){return function(t){return e(t)+""}}function Af(e,t){var n=ji.lastIndex=zi.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ji.exec(e))&&(i=zi.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Xt(r,i)})),n=zi.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Mf(l[0].x):Nf(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var hs=180/Math.PI,eo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tl(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*hs,skewX:Math.atan(l)*hs,scaleX:s,scaleY:a}}var _r;function If(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eo:tl(t.a,t.b,t.c,t.d,t.e,t.f)}function zf(e){return e==null||(_r||(_r=document.createElementNS("http://www.w3.org/2000/svg","g")),_r.setAttribute("transform",e),!(e=_r.transform.baseVal.consolidate()))?eo:(e=e.matrix,tl(e.a,e.b,e.c,e.d,e.e,e.f))}function nl(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,h,f,g,y){if(c!==h||u!==f){var p=g.push("translate(",null,t,null,n);y.push({i:p-4,x:Xt(c,h)},{i:p-2,x:Xt(u,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Xt(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Xt(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,g,y){if(c!==h||u!==f){var p=g.push(i(g)+"scale(",null,",",null,")");y.push({i:p-4,x:Xt(c,h)},{i:p-2,x:Xt(u,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,h,f),s(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(g){for(var y=-1,p=f.length,m;++y<p;)h[(m=f[y]).i]=m.x(g);return h.join("")}}}var Hf=nl(If,"px, ","px)","deg)"),Tf=nl(zf,", ",")",")"),Of=1e-12;function gs(e){return((e=Math.exp(e))+1/e)/2}function Df(e){return((e=Math.exp(e))-1/e)/2}function Rf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Lf=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],u=s[0],h=s[1],f=s[2],g=u-a,y=h-l,p=g*g+y*y,m,w;if(p<Of)w=Math.log(f/c)/t,m=function(b){return[a+b*g,l+b*y,c*Math.exp(t*b*w)]};else{var O=Math.sqrt(p),_=(f*f-c*c+r*p)/(2*c*n*O),v=(f*f-c*c-r*p)/(2*f*n*O),N=Math.log(Math.sqrt(_*_+1)-_),z=Math.log(Math.sqrt(v*v+1)-v);w=(z-N)/t,m=function(b){var R=b*w,W=gs(N),K=c/(n*O)*(W*Rf(t*R+N)-Df(N));return[a+K*g,l+K*y,c*W/gs(t*R+N)]}}return m.duration=w*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var En=0,Vn=0,Rn=0,rl=1e3,Fr,Xn,Kr=0,on=0,vi=0,er=typeof performance=="object"&&performance.now?performance:Date,il=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Eo(){return on||(il(Yf),on=er.now()+vi)}function Yf(){on=0}function qr(){this._call=this._time=this._next=null}qr.prototype=ol.prototype={constructor:qr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Eo():+n)+(t==null?0:+t),!this._next&&Xn!==this&&(Xn?Xn._next=this:Fr=this,Xn=this),this._call=e,this._time=n,to()},stop:function(){this._call&&(this._call=null,this._time=1/0,to())}};function ol(e,t,n){var r=new qr;return r.restart(e,t,n),r}function Vf(){Eo(),++En;for(var e=Fr,t;e;)(t=on-e._time)>=0&&e._call.call(void 0,t),e=e._next;--En}function $s(){on=(Kr=er.now())+vi,En=Vn=0;try{Vf()}finally{En=0,Wf(),on=0}}function Xf(){var e=er.now(),t=e-Kr;t>rl&&(vi-=t,Kr=e)}function Wf(){for(var e,t=Fr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fr=n);Xn=e,to(r)}function to(e){if(!En){Vn&&(Vn=clearTimeout(Vn));var t=e-on;t>24?(e<1/0&&(Vn=setTimeout($s,e-er.now()-vi)),Rn&&(Rn=clearInterval(Rn))):(Rn||(Kr=er.now(),Rn=setInterval(Xf,rl)),En=1,il($s))}}function vs(e,t,n){var r=new qr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Bf=gi("start","end","cancel","interrupt"),Ff=[],sl=0,ys=1,no=2,Ar=3,ms=4,ro=5,Ir=6;function yi(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Kf(e,n,{name:t,index:r,group:i,on:Bf,tween:Ff,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:sl})}function So(e,t){var n=yt(e,t);if(n.state>sl)throw new Error("too late; already scheduled");return n}function Et(e,t){var n=yt(e,t);if(n.state>Ar)throw new Error("too late; already running");return n}function yt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Kf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ol(o,0,n.time);function o(c){n.state=ys,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,h,f,g;if(n.state!==ys)return l();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Ar)return vs(s);g.state===ms?(g.state=Ir,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=Ir,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(vs(function(){n.state===Ar&&(n.state=ms,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=no,n.on.call("start",e,e.__data__,n.index,n.group),n.state===no){for(n.state=Ar,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=ro,1),h=-1,f=i.length;++h<f;)i[h].call(e,u);n.state===ro&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ir,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function zr(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>no&&r.state<ro,r.state=Ir,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function qf(e){return this.each(function(){zr(this,e)})}function Zf(e,t){var n,r;return function(){var i=Et(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Gf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Et(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Uf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=yt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Zf:Gf)(n,e,t))}function Po(e,t,n){var r=e._id;return e.each(function(){var i=Et(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return yt(i,r).value[t]}}function al(e,t){var n;return(typeof t=="number"?Xt:t instanceof jn?fs:(n=jn(t))?(t=n,fs):Af)(e,t)}function Qf(e){return function(){this.removeAttribute(e)}}function Jf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jf(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function eh(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function th(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function nh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function rh(e,t){var n=$i(e),r=n==="transform"?Tf:al;return this.attrTween(e,typeof t=="function"?(n.local?nh:th)(n,r,Po(this,"attr."+e,t)):t==null?(n.local?Jf:Qf)(n):(n.local?eh:jf)(n,r,t))}function ih(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function oh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&oh(e,o)),n}return i._value=t,i}function ah(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ih(e,o)),n}return i._value=t,i}function lh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$i(e);return this.tween(n,(r.local?sh:ah)(r,t))}function ch(e,t){return function(){So(this,e).delay=+t.apply(this,arguments)}}function uh(e,t){return t=+t,function(){So(this,e).delay=t}}function dh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ch:uh)(t,e)):yt(this.node(),t).delay}function fh(e,t){return function(){Et(this,e).duration=+t.apply(this,arguments)}}function hh(e,t){return t=+t,function(){Et(this,e).duration=t}}function gh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fh:hh)(t,e)):yt(this.node(),t).duration}function $h(e,t){if(typeof t!="function")throw new Error;return function(){Et(this,e).ease=t}}function vh(e){var t=this._id;return arguments.length?this.each($h(t,e)):yt(this.node(),t).ease}function yh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Et(this,e).ease=n}}function mh(e){if(typeof e!="function")throw new Error;return this.each(yh(this._id,e))}function ph(e){typeof e!="function"&&(e=Ra(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Tt(r,this._parents,this._name,this._id)}function wh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],u=l.length,h=s[a]=new Array(u),f,g=0;g<u;++g)(f=l[g]||c[g])&&(h[g]=f);for(;a<r;++a)s[a]=t[a];return new Tt(s,this._parents,this._name,this._id)}function bh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _h(e,t,n){var r,i,o=bh(t)?So:Et;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function xh(e,t){var n=this._id;return arguments.length<2?yt(this.node(),n).on.on(e):this.each(_h(n,e,t))}function kh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Eh(){return this.on("end.remove",kh(this._id))}function Sh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_o(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,yi(c[f],t,n,f,c,yt(u,n)));return new Tt(o,this._parents,t,n)}function Ph(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Da(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),g,y=yt(u,n),p=0,m=f.length;p<m;++p)(g=f[p])&&yi(g,t,n,p,f,y);o.push(f),s.push(u)}return new Tt(o,s,t,n)}var Ch=fr.prototype.constructor;function Nh(){return new Ch(this._groups,this._parents)}function Mh(e,t){var n,r,i;return function(){var o=kn(this,e),s=(this.style.removeProperty(e),kn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ll(e){return function(){this.style.removeProperty(e)}}function Ah(e,t,n){var r,i=n+"",o;return function(){var s=kn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Ih(e,t,n){var r,i,o;return function(){var s=kn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),kn(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function zh(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Et(this,e),c=l.on,u=l.value[o]==null?a||(a=ll(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function Hh(e,t,n){var r=(e+="")=="transform"?Hf:al;return t==null?this.styleTween(e,Mh(e,r)).on("end.style."+e,ll(e)):typeof t=="function"?this.styleTween(e,Ih(e,r,Po(this,"style."+e,t))).each(zh(this._id,e)):this.styleTween(e,Ah(e,r,t),n).on("end.style."+e,null)}function Th(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Oh(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Th(e,s,n)),r}return o._value=t,o}function Dh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Oh(e,t,n??""))}function Rh(e){return function(){this.textContent=e}}function Lh(e){return function(){var t=e(this);this.textContent=t??""}}function Yh(e){return this.tween("text",typeof e=="function"?Lh(Po(this,"text",e)):Rh(e==null?"":e+""))}function Vh(e){return function(t){this.textContent=e.call(this,t)}}function Xh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Vh(i)),t}return r._value=e,r}function Wh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xh(e))}function Bh(){for(var e=this._name,t=this._id,n=cl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=yt(l,t);yi(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Tt(r,this._parents,e,n)}function Fh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=Et(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&o()})}var Kh=0;function Tt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function cl(){return++Kh}var Pt=fr.prototype;Tt.prototype={constructor:Tt,select:Sh,selectAll:Ph,selectChild:Pt.selectChild,selectChildren:Pt.selectChildren,filter:ph,merge:wh,selection:Nh,transition:Bh,call:Pt.call,nodes:Pt.nodes,node:Pt.node,size:Pt.size,empty:Pt.empty,each:Pt.each,on:xh,attr:rh,attrTween:lh,style:Hh,styleTween:Dh,text:Yh,textTween:Wh,remove:Eh,tween:Uf,delay:dh,duration:gh,ease:vh,easeVarying:mh,end:Fh,[Symbol.iterator]:Pt[Symbol.iterator]};function qh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Zh={time:null,delay:0,duration:250,ease:qh};function Gh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Uh(e){var t,n;e instanceof Tt?(t=e._id,e=e._name):(t=cl(),(n=Zh).time=Eo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&yi(l,e,t,c,s,n||Gh(l,t));return new Tt(r,this._parents,e,t)}fr.prototype.interrupt=qf;fr.prototype.transition=Uh;const xr=e=>()=>e;function Qh(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Nt(e,t,n){this.k=e,this.x=t,this.y=n}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var mi=new Nt(1,0,0);ul.prototype=Nt.prototype;function ul(e){for(;!e.__zoom;)if(!(e=e.parentNode))return mi;return e.__zoom}function Hi(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Jh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function jh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ps(){return this.__zoom||mi}function eg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tg(){return navigator.maxTouchPoints||"ontouchstart"in this}function ng(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function dl(){var e=Jh,t=jh,n=ng,r=eg,i=tg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Lf,c=gi("start","zoom","end"),u,h,f,g=500,y=150,p=0,m=10;function w($){$.property("__zoom",ps).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",K).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function($,S,P,V){var L=$.selection?$.selection():$;L.property("__zoom",ps),$!==L?N($,S,P,V):L.interrupt().each(function(){z(this,arguments).event(V).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},w.scaleBy=function($,S,P,V){w.scaleTo($,function(){var L=this.__zoom.k,T=typeof S=="function"?S.apply(this,arguments):S;return L*T},P,V)},w.scaleTo=function($,S,P,V){w.transform($,function(){var L=t.apply(this,arguments),T=this.__zoom,F=P==null?v(L):typeof P=="function"?P.apply(this,arguments):P,q=T.invert(F),se=typeof S=="function"?S.apply(this,arguments):S;return n(_(O(T,se),F,q),L,s)},P,V)},w.translateBy=function($,S,P,V){w.transform($,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),s)},null,V)},w.translateTo=function($,S,P,V,L){w.transform($,function(){var T=t.apply(this,arguments),F=this.__zoom,q=V==null?v(T):typeof V=="function"?V.apply(this,arguments):V;return n(mi.translate(q[0],q[1]).scale(F.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof P=="function"?-P.apply(this,arguments):-P),T,s)},V,L)};function O($,S){return S=Math.max(o[0],Math.min(o[1],S)),S===$.k?$:new Nt(S,$.x,$.y)}function _($,S,P){var V=S[0]-P[0]*$.k,L=S[1]-P[1]*$.k;return V===$.x&&L===$.y?$:new Nt($.k,V,L)}function v($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function N($,S,P,V){$.on("start.zoom",function(){z(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(V).end()}).tween("zoom",function(){var L=this,T=arguments,F=z(L,T).event(V),q=t.apply(L,T),se=P==null?v(q):typeof P=="function"?P.apply(L,T):P,de=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),ue=L.__zoom,U=typeof S=="function"?S.apply(L,T):S,Q=l(ue.invert(se).concat(de/ue.k),U.invert(se).concat(de/U.k));return function(ne){if(ne===1)ne=U;else{var te=Q(ne),I=de/te[2];ne=new Nt(I,se[0]-te[0]*I,se[1]-te[1]*I)}F.zoom(null,ne)}})}function z($,S,P){return!P&&$.__zooming||new b($,S)}function b($,S){this.that=$,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply($,S),this.taps=0}b.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,S){return this.mouse&&$!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var S=ot(this.that).datum();c.call($,this.that,new Qh($,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:c}),S)}};function R($,...S){if(!e.apply(this,arguments))return;var P=z(this,S).event($),V=this.__zoom,L=Math.max(o[0],Math.min(o[1],V.k*Math.pow(2,r.apply(this,arguments)))),T=dt($);if(P.wheel)(P.mouse[0][0]!==T[0]||P.mouse[0][1]!==T[1])&&(P.mouse[1]=V.invert(P.mouse[0]=T)),clearTimeout(P.wheel);else{if(V.k===L)return;P.mouse=[T,V.invert(T)],zr(this),P.start()}Ln($),P.wheel=setTimeout(F,y),P.zoom("mouse",n(_(O(V,L),P.mouse[0],P.mouse[1]),P.extent,s));function F(){P.wheel=null,P.end()}}function W($,...S){if(f||!e.apply(this,arguments))return;var P=$.currentTarget,V=z(this,S,!0).event($),L=ot($.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",de,!0),T=dt($,P),F=$.clientX,q=$.clientY;Za($.view),Hi($),V.mouse=[T,this.__zoom.invert(T)],zr(this),V.start();function se(ue){if(Ln(ue),!V.moved){var U=ue.clientX-F,Q=ue.clientY-q;V.moved=U*U+Q*Q>p}V.event(ue).zoom("mouse",n(_(V.that.__zoom,V.mouse[0]=dt(ue,P),V.mouse[1]),V.extent,s))}function de(ue){L.on("mousemove.zoom mouseup.zoom",null),Ga(ue.view,V.moved),Ln(ue),V.event(ue).end()}}function K($,...S){if(e.apply(this,arguments)){var P=this.__zoom,V=dt($.changedTouches?$.changedTouches[0]:$,this),L=P.invert(V),T=P.k*($.shiftKey?.5:2),F=n(_(O(P,T),V,L),t.apply(this,S),s);Ln($),a>0?ot(this).transition().duration(a).call(N,F,V,$):ot(this).call(w.transform,F,V,$)}}function k($,...S){if(e.apply(this,arguments)){var P=$.touches,V=P.length,L=z(this,S,$.changedTouches.length===V).event($),T,F,q,se;for(Hi($),F=0;F<V;++F)q=P[F],se=dt(q,this),se=[se,this.__zoom.invert(se),q.identifier],L.touch0?!L.touch1&&L.touch0[2]!==se[2]&&(L.touch1=se,L.taps=0):(L.touch0=se,T=!0,L.taps=1+!!u);u&&(u=clearTimeout(u)),T&&(L.taps<2&&(h=se[0],u=setTimeout(function(){u=null},g)),zr(this),L.start())}}function C($,...S){if(this.__zooming){var P=z(this,S).event($),V=$.changedTouches,L=V.length,T,F,q,se;for(Ln($),T=0;T<L;++T)F=V[T],q=dt(F,this),P.touch0&&P.touch0[2]===F.identifier?P.touch0[0]=q:P.touch1&&P.touch1[2]===F.identifier&&(P.touch1[0]=q);if(F=P.that.__zoom,P.touch1){var de=P.touch0[0],ue=P.touch0[1],U=P.touch1[0],Q=P.touch1[1],ne=(ne=U[0]-de[0])*ne+(ne=U[1]-de[1])*ne,te=(te=Q[0]-ue[0])*te+(te=Q[1]-ue[1])*te;F=O(F,Math.sqrt(ne/te)),q=[(de[0]+U[0])/2,(de[1]+U[1])/2],se=[(ue[0]+Q[0])/2,(ue[1]+Q[1])/2]}else if(P.touch0)q=P.touch0[0],se=P.touch0[1];else return;P.zoom("touch",n(_(F,q,se),P.extent,s))}}function M($,...S){if(this.__zooming){var P=z(this,S).event($),V=$.changedTouches,L=V.length,T,F;for(Hi($),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),T=0;T<L;++T)F=V[T],P.touch0&&P.touch0[2]===F.identifier?delete P.touch0:P.touch1&&P.touch1[2]===F.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(F=dt(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<m)){var q=ot(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return w.wheelDelta=function($){return arguments.length?(r=typeof $=="function"?$:xr(+$),w):r},w.filter=function($){return arguments.length?(e=typeof $=="function"?$:xr(!!$),w):e},w.touchable=function($){return arguments.length?(i=typeof $=="function"?$:xr(!!$),w):i},w.extent=function($){return arguments.length?(t=typeof $=="function"?$:xr([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),w):t},w.scaleExtent=function($){return arguments.length?(o[0]=+$[0],o[1]=+$[1],w):[o[0],o[1]]},w.translateExtent=function($){return arguments.length?(s[0][0]=+$[0][0],s[1][0]=+$[1][0],s[0][1]=+$[0][1],s[1][1]=+$[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function($){return arguments.length?(n=$,w):n},w.duration=function($){return arguments.length?(a=+$,w):a},w.interpolate=function($){return arguments.length?(l=$,w):l},w.on=function(){var $=c.on.apply(c,arguments);return $===c?w:$},w.clickDistance=function($){return arguments.length?(p=($=+$)*$,w):Math.sqrt(p)},w.tapDistance=function($){return arguments.length?(m=+$,w):m},w}const tr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},io=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fl=["Enter"," ","Escape"];var Sn;(function(e){e.Strict="strict",e.Loose="loose"})(Sn||(Sn={}));var Zt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Zt||(Zt={}));var Zr;(function(e){e.Partial="partial",e.Full="full"})(Zr||(Zr={}));const oo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Bt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Bt||(Bt={}));var nr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(nr||(nr={}));var xe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(xe||(xe={}));const ws={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top};function rg(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function bs(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function ig(e){return e===null?null:e?"valid":"invalid"}const hl=e=>"id"in e&&"source"in e&&"target"in e,og=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Co=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),gr=(e,t=[0,0])=>{const{width:n,height:r}=jt(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},sg=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Co(i)?i:t.nodeLookup.get(i.id));const a=s?Gr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return pi(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wi(n)},$r=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Gr(r);n=pi(n,i)}}),wi(n)},gl=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...vr(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const c of e.values()){const{measured:u,selectable:h=!0,hidden:f=!1}=c;if(s&&!h||f)continue;const g=u.width??c.width??c.initialWidth??null,y=u.height??c.height??c.initialHeight??null,p=rr(a,Cn(c)),m=(g??0)*(y??0),w=o&&p>0;(!c.internals.handleBounds||w||p>=m||c.dragging)&&l.push(c)}return l},ag=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function lg(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function cg({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=lg(e,s),l=$r(a),c=No(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function $l({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??r;let h=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",tr.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(h=[[l,c],[l+g,c+y]])}else a&&Nn(s.extent)&&(h=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const f=Nn(h)?sn(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",tr.error015())),{position:{x:f.x-l+(s.measured.width??0)*u[0],y:f.y-c+(s.measured.height??0)*u[1]},positionAbsolute:f}}async function ug({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),y=!g&&f.parentId&&s.find(p=>p.id===f.parentId);(g||y)&&s.push(f)}const a=new Set(t.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),u=ag(s,l);for(const f of l)a.has(f.id)&&!u.find(y=>y.id===f.id)&&u.push(f);if(!i)return{edges:u,nodes:s};const h=await i({nodes:s,edges:u});return typeof h=="boolean"?h?{edges:u,nodes:s}:{edges:[],nodes:[]}:h}const Pn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),sn=(e={x:0,y:0},t,n)=>({x:Pn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Pn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function vl(e,t,n){const{width:r,height:i}=jt(n),{x:o,y:s}=n.internals.positionAbsolute;return sn(e,[[o,s],[o+r,s+i]],t)}const _s=(e,t,n)=>e<t?Pn(Math.abs(e-t),1,t)/t:e>n?-Pn(Math.abs(e-n),1,t)/t:0,yl=(e,t,n=15,r=40)=>{const i=_s(e.x,r,t.width-r)*n,o=_s(e.y,r,t.height-r)*n;return[i,o]},pi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),so=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),wi=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Cn=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Co(e)?e.internals.positionAbsolute:gr(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Gr=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Co(e)?e.internals.positionAbsolute:gr(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},ml=(e,t)=>wi(pi(so(e),so(t))),rr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},xs=e=>Mt(e.width)&&Mt(e.height)&&Mt(e.x)&&Mt(e.y),Mt=e=>!isNaN(e)&&isFinite(e),dg=(e,t)=>{},bi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),vr=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?bi(a,s):a},Ur=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function fn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fg(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=fn(e,n),i=fn(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=fn(e.top??e.y??0,n),i=fn(e.bottom??e.y??0,n),o=fn(e.left??e.x??0,t),s=fn(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hg(e,t,n,r,i,o){const{x:s,y:a}=Ur(e,[t,n,r]),{x:l,y:c}=Ur({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=i-l,h=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(u),bottom:Math.floor(h)}}const No=(e,t,n,r,i,o)=>{const s=fg(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),u=Pn(c,r,i),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*u,y=n/2-f*u,p=hg(e,g,y,u,t,n),m={left:Math.min(p.left-s.left,0),top:Math.min(p.top-s.top,0),right:Math.min(p.right-s.right,0),bottom:Math.min(p.bottom-s.bottom,0)};return{x:g-m.left+m.right,y:y-m.top+m.bottom,zoom:u}},Qr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Nn(e){return e!==void 0&&e!=="parent"}function jt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function pl(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function gg(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function Fn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=It(e),a=vr({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:c}=n?bi(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const wl=e=>({width:e.offsetWidth,height:e.offsetHeight}),bl=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},$g=["INPUT","SELECT","TEXTAREA"];function _l(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:$g.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const xl=e=>"clientX"in e,It=(e,t)=>{var o,s;const n=xl(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},ks=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...wl(s)}})};function vg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,u=Math.abs(l-e),h=Math.abs(c-t);return[l,c,u,h]}function kr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Es({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case xe.Left:return[t-kr(t-r,o),n];case xe.Right:return[t+kr(r-t,o),n];case xe.Top:return[t,n-kr(n-i,o)];case xe.Bottom:return[t,n+kr(i-n,o)]}}function kl({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:i,targetPosition:o=xe.Top,curvature:s=.25}){const[a,l]=Es({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,u]=Es({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,f,g,y]=vg({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${i}`,h,f,g,y]}function El({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function yg({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function mg({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=pi(Gr(e),Gr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return rr(s,wi(o))>0}const pg=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,wg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),bg=(e,t)=>{if(!e.source||!e.target)return t;let n;return hl(e)?n={...e}:n={...e,id:pg(e)},wg(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Sl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=El({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ss={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},_g=({source:e,sourcePosition:t=xe.Bottom,target:n})=>t===xe.Left||t===xe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ps=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function xg({source:e,sourcePosition:t=xe.Bottom,target:n,targetPosition:r=xe.Top,center:i,offset:o}){const s=Ss[t],a=Ss[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},u=_g({source:l,sourcePosition:t,target:c}),h=u.x!==0?"x":"y",f=u[h];let g=[],y,p;const m={x:0,y:0},w={x:0,y:0},[O,_,v,N]=El({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){y=i.x??O,p=i.y??_;const b=[{x:y,y:l.y},{x:y,y:c.y}],R=[{x:l.x,y:p},{x:c.x,y:p}];s[h]===f?g=h==="x"?b:R:g=h==="x"?R:b}else{const b=[{x:l.x,y:c.y}],R=[{x:c.x,y:l.y}];if(h==="x"?g=s.x===f?R:b:g=s.y===f?b:R,t===r){const M=Math.abs(e[h]-n[h]);if(M<=o){const $=Math.min(o-1,o-M);s[h]===f?m[h]=(l[h]>e[h]?-1:1)*$:w[h]=(c[h]>n[h]?-1:1)*$}}if(t!==r){const M=h==="x"?"y":"x",$=s[h]===a[M],S=l[M]>c[M],P=l[M]<c[M];(s[h]===1&&(!$&&S||$&&P)||s[h]!==1&&(!$&&P||$&&S))&&(g=h==="x"?b:R)}const W={x:l.x+m.x,y:l.y+m.y},K={x:c.x+w.x,y:c.y+w.y},k=Math.max(Math.abs(W.x-g[0].x),Math.abs(K.x-g[0].x)),C=Math.max(Math.abs(W.y-g[0].y),Math.abs(K.y-g[0].y));k>=C?(y=(W.x+K.x)/2,p=g[0].y):(y=g[0].x,p=(W.y+K.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...g,{x:c.x+w.x,y:c.y+w.y},n],y,p,v,N]}function kg(e,t,n,r){const i=Math.min(Ps(e,t)/2,Ps(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*u}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Mo({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:i,targetPosition:o=xe.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[u,h,f,g,y]=xg({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:c});return[u.reduce((m,w,O)=>{let _="";return O>0&&O<u.length-1?_=kg(u[O-1],w,u[O+1],s):_=`${O===0?"M":"L"}${w.x} ${w.y}`,m+=_,m},""),h,f,g,y]}function Cs(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Eg(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Cs(t)||!Cs(n))return null;const r=t.internals.handleBounds||Ns(t.handles),i=n.internals.handleBounds||Ns(n.handles),o=Ms((r==null?void 0:r.source)??[],e.sourceHandle),s=Ms(e.connectionMode===Sn.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",tr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||xe.Bottom,l=(s==null?void 0:s.position)||xe.Top,c=ir(t,o,a),u=ir(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}function Ns(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ir(e,t,n=xe.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??jt(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case xe.Top:return{x:i+s/2,y:o};case xe.Right:return{x:i+s,y:o+a/2};case xe.Bottom:return{x:i+s/2,y:o+a};case xe.Left:return{x:i,y:o+a/2}}}function Ms(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function ao(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Sg(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=ao(l,t);o.has(c)||(s.push({id:c,color:l.color||n,...l}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Ao={nodeOrigin:[0,0],nodeExtent:io,elevateNodesOnSelect:!0,defaults:{}},Pg={...Ao,checkEquality:!0};function Io(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Cg(e,t,n){const r=Io(Ao,n);for(const i of e.values())if(i.parentId)zo(i,e,t,r);else{const o=gr(i,r.nodeOrigin),s=Nn(i.extent)?i.extent:r.nodeExtent,a=sn(o,s,jt(i));i.internals.positionAbsolute=a}}function Ng(e,t,n,r){var l,c;const i=Io(Pg,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let h=s.get(u.id);if(i.checkEquality&&u===(h==null?void 0:h.internals.userNode))t.set(u.id,h);else{const f=gr(u,i.nodeOrigin),g=Nn(u.extent)?u.extent:i.nodeExtent,y=sn(f,g,jt(u));h={...i.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:u.measured?h==null?void 0:h.internals.handleBounds:void 0,z:Pl(u,a),userNode:u}},t.set(u.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(o=!1),u.parentId&&zo(h,t,n,r)}return o}function Mg(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function zo(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=Io(Ao,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Mg(e,n);const c=i?1e3:0,{x:u,y:h,z:f}=Ag(e,l,o,s,c),{positionAbsolute:g}=e.internals,y=u!==g.x||h!==g.y;(y||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:u,y:h}:g,z:f}})}function Pl(e,t){return(Mt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Ag(e,t,n,r,i){const{x:o,y:s}=t.internals.positionAbsolute,a=jt(e),l=gr(e,n),c=Nn(e.extent)?sn(l,e.extent,a):l;let u=sn({x:o+c.x,y:s+c.y},r,a);e.extent==="parent"&&(u=vl(u,a,t));const h=Pl(e,i),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>h?f:h}}function Ig(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Cn(l),u=ml(c,a.rect);o.set(a.parentId,{expandedRect:u,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},c)=>{var _;const u=l.internals.positionAbsolute,h=jt(l),f=l.origin??r,g=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,y=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,p=Math.max(h.width,Math.round(a.width)),m=Math.max(h.height,Math.round(a.height)),w=(p-h.width)*f[0],O=(m-h.height)*f[1];(g>0||y>0||w||O)&&(i.push({id:c,type:"position",position:{x:l.position.x-g+w,y:l.position.y-y+O}}),(_=n.get(c))==null||_.forEach(v=>{e.some(N=>N.id===v.id)||i.push({id:v.id,type:"position",position:{x:v.position.x+g,y:v.position.y+y}})})),(h.width<a.width||h.height<a.height||g||y)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?f[0]*g-w:0),height:m+(y?f[1]*y-O:0)}})}),i}function zg(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(c.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const y=wl(f.nodeElement),p=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(p||!g.internals.handleBounds||f.force))){const w=f.nodeElement.getBoundingClientRect(),O=Nn(g.extent)?g.extent:o;let{positionAbsolute:_}=g.internals;g.parentId&&g.extent==="parent"?_=vl(_,y,t.get(g.parentId)):O&&(_=sn(_,O,y));const v={...g,measured:y,internals:{...g.internals,positionAbsolute:_,handleBounds:{source:ks("source",f.nodeElement,w,u,g.id),target:ks("target",f.nodeElement,w,u,g.id)}}};t.set(g.id,v),g.parentId&&zo(v,t,n,{nodeOrigin:i}),a=!0,p&&(l.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:Cn(v,i)}))}}if(h.length>0){const f=Ig(h,t,n,i);l.push(...f)}return{changes:l,updatedInternals:a}}async function Hg({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function As(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function Tg(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},c=`${i}-${s}--${o}-${a}`,u=`${o}-${a}--${i}-${s}`;As("source",l,u,e,i,s),As("target",l,c,e,o,a),t.set(r.id,r)}}function Cl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Cl(n,t):!1}function Is(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Og(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Cl(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Ti({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[c,u]of t){const h=(s=n.get(c))==null?void 0:s.internals.userNode;h&&i.push({...h,position:u.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function Dg({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},u=null,h=!1,f=null,g=!1;function y({noDragClassName:m,handleSelector:w,domNode:O,isSelectable:_,nodeId:v,nodeClickDistance:N=0}){f=ot(O);function z({x:K,y:k},C){const{nodeLookup:M,nodeExtent:$,snapGrid:S,snapToGrid:P,nodeOrigin:V,onNodeDrag:L,onSelectionDrag:T,onError:F,updateNodePositions:q}=t();o={x:K,y:k};let se=!1,de={x:0,y:0,x2:0,y2:0};if(a.size>1&&$){const ue=$r(a);de=so(ue)}for(const[ue,U]of a){if(!M.has(ue))continue;let Q={x:K-U.distance.x,y:k-U.distance.y};P&&(Q=bi(Q,S));let ne=[[$[0][0],$[0][1]],[$[1][0],$[1][1]]];if(a.size>1&&$&&!U.extent){const{positionAbsolute:B}=U.internals,X=B.x-de.x+$[0][0],H=B.x+U.measured.width-de.x2+$[1][0],D=B.y-de.y+$[0][1],Y=B.y+U.measured.height-de.y2+$[1][1];ne=[[X,D],[H,Y]]}const{position:te,positionAbsolute:I}=$l({nodeId:ue,nextPosition:Q,nodeLookup:M,nodeExtent:ne,nodeOrigin:V,onError:F});se=se||U.position.x!==te.x||U.position.y!==te.y,U.position=te,U.internals.positionAbsolute=I}if(se&&(q(a,!0),C&&(r||L||!v&&T))){const[ue,U]=Ti({nodeId:v,dragItems:a,nodeLookup:M});r==null||r(C,a,ue,U),L==null||L(C,ue,U),v||T==null||T(C,U)}}async function b(){if(!u)return;const{transform:K,panBy:k,autoPanSpeed:C,autoPanOnNodeDrag:M}=t();if(!M){l=!1,cancelAnimationFrame(s);return}const[$,S]=yl(c,u,C);($!==0||S!==0)&&(o.x=(o.x??0)-$/K[2],o.y=(o.y??0)-S/K[2],await k({x:$,y:S})&&z(o,null)),s=requestAnimationFrame(b)}function R(K){var se;const{nodeLookup:k,multiSelectionActive:C,nodesDraggable:M,transform:$,snapGrid:S,snapToGrid:P,selectNodesOnDrag:V,onNodeDragStart:L,onSelectionDragStart:T,unselectNodesAndEdges:F}=t();h=!0,(!V||!_)&&!C&&v&&((se=k.get(v))!=null&&se.selected||F()),_&&V&&v&&(e==null||e(v));const q=Fn(K.sourceEvent,{transform:$,snapGrid:S,snapToGrid:P,containerBounds:u});if(o=q,a=Og(k,M,q,v),a.size>0&&(n||L||!v&&T)){const[de,ue]=Ti({nodeId:v,dragItems:a,nodeLookup:k});n==null||n(K.sourceEvent,a,de,ue),L==null||L(K.sourceEvent,de,ue),v||T==null||T(K.sourceEvent,ue)}}const W=Ua().clickDistance(N).on("start",K=>{const{domNode:k,nodeDragThreshold:C,transform:M,snapGrid:$,snapToGrid:S}=t();u=(k==null?void 0:k.getBoundingClientRect())||null,g=!1,C===0&&R(K),o=Fn(K.sourceEvent,{transform:M,snapGrid:$,snapToGrid:S,containerBounds:u}),c=It(K.sourceEvent,u)}).on("drag",K=>{const{autoPanOnNodeDrag:k,transform:C,snapGrid:M,snapToGrid:$,nodeDragThreshold:S,nodeLookup:P}=t(),V=Fn(K.sourceEvent,{transform:C,snapGrid:M,snapToGrid:$,containerBounds:u});if((K.sourceEvent.type==="touchmove"&&K.sourceEvent.touches.length>1||v&&!P.has(v))&&(g=!0),!g){if(!l&&k&&h&&(l=!0,b()),!h){const L=V.xSnapped-(o.x??0),T=V.ySnapped-(o.y??0);Math.sqrt(L*L+T*T)>S&&R(K)}(o.x!==V.xSnapped||o.y!==V.ySnapped)&&a&&h&&(c=It(K.sourceEvent,u),z(V,K.sourceEvent))}}).on("end",K=>{if(!(!h||g)&&(l=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:k,updateNodePositions:C,onNodeDragStop:M,onSelectionDragStop:$}=t();if(C(a,!1),i||M||!v&&$){const[S,P]=Ti({nodeId:v,dragItems:a,nodeLookup:k,dragging:!1});i==null||i(K.sourceEvent,a,S,P),M==null||M(K.sourceEvent,S,P),v||$==null||$(K.sourceEvent,P)}}}).filter(K=>{const k=K.target;return!K.button&&(!m||!Is(k,`.${m}`,O))&&(!w||Is(k,w,O))});f.call(W)}function p(){f==null||f.on(".drag",null)}return{update:y,destroy:p}}function Rg(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())rr(i,Cn(o))>0&&r.push(o);return r}const Lg=250;function Yg(e,t,n,r){var a,l;let i=[],o=1/0;const s=Rg(e,n,t+Lg);for(const c of s){const u=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const h of u){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:f,y:g}=ir(c,h,h.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(i=[{...h,x:f,y:g}],o=y):y===o&&i.push({...h,x:f,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(u=>u.type===c)??i[0]}return i[0]}function Nl(e,t,n,r,i,o=!1){var c,u,h;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...ir(s,l,l.position,!0)}:l}function Ml(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Vg(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Al=()=>!0;function Xg(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:h,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:p,onConnectEnd:m,isValidConnection:w=Al,onReconnectEnd:O,updateConnection:_,getTransform:v,getFromHandle:N,autoPanSpeed:z}){const b=bl(e.target);let R=0,W;const{x:K,y:k}=It(e),C=b==null?void 0:b.elementFromPoint(K,k),M=Ml(o,C),$=a==null?void 0:a.getBoundingClientRect();if(!$||!M)return;const S=Nl(i,M,r,l,t);if(!S)return;let P=It(e,$),V=!1,L=null,T=!1,F=null;function q(){if(!u||!$)return;const[I,B]=yl(P,$,z);f({x:I,y:B}),R=requestAnimationFrame(q)}const se={...S,nodeId:i,type:M,position:S.position},de=l.get(i),U={inProgress:!0,isValid:null,from:ir(de,se,xe.Left,!0),fromHandle:se,fromPosition:se.position,fromNode:de,to:P,toHandle:null,toPosition:ws[se.position],toNode:null};_(U);let Q=U;y==null||y(e,{nodeId:i,handleId:r,handleType:M});function ne(I){if(!N()||!se){te(I);return}const B=v();P=It(I,$),W=Yg(vr(P,B,!1,[1,1]),n,l,se),V||(q(),V=!0);const X=Il(I,{handle:W,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:w,doc:b,lib:c,flowId:h,nodeLookup:l});F=X.handleDomNode,L=X.connection,T=Vg(!!W,X.isValid);const H={...Q,isValid:T,to:W&&T?Ur({x:W.x,y:W.y},B):P,toHandle:X.toHandle,toPosition:T&&X.toHandle?X.toHandle.position:ws[se.position],toNode:X.toHandle?l.get(X.toHandle.nodeId):null};T&&W&&Q.toHandle&&H.toHandle&&Q.toHandle.type===H.toHandle.type&&Q.toHandle.nodeId===H.toHandle.nodeId&&Q.toHandle.id===H.toHandle.id&&Q.to.x===H.to.x&&Q.to.y===H.to.y||(_(H),Q=H)}function te(I){(W||F)&&L&&T&&(p==null||p(L));const{inProgress:B,...X}=Q,H={...X,toPosition:Q.toHandle?Q.toPosition:null};m==null||m(I,H),o&&(O==null||O(I,H)),g(),cancelAnimationFrame(R),V=!1,T=!1,L=null,F=null,b.removeEventListener("mousemove",ne),b.removeEventListener("mouseup",te),b.removeEventListener("touchmove",ne),b.removeEventListener("touchend",te)}b.addEventListener("mousemove",ne),b.addEventListener("mouseup",te),b.addEventListener("touchmove",ne),b.addEventListener("touchend",te)}function Il(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:c=Al,nodeLookup:u}){const h=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=It(e),p=s.elementFromPoint(g,y),m=p!=null&&p.classList.contains(`${a}-flow__handle`)?p:f,w={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const O=Ml(void 0,m),_=m.getAttribute("data-nodeid"),v=m.getAttribute("data-handleid"),N=m.classList.contains("connectable"),z=m.classList.contains("connectableend");if(!_||!O)return w;const b={source:h?_:r,sourceHandle:h?v:i,target:h?r:_,targetHandle:h?i:v};w.connection=b;const W=N&&z&&(n===Sn.Strict?h&&O==="source"||!h&&O==="target":_!==r||v!==i);w.isValid=W&&c(b),w.toHandle=Nl(_,O,v,u,n,!1)}return w}const zs={onPointerDown:Xg,isValid:Il};function Wg({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ot(e);function o({translateExtent:a,width:l,height:c,zoomStep:u=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const y=_=>{const v=n();if(_.sourceEvent.type!=="wheel"||!t)return;const N=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*u,z=v[2]*Math.pow(2,N);t.scaleTo(z)};let p=[0,0];const m=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(p=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},w=_=>{const v=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const N=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],z=[N[0]-p[0],N[1]-p[1]];p=N;const b=r()*Math.max(v[2],Math.log(v[2]))*(g?-1:1),R={x:v[0]-z[0]*b,y:v[1]-z[1]*b},W=[[0,0],[l,c]];t.setViewportConstrained({x:R.x,y:R.y,zoom:v[2]},W,a)},O=dl().on("start",m).on("zoom",h?w:null).on("zoom.wheel",f?y:null);i.call(O,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:dt}}const Bg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,_i=e=>({x:e.x,y:e.y,zoom:e.k}),Oi=({x:e,y:t,zoom:n})=>mi.translate(e,t).scale(n),gn=(e,t)=>e.target.closest(`.${t}`),zl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Di=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Hl=e=>{const t=e.ctrlKey&&Qr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Fg({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(gn(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(u.ctrlKey&&s){const m=dt(u),w=Hl(u),O=h*Math.pow(2,w);r.scaleTo(n,O,m,u);return}const f=u.deltaMode===1?20:1;let g=i===Zt.Vertical?0:u.deltaX*f,y=i===Zt.Horizontal?0:u.deltaY*f;!Qr()&&u.shiftKey&&i!==Zt.Vertical&&(g=u.deltaY*f,y=0),r.translateBy(n,-(g/h)*o,-(y/h)*o,{internal:!0});const p=_i(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,p)),e.isPanScrolling&&(l==null||l(u,p),e.panScrollTimeout=setTimeout(()=>{c==null||c(u,p),e.isPanScrolling=!1},150))}}function Kg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=gn(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function qg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=_i(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Zg({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&zl(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,_i(o.transform)))}}function Gg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&zl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&Bg(e.prevViewport,s.transform))){const l=_i(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function Ug({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return u=>{var y;const h=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(gn(u,`${c}-flow__node`)||gn(u,`${c}-flow__edge`)))return!0;if(!r&&!h&&!i&&!o&&!n||s||gn(u,a)&&u.type==="wheel"||gn(u,l)&&(u.type!=="wheel"||i&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!h&&!i&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Qg({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=dl().clickDistance(!Mt(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),g=ot(e).call(f);_({x:o.x,y:o.y,zoom:Pn(o.zoom,t,n)},[[0,0],[h.width,h.height]],i);const y=g.on("wheel.zoom"),p=g.on("dblclick.zoom");f.wheelDelta(Hl);function m(C,M){return g?new Promise($=>{f==null||f.transform(Di(g,M==null?void 0:M.duration,()=>$(!0)),C)}):Promise.resolve(!1)}function w({noWheelClassName:C,noPanClassName:M,onPaneContextMenu:$,userSelectionActive:S,panOnScroll:P,panOnDrag:V,panOnScrollMode:L,panOnScrollSpeed:T,preventScrolling:F,zoomOnPinch:q,zoomOnScroll:se,zoomOnDoubleClick:de,zoomActivationKeyPressed:ue,lib:U,onTransformChange:Q}){S&&!u.isZoomingOrPanning&&O();const te=P&&!ue&&!S?Fg({zoomPanValues:u,noWheelClassName:C,d3Selection:g,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:T,zoomOnPinch:q,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):Kg({noWheelClassName:C,preventScrolling:F,d3ZoomHandler:y});if(g.on("wheel.zoom",te,{passive:!1}),!S){const B=qg({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});f.on("start",B);const X=Zg({zoomPanValues:u,panOnDrag:V,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:Q});f.on("zoom",X);const H=Gg({zoomPanValues:u,panOnDrag:V,panOnScroll:P,onPaneContextMenu:$,onPanZoomEnd:l,onDraggingChange:c});f.on("end",H)}const I=Ug({zoomActivationKeyPressed:ue,panOnDrag:V,zoomOnScroll:se,panOnScroll:P,zoomOnDoubleClick:de,zoomOnPinch:q,userSelectionActive:S,noPanClassName:M,noWheelClassName:C,lib:U});f.filter(I),de?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function O(){f.on("zoom",null)}async function _(C,M,$){const S=Oi(C),P=f==null?void 0:f.constrain()(S,M,$);return P&&await m(P),new Promise(V=>V(P))}async function v(C,M){const $=Oi(C);return await m($,M),new Promise(S=>S($))}function N(C){if(g){const M=Oi(C),$=g.property("__zoom");($.k!==C.zoom||$.x!==C.x||$.y!==C.y)&&(f==null||f.transform(g,M,null,{sync:!0}))}}function z(){const C=g?ul(g.node()):{x:0,y:0,k:1};return{x:C.x,y:C.y,zoom:C.k}}function b(C,M){return g?new Promise($=>{f==null||f.scaleTo(Di(g,M==null?void 0:M.duration,()=>$(!0)),C)}):Promise.resolve(!1)}function R(C,M){return g?new Promise($=>{f==null||f.scaleBy(Di(g,M==null?void 0:M.duration,()=>$(!0)),C)}):Promise.resolve(!1)}function W(C){f==null||f.scaleExtent(C)}function K(C){f==null||f.translateExtent(C)}function k(C){const M=!Mt(C)||C<0?0:C;f==null||f.clickDistance(M)}return{update:w,destroy:O,setViewport:v,setViewportConstrained:_,getViewport:z,scaleTo:b,scaleBy:R,setScaleExtent:W,setTranslateExtent:K,syncViewport:N,setClickDistance:k}}var $n;(function(e){e.Line="line",e.Handle="handle"})($n||($n={}));function Jg({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function jg(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Lt(e,t){return Math.max(0,t-e)}function Yt(e,t){return Math.max(0,e-t)}function Er(e,t,n){return Math.max(0,t-e,e-n)}function Hs(e,t){return e?!t:t}function e$(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:h}=t,f=u&&h,{xSnapped:g,ySnapped:y}=n,{minWidth:p,maxWidth:m,minHeight:w,maxHeight:O}=r,{x:_,y:v,width:N,height:z,aspectRatio:b}=e;let R=Math.floor(u?g-e.pointerX:0),W=Math.floor(h?y-e.pointerY:0);const K=N+(l?-R:R),k=z+(c?-W:W),C=-o[0]*N,M=-o[1]*z;let $=Er(K,p,m),S=Er(k,w,O);if(s){let L=0,T=0;l&&R<0?L=Lt(_+R+C,s[0][0]):!l&&R>0&&(L=Yt(_+K+C,s[1][0])),c&&W<0?T=Lt(v+W+M,s[0][1]):!c&&W>0&&(T=Yt(v+k+M,s[1][1])),$=Math.max($,L),S=Math.max(S,T)}if(a){let L=0,T=0;l&&R>0?L=Yt(_+R,a[0][0]):!l&&R<0&&(L=Lt(_+K,a[1][0])),c&&W>0?T=Yt(v+W,a[0][1]):!c&&W<0&&(T=Lt(v+k,a[1][1])),$=Math.max($,L),S=Math.max(S,T)}if(i){if(u){const L=Er(K/b,w,O)*b;if($=Math.max($,L),s){let T=0;!l&&!c||l&&!c&&f?T=Yt(v+M+K/b,s[1][1])*b:T=Lt(v+M+(l?R:-R)/b,s[0][1])*b,$=Math.max($,T)}if(a){let T=0;!l&&!c||l&&!c&&f?T=Lt(v+K/b,a[1][1])*b:T=Yt(v+(l?R:-R)/b,a[0][1])*b,$=Math.max($,T)}}if(h){const L=Er(k*b,p,m)/b;if(S=Math.max(S,L),s){let T=0;!l&&!c||c&&!l&&f?T=Yt(_+k*b+C,s[1][0])/b:T=Lt(_+(c?W:-W)*b+C,s[0][0])/b,S=Math.max(S,T)}if(a){let T=0;!l&&!c||c&&!l&&f?T=Lt(_+k*b,a[1][0])/b:T=Yt(_+(c?W:-W)*b,a[0][0])/b,S=Math.max(S,T)}}}W=W+(W<0?S:-S),R=R+(R<0?$:-$),i&&(f?K>k*b?W=(Hs(l,c)?-R:R)/b:R=(Hs(l,c)?-W:W)*b:u?(W=R/b,c=l):(R=W*b,l=c));const P=l?_+R:_,V=c?v+W:v;return{width:N+(l?-R:R),height:z+(c?-W:W),x:o[0]*R*(l?-1:1)+P,y:o[1]*W*(c?-1:1)+V}}const Tl={width:0,height:0,x:0,y:0},t$={...Tl,pointerX:0,pointerY:0,aspectRatio:1};function n$(e){return[[0,0],[e.measured.width,e.measured.height]]}function r$(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function i$({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=ot(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:u,resizeDirection:h,onResizeStart:f,onResize:g,onResizeEnd:y,shouldResize:p}){let m={...Tl},w={...t$};const O=jg(l);let _,v=null,N=[],z,b,R;const W=Ua().on("start",K=>{const{nodeLookup:k,transform:C,snapGrid:M,snapToGrid:$,nodeOrigin:S,paneDomNode:P}=n();if(_=k.get(t),!_)return;v=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:V,ySnapped:L}=Fn(K.sourceEvent,{transform:C,snapGrid:M,snapToGrid:$,containerBounds:v});m={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},w={...m,pointerX:V,pointerY:L,aspectRatio:m.width/m.height},z=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(z=k.get(_.parentId),b=z&&_.extent==="parent"?n$(z):void 0),N=[],R=void 0;for(const[T,F]of k)if(F.parentId===t&&(N.push({id:T,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const q=r$(F,_,F.origin??S);R?R=[[Math.min(q[0][0],R[0][0]),Math.min(q[0][1],R[0][1])],[Math.max(q[1][0],R[1][0]),Math.max(q[1][1],R[1][1])]]:R=q}f==null||f(K,{...m})}).on("drag",K=>{const{transform:k,snapGrid:C,snapToGrid:M,nodeOrigin:$}=n(),S=Fn(K.sourceEvent,{transform:k,snapGrid:C,snapToGrid:M,containerBounds:v}),P=[];if(!_)return;const{x:V,y:L,width:T,height:F}=m,q={},se=_.origin??$,{width:de,height:ue,x:U,y:Q}=e$(w,O,S,c,u,se,b,R),ne=de!==T,te=ue!==F,I=U!==V&&ne,B=Q!==L&&te;if(!I&&!B&&!ne&&!te)return;if((I||B||se[0]===1||se[1]===1)&&(q.x=I?U:m.x,q.y=B?Q:m.y,m.x=q.x,m.y=q.y,N.length>0)){const Y=U-V,j=Q-L;for(const re of N)re.position={x:re.position.x-Y+se[0]*(de-T),y:re.position.y-j+se[1]*(ue-F)},P.push(re)}if((ne||te)&&(q.width=ne&&(!h||h==="horizontal")?de:m.width,q.height=te&&(!h||h==="vertical")?ue:m.height,m.width=q.width,m.height=q.height),z&&_.expandParent){const Y=se[0]*(q.width??0);q.x&&q.x<Y&&(m.x=Y,w.x=w.x-(q.x-Y));const j=se[1]*(q.height??0);q.y&&q.y<j&&(m.y=j,w.y=w.y-(q.y-j))}const X=Jg({width:m.width,prevWidth:T,height:m.height,prevHeight:F,affectsX:O.affectsX,affectsY:O.affectsY}),H={...m,direction:X};(p==null?void 0:p(K,H))!==!1&&(g==null||g(K,H),r(q,P))}).on("end",K=>{y==null||y(K,{...m}),i==null||i({...m})});o.call(W)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var o$=Te("<div><!></div>");function Mn(e,t){Ee(t,!0);let n=ee(t,"id",3,null),r=ee(t,"type",3,"source"),i=ee(t,"position",19,()=>xe.Top),o=ee(t,"isConnectableStart",3,!0),s=ee(t,"isConnectableEnd",3,!0),a=Rt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=wn("svelteflow__node_id"),c=wn("svelteflow__node_connectable");let u=x(()=>r()==="target"),h=x(()=>t.isConnectable!==void 0?t.isConnectable:c.value),f=St(),g=null;vo(()=>{if(t.onconnect||t.ondisconnect){f.edges;let k=f.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(g&&!rg(k,g)){const C=k??new Map;bs(g,C,t.ondisconnect),bs(C,g,t.onconnect)}g=new Map(k)}});let y=x(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:k,toHandle:C,isValid:M}=f.connection,$=k&&k.nodeId===l&&k.type===r()&&k.id===n(),S=C&&C.nodeId===l&&C.type===r()&&C.id===n(),P=f.connectionMode===Sn.Strict?(k==null?void 0:k.type)!==r():l!==(k==null?void 0:k.nodeId)||n()!==(k==null?void 0:k.id);return[!0,$,S,P,S&&M]}),p=x(()=>{let[k,C,M,$,S]=d(y);return k}),m=x(()=>{let[k,C,M,$,S]=d(y);return C}),w=x(()=>{let[k,C,M,$,S]=d(y);return M}),O=x(()=>{let[k,C,M,$,S]=d(y);return $}),_=x(()=>{let[k,C,M,$,S]=d(y);return S});function v(k){var M,$;const C=((M=f.onbeforeconnect)==null?void 0:M.call(f,k))??k;C&&(f.addEdge(C),($=f.onconnect)==null||$.call(f,k))}function N(k){const C=xl(k);(C&&k.button===0||!C)&&zs.onPointerDown(k,{handleId:n(),nodeId:l,isTarget:d(u),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:v,onConnectStart:(M,$)=>{var S;(S=f.onconnectstart)==null||S.call(f,M,{nodeId:$.nodeId,handleId:$.handleId,handleType:$.handleType})},onConnectEnd:(M,$)=>{var S;(S=f.onconnectend)==null||S.call(f,M,$)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle})}function z(k){var q,se;if(!l||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){(q=f.onclickconnectstart)==null||q.call(f,k,{nodeId:l,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const C=bl(k.target),M=t.isValidConnection??f.isValidConnection,{connectionMode:$,clickConnectStartHandle:S,flowId:P,nodeLookup:V}=f,{connection:L,isValid:T}=zs.isValid(k,{handle:{nodeId:l,id:n(),type:r()},connectionMode:$,fromNodeId:S.nodeId,fromHandleId:S.id??null,fromType:S.type,isValidConnection:M,flowId:P,doc:C,lib:"svelte",nodeLookup:V});T&&L&&v(L);const F=structuredClone(js(f.connection));delete F.inProgress,F.toPosition=F.toHandle?F.toHandle.position:null,(se=f.onclickconnectend)==null||se.call(f,k,F),f.clickConnectStartHandle=null}var b=o$(),R=()=>{};let W;var K=Re(b);nt(K,()=>t.children??Ot),ze(k=>W=un(b,W,{"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${f.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:N,ontouchstart:N,onclick:f.clickConnect?z:void 0,onkeypress:R,style:t.style,role:"button",tabindex:"-1",...a,[hn]:k}),[()=>({valid:d(_),connectingto:d(w),connectingfrom:d(m),source:!d(u),target:d(u),connectablestart:o(),connectableend:s(),connectable:d(h),connectionindicator:d(h)&&(!d(p)||d(O))&&(d(p)||f.clickConnectStartHandle?s():o())})]),fe(e,b),Se()}var s$=Te("<!> <!>",1);function Ol(e,t){Ee(t,!0);let n=ee(t,"targetPosition",19,()=>xe.Top),r=ee(t,"sourcePosition",19,()=>xe.Bottom);var i=s$(),o=Oe(i);Mn(o,{type:"target",get position(){return n()}});var s=ke(o),a=ke(s);Mn(a,{type:"source",get position(){return r()}}),ze(()=>{var l;return cn(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),fe(e,i),Se()}var a$=Te(" <!>",1);function l$(e,t){Ee(t,!0);let n=ee(t,"data",19,()=>({label:"Node"})),r=ee(t,"sourcePosition",19,()=>xe.Bottom);var i=a$(),o=Oe(i),s=ke(o);Mn(s,{type:"source",get position(){return r()}}),ze(()=>{var a;return cn(o,`${((a=n())==null?void 0:a.label)??""} `)}),fe(e,i),Se()}var c$=Te(" <!>",1);function u$(e,t){Ee(t,!0);let n=ee(t,"data",19,()=>({label:"Node"})),r=ee(t,"targetPosition",19,()=>xe.Top);var i=c$(),o=Oe(i),s=ke(o);Mn(s,{type:"target",get position(){return r()}}),ze(()=>{var a;return cn(o,`${((a=n())==null?void 0:a.label)??""} `)}),fe(e,i),Se()}function d$(e,t){}function Ts(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Ri(e,t){const n=St();let r=t;return Ts(e,n.domNode,t),{async update(i){var o;i!==r&&((o=e.parentNode)==null||o.removeChild(e),r=i),Ts(e,n.domNode,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}const Os=e=>og(e),f$=e=>hl(e);function xt(e){return e===void 0?void 0:`${e}px`}const Jr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var h$=Te("<div><!></div>");function g$(e,t){Ee(t,!0);let n=ee(t,"x",3,0),r=ee(t,"y",3,0),i=ee(t,"selectEdgeOnClick",3,!1),o=ee(t,"transparent",3,!1),s=Rt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=St(),l=wn("svelteflow__edge_id");let c=x(()=>{var y;return(y=a.visible.edges.get(l))==null?void 0:y.zIndex});var u=h$(),h=()=>{i()&&l&&a.handleEdgeSelection(l)};let f;var g=Re(u);nt(g,()=>t.children??Ot),qe(u,(y,p)=>Ri==null?void 0:Ri(y,p),()=>"edge-labels"),ze((y,p)=>f=un(u,f,{class:["svelte-flow__edge-label",{transparent:o()},t.class],role:"button",tabindex:"-1",onclick:h,...s,[mt]:{cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:y,height:p,"z-index":d(c)}},"svelte-w2n27y"),[()=>xt(t.width),()=>xt(t.height)]),fe(e,u),Se()}var $$=We("<path></path>"),v$=We('<path fill="none"></path><!><!>',1);function xi(e,t){let n=ee(t,"interactionWidth",3,20),r=Rt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=v$(),o=Oe(i),s=ke(o);{var a=u=>{var h=$$();let f;ze(()=>f=un(h,f,{d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),fe(u,h)};Xe(s,u=>{n()>0&&u(a)})}var l=ke(s);{var c=u=>{g$(u,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{var g=Ca();ze(()=>cn(g,t.label)),fe(h,g)},$$slots:{default:!0}})};Xe(l,u=>{t.label&&u(c)})}ze(()=>{_e(o,"id",t.id),_e(o,"d",t.path),vt(o,0,kt(["svelte-flow__edge-path",t.class])),_e(o,"marker-start",t.markerStart),_e(o,"marker-end",t.markerEnd),at(o,t.style)}),fe(e,i)}function Dl(e,t){Ee(t,!0);let n=x(()=>{var s;return kl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(s=t.pathOptions)==null?void 0:s.curvature})}),r=x(()=>{let[s,a,l]=d(n);return s}),i=x(()=>{let[s,a,l]=d(n);return a}),o=x(()=>{let[s,a,l]=d(n);return l});xi(e,{get id(){return t.id},get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Se()}function y$(e,t){Ee(t,!0);let n=x(()=>Mo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=x(()=>{let[s,a,l]=d(n);return s}),i=x(()=>{let[s,a,l]=d(n);return a}),o=x(()=>{let[s,a,l]=d(n);return l});xi(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Se()}function m$(e,t){Ee(t,!0);let n=x(()=>Sl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=x(()=>{let[s,a,l]=d(n);return s}),i=x(()=>{let[s,a,l]=d(n);return a}),o=x(()=>{let[s,a,l]=d(n);return l});xi(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Se()}function p$(e,t){Ee(t,!0);let n=x(()=>Mo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=x(()=>{let[s,a,l]=d(n);return s}),i=x(()=>{let[s,a,l]=d(n);return a}),o=x(()=>{let[s,a,l]=d(n);return l});xi(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Se()}function w$(e){Z(e,e.v+1)}function b$(e){let t=0,n=_n(0),r;return()=>{Ic()&&(d(n),Hn(()=>(t===0&&(r=Ue(()=>e(()=>w$(n)))),t+=1,()=>{Fc().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}var sr,ar;class _${constructor(t,n){ae(this,sr);ae(this,ar);On(this,sr,t),On(this,ar,b$(n))}get current(){return A(this,ar).call(this),A(this,sr).call(this)}}sr=new WeakMap,ar=new WeakMap;const x$=/\(.+\)/;class k$ extends _${constructor(t,n){let r=x$.test(t)?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Zi(i,"change",o))}}function E$(e,t,n,r){const i=new Map;return gl(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Ds(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l}=e,c=new Map;for(const u of t){const h=r.get(u.source),f=r.get(u.target);if(!h||!f)continue;if(a){const{visibleNodes:p,transform:m,width:w,height:O}=e;if(mg({sourceNode:h,targetNode:f,width:w,height:O,transform:m}))p.set(h.id,h),p.set(f.id,f);else continue}const g=i.get(u.id);if(g&&u===g.edge&&h==g.sourceNode&&f==g.targetNode){c.set(u.id,g);continue}const y=Eg({id:u.id,sourceNode:h,targetNode:f,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:o,onError:s});y&&c.set(u.id,{...n,...u,...y,zIndex:yg({selected:u.selected,zIndex:u.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:l}),sourceNode:h,targetNode:f,edge:u})}return c}const Rl={input:l$,output:u$,default:Ol,group:d$},Ll={straight:m$,smoothstep:y$,default:Dl,step:p$};function S$(e){var n,r,i,o,s,a,l,c,u,h,f,g,y,p,m,w,O,_,v,N,z,b,R,W,K,k,C,M,$,S,P,V,L,T,F,q,se,de,ue,U,Q,ne,te,I,B,X,H,D,Y,j,re,ie,G,J,oe,ce,le,he,ge,$e,ve,ye,me,pe,we,be,Ce,Ne,Me,Ae,Pe;class t{constructor(){ae(this,n,x(()=>e.props.id??"1"));ae(this,r,Ie(null));ae(this,i,Ie(null));ae(this,o,Ie(Ge(e.width??0)));ae(this,s,Ie(Ge(e.height??0)));ae(this,a,x(()=>{var Be;const E=Ng(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&E&&((Be=this.fitViewOptions)!=null&&Be.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),E}));ae(this,l,x(()=>this.panZoom!==null));ae(this,c,x(()=>(Tg(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Fe(this,"_prevSelectedNodes",[]);Fe(this,"_prevSelectedNodeIds",new Set);ae(this,u,x(()=>{const E=this._prevSelectedNodeIds.size,Be=new Set,Tn=this.nodes.filter(ct=>(ct.selected&&(Be.add(ct.id),this._prevSelectedNodeIds.delete(ct.id)),ct.selected));return(E!==Be.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Tn),this._prevSelectedNodeIds=Be,this._prevSelectedNodes}));Fe(this,"_prevSelectedEdges",[]);Fe(this,"_prevSelectedEdgeIds",new Set);ae(this,h,x(()=>{const E=this._prevSelectedEdgeIds.size,Be=new Set,Tn=this.edges.filter(ct=>(ct.selected&&(Be.add(ct.id),this._prevSelectedEdgeIds.delete(ct.id)),ct.selected));return(E!==Be.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Tn),this._prevSelectedEdgeIds=Be,this._prevSelectedEdges}));Fe(this,"selectionChangeHandlers",new Map);Fe(this,"nodeLookup",new Map);Fe(this,"parentLookup",new Map);Fe(this,"connectionLookup",new Map);Fe(this,"edgeLookup",new Map);Fe(this,"_prevVisibleEdges",new Map);ae(this,f,x(()=>{const{nodes:E,_edges:Be,_prevVisibleEdges:Tn,nodeLookup:ct,connectionMode:Bl,onerror:Fl,onlyRenderVisibleElements:Kl,defaultEdgeOptions:ql}=this;let yr,Ei;const To={edges:Be,defaultEdgeOptions:ql,previousEdges:Tn,nodeLookup:ct,connectionMode:Bl,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:Fl};if(Kl){const{viewport:Si,width:Oo,height:Do}=this,Ro=[Si.x,Si.y,Si.zoom];yr=E$(ct,Ro,Oo,Do),Ei=Ds({...To,onlyRenderVisible:!0,visibleNodes:yr,transform:Ro,width:Oo,height:Do})}else yr=this.nodeLookup,Ei=Ds(To);return{nodes:yr,edges:Ei}}));ae(this,g,x(()=>e.props.nodesDraggable??!0));ae(this,y,x(()=>e.props.nodesConnectable??!0));ae(this,p,x(()=>e.props.elementsSelectable??!0));ae(this,m,x(()=>e.props.nodesFocusable??!0));ae(this,w,x(()=>e.props.edgesFocusable??!0));ae(this,O,x(()=>e.props.disableKeyboardA11y??!1));ae(this,_,x(()=>e.props.minZoom??.5));ae(this,v,x(()=>e.props.maxZoom??2));ae(this,N,x(()=>e.props.nodeOrigin??[0,0]));ae(this,z,x(()=>e.props.nodeExtent??io));ae(this,b,x(()=>e.props.translateExtent??io));ae(this,R,x(()=>e.props.defaultEdgeOptions??{}));ae(this,W,x(()=>e.props.nodeDragThreshold??1));ae(this,K,x(()=>e.props.autoPanOnNodeDrag??!0));ae(this,k,x(()=>e.props.autoPanOnConnect??!0));Fe(this,"fitViewQueued",e.props.fitView??!1);Fe(this,"fitViewOptions",e.props.fitViewOptions);Fe(this,"fitViewResolver",null);ae(this,C,x(()=>e.props.snapGrid??null));ae(this,M,Ie(!1));ae(this,$,Ie(null));ae(this,S,Ie(!1));ae(this,P,Ie(!1));ae(this,V,Ie(!1));ae(this,L,Ie(!1));ae(this,T,Ie(!1));ae(this,F,Ie(null));ae(this,q,Ie(""));ae(this,se,x(()=>e.props.selectionMode??Zr.Partial));ae(this,de,x(()=>({...Rl,...e.props.nodeTypes})));ae(this,ue,x(()=>({...Ll,...e.props.edgeTypes})));ae(this,U,x(()=>e.props.noPanClass??"nopan"));ae(this,Q,x(()=>e.props.noDragClass??"nodrag"));ae(this,ne,x(()=>e.props.noWheelClass??"nowheel"));ae(this,te,Ie(Ge(e.props.initialViewport??{x:0,y:0,zoom:1})));ae(this,I,Ie(Ge(oo)));ae(this,B,x(()=>this._connection.inProgress?{...this._connection,to:vr(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));ae(this,X,x(()=>e.props.connectionMode??Sn.Strict));ae(this,H,x(()=>e.props.connectionRadius??20));ae(this,D,x(()=>e.props.isValidConnection??(()=>!0)));ae(this,Y,x(()=>e.props.selectNodesOnDrag??!0));ae(this,j,x(()=>e.props.defaultMarkerColor??"#b1b1b7"));ae(this,re,x(()=>Sg(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));ae(this,ie,x(()=>e.props.onlyRenderVisibleElements??!1));ae(this,G,x(()=>e.props.onflowerror??dg));ae(this,J,x(()=>e.props.ondelete));ae(this,oe,x(()=>e.props.onbeforedelete));ae(this,ce,x(()=>e.props.onbeforeconnect));ae(this,le,x(()=>e.props.onconnect));ae(this,he,x(()=>e.props.onconnectstart));ae(this,ge,x(()=>e.props.onconnectend));ae(this,$e,x(()=>e.props.onbeforereconnect));ae(this,ve,x(()=>e.props.onreconnect));ae(this,ye,x(()=>e.props.onreconnectstart));ae(this,me,x(()=>e.props.onreconnectend));ae(this,pe,x(()=>e.props.clickConnect??!0));ae(this,we,x(()=>e.props.onclickconnectstart));ae(this,be,x(()=>e.props.onclickconnectend));ae(this,Ce,Ie(null));ae(this,Ne,x(()=>e.props.onselectiondrag));ae(this,Me,x(()=>e.props.onselectiondragstart));ae(this,Ae,x(()=>e.props.onselectiondragstop));Fe(this,"resolveFitView",async()=>{var E;this.panZoom&&(await cg({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(E=this.fitViewResolver)==null||E.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Fe(this,"_prefersDark",new k$("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));ae(this,Pe,x(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"));if(e.props.fitView&&!e.props.initialViewport&&this.width&&this.height){const E=$r(this.nodeLookup,{filter:Be=>!!((Be.width||Be.initialWidth)&&(Be.height||Be.initialHeight))});this.viewport=No(E,this.width,this.height,.5,2,.1)}}get flowId(){return d(A(this,n))}set flowId(E){Z(A(this,n),E)}get domNode(){return d(A(this,r))}set domNode(E){Z(A(this,r),E,!0)}get panZoom(){return d(A(this,i))}set panZoom(E){Z(A(this,i),E,!0)}get width(){return d(A(this,o))}set width(E){Z(A(this,o),E,!0)}get height(){return d(A(this,s))}set height(E){Z(A(this,s),E,!0)}get nodesInitialized(){return d(A(this,a))}set nodesInitialized(E){Z(A(this,a),E)}get viewportInitialized(){return d(A(this,l))}set viewportInitialized(E){Z(A(this,l),E)}get _edges(){return d(A(this,c))}set _edges(E){Z(A(this,c),E)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(E){e.nodes=E}get edges(){return this._edges}set edges(E){e.edges=E}get selectedNodes(){return d(A(this,u))}set selectedNodes(E){Z(A(this,u),E)}get selectedEdges(){return d(A(this,h))}set selectedEdges(E){Z(A(this,h),E)}get visible(){return d(A(this,f))}set visible(E){Z(A(this,f),E)}get nodesDraggable(){return d(A(this,g))}set nodesDraggable(E){Z(A(this,g),E)}get nodesConnectable(){return d(A(this,y))}set nodesConnectable(E){Z(A(this,y),E)}get elementsSelectable(){return d(A(this,p))}set elementsSelectable(E){Z(A(this,p),E)}get nodesFocusable(){return d(A(this,m))}set nodesFocusable(E){Z(A(this,m),E)}get edgesFocusable(){return d(A(this,w))}set edgesFocusable(E){Z(A(this,w),E)}get disableKeyboardA11y(){return d(A(this,O))}set disableKeyboardA11y(E){Z(A(this,O),E)}get minZoom(){return d(A(this,_))}set minZoom(E){Z(A(this,_),E)}get maxZoom(){return d(A(this,v))}set maxZoom(E){Z(A(this,v),E)}get nodeOrigin(){return d(A(this,N))}set nodeOrigin(E){Z(A(this,N),E)}get nodeExtent(){return d(A(this,z))}set nodeExtent(E){Z(A(this,z),E)}get translateExtent(){return d(A(this,b))}set translateExtent(E){Z(A(this,b),E)}get defaultEdgeOptions(){return d(A(this,R))}set defaultEdgeOptions(E){Z(A(this,R),E)}get nodeDragThreshold(){return d(A(this,W))}set nodeDragThreshold(E){Z(A(this,W),E)}get autoPanOnNodeDrag(){return d(A(this,K))}set autoPanOnNodeDrag(E){Z(A(this,K),E)}get autoPanOnConnect(){return d(A(this,k))}set autoPanOnConnect(E){Z(A(this,k),E)}get snapGrid(){return d(A(this,C))}set snapGrid(E){Z(A(this,C),E)}get dragging(){return d(A(this,M))}set dragging(E){Z(A(this,M),E,!0)}get selectionRect(){return d(A(this,$))}set selectionRect(E){Z(A(this,$),E,!0)}get selectionKeyPressed(){return d(A(this,S))}set selectionKeyPressed(E){Z(A(this,S),E,!0)}get multiselectionKeyPressed(){return d(A(this,P))}set multiselectionKeyPressed(E){Z(A(this,P),E,!0)}get deleteKeyPressed(){return d(A(this,V))}set deleteKeyPressed(E){Z(A(this,V),E,!0)}get panActivationKeyPressed(){return d(A(this,L))}set panActivationKeyPressed(E){Z(A(this,L),E,!0)}get zoomActivationKeyPressed(){return d(A(this,T))}set zoomActivationKeyPressed(E){Z(A(this,T),E,!0)}get selectionRectMode(){return d(A(this,F))}set selectionRectMode(E){Z(A(this,F),E,!0)}get ariaLiveMessage(){return d(A(this,q))}set ariaLiveMessage(E){Z(A(this,q),E,!0)}get selectionMode(){return d(A(this,se))}set selectionMode(E){Z(A(this,se),E)}get nodeTypes(){return d(A(this,de))}set nodeTypes(E){Z(A(this,de),E)}get edgeTypes(){return d(A(this,ue))}set edgeTypes(E){Z(A(this,ue),E)}get noPanClass(){return d(A(this,U))}set noPanClass(E){Z(A(this,U),E)}get noDragClass(){return d(A(this,Q))}set noDragClass(E){Z(A(this,Q),E)}get noWheelClass(){return d(A(this,ne))}set noWheelClass(E){Z(A(this,ne),E)}get _viewport(){return d(A(this,te))}set _viewport(E){Z(A(this,te),E,!0)}get viewport(){return e.viewport??this._viewport}set viewport(E){e.viewport&&(e.viewport=E),this._viewport=E}get _connection(){return d(A(this,I))}set _connection(E){Z(A(this,I),E,!0)}get connection(){return d(A(this,B))}set connection(E){Z(A(this,B),E)}get connectionMode(){return d(A(this,X))}set connectionMode(E){Z(A(this,X),E)}get connectionRadius(){return d(A(this,H))}set connectionRadius(E){Z(A(this,H),E)}get isValidConnection(){return d(A(this,D))}set isValidConnection(E){Z(A(this,D),E)}get selectNodesOnDrag(){return d(A(this,Y))}set selectNodesOnDrag(E){Z(A(this,Y),E)}get defaultMarkerColor(){return d(A(this,j))}set defaultMarkerColor(E){Z(A(this,j),E)}get markers(){return d(A(this,re))}set markers(E){Z(A(this,re),E)}get onlyRenderVisibleElements(){return d(A(this,ie))}set onlyRenderVisibleElements(E){Z(A(this,ie),E)}get onerror(){return d(A(this,G))}set onerror(E){Z(A(this,G),E)}get ondelete(){return d(A(this,J))}set ondelete(E){Z(A(this,J),E)}get onbeforedelete(){return d(A(this,oe))}set onbeforedelete(E){Z(A(this,oe),E)}get onbeforeconnect(){return d(A(this,ce))}set onbeforeconnect(E){Z(A(this,ce),E)}get onconnect(){return d(A(this,le))}set onconnect(E){Z(A(this,le),E)}get onconnectstart(){return d(A(this,he))}set onconnectstart(E){Z(A(this,he),E)}get onconnectend(){return d(A(this,ge))}set onconnectend(E){Z(A(this,ge),E)}get onbeforereconnect(){return d(A(this,$e))}set onbeforereconnect(E){Z(A(this,$e),E)}get onreconnect(){return d(A(this,ve))}set onreconnect(E){Z(A(this,ve),E)}get onreconnectstart(){return d(A(this,ye))}set onreconnectstart(E){Z(A(this,ye),E)}get onreconnectend(){return d(A(this,me))}set onreconnectend(E){Z(A(this,me),E)}get clickConnect(){return d(A(this,pe))}set clickConnect(E){Z(A(this,pe),E)}get onclickconnectstart(){return d(A(this,we))}set onclickconnectstart(E){Z(A(this,we),E)}get onclickconnectend(){return d(A(this,be))}set onclickconnectend(E){Z(A(this,be),E)}get clickConnectStartHandle(){return d(A(this,Ce))}set clickConnectStartHandle(E){Z(A(this,Ce),E,!0)}get onselectiondrag(){return d(A(this,Ne))}set onselectiondrag(E){Z(A(this,Ne),E)}get onselectiondragstart(){return d(A(this,Me))}set onselectiondragstart(E){Z(A(this,Me),E)}get onselectiondragstop(){return d(A(this,Ae))}set onselectiondragstop(E){Z(A(this,Ae),E)}get colorMode(){return d(A(this,Pe))}set colorMode(E){Z(A(this,Pe),E)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=oo,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,p=new WeakMap,m=new WeakMap,w=new WeakMap,O=new WeakMap,_=new WeakMap,v=new WeakMap,N=new WeakMap,z=new WeakMap,b=new WeakMap,R=new WeakMap,W=new WeakMap,K=new WeakMap,k=new WeakMap,C=new WeakMap,M=new WeakMap,$=new WeakMap,S=new WeakMap,P=new WeakMap,V=new WeakMap,L=new WeakMap,T=new WeakMap,F=new WeakMap,q=new WeakMap,se=new WeakMap,de=new WeakMap,ue=new WeakMap,U=new WeakMap,Q=new WeakMap,ne=new WeakMap,te=new WeakMap,I=new WeakMap,B=new WeakMap,X=new WeakMap,H=new WeakMap,D=new WeakMap,Y=new WeakMap,j=new WeakMap,re=new WeakMap,ie=new WeakMap,G=new WeakMap,J=new WeakMap,oe=new WeakMap,ce=new WeakMap,le=new WeakMap,he=new WeakMap,ge=new WeakMap,$e=new WeakMap,ve=new WeakMap,ye=new WeakMap,me=new WeakMap,pe=new WeakMap,we=new WeakMap,be=new WeakMap,Ce=new WeakMap,Ne=new WeakMap,Me=new WeakMap,Ae=new WeakMap,Pe=new WeakMap,new t}function St(){const e=wn(jr);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const jr=Symbol();function Yl(e){const t=S$(e);function n(k){t.nodeTypes={...Rl,...k}}function r(k){t.edgeTypes={...Ll,...k}}function i(k){t.edges=bg(k,t.edges)}const o=(k,C=!1)=>{t.nodes=t.nodes.map(M=>{const $=k.get(M.id);return $?{...M,position:$.position,dragging:C}:M})};function s(k){var S,P,V;const{changes:C,updatedInternals:M}=zg(k,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!M)return;Cg(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const $=new Map;for(const L of C){const T=(S=t.nodeLookup.get(L.id))==null?void 0:S.internals.userNode;if(!T)continue;const F={...T};switch(L.type){case"dimensions":{const q={...F.measured,...L.dimensions};L.setAttributes&&(F.width=((P=L.dimensions)==null?void 0:P.width)??F.width,F.height=((V=L.dimensions)==null?void 0:V.height)??F.height),F.measured=q;break}case"position":F.position=L.position??F.position;break}$.set(L.id,F)}t.nodes=t.nodes.map(L=>$.get(L.id)??L),t.nodesInitialized||(t.nodesInitialized=!0)}function a(k){const C=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=k,t.fitViewResolver=C,t.nodes=[...t.nodes],C.promise}function l(k,C){const M=t.panZoom;return M?M.scaleBy(k,C):Promise.resolve(!1)}function c(k){return l(1.2,k)}function u(k){return l(1/1.2,k)}function h(k){const C=t.panZoom;C&&(C.setScaleExtent([k,t.maxZoom]),t.minZoom=k)}function f(k){const C=t.panZoom;C&&(C.setScaleExtent([t.minZoom,k]),t.maxZoom=k)}function g(k){const C=t.panZoom;C&&(C.setTranslateExtent(k),t.translateExtent=k)}function y(k){var C;(C=t.panZoom)==null||C.setClickDistance(k)}function p(k,C=null){let M=!1;const $=k.map(S=>(C?C.has(S.id):!0)&&S.selected?(M=!0,{...S,selected:!1}):S);return[M,$]}function m(k){const C=k!=null&&k.nodes?new Set(k.nodes.map(L=>L.id)):null,[M,$]=p(t.nodes,C);M&&(t.nodes=$);const S=k!=null&&k.edges?new Set(k.edges.map(L=>L.id)):null,[P,V]=p(t.edges,S);P&&(t.edges=V)}function w(k){const C=t.multiselectionKeyPressed;t.nodes=t.nodes.map(M=>{const $=k.includes(M.id),S=C&&M.selected||$;if(M.selected!==S){const P=t.nodeLookup.get(M.id);return P&&(P.selected=S),M.selected=S,{...M}}return M}),C||m({nodes:[]})}function O(k){const C=t.multiselectionKeyPressed;t.edges=t.edges.map(M=>{const $=k.includes(M.id),S=C&&M.selected||$;return M.selected!==S?{...M,selected:S}:M}),C||m({edges:[]})}function _(k,C,M){const $=t.nodeLookup.get(k);if(!$){console.warn("012",tr.error012(k));return}t.selectionRect=null,t.selectionRectMode=null,$.selected?(C||$.selected&&t.multiselectionKeyPressed)&&(m({nodes:[$],edges:[]}),requestAnimationFrame(()=>M==null?void 0:M.blur())):w([k])}function v(k){const C=t.edgeLookup.get(k);if(!C){console.warn("012",tr.error012(k));return}(C.selectable||t.elementsSelectable&&typeof C.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,C.selected?C.selected&&t.multiselectionKeyPressed&&m({nodes:[],edges:[C]}):O([k]))}function N(k,C){const{nodeExtent:M,snapGrid:$,nodeOrigin:S,nodeLookup:P,nodesDraggable:V,onerror:L}=t,T=new Map,F=($==null?void 0:$[0])??5,q=($==null?void 0:$[1])??5,se=k.x*F*C,de=k.y*q*C;for(const ue of P.values()){if(!(ue.selected&&(ue.draggable||V&&typeof ue.draggable>"u")))continue;let Q={x:ue.internals.positionAbsolute.x+se,y:ue.internals.positionAbsolute.y+de};$&&(Q=bi(Q,$));const{position:ne,positionAbsolute:te}=$l({nodeId:ue.id,nextPosition:Q,nodeLookup:P,nodeExtent:M,nodeOrigin:S,onError:L});ue.position=ne,ue.internals.positionAbsolute=te,T.set(ue.id,ue)}o(T)}function z(k){return Hg({delta:k,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const b=k=>{t._connection={...k}};function R(){t._connection=oo}function W(){t.resetStoreValues(),m()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:c,zoomOut:u,fitView:a,setMinZoom:h,setMaxZoom:f,setTranslateExtent:g,setPaneClickDistance:y,unselectNodesAndEdges:m,addSelectedNodes:w,addSelectedEdges:O,handleNodeSelection:_,handleEdgeSelection:v,moveSelectedNodes:N,panBy:z,updateConnection:b,cancelConnection:R,reset:W})}function Li(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,translateExtent:o,paneClickDistance:s,setPanZoomInstance:a,onDraggingChange:l,onTransformChange:c}=t,u=Qg({domNode:e,minZoom:n,maxZoom:r,translateExtent:o,viewport:i,paneClickDistance:s,onDraggingChange:l}),h=u.getViewport();return(i.x!==h.x||i.y!==h.y||i.zoom!==h.zoom)&&c([h.x,h.y,h.zoom]),a(u),u.update(t),{update(f){u.update(f)}}}var P$=Te('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function C$(e,t){Ee(t,!0);let n=ee(t,"store",15),r=ee(t,"panOnScrollMode",19,()=>Zt.Free),i=ee(t,"preventScrolling",3,!0),o=ee(t,"zoomOnScroll",3,!0),s=ee(t,"zoomOnDoubleClick",3,!0),a=ee(t,"zoomOnPinch",3,!0),l=ee(t,"panOnDrag",3,!0),c=ee(t,"panOnScroll",3,!1),u=ee(t,"paneClickDistance",3,1),h=x(()=>n().panActivationKeyPressed||l()),f=x(()=>n().panActivationKeyPressed||c());const{viewport:g}=n();let y=!1;zt(()=>{var w;!y&&n().viewportInitialized&&((w=t.oninit)==null||w.call(t),y=!0)});var p=P$(),m=Re(p);nt(m,()=>t.children),qe(p,(w,O)=>Li==null?void 0:Li(w,O),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:w=>{n(n().dragging=w,!0)},setPanZoomInstance:w=>{n(n().panZoom=w,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:o(),zoomOnDoubleClick:s(),zoomOnPinch:a(),panOnScroll:d(f),panOnDrag:d(h),panOnScrollSpeed:.5,panOnScrollMode:r()||Zt.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof i()=="boolean"?i():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:u(),onTransformChange:w=>{n(n().viewport={x:w[0],y:w[1],zoom:w[2]},!0)}})),fe(e,p),Se()}function Rs(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Ls(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Ys(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var N$=Te("<div><!></div>");function M$(e,t){Ee(t,!0);let n=ee(t,"store",15),r=ee(t,"panOnDrag",3,!0),i,o=null,s=new Set,a=new Set,l=x(()=>n().panActivationKeyPressed||r()),c=x(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&d(l)!==!0),u=x(()=>n().elementsSelectable&&(d(c)||n().selectionRectMode==="user")),h=!1;function f(z){var b;if(h||n().connection.inProgress){h=!1;return}(b=t.onpaneclick)==null||b.call(t,{event:z}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(z){var W,K,k;if(o=i==null?void 0:i.getBoundingClientRect(),!n().elementsSelectable||!d(c)||z.button!==0||z.target!==i||!o)return;(K=(W=z.target)==null?void 0:W.setPointerCapture)==null||K.call(W,z.pointerId);const{x:b,y:R}=It(z,o);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:b,startY:R,x:b,y:R},!0),(k=t.onselectionstart)==null||k.call(t,z)}function y(z){if(!d(c)||!o||!n().selectionRect)return;h=!0;const b=It(z,o),{startX:R=0,startY:W=0}=n().selectionRect,K={...n().selectionRect,x:b.x<R?b.x:R,y:b.y<W?b.y:W,width:Math.abs(b.x-R),height:Math.abs(b.y-W)},k=s,C=a;s=new Set(gl(n().nodeLookup,K,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Zr.Partial,!0).map($=>$.id));const M=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const $ of s){const S=n().connectionLookup.get($);if(S)for(const{edgeId:P}of S.values()){const V=n().edgeLookup.get(P);V&&(V.selectable??M)&&a.add(P)}}Ys(k,s)||n(n().nodes=n().nodes.map(Ls(s)),!0),Ys(C,a)||n(n().edges=n().edges.map(Ls(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=K,!0)}function p(z){var b,R,W;z.button===0&&((R=(b=z.target)==null?void 0:b.releasePointerCapture)==null||R.call(b,z.pointerId),!d(c)&&n().selectionRectMode==="user"&&z.target===i&&(f==null||f(z)),n(n().selectionRect=null,!0),s.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),(W=t.onselectionend)==null||W.call(t,z))}const m=z=>{var b;if(Array.isArray(d(l))&&d(l).includes(2)){z.preventDefault();return}(b=t.onpanecontextmenu)==null||b.call(t,{event:z})};var w=N$();let O;var _=x(()=>d(u)?void 0:Rs(f,i));w.__click=function(...z){var b;(b=d(_))==null||b.apply(this,z)},w.__pointerdown=function(...z){var b;(b=d(u)?g:void 0)==null||b.apply(this,z)},w.__pointermove=function(...z){var b;(b=d(u)?y:void 0)==null||b.apply(this,z)},w.__pointerup=function(...z){var b;(b=d(u)?p:void 0)==null||b.apply(this,z)};var v=x(()=>Rs(m,i));w.__contextmenu=function(...z){var b;(b=d(v))==null||b.apply(this,z)};var N=Re(w);nt(N,()=>t.children),Jt(w,z=>i=z,()=>i),ze(z=>O=vt(w,1,"svelte-flow__pane svelte-flow__container",null,O,z),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:d(c)})]),fe(e,w),Se()}ln(["click","pointerdown","pointermove","pointerup","contextmenu"]);var A$=Te('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function I$(e,t){Ee(t,!0);var n=A$();let r;var i=Re(n);nt(i,()=>t.children),ze(()=>r=at(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),fe(e,n),Se()}function mn(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=Dg({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:u}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(c,u){if(u.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){a.destroy()}}}var z$=Te('<div aria-live="assertive" aria-atomic="true" style="position: absolute; width: 1px; height: 1px; margin: -1px; border: 0; padding: 0; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); clip-path: inset(100%);"> </div>'),H$=Te(`<div style="display: none;">Press enter or space to select a node. <!> Press delete to remove it and escape to cancel.</div> <div style="display: none;">Press enter or space to select an edge. You can then press delete to remove it or escape to
  cancel.</div> <!>`,1);function T$(e,t){Ee(t,!0);var n=H$(),r=Oe(n),i=ke(Re(r));{var o=c=>{var u=Ca("You can then use the arrow keys to move the node around.");fe(c,u)};Xe(i,c=>{t.store.disableKeyboardA11y||c(o)})}var s=ke(r,2),a=ke(s,2);{var l=c=>{var u=z$(),h=Re(u);ze(()=>{_e(u,"id",`${O$}-${t.store.flowId}`),cn(h,t.store.ariaLiveMessage)}),fe(c,u)};Xe(a,c=>{t.store.disableKeyboardA11y||c(l)})}ze(()=>{_e(r,"id",`${Vl}-${t.store.flowId}`),_e(s,"id",`${Xl}-${t.store.flowId}`)}),fe(e,n),Se()}const Vl="svelte-flow__node-desc",Xl="svelte-flow__edge-desc",O$="svelte-flow__aria-live";function D$(e,t,n,r,i,o,s){var a;d(t)&&(!n().selectNodesOnDrag||!d(r)||n().nodeDragThreshold>0)&&n().handleNodeSelection(i),(a=o.onnodeclick)==null||a.call(o,{node:d(s),event:e})}var R$=Te("<div><!></div>");function L$(e,t){Ee(t,!0);let n=ee(t,"store",15),r=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return D}),i=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Y}),o=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return j}),s=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return re}),a=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return ie}),l=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return G}),c=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return J}),u=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return oe}),h=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return ce}),f=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return le}),g=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return he}),y=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return ge}),p=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return $e}),m=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return ve}),w=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return ye}),O=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return me}),_=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return pe}),v=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return we}),N=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return be}),z=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Ce}),b=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Ne}),R=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Me}),W=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Ae}),K=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Pe}),k=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return Ye}),C=x(()=>{let{data:D={},selected:Y=!1,draggable:j,selectable:re,deletable:ie=!0,connectable:G,focusable:J,hidden:oe=!1,dragging:ce=!1,style:le="",class:he,type:ge="default",parentId:$e,sourcePosition:ve,targetPosition:ye,measured:{width:me,height:pe}={width:0,height:0},initialWidth:we,initialHeight:be,width:Ce,height:Ne,dragHandle:Me,internals:{z:Ae=0,positionAbsolute:{x:Pe,y:Ye},userNode:E}}=t.node;return E}),{id:M}=t.node,$=x(()=>d(o)??n().nodesDraggable),S=x(()=>d(s)??n().elementsSelectable),P=x(()=>d(l)??n().nodesConnectable),V=x(()=>pl(t.node)&&!!t.node.internals.handleBounds),L=x(()=>d(c)??n().nodesFocusable);function T(D){return n().parentLookup.has(D)}let F=x(()=>T(M)),q=Ie(null),se=null,de=d(y),ue=d(m),U=d(w),Q=x(()=>n().nodeTypes[d(y)]??Ol);Kn("svelteflow__node_connectable",{get value(){return d(P)}}),Kn("svelteflow__node_id",M);let te=x(()=>{const D=d(O)===void 0?d(z)??d(v):d(z),Y=d(_)===void 0?d(b)??d(N):d(b);if(!(D===void 0&&Y===void 0&&d(f)===void 0))return`${d(f)};${D?`width:${xt(D)};`:""}${Y?`height:${xt(Y)};`:""}`});zt(()=>{(d(y)!==de||d(m)!==ue||d(w)!==U)&&d(q)!==null&&requestAnimationFrame(()=>{d(q)!==null&&n().updateNodeInternals(new Map([[M,{id:M,nodeElement:d(q),force:!0}]]))}),de=d(y),ue=d(m),U=d(w)}),zt(()=>{t.resizeObserver&&(!d(V)||d(q)!==se)&&(se&&t.resizeObserver.unobserve(se),d(q)&&t.resizeObserver.observe(d(q)),se=d(q))}),hi(()=>{var D;se&&((D=t.resizeObserver)==null||D.unobserve(se))});function I(D){if(!(_l(D)||n().disableKeyboardA11y))if(fl.includes(D.key)&&d(S)){const Y=D.key==="Escape";n().handleNodeSelection(M,Y,d(q))}else d($)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Jr,D.key)&&(D.preventDefault(),n(n().ariaLiveMessage=`Moved selected node ${D.key.replace("Arrow","").toLowerCase()}. New position, x: ${t.node.internals.positionAbsolute.x}, y: ${t.node.internals.positionAbsolute.y}`,!0),n().moveSelectedNodes(Jr[D.key],D.shiftKey?4:1))}var B=et(),X=Oe(B);{var H=D=>{var Y=R$();_e(Y,"data-id",M);let j,re;Y.__click=[D$,S,n,$,M,t,C],Y.__pointermove=function(...G){var J;(J=t.onnodepointermove?oe=>t.onnodepointermove({node:d(C),event:oe}):void 0)==null||J.apply(this,G)},Y.__contextmenu=function(...G){var J;(J=t.onnodecontextmenu?oe=>t.onnodecontextmenu({node:d(C),event:oe}):void 0)==null||J.apply(this,G)},Y.__keydown=function(...G){var J;(J=d(L)?I:void 0)==null||J.apply(this,G)};var ie=Re(Y);wo(ie,()=>d(Q),(G,J)=>{J(G,{get data(){return d(r)},id:M,get selected(){return d(i)},get selectable(){return d(S)},get deletable(){return d(a)},get sourcePosition(){return d(m)},get targetPosition(){return d(w)},get zIndex(){return d(W)},get dragging(){return d(h)},get draggable(){return d($)},get dragHandle(){return d(R)},get parentId(){return d(p)},get type(){return d(y)},get isConnectable(){return d(P)},get positionAbsoluteX(){return d(K)},get positionAbsoluteY(){return d(k)},get width(){return d(z)},get height(){return d(b)}})}),qe(Y,(G,J)=>mn==null?void 0:mn(G,J),()=>({nodeId:M,isSelectable:d(S),disabled:!d($),handleSelector:d(R),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(G,J,oe,ce)=>{var le;(le=t.onnodedrag)==null||le.call(t,{event:G,targetNode:oe,nodes:ce})},onDragStart:(G,J,oe,ce)=>{var le;(le=t.onnodedragstart)==null||le.call(t,{event:G,targetNode:oe,nodes:ce})},onDragStop:(G,J,oe,ce)=>{var le;(le=t.onnodedragstop)==null||le.call(t,{event:G,targetNode:oe,nodes:ce})},store:n()})),Jt(Y,G=>Z(q,G),()=>d(q)),ze(G=>{j=vt(Y,1,kt(["svelte-flow__node",`svelte-flow__node-${d(y)}`,d(g)]),null,j,G),re=at(Y,d(te),re,{"z-index":d(W),transform:`translate(${d(K)??""}px, ${d(k)??""}px)`,visibility:d(V)?"visible":"hidden"}),_e(Y,"tabindex",d(L)?0:void 0),_e(Y,"role",d(L)?"button":void 0),_e(Y,"aria-describedby",n().disableKeyboardA11y?void 0:`${Vl}-${n().flowId}`)},[()=>({dragging:d(h),selected:d(i),draggable:d($),connectable:d(P),selectable:d(S),nopan:d($),parent:d(F)})]),je("pointerenter",Y,function(...G){var J;(J=t.onnodepointerenter?oe=>t.onnodepointerenter({node:d(C),event:oe}):void 0)==null||J.apply(this,G)}),je("pointerleave",Y,function(...G){var J;(J=t.onnodepointerleave?oe=>t.onnodepointerleave({node:d(C),event:oe}):void 0)==null||J.apply(this,G)}),fe(D,Y)};Xe(X,D=>{d(u)||D(H)})}fe(e,B),Se()}ln(["click","pointermove","contextmenu","keydown"]);var Y$=Te('<div class="svelte-flow__nodes"></div>');function V$(e,t){Ee(t,!0);let n=ee(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});hi(()=>{r==null||r.disconnect()});var i=Y$();fi(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{L$(o,{get node(){return d(s)},resizeObserver:r,get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),fe(e,i),Se()}var X$=We('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function W$(e,t){Ee(t,!0);let n=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return U}),r=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return Q}),i=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return ne}),o=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return te}),s=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return I}),a=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return B}),l=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return X}),c=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return H}),u=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return D}),h=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return Y}),f=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return j}),g=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return re}),y=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return ie}),p=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return G}),m=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return J}),w=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return oe}),O=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return ce}),_=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return le}),v=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return he}),N=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return ge}),z=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return $e}),b=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return ve}),R=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return ye}),W=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return me}),K=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return pe}),k=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return we}),C=x(()=>{let{source:U,target:Q,sourceX:ne,sourceY:te,targetX:I,targetY:B,sourcePosition:X,targetPosition:H,animated:D=!1,selected:Y=!1,label:j,labelStyle:re,data:ie={},style:G,interactionWidth:J,type:oe="default",sourceHandle:ce,targetHandle:le,markerStart:he,markerEnd:ge,selectable:$e,focusable:ve,deletable:ye=!0,hidden:me,zIndex:pe,class:we,ariaLabel:be}=t.edge;return be}),M=null;const{id:$}=t.edge;Kn("svelteflow__edge_id",$);let S=x(()=>d(z)??t.store.elementsSelectable),P=x(()=>d(b)??t.store.edgesFocusable),V=x(()=>t.store.edgeTypes[d(w)]??Dl),L=x(()=>d(v)?`url('#${ao(d(v),t.store.flowId)}')`:void 0),T=x(()=>d(N)?`url('#${ao(d(N),t.store.flowId)}')`:void 0);function F(U){var ne;const Q=t.store.edgeLookup.get($);Q&&(d(S)&&t.store.handleEdgeSelection($),(ne=t.onedgeclick)==null||ne.call(t,{event:U,edge:Q}))}function q(U,Q){const ne=t.store.edgeLookup.get($);ne&&Q({event:U,edge:ne})}onkeydown=U=>{if(!t.store.disableKeyboardA11y&&fl.includes(U.key)&&d(S)){const{unselectNodesAndEdges:Q,addSelectedEdges:ne}=t.store;U.key==="Escape"?(M==null||M.blur(),Q({edges:[t.edge]})):ne([$])}};var se=et(),de=Oe(se);{var ue=U=>{var Q=X$();let ne;var te=Re(Q);let I;_e(te,"data-id",$),te.__click=F,te.__contextmenu=function(...X){var H;(H=t.onedgecontextmenu?D=>{q(D,t.onedgecontextmenu)}:void 0)==null||H.apply(this,X)},te.__keydown=function(...X){var H;(H=d(P)?onkeydown:void 0)==null||H.apply(this,X)};var B=Re(te);wo(B,()=>d(V),(X,H)=>{H(X,{id:$,get source(){return d(n)},get target(){return d(r)},get sourceX(){return d(i)},get sourceY(){return d(o)},get targetX(){return d(s)},get targetY(){return d(a)},get sourcePosition(){return d(l)},get targetPosition(){return d(c)},get animated(){return d(u)},get selected(){return d(h)},get label(){return d(f)},get labelStyle(){return d(g)},get data(){return d(y)},get style(){return d(p)},get interactionWidth(){return d(m)},get selectable(){return d(S)},get deletable(){return d(R)},get type(){return d(w)},get sourceHandleId(){return d(O)},get targetHandleId(){return d(_)},get markerStart(){return d(L)},get markerEnd(){return d(T)}})}),Jt(te,X=>M=X,()=>M),ze(X=>{ne=at(Q,"",ne,{"z-index":d(K)}),I=vt(te,0,kt(["svelte-flow__edge",d(k)]),null,I,X),_e(te,"aria-label",d(C)===null?void 0:d(C)?d(C):`Edge from ${d(n)} to ${d(r)}`),_e(te,"aria-describedby",d(P)?`${Xl}-${t.store.flowId}`:void 0),_e(te,"role",d(P)?"button":"img"),_e(te,"tabindex",d(P)?0:void 0)},[()=>({animated:d(u),selected:d(h),selectable:d(S)})]),je("pointerenter",te,function(...X){var H;(H=t.onedgepointerenter?D=>{q(D,t.onedgepointerenter)}:void 0)==null||H.apply(this,X)}),je("pointerleave",te,function(...X){var H;(H=t.onedgepointerleave?D=>{q(D,t.onedgepointerleave)}:void 0)==null||H.apply(this,X)}),fe(U,Q)};Xe(de,U=>{d(W)||U(ue)})}fe(e,se),Se()}ln(["click","contextmenu","keydown"]);hc();var B$=We("<defs></defs>");function F$(e,t){Ee(t,!1);const n=St();wu();var r=B$();fi(r,5,()=>n.markers,i=>i.id,(i,o)=>{G$(i,Wt(()=>d(o)))}),fe(e,r),Se()}var K$=We('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),q$=We('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Z$=We('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function G$(e,t){Ee(t,!0);let n=ee(t,"width",3,12.5),r=ee(t,"height",3,12.5),i=ee(t,"markerUnits",3,"strokeWidth"),o=ee(t,"orient",3,"auto-start-reverse");var s=Z$(),a=Re(s);{var l=u=>{var h=K$();ze(()=>{_e(h,"stroke",t.color),_e(h,"stroke-width",t.strokeWidth)}),fe(u,h)},c=(u,h)=>{{var f=g=>{var y=q$();ze(()=>{_e(y,"stroke",t.color),_e(y,"stroke-width",t.strokeWidth),_e(y,"fill",t.color)}),fe(g,y)};Xe(u,g=>{t.type===nr.ArrowClosed&&g(f)},h)}};Xe(a,u=>{t.type===nr.Arrow?u(l):u(c,!1)})}ze(()=>{_e(s,"id",t.id),_e(s,"markerWidth",`${n()}`),_e(s,"markerHeight",`${r()}`),_e(s,"markerUnits",i()),_e(s,"orient",o())}),fe(e,s),Se()}var U$=Te('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Q$(e,t){Ee(t,!0);let n=ee(t,"store",15);var r=U$(),i=Re(r),o=Re(i);F$(o,{});var s=ke(i,2);fi(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{W$(a,{get edge(){return d(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),fe(e,r),Se()}var J$=Te('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Wl(e,t){Ee(t,!0);let n=ee(t,"x",3,0),r=ee(t,"y",3,0),i=ee(t,"width",3,0),o=ee(t,"height",3,0),s=ee(t,"isVisible",3,!0);var a=et(),l=Oe(a);{var c=u=>{var h=J$();let f;ze((g,y)=>f=at(h,"",f,{width:g,height:y,transform:`translate(${n()}px, ${r()}px)`}),[()=>typeof i()=="string"?i():xt(i()),()=>typeof o()=="string"?o():xt(o())]),fe(u,h)};Xe(l,u=>{s()&&u(c)})}fe(e,a),Se()}function j$(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectioncontextmenu)==null||r.call(t,{nodes:n,event:e})}function e0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectionclick)==null||r.call(t,{nodes:n,event:e})}var t0=Te("<div><!></div>");function n0(e,t){Ee(t,!0);let n=Ie(void 0);zt(()=>{var l;t.store.disableKeyboardA11y||(l=d(n))==null||l.focus({preventScroll:!0})});let r=x(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,$r(t.store.nodeLookup,{filter:l=>!!l.selected})):null);function i(l){Object.prototype.hasOwnProperty.call(Jr,l.key)&&(l.preventDefault(),t.store.moveSelectedNodes(Jr[l.key],l.shiftKey?4:1))}var o=et(),s=Oe(o);{var a=l=>{var c=t0();c.__contextmenu=[j$,t],c.__click=[e0,t],c.__keydown=function(...f){var g;(g=t.store.disableKeyboardA11y?void 0:i)==null||g.apply(this,f)};let u;var h=Re(c);Wl(h,{width:"100%",height:"100%",x:0,y:0}),qe(c,(f,g)=>mn==null?void 0:mn(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,y,p)=>{var m;(m=t.onnodedrag)==null||m.call(t,{event:f,targetNode:null,nodes:p})},onDragStart:(f,g,y,p)=>{var m;(m=t.onnodedragstart)==null||m.call(t,{event:f,targetNode:null,nodes:p})},onDragStop:(f,g,y,p)=>{var m;(m=t.onnodedragstop)==null||m.call(t,{event:f,targetNode:null,nodes:p})}})),Jt(c,f=>Z(n,f),()=>d(n)),ze((f,g)=>{vt(c,1,kt(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),_e(c,"role",t.store.disableKeyboardA11y?void 0:"button"),_e(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),u=at(c,"",u,{width:f,height:g,transform:`translate(${d(r).x??""}px, ${d(r).y??""}px)`})},[()=>xt(d(r).width),()=>xt(d(r).height)]),fe(l,c)};Xe(s,l=>{t.store.selectionRectMode==="nodes"&&d(r)&&Mt(d(r).x)&&Mt(d(r).y)&&l(a)})}fe(e,o),Se()}ln(["contextmenu","click","keydown"]);function r0(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function He(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var u;const l=Array.isArray(r)?r:[r],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,f,g)=>f?h|1<<g:h,0);for(const h of l){const f={preventDefault:!1,enabled:!0,...h},{modifier:g,key:y,callback:p,preventDefault:m,enabled:w}=f;if(w){if(a.key!==y)continue;if(g===null||g===!1){if(c!==0)continue}else if(g!==void 0&&((u=g==null?void 0:g[0])==null?void 0:u.length)>0){const _=Array.isArray(g)?g:[g];let v=!1;for(const N of _)if((Array.isArray(N)?N:[N]).reduce((b,R)=>b|r0(R),0)===c){v=!0;break}if(!v)continue}m&&a.preventDefault();const O={node:e,trigger:f,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:O})),p==null||p(O)}}}let s;return n&&(s=Zi(e,i,o)),{update:a=>{const{enabled:l=!0,type:c="keydown"}=a;n&&(!l||i!==c)?s==null||s():!n&&l&&(s=Zi(e,c,o)),n=l,i=c,r=a.trigger},destroy:()=>{s==null||s()}}}function Ho(){const e=x(St),t=o=>{var c,u;const s=Os(o)?o:d(e).nodeLookup.get(o.id),a=s.parentId?gg(s.position,s.measured,s.parentId,d(e).nodeLookup,d(e).nodeOrigin):s.position,l={...s,position:a,width:((c=s.measured)==null?void 0:c.width)??s.width,height:((u=s.measured)==null?void 0:u.height)??s.height};return Cn(l)};function n(o,s,a={replace:!1}){d(e).nodes=Ue(()=>d(e).nodes).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a!=null&&a.replace&&Os(c)?c:{...l,...c}}return l})}function r(o,s,a={replace:!1}){d(e).edges=Ue(()=>d(e).edges).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a.replace&&f$(c)?c:{...l,...c}}return l})}const i=o=>d(e).nodeLookup.get(o);return{zoomIn:d(e).zoomIn,zoomOut:d(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?d(e).nodes:Vs(d(e).nodeLookup,o),getEdge:o=>d(e).edgeLookup.get(o),getEdges:o=>o===void 0?d(e).edges:Vs(d(e).edgeLookup,o),setZoom:(o,s)=>{const a=d(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>d(e).viewport.zoom,setViewport:async(o,s)=>{const a=d(e).viewport;return d(e).panZoom?(await d(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},{duration:s==null?void 0:s.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>js(d(e).viewport),setCenter:async(o,s,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:d(e).maxZoom,c=d(e).panZoom;return c?(await c.setViewport({x:d(e).width/2-o*l,y:d(e).height/2-s*l,zoom:l},{duration:a==null?void 0:a.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:o=>d(e).fitView(o),fitBounds:async(o,s)=>{if(!d(e).panZoom)return Promise.resolve(!1);const a=No(o,d(e).width,d(e).height,d(e).minZoom,d(e).maxZoom,(s==null?void 0:s.padding)??.1);return await d(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=xs(o),c=l?o:t(o);return c?(a||d(e).nodes).filter(u=>{const h=d(e).nodeLookup.get(u.id);if(!h||!l&&u.id===o.id)return!1;const f=Cn(h),g=rr(f,c);return s&&g>0||g>=c.width*c.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const c=xs(o)?o:t(o);if(!c)return!1;const u=rr(c,s);return a&&u>0||u>=c.width*c.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{const{nodes:a,edges:l}=await ug({nodesToRemove:o,edgesToRemove:s,nodes:d(e).nodes,edges:d(e).edges,onBeforeDelete:d(e).onbeforedelete});return a&&(d(e).nodes=Ue(()=>d(e).nodes).filter(c=>!a.some(({id:u})=>u===c.id))),l&&(d(e).edges=Ue(()=>d(e).edges).filter(c=>!l.some(({id:u})=>u===c.id))),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!d(e).domNode)return o;const a=s.snapToGrid?d(e).snapGrid:!1,{x:l,y:c,zoom:u}=d(e).viewport,{x:h,y:f}=d(e).domNode.getBoundingClientRect(),g={x:o.x-h,y:o.y-f};return vr(g,[l,c,u],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!d(e).domNode)return o;const{x:s,y:a,zoom:l}=d(e).viewport,{x:c,y:u}=d(e).domNode.getBoundingClientRect(),h=Ur(o,[s,a,l]);return{x:h.x+c,y:h.y+u}},toObject:()=>structuredClone({nodes:[...d(e).nodes],edges:[...d(e).edges],viewport:{...d(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var u;const l=(u=d(e).nodeLookup.get(o))==null?void 0:u.internals.userNode;if(!l)return;const c=typeof s=="function"?s(l):s;n(o,h=>({...h,data:a!=null&&a.replace?c:{...h.data,...c}}))},updateEdge:r,getNodesBounds:o=>sg(o,{nodeLookup:d(e).nodeLookup,nodeOrigin:d(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=d(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function Vs(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function i0(e,t){Ee(t,!0);let n=ee(t,"store",15),r=ee(t,"selectionKey",3,"Shift"),i=ee(t,"multiSelectionKey",19,()=>Qr()?"Meta":"Control"),o=ee(t,"deleteKey",3,"Backspace"),s=ee(t,"panActivationKey",3," "),a=ee(t,"zoomActivationKey",19,()=>Qr()?"Meta":"Control"),{deleteElements:l}=Ho();function c(p){return p!==null&&typeof p=="object"}function u(p){return c(p)?p.modifier||[]:[]}function h(p){return p==null?"":c(p)?p.key:p}function f(p,m){return(Array.isArray(p)?p:[p]).map(O=>{const _=h(O);return{key:_,modifier:u(O),enabled:_!==null,callback:m}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function y(){var _,v;const p=n().nodes.filter(N=>N.selected),m=n().edges.filter(N=>N.selected),{deletedNodes:w,deletedEdges:O}=await l({nodes:p,edges:m});(w.length>0||O.length>0)&&((v=(_=n()).ondelete)==null||v.call(_,{nodes:w,edges:O}))}je("blur",Ke,g),je("contextmenu",Ke,g),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(o(),p=>{!(p.originalEvent.ctrlKey||p.originalEvent.metaKey||p.originalEvent.shiftKey)&&!_l(p.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),y())}),type:"keydown"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),qe(Ke,(p,m)=>He==null?void 0:He(p,m),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Se()}var o0=We('<path fill="none" class="svelte-flow__connection-path"></path>'),s0=We('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function a0(e,t){Ee(t,!0);let n=x(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case Bt.Bezier:{const[a]=kl(s);return a}case Bt.Straight:{const[a]=Sl(s);return a}case Bt.Step:case Bt.SmoothStep:{const[a]=Mo({...s,borderRadius:t.type===Bt.Step?0:void 0});return a}}});var r=et(),i=Oe(r);{var o=s=>{var a=s0(),l=Re(a),c=Re(l);{var u=f=>{var g=et(),y=Oe(g);wo(y,()=>t.LineComponent,(p,m)=>{m(p,{})}),fe(f,g)},h=f=>{var g=o0();ze(()=>{_e(g,"d",d(n)),at(g,t.style)}),fe(f,g)};Xe(c,f=>{t.LineComponent?f(u):f(h,!1)})}ze(f=>{_e(a,"width",t.store.width),_e(a,"height",t.store.height),at(a,t.containerStyle),vt(l,0,f)},[()=>kt(["svelte-flow__connection",ig(t.store.connection.isValid)])]),fe(s,a)};Xe(i,s=>{t.store.connection.inProgress&&s(o)})}fe(e,r),Se()}var l0=Te("<div><!></div>");function ki(e,t){Ee(t,!0);let n=ee(t,"position",3,"top-right"),r=Rt(t,["$$slots","$$events","$$legacy","position","style","class","children"]);const i=St();let o=x(()=>`${n()}`.split("-"));var s=l0();let a;var l=Re(s);nt(l,()=>t.children??Ot),ze(c=>a=un(s,a,{class:c,style:t.style,...r,[mt]:{"pointer-events":i.selectionRectMode?"none":""}}),[()=>["svelte-flow__panel",t.class,...d(o)]]),fe(e,s),Se()}var c0=Te('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function u0(e,t){Ee(t,!0);let n=ee(t,"position",3,"bottom-right");var r=et(),i=Oe(r);{var o=s=>{ki(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var c=c0();fe(a,c)},$$slots:{default:!0}})};Xe(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}fe(e,r),Se()}var d0=Te("<div><!></div>");function f0(e,t){Ee(t,!0);let n=ee(t,"domNode",15),r=ee(t,"clientWidth",15),i=ee(t,"clientHeight",15),o=x(()=>{let{id:u,class:h,nodeTypes:f,edgeTypes:g,colorMode:y,isValidConnection:p,onmove:m,onmovestart:w,onmoveend:O,onflowerror:_,ondelete:v,onbeforedelete:N,onbeforeconnect:z,onconnect:b,onconnectstart:R,onconnectend:W,onbeforereconnect:K,onreconnect:k,onreconnectstart:C,onreconnectend:M,onclickconnectstart:$,onclickconnectend:S,oninit:P,onselectionchange:V,onselectiondragstart:L,onselectiondrag:T,onselectiondragstop:F,onselectionstart:q,onselectionend:se,clickConnect:de,fitView:ue,fitViewOptions:U,nodeOrigin:Q,nodeDragThreshold:ne,minZoom:te,maxZoom:I,initialViewport:B,connectionRadius:X,connectionMode:H,selectionMode:D,selectNodesOnDrag:Y,snapGrid:j,defaultMarkerColor:re,translateExtent:ie,nodeExtent:G,onlyRenderVisibleElements:J,autoPanOnConnect:oe,autoPanOnNodeDrag:ce,colorModeSSR:le,style:he,defaultEdgeOptions:ge,elevateNodesOnSelect:$e,elevateEdgesOnSelect:ve,nodesDraggable:ye,nodesConnectable:me,elementsSelectable:pe,nodesFocusable:we,edgesFocusable:be,disableKeyboardA11y:Ce,noDragClass:Ne,noPanClass:Me,noWheelClass:Ae,...Pe}=t.rest;return h}),s=x(()=>{let{id:u,class:h,nodeTypes:f,edgeTypes:g,colorMode:y,isValidConnection:p,onmove:m,onmovestart:w,onmoveend:O,onflowerror:_,ondelete:v,onbeforedelete:N,onbeforeconnect:z,onconnect:b,onconnectstart:R,onconnectend:W,onbeforereconnect:K,onreconnect:k,onreconnectstart:C,onreconnectend:M,onclickconnectstart:$,onclickconnectend:S,oninit:P,onselectionchange:V,onselectiondragstart:L,onselectiondrag:T,onselectiondragstop:F,onselectionstart:q,onselectionend:se,clickConnect:de,fitView:ue,fitViewOptions:U,nodeOrigin:Q,nodeDragThreshold:ne,minZoom:te,maxZoom:I,initialViewport:B,connectionRadius:X,connectionMode:H,selectionMode:D,selectNodesOnDrag:Y,snapGrid:j,defaultMarkerColor:re,translateExtent:ie,nodeExtent:G,onlyRenderVisibleElements:J,autoPanOnConnect:oe,autoPanOnNodeDrag:ce,colorModeSSR:le,style:he,defaultEdgeOptions:ge,elevateNodesOnSelect:$e,elevateEdgesOnSelect:ve,nodesDraggable:ye,nodesConnectable:me,elementsSelectable:pe,nodesFocusable:we,edgesFocusable:be,disableKeyboardA11y:Ce,noDragClass:Ne,noPanClass:Me,noWheelClass:Ae,...Pe}=t.rest;return Pe});var a=d0();let l;var c=Re(a);nt(c,()=>t.children??Ot),Jt(a,u=>n(u),()=>n()),ze((u,h)=>l=un(a,l,{class:["svelte-flow","svelte-flow__container",d(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",...d(s),[mt]:{width:u,height:h}},"svelte-12wlba6"),[()=>xt(t.width),()=>xt(t.height)]),Jo(a,"clientHeight",i),Jo(a,"clientWidth",r),fe(e,a),Se()}var h0=Te('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),g0=Te("<!> <!>",1),$0=Te("<!> <!> <!> <!> <!>",1);function v0(e,t){Ee(t,!0);let n=ee(t,"paneClickDistance",3,1),r=ee(t,"nodeClickDistance",3,1),i=ee(t,"panOnScrollMode",19,()=>Zt.Free),o=ee(t,"preventScrolling",3,!0),s=ee(t,"zoomOnScroll",3,!0),a=ee(t,"zoomOnDoubleClick",3,!0),l=ee(t,"zoomOnPinch",3,!0),c=ee(t,"panOnScroll",3,!1),u=ee(t,"panOnDrag",3,!0),h=ee(t,"selectionOnDrag",3,!0),f=ee(t,"connectionLineType",19,()=>Bt.Bezier),g=ee(t,"nodes",31,()=>Ge([])),y=ee(t,"edges",31,()=>Ge([])),p=ee(t,"viewport",15,void 0),m=Rt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),w=Yl({props:m,width:t.width,height:t.height,get nodes(){return g()},set nodes(_){g(_)},get edges(){return y()},set edges(_){y(_)},get viewport(){return p()},set viewport(_){p(_)}});const O=wn(jr);O&&O.setStore&&O.setStore(w),Kn(jr,{provider:!1,getStore(){return w}}),zt(()=>{var v;const _={nodes:w.selectedNodes,edges:w.selectedEdges};(v=Ue(()=>t.onselectionchange))==null||v(_);for(const N of w.selectionChangeHandlers.values())N(_)}),hi(()=>{w.reset()}),f0(e,{get colorMode(){return w.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return m},get domNode(){return w.domNode},set domNode(_){w.domNode=_},get clientWidth(){return w.width},set clientWidth(_){w.width=_},get clientHeight(){return w.height},set clientHeight(_){w.height=_},children:(_,v)=>{var N=$0(),z=Oe(N);i0(z,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return w},set store(k){w=k}});var b=ke(z,2);C$(b,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return c()},get panOnDrag(){return u()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return w},set store(k){w=k},children:(k,C)=>{M$(k,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return u()},get selectionOnDrag(){return h()},get store(){return w},set store(M){w=M},children:(M,$)=>{var S=g0(),P=Oe(S);I$(P,{get store(){return w},set store(de){w=de},children:(de,ue)=>{var U=h0(),Q=ke(Oe(U),2);Q$(Q,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return w},set store(B){w=B}});var ne=ke(Q,4);a0(ne,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return w},set store(B){w=B}});var te=ke(ne,2);V$(te,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(B){w=B}});var I=ke(te,2);n0(I,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(B){w=B}}),fe(de,U)},$$slots:{default:!0}});var V=ke(P,2);const L=x(()=>!!(w.selectionRect&&w.selectionRectMode==="user")),T=x(()=>{var de;return(de=w.selectionRect)==null?void 0:de.width}),F=x(()=>{var de;return(de=w.selectionRect)==null?void 0:de.height}),q=x(()=>{var de;return(de=w.selectionRect)==null?void 0:de.x}),se=x(()=>{var de;return(de=w.selectionRect)==null?void 0:de.y});Wl(V,{get isVisible(){return d(L)},get width(){return d(T)},get height(){return d(F)},get x(){return d(q)},get y(){return d(se)}}),fe(M,S)},$$slots:{default:!0}})},$$slots:{default:!0}});var R=ke(b,2);u0(R,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var W=ke(R,2);T$(W,{store:w});var K=ke(W,2);nt(K,()=>t.children??Ot),fe(_,N)},$$slots:{default:!0}}),Se()}function y0(e,t){Ee(t,!0);let n=Ie(Yl({props:{},nodes:[],edges:[]}));Kn(jr,{provider:!0,getStore(){return d(n)},setStore:o=>{Z(n,o)}}),hi(()=>{d(n).reset()});var r=et(),i=Oe(r);nt(i,()=>t.children??Ot),fe(e,r),Se()}var m0=Te("<button><!></button>");function Sr(e,t){let n=Rt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=m0();let i;var o=Re(r);nt(o,()=>t.children??Ot),ze(()=>i=un(r,i,{type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[mt]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}})),fe(e,r)}var p0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function w0(e){var t=p0();fe(e,t)}var b0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function _0(e){var t=b0();fe(e,t)}var x0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function k0(e){var t=x0();fe(e,t)}var E0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function S0(e){var t=E0();fe(e,t)}var P0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function C0(e){var t=P0();fe(e,t)}var N0=Te("<!> <!>",1),M0=Te("<!> <!> <!> <!> <!> <!>",1);function A0(e,t){Ee(t,!0);let n=ee(t,"position",3,"bottom-left"),r=ee(t,"orientation",3,"vertical"),i=ee(t,"showZoom",3,!0),o=ee(t,"showFitView",3,!0),s=ee(t,"showLock",3,!0),a=Rt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","aria-label","fitViewOptions","children","before","after"]);const l=St(),c={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let u=Ie(Ge(l.nodesDraggable||l.nodesConnectable||l.elementsSelectable)),h=x(()=>l.viewport.zoom<=l.minZoom),f=x(()=>l.viewport.zoom>=l.maxZoom),g=x(()=>r()==="horizontal"?"horizontal":"vertical");const y=()=>{l.zoomIn()},p=()=>{l.zoomOut()},m=()=>{l.fitView(t.fitViewOptions)},w=()=>{Z(u,!d(u)),l.nodesDraggable=d(u),l.nodesConnectable=d(u),l.elementsSelectable=d(u)},O=x(()=>["svelte-flow__controls",d(g),t.class]),_=x(()=>t["aria-label"]??"Svelte Flow controls");ki(e,Wt({get class(){return d(O)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(_)},get style(){return t.style}},()=>a,{children:(v,N)=>{var z=M0(),b=Oe(z);{var R=T=>{var F=et(),q=Oe(F);nt(q,()=>t.before),fe(T,F)};Xe(b,T=>{t.before&&T(R)})}var W=ke(b,2);{var K=T=>{var F=N0(),q=Oe(F);Sr(q,Wt({onclick:y,class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(f)}},c,{children:(de,ue)=>{w0(de)},$$slots:{default:!0}}));var se=ke(q,2);Sr(se,Wt({onclick:p,class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(h)}},c,{children:(de,ue)=>{_0(de)},$$slots:{default:!0}})),fe(T,F)};Xe(W,T=>{i()&&T(K)})}var k=ke(W,2);{var C=T=>{Sr(T,Wt({class:"svelte-flow__controls-fitview",onclick:m,title:"fit view","aria-label":"fit view"},c,{children:(F,q)=>{k0(F)},$$slots:{default:!0}}))};Xe(k,T=>{o()&&T(C)})}var M=ke(k,2);{var $=T=>{Sr(T,Wt({class:"svelte-flow__controls-interactive",onclick:w,title:"toggle interactivity","aria-label":"toggle interactivity"},c,{children:(F,q)=>{var se=et(),de=Oe(se);{var ue=Q=>{C0(Q)},U=Q=>{S0(Q)};Xe(de,Q=>{d(u)?Q(ue):Q(U,!1)})}fe(F,se)},$$slots:{default:!0}}))};Xe(M,T=>{s()&&T($)})}var S=ke(M,2);{var P=T=>{var F=et(),q=Oe(F);nt(q,()=>t.children),fe(T,F)};Xe(S,T=>{t.children&&T(P)})}var V=ke(S,2);{var L=T=>{var F=et(),q=Oe(F);nt(q,()=>t.after),fe(T,F)};Xe(V,T=>{t.after&&T(L)})}fe(v,z)},$$slots:{default:!0}})),Se()}var Gt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Gt||(Gt={}));var I0=We("<circle></circle>");function z0(e,t){var n=I0();ze(()=>{_e(n,"cx",t.radius),_e(n,"cy",t.radius),_e(n,"r",t.radius),vt(n,0,kt(["svelte-flow__background-pattern","dots",t.class]))}),fe(e,n)}var H0=We("<path></path>");function T0(e,t){Ee(t,!0);var n=H0();ze(()=>{_e(n,"stroke-width",t.lineWidth),_e(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),vt(n,0,kt(["svelte-flow__background-pattern",t.variant,t.class]))}),fe(e,n),Se()}const O0={[Gt.Dots]:1,[Gt.Lines]:1,[Gt.Cross]:6};var D0=We('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function R0(e,t){Ee(t,!0);let n=ee(t,"variant",19,()=>Gt.Dots),r=ee(t,"gap",3,20),i=ee(t,"lineWidth",3,1);const o=St(),s=x(()=>n()===Gt.Dots),a=x(()=>n()===Gt.Cross),l=x(()=>Array.isArray(r())?r():[r(),r()]);let c=x(()=>`background-pattern-${o.flowId}-${t.id??""}`),u=x(()=>[d(l)[0]*o.viewport.zoom||1,d(l)[1]*o.viewport.zoom||1]),h=x(()=>(t.size??O0[n()])*o.viewport.zoom),f=x(()=>d(a)?[d(h),d(h)]:d(u)),g=x(()=>d(s)?[d(h)/2,d(h)/2]:[d(f)[0]/2,d(f)[1]/2]);var y=D0();let p;var m=Re(y),w=Re(m);{var O=N=>{const z=x(()=>d(h)/2);z0(N,{get radius(){return d(z)},get class(){return t.patternClass}})},_=N=>{T0(N,{get dimensions(){return d(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};Xe(w,N=>{d(s)?N(O):N(_,!1)})}var v=ke(m);ze(()=>{vt(y,0,kt(["svelte-flow__background","svelte-flow__container",t.class])),p=at(y,"",p,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),_e(m,"id",d(c)),_e(m,"x",o.viewport.x%d(u)[0]),_e(m,"y",o.viewport.y%d(u)[1]),_e(m,"width",d(u)[0]),_e(m,"height",d(u)[1]),_e(m,"patternTransform",`translate(-${d(g)[0]},-${d(g)[1]})`),_e(v,"fill",`url(#${d(c)})`)}),fe(e,y),Se()}var L0=We("<rect></rect>");function Y0(e,t){let n=ee(t,"borderRadius",3,5),r=ee(t,"strokeWidth",3,2);var i=L0();let o,s;ze(a=>{o=vt(i,0,kt(["svelte-flow__minimap-node",t.class]),null,o,a),_e(i,"x",t.x),_e(i,"y",t.y),_e(i,"rx",n()),_e(i,"ry",n()),_e(i,"width",t.width),_e(i,"height",t.height),_e(i,"shape-rendering",t.shapeRendering),s=at(i,"",s,{fill:t.color,stroke:t.strokeColor,"stroke-width":r()})},[()=>({selected:t.selected})]),fe(e,i)}function Yi(e,t){const n=Wg({domNode:e,panZoom:t.panZoom,getTransform:()=>{const{viewport:i}=t.store;return[i.x,i.y,i.zoom]},getViewScale:t.getViewScale});n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable});function r(i){n.update({translateExtent:i.translateExtent,width:i.width,height:i.height,inversePan:i.inversePan,zoomStep:i.zoomStep,pannable:i.pannable,zoomable:i.zoomable})}return{update:r,destroy(){n.destroy()}}}const Vi=e=>e instanceof Function?e:()=>e;var V0=We("<title> </title>"),X0=We('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),W0=Te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function B0(e,t){Ee(t,!0);let n=ee(t,"position",3,"bottom-right"),r=ee(t,"ariaLabel",3,"Mini map"),i=ee(t,"nodeStrokeColor",3,"transparent"),o=ee(t,"nodeClass",3,""),s=ee(t,"nodeBorderRadius",3,5),a=ee(t,"nodeStrokeWidth",3,2),l=ee(t,"width",3,200),c=ee(t,"height",3,150),u=ee(t,"pannable",3,!0),h=ee(t,"zoomable",3,!0),f=Rt(t,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),g=St();const y=t.nodeColor===void 0?void 0:Vi(t.nodeColor),p=Vi(i()),m=Vi(o()),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let O=x(()=>`svelte-flow__minimap-desc-${g.flowId}`),_=x(()=>({x:-g.viewport.x/g.viewport.zoom,y:-g.viewport.y/g.viewport.zoom,width:g.width/g.viewport.zoom,height:g.height/g.viewport.zoom})),v=x(()=>g.nodeLookup.size>0?ml($r(g.nodeLookup,{filter:T=>!T.hidden}),d(_)):d(_)),N=x(()=>d(v).width/l()),z=x(()=>d(v).height/c()),b=x(()=>Math.max(d(N),d(z))),R=x(()=>d(b)*l()),W=x(()=>d(b)*c()),K=x(()=>5*d(b)),k=x(()=>d(v).x-(d(R)-d(v).width)/2-d(K)),C=x(()=>d(v).y-(d(W)-d(v).height)/2-d(K)),M=x(()=>d(R)+d(K)*2),$=x(()=>d(W)+d(K)*2);const S=()=>d(b);var P=W0(),V=Oe(P);const L=x(()=>["svelte-flow__minimap",t.class]);ou(V,()=>({"--xy-minimap-background-color-props":t.bgColor})),ki(V.lastChild,Wt({get position(){return n()},get class(){return d(L)},"data-testid":"svelte-flow__minimap"},()=>f,{children:(T,F)=>{var q=et(),se=Oe(q);{var de=ue=>{var U=X0();let Q;var ne=Re(U);{var te=X=>{var H=V0(),D=Re(H);ze(()=>{_e(H,"id",d(O)),cn(D,r())}),fe(X,H)};Xe(ne,X=>{r()&&X(te)})}var I=ke(ne);fi(I,17,()=>g.nodes,X=>X.id,(X,H)=>{var D=et();const Y=x(()=>g.nodeLookup.get(d(H).id));var j=Oe(D);{var re=ie=>{const G=x(()=>jt(d(Y))),J=x(()=>y==null?void 0:y(d(Y))),oe=x(()=>p(d(Y))),ce=x(()=>m(d(Y)));Y0(ie,Wt({get x(){return d(Y).internals.positionAbsolute.x},get y(){return d(Y).internals.positionAbsolute.y}},()=>d(G),{get selected(){return d(Y).selected},get color(){return d(J)},get borderRadius(){return s()},get strokeColor(){return d(oe)},get strokeWidth(){return a()},shapeRendering:w,get class(){return d(ce)}}))};Xe(j,ie=>{d(Y)&&pl(d(Y))&&ie(re)})}fe(X,D)});var B=ke(I);qe(U,(X,H)=>Yi==null?void 0:Yi(X,H),()=>({store:g,panZoom:g.panZoom,getViewScale:S,translateExtent:g.translateExtent,width:g.width,height:g.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:u(),zoomable:h()})),ze(()=>{_e(U,"width",l()),_e(U,"height",c()),_e(U,"viewBox",`${d(k)??""} ${d(C)??""} ${d(M)??""} ${d($)??""}`),_e(U,"aria-labelledby",d(O)),Q=at(U,"",Q,{"--xy-minimap-mask-background-color-props":t.maskColor,"--xy-minimap-mask-stroke-color-props":t.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":t.maskStrokeWidth?t.maskStrokeWidth*d(b):void 0}),_e(B,"d",`M${d(k)-d(K)},${d(C)-d(K)}h${d(M)+d(K)*2}v${d($)+d(K)*2}h${-d(M)-d(K)*2}z
      M${d(_).x??""},${d(_).y??""}h${d(_).width??""}v${d(_).height??""}h${-d(_).width}z`)}),fe(ue,U)};Xe(se,ue=>{g.panZoom&&ue(de)})}fe(T,q)},$$slots:{default:!0}})),fe(e,P),Se()}var F0=Te("<div><!></div>");function K0(e,t){Ee(t,!0);let n=ee(t,"variant",19,()=>$n.Handle),r=ee(t,"minWidth",3,10),i=ee(t,"minHeight",3,10),o=ee(t,"maxWidth",19,()=>Number.MAX_VALUE),s=ee(t,"maxHeight",19,()=>Number.MAX_VALUE),a=ee(t,"keepAspectRatio",3,!1),l=Rt(t,["$$slots","$$events","$$legacy","nodeId","position","variant","color","minWidth","minHeight","maxWidth","maxHeight","keepAspectRatio","shouldResize","onResizeStart","onResize","onResizeEnd","class","children"]);const c=St();let u=x(()=>typeof t.nodeId=="string"?t.nodeId:wn("svelteflow__node_id")),h,f=Ie(null),g=x(()=>{let O=n()===$n.Line?"right":"bottom-right";return t.position??O}),y=x(()=>d(g).split("-"));bo(()=>(h&&Z(f,i$({domNode:h,nodeId:d(u),getStoreItems:()=>({nodeLookup:c.nodeLookup,transform:[c.viewport.x,c.viewport.y,c.viewport.zoom],snapGrid:c.snapGrid??void 0,snapToGrid:!!c.snapGrid,nodeOrigin:c.nodeOrigin,paneDomNode:c.domNode}),onChange:(O,_)=>{const v=new Map;let N=O.x&&O.y?{x:O.x,y:O.y}:void 0;v.set(d(u),{...O,position:N});for(const z of _)v.set(z.id,{position:z.position});c.nodes=c.nodes.map(z=>{var R,W;const b=v.get(z.id);return b?{...z,position:{x:((R=b.position)==null?void 0:R.x)??z.position.x,y:((W=b.position)==null?void 0:W.y)??z.position.y},width:b.width??z.width,height:b.height??z.height}:z})}}),!0),()=>{var O;(O=d(f))==null||O.destroy()})),vo(()=>{var O;(O=d(f))==null||O.update({controlPosition:d(g),boundaries:{minWidth:r(),minHeight:i(),maxWidth:o(),maxHeight:s()},keepAspectRatio:!!a(),onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeEnd:t.onResizeEnd,shouldResize:t.shouldResize})});var p=F0();let m;var w=Re(p);nt(w,()=>t.children??Ot),Jt(p,O=>h=O,()=>h),ze(O=>m=un(p,m,{class:O,...l,[mt]:{"border-color":n()===$n.Line?t.color:void 0,"background-color":n()===$n.Line?void 0:t.color}}),[()=>["svelte-flow__resize-control",c.noDragClass,...d(y),n(),t.class]]),fe(e,p),Se()}function q0(e,t,n,r){t(n.id,{completed:d(r)})}var Z0=We('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" stroke-width="2" stroke="rgb(200, 200, 200)" fill="none" stroke-linecap="round" stroke-linejoin="round" style="position: absolute; right: 5px; bottom: 5px;"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><polyline points="16 20 20 20 20 16"></polyline><line x1="14" y1="14" x2="20" y2="20"></line><polyline points="8 4 4 4 4 8"></polyline><line x1="4" y1="4" x2="10" y2="10"></line></svg>'),G0=Te('<div class="control-panel"><input type="checkbox"></div> <div><!> <div class="sf-node"><div class="sf-node__label" contenteditable="true" spellcheck="false"> </div></div> <!> <!></div>',1);function U0(e,t){Ee(t,!0);const{updateNodeData:n}=Ho();let r=ee(t,"data",7),i,o=Ie(Ge(r().completed)),s=()=>d(o)?"opacity: 30%":"opacity: 100%";function a(){r().label=i.innerText}bo(()=>{i.addEventListener("focus",()=>{const v=window.getSelection(),N=document.createRange();N.selectNodeContents(i),N.collapse(!1),v.removeAllRanges(),v.addRange(N)})});const l=v=>{v.stopPropagation()};function c(){}var u=G0(),h=Oe(u),f=Re(h);f.__change=[q0,n,t,o];var g=ke(h,2),y=Re(g);Mn(y,{type:"target",get position(){return xe.Left},get isConnectable(){return t.isConnectable}});var p=ke(y,2),m=Re(p);m.__input=a;var w=Re(m);Jt(m,v=>i=v,()=>i);var O=ke(p,2);K0(O,{class:"node-hover-controls",minWidth:100,minHeight:5,style:"background: transparent; border: none;",children:(v,N)=>{var z=Z0();fe(v,z)},$$slots:{default:!0}});var _=ke(O,2);Mn(_,{type:"source",get position(){return xe.Right},get isConnectable(){return t.isConnectable}}),ze(v=>{at(g,v),cn(w,r().label)},[s]),$u(f,()=>d(o),v=>Z(o,v)),je("mousedown",m,l,!0),je("mouseup",m,l,!0),je("click",m,l,!0),je("keydown",m,l,!0),je("compositionstart",m,l,!0),je("compositionend",m,l,!0),je("blur",m,c),fe(e,u),Se()}ln(["change","input"]);const Q0={type:"custom",sourcePosition:xe.Right,targetPosition:xe.Left,origin:[.5,.5]},Xs={style:"stroke-width: 2px;",markerEnd:{type:nr.ArrowClosed,width:15,height:15},zIndex:1e4},Xi=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Pr=(e,t)=>({x:e.x-t.x,y:e.y-t.y});var J0=(e,t,n,r)=>t({nodes:d(n),edges:d(r)}),j0=Te("<button>ð¾ Export</button> <button>ð Import</button> <button>Clear</button> <select><option>dark mode</option><option>light mode</option><option>system</option></select>",1),ev=Te("<!> <!> <!> <!>",1),tv=Te('<input type="file" accept="application/json" style="display: none;"> <!>',1);function nv(e,t){Ee(t,!0);const{screenToFlowPosition:n,getIntersectingNodes:r,getNodesBounds:i,updateNode:o,deleteElements:s}=Ho(),a="graph";let l;const c={nodes:[],edges:[]};try{const I=localStorage.getItem(a);l=I?JSON.parse(I):c}catch{l=c}const u={custom:U0};let h=Ie(l.nodes),f=Ie(l.edges),g=Ie(!1);const y=I=>{d(g)&&(I.preventDefault(),I.returnValue="")};let p=1;const m=I=>/^-?\d+$/.test(I);for(const I of d(h))if(m(I.id)){const B=parseInt(I.id);B>p&&(p=B)}p++;const w=()=>`${p++}`,O=(I,B,X=null)=>{const H=n({x:I,y:B}),D=1e-5,Y={...H,width:D,height:D},j=r(Y);let re;for(const ie of j){if(ie.id===X)continue;let G=!1;for(const J of j)if(J.id!==X&&J!=null&&J.parentId&&(J==null?void 0:J.parentId)===ie.id){G=!0;break}if(!G){re=ie;break}}return re},_=I=>({x:I.measured.width*I.origin[0],y:I.measured.height*I.origin[1]}),v=I=>Pr(I.position,_(I)),N=(I,B,X)=>{let H=O(B,X),D=n({x:B,y:X});H&&(D=K(D,H.id));const Y={id:I,data:{label:`Task ${I}`,completed:!1},position:D,parentId:H==null?void 0:H.id,...Q0};if(H){const j=R(d(h));S(H.id,j)}return Y},z=(I,B)=>({source:I,target:B,id:`${I}->${B}`,...Xs});let b=Ie("dark");const R=I=>{const B={};for(const X of I)B[X.id]=X;return B},W=(I,B)=>{const H=R(d(h))[B];return H?H.parentId===null||H.parentId===void 0?Xi(I,v(H)):W(Xi(I,v(H)),H.parentId):I},K=(I,B)=>{const H=R(d(h))[B];return H?H.parentId===null||H.parentId===void 0?Pr(I,v(H)):K(Pr(I,v(H)),H.parentId):I},k=I=>{const B=new Map,X=[];for(const H of I)B.set(H.id,{...H,children:[]});for(const H of I){const D=B.get(H.id);if(H.parentId==null)X.push(D);else{const Y=B.get(H.parentId);Y&&Y.children.push(D)}}return X},C=I=>{const B={...I};if(delete B.children,!I.children||I.children.length===0)return[B];const X=I.children.map(H=>C(H)).flat();return[B,...X]},M=I=>{const X={children:k(I)};return C(X).slice(1)},$=(I,B)=>{const X=_(I),H={x:B.width*I.origin[0],y:B.height*I.origin[1]};return Pr(H,X)},S=(I,B)=>{console.log("resizing",I);const X=B[I],H=[];for(const ie in B){const G=B[ie];(G==null?void 0:G.parentId)===I&&H.push(G)}const D=i(H);K(D,I);const Y=50,j={width:D.width+Y,height:D.height+Y};console.log(j);const re=$(X,j);for(const ie of H){const G=Xi(ie.position,re);o(ie.id,{position:G})}o(X.id,{width:j.width,height:j.height}),X.parentId!==null&&X.parentId!==void 0&&S(X.parentId,B)},P=I=>{Z(g,!0);const{clientX:B,clientY:X}=I==null?void 0:I.event,H=I.targetNode,D=O(B,X,H.id),Y=H.parentId,j=D==null?void 0:D.id;if(D&&D.id!==H.id){const ie=W(H.position,H.parentId),G=K(ie,D.id);o(H.id,{parentId:D.id,position:G})}else if(H.parentId!==null&&H.parentId!==void 0){const ie=W(H.position,H.parentId);o(H.id,{parentId:void 0,position:ie})}const re=R(d(h));j!=null&&S(j,re),Y!=null&&S(Y,re),Z(h,M(d(h)))},V=({event:I,node:B})=>{Z(g,!0),I.preventDefault();const{clientX:X,clientY:H}=I,D=w();Z(h,[...d(h),N(D,X,H)])},L=({event:I})=>{Z(g,!0),I.preventDefault();const{clientX:B,clientY:X}=I,H=w();Z(h,[...d(h),N(H,B,X)])},T=(I,B)=>{var G,J;if(Z(g,!0),B.isValid)return;const X=((G=B.fromHandle)==null?void 0:G.type)==="source",H=((J=B.fromNode)==null?void 0:J.id)??"1",{clientX:D,clientY:Y}="changedTouches"in I?I.changedTouches[0]:I,j=w(),re=N(j,D,Y),ie=X?z(H,j):z(j,H);Z(h,[...d(h),re]),Z(f,[...d(f),ie])};let F;const q=()=>{(d(h).length>0||d(f).length>0)&&!window.confirm("You have unsaved changes - importing from a file will discard them. Continue?")||F.click()},se=async I=>{const[B]=I.target.files;if(B)try{const X=await B.text(),H=JSON.parse(X);await s({nodes:d(h),edges:d(f)}),Z(h,H.nodes),Z(f,H.edges);for(const D of d(h))if(m(D.id)){const Y=parseInt(D.id);Y>p&&(p=Y)}p++,Z(g,!1)}catch(X){console.error("Failed to load/parse JSON",X)}finally{I.target.value=""}},de=I=>{const B=JSON.stringify(I,null,2),X=new Blob([B],{type:"application/json"}),H=URL.createObjectURL(X),D=document.createElement("a");D.download="graph-project.json",D.href=H,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(H),Z(g,!1)},ue=()=>{(d(h).length>0||d(f).length>0)&&!window.confirm("Clear entire graph?")||(Z(h,[]),Z(f,[]),p=1,Z(g,!1))};function U(){localStorage.setItem(a,JSON.stringify({nodes:d(h),edges:d(f)})),Z(g,!1)}zt(()=>{U()});var Q=tv();je("beforeunload",Ke,y);var ne=Oe(Q);ne.__change=se,Jt(ne,I=>F=I,()=>F);var te=ke(ne,2);v0(te,{get colorMode(){return d(b)},nodeTypes:u,defaultEdgeOptions:Xs,fitView:!0,onconnectend:T,onnodedragstop:P,onpanecontextmenu:L,onnodecontextmenu:V,minZoom:.2,maxZoom:6,get nodes(){return d(h)},set nodes(I){Z(h,I)},get edges(){return d(f)},set edges(I){Z(f,I)},children:(I,B)=>{var X=ev(),H=Oe(X);R0(H,{});var D=ke(H,2);A0(D,{});var Y=ke(D,2);B0(Y,{});var j=ke(Y,2);ki(j,{style:"display:flex; flex-direction: column; gap:2px;",children:(re,ie)=>{var G=j0(),J=Oe(G);J.__click=[J0,de,h,f];var oe=ke(J,2);oe.__click=q;var ce=ke(oe,2);ce.__click=ue;var le=ke(ce,2),he=Re(le);he.value=he.__value="dark";var ge=ke(he);ge.value=ge.__value="light";var $e=ke(ge);$e.value=$e.__value="system",yu(le,()=>d(b),ve=>Z(b,ve)),fe(re,G)},$$slots:{default:!0}}),fe(I,X)},$$slots:{default:!0}}),fe(e,Q),Se()}ln(["change","click"]);function rv(e,t){Ee(t,!0),y0(e,{children:(n,r)=>{nv(n,{})},$$slots:{default:!0}}),Se()}nu(rv,{target:document.getElementById("app")});
