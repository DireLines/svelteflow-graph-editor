var sc=Object.defineProperty;var Zo=e=>{throw TypeError(e)};var ac=(e,t,n)=>t in e?sc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fe=(e,t,n)=>ac(e,typeof t!="symbol"?t+"":t,n),Hi=(e,t,n)=>t.has(e)||Zo("Cannot "+n);var I=(e,t,n)=>(Hi(e,t,"read from private field"),n?n.call(e):t.get(e)),le=(e,t,n)=>t.has(e)?Zo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Vn=(e,t,n,r)=>(Hi(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Go=(e,t,n)=>(Hi(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Uo=!1;var fi=Array.isArray,lc=Array.prototype.indexOf,mo=Array.from,cc=Object.defineProperty,Gt=Object.getOwnPropertyDescriptor,js=Object.getOwnPropertyDescriptors,ea=Object.prototype,uc=Array.prototype,hi=Object.getPrototypeOf,Qo=Object.isExtensible;function Xn(e){return typeof e=="function"}const Rt=()=>{};function dc(e){return e()}function Xr(e){for(var t=0;t<e.length;t++)e[t]()}const vt=2,ta=4,gi=8,po=16,Lt=32,Hn=64,Wr=128,at=256,Fr=512,it=1024,_t=2048,un=4096,zt=8192,$i=16384,fc=32768,gr=65536,hc=1<<17,gc=1<<19,na=1<<20,Qi=1<<21,Ut=Symbol("$state"),ra=Symbol("legacy props"),$c=Symbol("");function ia(e){return e===this.v}function oa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function wo(e){return!oa(e,this.v)}function vc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function mc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function pc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function bc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _c(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let On=!1,kc=!1;function Ec(){On=!0}const bo=1,_o=2,sa=4,Sc=8,Pc=16,Cc=1,Nc=2,Mc=4,Ac=8,Ic=16,aa=1,zc=2,et=Symbol(),Tc="http://www.w3.org/1999/xhtml",Hc="@attach",Oc=[];function la(e,t=!1){return Tr(e,new Map,"",Oc)}function Tr(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(fi(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var a=0;a<e.length;a+=1){var l=e[a];a in e&&(s[a]=Tr(l,t,n,r))}return s}if(hi(e)===ea){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=Tr(e[c],t,n,r);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Tr(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function xo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let De=null;function Jo(e){De=e}function xn(e){return ca().get(e)}function Qn(e,t){return ca().set(e,t),t}function Me(e,t=!1,n){var r=De={p:De,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};On&&!t&&(De.l={s:null,u:null,r1:[],r2:En(!1)}),ko(()=>{r.d=!0})}function Ae(e){const t=De;if(t!==null){const s=t.e;if(s!==null){var n=Ve,r=Le;t.e=null;try{for(var i=0;i<s.length;i++){var o=s[i];jt(o.effect),xt(o.reaction),Rn(o.fn)}}finally{jt(n),xt(r)}}De=t.p,t.m=!0}return{}}function vi(){return!On||De!==null&&De.l===null}function ca(e){return De===null&&xo(),De.c??(De.c=new Map(Dc(De)||void 0))}function Dc(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function qe(e){if(typeof e!="object"||e===null||Ut in e)return e;const t=hi(e);if(t!==ea&&t!==uc)return e;var n=new Map,r=fi(e),i=Ne(0),o=Le,s=a=>{var l=Le;xt(o);var c=a();return xt(l),c};return r&&n.set("length",Ne(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&bc();var d=n.get(l);return d===void 0?(d=s(()=>Ne(c.value)),n.set(l,d)):U(d,s(()=>qe(c.value))),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0)l in a&&(n.set(l,s(()=>Ne(et))),Oi(i));else{if(r&&typeof l=="string"){var d=n.get("length"),h=Number(l);Number.isInteger(h)&&h<d.v&&U(d,h)}U(c,et),Oi(i)}return!0},get(a,l,c){var g;if(l===Ut)return e;var d=n.get(l),h=l in a;if(d===void 0&&(!h||(g=Gt(a,l))!=null&&g.writable)&&(d=s(()=>Ne(qe(h?a[l]:et))),n.set(l,d)),d!==void 0){var f=u(d);return f===et?void 0:f}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=n.get(l);d&&(c.value=u(d))}else if(c===void 0){var h=n.get(l),f=h==null?void 0:h.v;if(h!==void 0&&f!==et)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(a,l){var f;if(l===Ut)return!0;var c=n.get(l),d=c!==void 0&&c.v!==et||Reflect.has(a,l);if(c!==void 0||Ve!==null&&(!d||(f=Gt(a,l))!=null&&f.writable)){c===void 0&&(c=s(()=>Ne(d?qe(a[l]):et)),n.set(l,c));var h=u(c);if(h===et)return!1}return d},set(a,l,c,d){var z;var h=n.get(l),f=l in a;if(r&&l==="length")for(var g=c;g<h.v;g+=1){var y=n.get(g+"");y!==void 0?U(y,et):g in a&&(y=s(()=>Ne(et)),n.set(g+"",y))}h===void 0?(!f||(z=Gt(a,l))!=null&&z.writable)&&(h=s(()=>Ne(void 0)),U(h,s(()=>qe(c))),n.set(l,h)):(f=h.v!==et,U(h,s(()=>qe(c))));var m=Reflect.getOwnPropertyDescriptor(a,l);if(m!=null&&m.set&&m.set.call(d,c),!f){if(r&&typeof l=="string"){var p=n.get("length"),w=Number(l);Number.isInteger(w)&&w>=p.v&&U(p,w+1)}Oi(i)}return!0},ownKeys(a){u(i);var l=Reflect.ownKeys(a).filter(h=>{var f=n.get(h);return f===void 0||f.v!==et});for(var[c,d]of n)d.v!==et&&!(c in a)&&l.push(c);return l},setPrototypeOf(){_c()}})}function Oi(e,t=1){U(e,e.v+t)}function kn(e){var t=vt|_t,n=Le!==null&&(Le.f&vt)!==0?Le:null;return Ve===null||n!==null&&(n.f&at)!==0?t|=at:Ve.f|=na,{ctx:De,deps:null,effects:null,equals:ia,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??Ve}}function _(e){const t=kn(e);return Sa(t),t}function ua(e){const t=kn(e);return t.equals=wo,t}function da(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ot(t[n])}}function Rc(e){for(var t=e.parent;t!==null;){if((t.f&vt)===0)return t;t=t.parent}return null}function fa(e){var t,n=Ve;jt(Rc(e));try{da(e),t=Ma(e)}finally{jt(n)}return t}function ha(e){var t=fa(e),n=(Zt||(e.f&at)!==0)&&e.deps!==null?un:it;yt(e,n),e.equals(t)||(e.v=t,e.wv=Ca())}const Jn=new Map;function En(e,t){var n={f:0,v:e,reactions:null,equals:ia,rv:0,wv:0};return n}function Ne(e,t){const n=En(e);return Sa(n),n}function ga(e,t=!1){var r;const n=En(e);return t||(n.equals=wo),On&&De!==null&&De.l!==null&&((r=De.l).s??(r.s=[])).push(n),n}function U(e,t,n=!1){Le!==null&&!ht&&vi()&&(Le.f&(vt|po))!==0&&!(je!=null&&je.includes(e))&&xc();let r=n?qe(t):t;return Ji(e,r)}function Ji(e,t){if(!e.equals(t)){var n=e.v;vr?Jn.set(e,t):Jn.set(e,n),e.v=t,(e.f&vt)!==0&&((e.f&_t)!==0&&fa(e),yt(e,(e.f&at)===0?it:un)),e.wv=Ca(),$a(e,_t),vi()&&Ve!==null&&(Ve.f&it)!==0&&(Ve.f&(Lt|Hn))===0&&(dt===null?Gc([e]):dt.push(e))}return t}function $a(e,t){var n=e.reactions;if(n!==null)for(var r=vi(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;(a&_t)===0&&(!r&&s===Ve||(yt(s,t),(a&(it|at))!==0&&((a&vt)!==0?$a(s,un):bi(s))))}}let Lc=!1;var Ze,va,ya,ma;function Yc(){if(Ze===void 0){Ze=window,va=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ya=Gt(t,"firstChild").get,ma=Gt(t,"nextSibling").get,Qo(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Qo(n)&&(n.__t=void 0)}}function yi(e=""){return document.createTextNode(e)}function Mt(e){return ya.call(e)}function mi(e){return ma.call(e)}function Re(e,t){return Mt(e)}function Oe(e,t){{var n=Mt(e);return n instanceof Comment&&n.data===""?mi(n):n}}function Se(e,t=1,n=!1){let r=e;for(;t--;)r=mi(r);return r}function Vc(e){e.textContent=""}function pa(e){Ve===null&&Le===null&&mc(),Le!==null&&(Le.f&at)!==0&&Ve===null&&yc(),vr&&vc()}function Xc(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Dn(e,t,n,r=!0){var i=Ve,o={ctx:De,deps:null,nodes_start:null,nodes_end:null,f:e|_t,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{Po(o),o.f|=fc}catch(l){throw Ot(o),l}else t!==null&&bi(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(na|Wr))===0;if(!s&&r&&(i!==null&&Xc(o,i),Le!==null&&(Le.f&vt)!==0)){var a=Le;(a.effects??(a.effects=[])).push(o)}return o}function Wc(){return Le!==null&&!ht}function ko(e){const t=Dn(gi,null,!1);return yt(t,it),t.teardown=e,t}function Ht(e){pa();var t=Ve!==null&&(Ve.f&Lt)!==0&&De!==null&&!De.m;if(t){var n=De;(n.e??(n.e=[])).push({fn:e,effect:Ve,reaction:Le})}else{var r=Rn(e);return r}}function Eo(e){return pa(),Ln(e)}function Fc(e){const t=Dn(Hn,e,!0);return(n={})=>new Promise(r=>{n.outro?jn(t,()=>{Ot(t),r(void 0)}):(Ot(t),r(void 0))})}function Rn(e){return Dn(ta,e,!1)}function Ln(e){return Dn(gi,e,!0)}function ze(e,t=[],n=kn){const r=t.map(n);return $r(()=>e(...r.map(u)))}function $r(e,t=0){return Dn(gi|po|t,e,!0)}function an(e,t=!0){return Dn(gi|Lt,e,!0,t)}function wa(e){var t=e.teardown;if(t!==null){const n=vr,r=Le;jo(!0),xt(null);try{t.call(null)}finally{jo(n),xt(r)}}}function ba(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&Hn)!==0?n.parent=null:Ot(n,t),n=r}}function Bc(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Lt)===0&&Ot(t),t=n}}function Ot(e,t=!0){var n=!1;(t||(e.f&gc)!==0)&&e.nodes_start!==null&&(Kc(e.nodes_start,e.nodes_end),n=!0),ba(e,t&&!n),Gr(e,0),yt(e,$i);var r=e.transitions;if(r!==null)for(const o of r)o.stop();wa(e);var i=e.parent;i!==null&&i.first!==null&&_a(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Kc(e,t){for(;e!==null;){var n=e===t?null:mi(e);e.remove(),e=n}}function _a(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function jn(e,t){var n=[];So(e,n,!0),xa(n,()=>{Ot(e),t&&t()})}function xa(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function So(e,t,n){if((e.f&zt)===0){if(e.f^=zt,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&gr)!==0||(r.f&Lt)!==0;So(r,t,o?n:!1),r=i}}}function Br(e){ka(e,!0)}function ka(e,t){if((e.f&zt)!==0){e.f^=zt,(e.f&it)===0&&(e.f^=it),yr(e)&&(yt(e,_t),bi(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&gr)!==0||(n.f&Lt)!==0;ka(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let er=[],ji=[];function Ea(){var e=er;er=[],Xr(e)}function qc(){var e=ji;ji=[],Xr(e)}function pi(e){er.length===0&&queueMicrotask(Ea),er.push(e)}function Zc(){er.length>0&&Ea(),ji.length>0&&qc()}let Hr=!1,Kr=!1,qr=null,on=!1,vr=!1;function jo(e){vr=e}let Gn=[];let Le=null,ht=!1;function xt(e){Le=e}let Ve=null;function jt(e){Ve=e}let je=null;function Sa(e){Le!==null&&Le.f&Qi&&(je===null?je=[e]:je.push(e))}let Ue=null,ot=0,dt=null;function Gc(e){dt=e}let Pa=1,Zr=0,Zt=!1;function Ca(){return++Pa}function yr(e){var h;var t=e.f;if((t&_t)!==0)return!0;if((t&un)!==0){var n=e.deps,r=(t&at)!==0;if(n!==null){var i,o,s=(t&Fr)!==0,a=r&&Ve!==null&&!Zt,l=n.length;if(s||a){var c=e,d=c.parent;for(i=0;i<l;i++)o=n[i],(s||!((h=o==null?void 0:o.reactions)!=null&&h.includes(c)))&&(o.reactions??(o.reactions=[])).push(c);s&&(c.f^=Fr),a&&d!==null&&(d.f&at)===0&&(c.f^=at)}for(i=0;i<l;i++)if(o=n[i],yr(o)&&ha(o),o.wv>e.wv)return!0}(!r||Ve!==null&&!Zt)&&yt(e,it)}return!1}function Uc(e,t){for(var n=t;n!==null;){if((n.f&Wr)!==0)try{n.fn(e);return}catch{n.f^=Wr}n=n.parent}throw Hr=!1,e}function es(e){return(e.f&$i)===0&&(e.parent===null||(e.parent.f&Wr)===0)}function wi(e,t,n,r){if(Hr){if(n===null&&(Hr=!1),es(t))throw e;return}if(n!==null&&(Hr=!0),Uc(e,t),es(t))throw e}function Na(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];je!=null&&je.includes(e)||((o.f&vt)!==0?Na(o,t,!1):t===o&&(n?yt(o,_t):(o.f&it)!==0&&yt(o,un),bi(o)))}}function Ma(e){var g;var t=Ue,n=ot,r=dt,i=Le,o=Zt,s=je,a=De,l=ht,c=e.f;Ue=null,ot=0,dt=null,Zt=(c&at)!==0&&(ht||!on||Le===null),Le=(c&(Lt|Hn))===0?e:null,je=null,Jo(e.ctx),ht=!1,Zr++,e.f|=Qi;try{var d=(0,e.fn)(),h=e.deps;if(Ue!==null){var f;if(Gr(e,ot),h!==null&&ot>0)for(h.length=ot+Ue.length,f=0;f<Ue.length;f++)h[ot+f]=Ue[f];else e.deps=h=Ue;if(!Zt)for(f=ot;f<h.length;f++)((g=h[f]).reactions??(g.reactions=[])).push(e)}else h!==null&&ot<h.length&&(Gr(e,ot),h.length=ot);if(vi()&&dt!==null&&!ht&&h!==null&&(e.f&(vt|un|_t))===0)for(f=0;f<dt.length;f++)Na(dt[f],e);return i!==null&&i!==e&&(Zr++,dt!==null&&(r===null?r=dt:r.push(...dt))),d}finally{Ue=t,ot=n,dt=r,Le=i,Zt=o,je=s,Jo(a),ht=l,e.f^=Qi}}function Qc(e,t){let n=t.reactions;if(n!==null){var r=lc.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&vt)!==0&&(Ue===null||!Ue.includes(t))&&(yt(t,un),(t.f&(at|Fr))===0&&(t.f^=Fr),da(t),Gr(t,0))}function Gr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Qc(e,n[r])}function Po(e){var t=e.f;if((t&$i)===0){yt(e,it);var n=Ve,r=De,i=on;Ve=e,on=!0;try{(t&po)!==0?Bc(e):ba(e),wa(e);var o=Ma(e);e.teardown=typeof o=="function"?o:null,e.wv=Pa;var s=e.deps,a;Uo&&kc&&e.f&_t}catch(l){wi(l,e,n,r||e.ctx)}finally{on=i,Ve=n}}}function Jc(){try{pc()}catch(e){if(qr!==null)wi(e,qr,null);else throw e}}function Aa(){var e=on;try{var t=0;for(on=!0;Gn.length>0;){t++>1e3&&Jc();var n=Gn,r=n.length;Gn=[];for(var i=0;i<r;i++){var o=eu(n[i]);jc(o)}Jn.clear()}}finally{Kr=!1,on=e,qr=null}}function jc(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&($i|zt))===0)try{yr(r)&&(Po(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?_a(r):r.fn=null))}catch(i){wi(i,r,null,r.ctx)}}}function bi(e){Kr||(Kr=!0,queueMicrotask(Aa));for(var t=qr=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Hn|Lt))!==0){if((n&it)===0)return;t.f^=it}}Gn.push(t)}function eu(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(Lt|Hn))!==0,o=i&&(r&it)!==0;if(!o&&(r&zt)===0){if((r&ta)!==0)t.push(n);else if(i)n.f^=it;else try{yr(n)&&Po(n)}catch(l){wi(l,n,null,n.ctx)}var s=n.first;if(s!==null){n=s;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}return t}function tu(e){for(var t;;){if(Zc(),Gn.length===0)return t;Kr=!0,Aa()}}async function nu(){await Promise.resolve(),tu()}function u(e){var t=e.f,n=(t&vt)!==0;if(Le!==null&&!ht){if(!(je!=null&&je.includes(e))){var r=Le.deps;e.rv<Zr&&(e.rv=Zr,Ue===null&&r!==null&&r[ot]===e?ot++:Ue===null?Ue=[e]:(!Zt||!Ue.includes(e))&&Ue.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&at)===0&&(i.f^=at)}return n&&(i=e,yr(i)&&ha(i)),vr&&Jn.has(e)?Jn.get(e):e.v}function Je(e){var t=ht;try{return ht=!0,e()}finally{ht=t}}const ru=-7169;function yt(e,t){e.f=e.f&ru|t}function Ia(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ut in e)eo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ut in n&&eo(n)}}}function eo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{eo(e[r],t)}catch{}const n=hi(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=js(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function iu(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const ou=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function su(e){return ou.includes(e)}const au={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function lu(e){return e=e.toLowerCase(),au[e]??e}const cu=["touchstart","touchmove"];function uu(e){return cu.includes(e)}function du(e,t){if(t){const n=document.body;e.autofocus=!0,pi(()=>{document.activeElement===n&&e.focus()})}}let ts=!1;function fu(){ts||(ts=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function za(e){var t=Le,n=Ve;xt(null),jt(null);try{return e()}finally{xt(t),jt(n)}}function hu(e,t,n,r=n){e.addEventListener(t,()=>za(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),fu()}const Ta=new Set,to=new Set;function Co(e,t,n,r={}){function i(o){if(r.capture||Bn.call(t,o),!o.cancelBubble)return za(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?pi(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function no(e,t,n,r={}){var i=Co(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function Qe(e,t,n,r,i){var o={capture:r,passive:i},s=Co(e,t,n,o);(t===document.body||t===window||t===document)&&ko(()=>{t.removeEventListener(e,s,o)})}function dn(e){for(var t=0;t<e.length;t++)Ta.add(e[t]);for(var n of to)n(e)}function Bn(e){var z;var t=this,n=t.ownerDocument,r=e.type,i=((z=e.composedPath)==null?void 0:z.call(e))||[],o=i[0]||e.target,s=0,a=e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){cc(e,"currentTarget",{configurable:!0,get(){return o||n}});var d=Le,h=Ve;xt(null),jt(null);try{for(var f,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];if(m!=null&&(!o.disabled||e.target===o))if(fi(m)){var[p,...w]=m;p.apply(o,[e,...w])}else m.call(o,e)}catch(x){f?g.push(x):f=x}if(e.cancelBubble||y===t||y===null)break;o=y}if(f){for(let x of g)queueMicrotask(()=>{throw x});throw f}}finally{e.__root=t,delete e.currentTarget,xt(d),jt(h)}}}function Ha(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Sn(e,t){var n=Ve;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Te(e,t){var n=(t&aa)!==0,r=(t&zc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Ha(o?e:"<!>"+e),n||(i=Mt(i)));var s=r||va?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Mt(s),l=s.lastChild;Sn(a,l)}else Sn(s,s);return s}}function We(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&aa)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=Ha(o),l=Mt(a);if(i)for(s=document.createDocumentFragment();Mt(l);)s.appendChild(Mt(l));else s=Mt(l)}var c=s.cloneNode(!0);if(i){var d=Mt(c),h=c.lastChild;Sn(d,h)}else Sn(c,c);return c}}function Oa(e=""){{var t=yi(e+"");return Sn(t,t),t}}function tt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=yi();return e.append(t,n),Sn(t,n),e}function me(e,t){e!==null&&e.before(t)}function en(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function gu(e,t){return $u(e,t)}const hn=new Map;function $u(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){Yc();var a=new Set,l=h=>{for(var f=0;f<h.length;f++){var g=h[f];if(!a.has(g)){a.add(g);var y=uu(g);t.addEventListener(g,Bn,{passive:y});var m=hn.get(g);m===void 0?(document.addEventListener(g,Bn,{passive:y}),hn.set(g,1)):hn.set(g,m+1)}}};l(mo(Ta)),to.add(l);var c=void 0,d=Fc(()=>{var h=n??t.appendChild(yi());return an(()=>{if(o){Me({});var f=De;f.c=o}i&&(r.$$events=i),c=e(h,r)||{},o&&Ae()}),()=>{var y;for(var f of a){t.removeEventListener(f,Bn);var g=hn.get(f);--g===0?(document.removeEventListener(f,Bn),hn.delete(f)):hn.set(f,g)}to.delete(l),h!==n&&((y=h.parentNode)==null||y.removeChild(h))}});return vu.set(c,d),c}let vu=new WeakMap;function Xe(e,t,[n,r]=[0,0]){var i=e,o=null,s=null,a=et,l=n>0?gr:0,c=!1;const d=(f,g=!0)=>{c=!0,h(g,f)},h=(f,g)=>{a!==(a=f)&&(a?(o?Br(o):g&&(o=an(()=>g(i))),s&&jn(s,()=>{s=null})):(s?Br(s):g&&(s=an(()=>g(i,[n+1,r]))),o&&jn(o,()=>{o=null})))};$r(()=>{c=!1,t(d),c||h(null,null)},l)}function yu(e,t){Ln(()=>{var n=t();for(var r in n){var i=n[r];i?e.style.setProperty(r,i):e.style.removeProperty(r)}}),ko(()=>{e.remove()})}function mu(e,t,n,r){for(var i=[],o=t.length,s=0;s<o;s++)So(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;Vc(l),l.append(n),r.clear(),Wt(e,t[0].prev,t[o-1].next)}xa(i,()=>{for(var c=0;c<o;c++){var d=t[c];a||(r.delete(d.k),Wt(e,d.prev,d.next)),Ot(d.e,!a)}})}function _i(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&sa)!==0;if(l){var c=e;s=c.appendChild(yi())}var d=null,h=!1,f=ua(()=>{var g=n();return fi(g)?g:g==null?[]:mo(g)});$r(()=>{var g=u(f),y=g.length;h&&y===0||(h=y===0,pu(g,a,s,i,t,r,n),o!==null&&(y===0?d?Br(d):d=an(()=>o(s)):d!==null&&jn(d,()=>{d=null})),u(f))})}function pu(e,t,n,r,i,o,s){var $,S,P,V;var a=(i&Sc)!==0,l=(i&(bo|_o))!==0,c=e.length,d=t.items,h=t.first,f=h,g,y=null,m,p=[],w=[],z,x,v,A;if(a)for(A=0;A<c;A+=1)z=e[A],x=o(z,A),v=d.get(x),v!==void 0&&(($=v.a)==null||$.measure(),(m??(m=new Set)).add(v));for(A=0;A<c;A+=1){if(z=e[A],x=o(z,A),v=d.get(x),v===void 0){var C=f?f.e.nodes_start:n;y=bu(C,t,y,y===null?t.first:y.next,z,x,A,r,i,s),d.set(x,y),p=[],w=[],f=y.next;continue}if(l&&wu(v,z,A,i),(v.e.f&zt)!==0&&(Br(v.e),a&&((S=v.a)==null||S.unfix(),(m??(m=new Set)).delete(v))),v!==f){if(g!==void 0&&g.has(v)){if(p.length<w.length){var b=w[0],H;y=b.prev;var W=p[0],q=p[p.length-1];for(H=0;H<p.length;H+=1)ns(p[H],b,n);for(H=0;H<w.length;H+=1)g.delete(w[H]);Wt(t,W.prev,q.next),Wt(t,y,W),Wt(t,q,b),f=b,y=q,A-=1,p=[],w=[]}else g.delete(v),ns(v,f,n),Wt(t,v.prev,v.next),Wt(t,v,y===null?t.first:y.next),Wt(t,y,v),y=v;continue}for(p=[],w=[];f!==null&&f.k!==x;)(f.e.f&zt)===0&&(g??(g=new Set)).add(f),w.push(f),f=f.next;if(f===null)continue;v=f}p.push(v),y=v,f=v.next}if(f!==null||g!==void 0){for(var k=g===void 0?[]:mo(g);f!==null;)(f.e.f&zt)===0&&k.push(f),f=f.next;var N=k.length;if(N>0){var M=(i&sa)!==0&&c===0?n:null;if(a){for(A=0;A<N;A+=1)(P=k[A].a)==null||P.measure();for(A=0;A<N;A+=1)(V=k[A].a)==null||V.fix()}mu(t,k,M,d)}}a&&pi(()=>{var L;if(m!==void 0)for(v of m)(L=v.a)==null||L.apply()}),Ve.first=t.first&&t.first.e,Ve.last=y&&y.e}function wu(e,t,n,r){(r&bo)!==0&&Ji(e.v,t),(r&_o)!==0?Ji(e.i,n):e.i=n}function bu(e,t,n,r,i,o,s,a,l,c){var d=(l&bo)!==0,h=(l&Pc)===0,f=d?h?ga(i):En(i):i,g=(l&_o)===0?s:En(s),y={i:g,v:f,k:o,a:null,e:null,prev:n,next:r};try{return y.e=an(()=>a(e,f,g,c),Lc),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function ns(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var s=mi(o);i.before(o),o=s}}function Wt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function rt(e,t,...n){var r=e,i=Rt,o;$r(()=>{i!==(i=t())&&(o&&(Ot(o),o=null),o=an(()=>i(r,...n)))},gr)}function No(e,t,n){var r=e,i,o;$r(()=>{i!==(i=t())&&(o&&(jn(o),o=null),i&&(o=an(()=>n(r,i))))},gr)}function Ge(e,t,n){Rn(()=>{var r=Je(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};Ln(()=>{var s=n();Ia(s),i&&oa(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function _u(e,t){Rn(()=>{const n=t();return n&&n(e)})}function Da(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Da(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xu(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Da(e))&&(r&&(r+=" "),r+=t);return r}function St(e){return typeof e=="object"?xu(e):e??""}const rs=[...` 	
\r\f \v\uFEFF`];function ku(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||rs.includes(r[s-1]))&&(a===r.length||rs.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function is(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function Di(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Eu(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(Di)),i&&l.push(...Object.keys(i).map(Di));var c=0,d=-1;const m=e.length;for(var h=0;h<m;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):o?o===f&&(o=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!a&&o===!1&&s===0){if(f===":"&&d===-1)d=h;else if(f===";"||h===m-1){if(d!==-1){var g=Di(e.substring(c,d).trim());if(!l.includes(g)){f!==";"&&h++;var y=e.substring(c,h).trim();n+=" "+y+";"}}c=h+1,d=-1}}}}return r&&(n+=is(r)),i&&(n+=is(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function mt(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=ku(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var c=!!o[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return o}function Ri(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function lt(e,t,n,r){var i=e.__style;if(i!==t){var o=Eu(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(Ri(e,n==null?void 0:n[0],r[0]),Ri(e,n==null?void 0:n[1],r[1],"important")):Ri(e,n,r));return r}const $n=Symbol("class"),wt=Symbol("style"),Ra=Symbol("is custom element"),La=Symbol("is html");function Su(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function _e(e,t,n,r){var i=Ya(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[$c]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Va(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function fn(e,t,n,r,i=!1){var o=Ya(e),s=o[Ra],a=!o[La],l=t||{},c=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=St(n.class):(r||n[$n])&&(n.class=null),n[wt]&&(n.style??(n.style=null));var h=Va(e);for(const x in n){let v=n[x];if(c&&x==="value"&&v==null){e.value=e.__value="",l[x]=v;continue}if(x==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";mt(e,f,v,r,t==null?void 0:t[$n],n[$n]),l[x]=v,l[$n]=n[$n];continue}if(x==="style"){lt(e,v,t==null?void 0:t[wt],n[wt]),l[x]=v,l[wt]=n[wt];continue}var g=l[x];if(v!==g){l[x]=v;var y=x[0]+x[1];if(y!=="$$")if(y==="on"){const A={},C="$$"+x;let b=x.slice(2);var m=su(b);if(iu(b)&&(b=b.slice(0,-7),A.capture=!0),!m&&g){if(v!=null)continue;e.removeEventListener(b,l[C],A),l[C]=null}if(v!=null)if(m)e[`__${b}`]=v,dn([b]);else{let H=function(W){l[x].call(this,W)};var z=H;l[C]=Co(b,e,H,A)}else m&&(e[`__${b}`]=void 0)}else if(x==="style")_e(e,x,v);else if(x==="autofocus")du(e,!!v);else if(!s&&(x==="__value"||x==="value"&&v!=null))e.value=e.__value=v;else if(x==="selected"&&c)Su(e,v);else{var p=x;a||(p=lu(p));var w=p==="defaultValue"||p==="defaultChecked";if(v==null&&!s&&!w)if(o[x]=null,p==="value"||p==="checked"){let A=e;const C=t===void 0;if(p==="value"){let b=A.defaultValue;A.removeAttribute(p),A.defaultValue=b,A.value=A.__value=C?b:null}else{let b=A.defaultChecked;A.removeAttribute(p),A.defaultChecked=b,A.checked=C?b:!1}}else e.removeAttribute(x);else w||h.includes(p)&&(s||typeof v!="string")?e[p]=v:typeof v!="function"&&_e(e,p,v)}}}for(let x of Object.getOwnPropertySymbols(n))x.description===Hc&&_u(e,()=>n[x]);return l}function Ya(e){return e.__attributes??(e.__attributes={[Ra]:e.nodeName.includes("-"),[La]:e.namespaceURI===Tc})}var os=new Map;function Va(e){var t=os.get(e.nodeName);if(t)return t;os.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=js(r);for(var o in n)n[o].set&&t.push(o);r=hi(r)}return t}function Pu(e,t,n=t){hu(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),Je(t)==null&&n(e.checked),Ln(()=>{var r=t();e.checked=!!r})}var qt,_n,dr,ui,Xa;const di=class di{constructor(t){le(this,ui);le(this,qt,new WeakMap);le(this,_n);le(this,dr);Vn(this,dr,t)}observe(t,n){var r=I(this,qt).get(t)||new Set;return r.add(n),I(this,qt).set(t,r),Go(this,ui,Xa).call(this).observe(t,I(this,dr)),()=>{var i=I(this,qt).get(t);i.delete(n),i.size===0&&(I(this,qt).delete(t),I(this,_n).unobserve(t))}}};qt=new WeakMap,_n=new WeakMap,dr=new WeakMap,ui=new WeakSet,Xa=function(){return I(this,_n)??Vn(this,_n,new ResizeObserver(t=>{for(var n of t){di.entries.set(n.target,n);for(var r of I(this,qt).get(n.target)||[])r(n)}}))},Fe(di,"entries",new WeakMap);let ro=di;var Cu=new ro({box:"border-box"});function ss(e,t,n){var r=Cu.observe(e,()=>n(e[t]));Rn(()=>(Je(()=>n(e[t])),r))}function as(e,t){return e===t||(e==null?void 0:e[Ut])===t}function kt(e={},t,n,r){return Rn(()=>{var i,o;return Ln(()=>{i=o,o=[],Je(()=>{e!==n(...o)&&(t(e,...o),i&&as(n(...i),e)&&t(null,...i))})}),()=>{pi(()=>{o&&as(n(...o),e)&&t(null,...o)})}}),e}function Nu(e=!1){const t=De,n=t.l.u;if(!n)return;let r=()=>Ia(t.s);if(e){let i=0,o={};const s=kn(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&i++,i});r=()=>u(s)}n.b.length&&Eo(()=>{ls(t,r),Xr(n.b)}),Ht(()=>{const i=Je(()=>n.m.map(dc));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Ht(()=>{ls(t,r),Xr(n.a)})}function ls(e,t){if(e.l.s)for(const n of e.l.s)u(n);t()}let Er=!1;function Mu(e){var t=Er;try{return Er=!1,[e(),Er]}finally{Er=t}}const Au={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Yt(e,t,n){return new Proxy({props:e,exclude:t},Au)}const Iu={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Xn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Xn(i)&&(i=i());const o=Gt(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Xn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=Gt(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Ut||t===ra)return!1;for(let n of e.props)if(Xn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Xn(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function Bt(...e){return new Proxy({props:e},Iu)}function cs(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function te(e,t,n,r){var C;var i=(n&Cc)!==0,o=!On||(n&Nc)!==0,s=(n&Ac)!==0,a=(n&Ic)!==0,l=!1,c;s?[c,l]=Mu(()=>e[t]):c=e[t];var d=Ut in e||ra in e,h=s&&(((C=Gt(e,t))==null?void 0:C.set)??(d&&t in e&&(b=>e[t]=b)))||void 0,f=r,g=!0,y=!1,m=()=>(y=!0,g&&(g=!1,a?f=Je(r):f=r),f);c===void 0&&r!==void 0&&(h&&o&&wc(),c=m(),h&&h(c));var p;if(o)p=()=>{var b=e[t];return b===void 0?m():(g=!0,y=!1,b)};else{var w=(i?kn:ua)(()=>e[t]);w.f|=hc,p=()=>{var b=u(w);return b!==void 0&&(f=void 0),b===void 0?f:b}}if((n&Mc)===0)return p;if(h){var z=e.$$legacy;return function(b,H){return arguments.length>0?((!o||!H||z||l)&&h(H?p():b),b):p()}}var x=!1,v=ga(c),A=kn(()=>{var b=p(),H=u(v);return x?(x=!1,H):v.v=b});return s&&u(A),i||(A.equals=wo),function(b,H){if(arguments.length>0){const W=H?u(A):o&&s?qe(b):b;if(!A.equals(W)){if(x=!0,U(v,W),y&&f!==void 0&&(f=W),cs(A))return b;Je(()=>u(A))}return b}return cs(A)?A.v:u(A)}}function Ur(e){De===null&&xo(),On&&De.l!==null?zu(De).m.push(e):Ht(()=>{const t=Je(e);if(typeof t=="function")return t})}function mr(e){De===null&&xo(),Ur(()=>()=>Je(e))}function zu(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Tu="5";var Js;typeof window<"u"&&((Js=window.__svelte??(window.__svelte={})).v??(Js.v=new Set)).add(Tu);var Hu={value:()=>{}};function xi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Or(n)}function Or(e){this._=e}function Ou(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Or.prototype=xi.prototype={constructor:Or,on:function(e,t){var n=this._,r=Ou(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Du(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=us(n[i],e.name,t);else if(t==null)for(i in n)n[i]=us(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Or(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Du(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function us(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Hu,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var io="http://www.w3.org/1999/xhtml";const ds={svg:"http://www.w3.org/2000/svg",xhtml:io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ki(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ds.hasOwnProperty(t)?{space:ds[t],local:e}:e}function Ru(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===io&&t.documentElement.namespaceURI===io?t.createElement(e):t.createElementNS(n,e)}}function Lu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wa(e){var t=ki(e);return(t.local?Lu:Ru)(t)}function Yu(){}function Mo(e){return e==null?Yu:function(){return this.querySelector(e)}}function Vu(e){typeof e!="function"&&(e=Mo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,c,d=0;d<s;++d)(l=o[d])&&(c=e.call(l,l.__data__,d,o))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new ct(r,this._parents)}function Xu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wu(){return[]}function Fa(e){return e==null?Wu:function(){return this.querySelectorAll(e)}}function Fu(e){return function(){return Xu(e.apply(this,arguments))}}function Bu(e){typeof e=="function"?e=Fu(e):e=Fa(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),i.push(l));return new ct(r,i)}function Ba(e){return function(){return this.matches(e)}}function Ka(e){return function(t){return t.matches(e)}}var Ku=Array.prototype.find;function qu(e){return function(){return Ku.call(this.children,e)}}function Zu(){return this.firstElementChild}function Gu(e){return this.select(e==null?Zu:qu(typeof e=="function"?e:Ka(e)))}var Uu=Array.prototype.filter;function Qu(){return Array.from(this.children)}function Ju(e){return function(){return Uu.call(this.children,e)}}function ju(e){return this.selectAll(e==null?Qu:Ju(typeof e=="function"?e:Ka(e)))}function ed(e){typeof e!="function"&&(e=Ba(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new ct(r,this._parents)}function qa(e){return new Array(e.length)}function td(){return new ct(this._enter||this._groups.map(qa),this._parents)}function Qr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qr.prototype={constructor:Qr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nd(e){return function(){return e}}function rd(e,t,n,r,i,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Qr(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function id(e,t,n,r,i,o,s){var a,l,c=new Map,d=t.length,h=o.length,f=new Array(d),g;for(a=0;a<d;++a)(l=t[a])&&(f[a]=g=s.call(l,l.__data__,a,t)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(l=c.get(g))?(r[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new Qr(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&c.get(f[a])===l&&(i[a]=l)}function od(e){return e.__data__}function sd(e,t){if(!arguments.length)return Array.from(this,od);var n=t?id:rd,r=this._parents,i=this._groups;typeof e!="function"&&(e=nd(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var d=r[c],h=i[c],f=h.length,g=ad(e.call(d,d&&d.__data__,c,r)),y=g.length,m=a[c]=new Array(y),p=s[c]=new Array(y),w=l[c]=new Array(f);n(d,h,m,p,w,g,t);for(var z=0,x=0,v,A;z<y;++z)if(v=m[z]){for(z>=x&&(x=z+1);!(A=p[x])&&++x<y;);v._next=A||null}}return s=new ct(s,r),s._enter=a,s._exit=l,s}function ad(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ld(){return new ct(this._exit||this._groups.map(qa),this._parents)}function cd(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ud(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],d=r[l],h=c.length,f=a[l]=new Array(h),g,y=0;y<h;++y)(g=c[y]||d[y])&&(f[y]=g);for(;l<i;++l)a[l]=n[l];return new ct(a,this._parents)}function dd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function fd(e){e||(e=hd);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(l[d]=c);l.sort(t)}return new ct(i,this._parents).order()}function hd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $d(){return Array.from(this)}function vd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function yd(){let e=0;for(const t of this)++e;return e}function md(){return!this.node()}function pd(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function wd(e){return function(){this.removeAttribute(e)}}function bd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _d(e,t){return function(){this.setAttribute(e,t)}}function xd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ed(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Sd(e,t){var n=ki(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?bd:wd:typeof t=="function"?n.local?Ed:kd:n.local?xd:_d)(n,t))}function Za(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Pd(e){return function(){this.style.removeProperty(e)}}function Cd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Nd(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Md(e,t,n){return arguments.length>1?this.each((t==null?Pd:typeof t=="function"?Nd:Cd)(e,t,n??"")):Pn(this.node(),e)}function Pn(e,t){return e.style.getPropertyValue(t)||Za(e).getComputedStyle(e,null).getPropertyValue(t)}function Ad(e){return function(){delete this[e]}}function Id(e,t){return function(){this[e]=t}}function zd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Td(e,t){return arguments.length>1?this.each((t==null?Ad:typeof t=="function"?zd:Id)(e,t)):this.node()[e]}function Ga(e){return e.trim().split(/^|\s+/)}function Ao(e){return e.classList||new Ua(e)}function Ua(e){this._node=e,this._names=Ga(e.getAttribute("class")||"")}Ua.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qa(e,t){for(var n=Ao(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ja(e,t){for(var n=Ao(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Hd(e){return function(){Qa(this,e)}}function Od(e){return function(){Ja(this,e)}}function Dd(e,t){return function(){(t.apply(this,arguments)?Qa:Ja)(this,e)}}function Rd(e,t){var n=Ga(e+"");if(arguments.length<2){for(var r=Ao(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Dd:t?Hd:Od)(n,t))}function Ld(){this.textContent=""}function Yd(e){return function(){this.textContent=e}}function Vd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xd(e){return arguments.length?this.each(e==null?Ld:(typeof e=="function"?Vd:Yd)(e)):this.node().textContent}function Wd(){this.innerHTML=""}function Fd(e){return function(){this.innerHTML=e}}function Bd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Kd(e){return arguments.length?this.each(e==null?Wd:(typeof e=="function"?Bd:Fd)(e)):this.node().innerHTML}function qd(){this.nextSibling&&this.parentNode.appendChild(this)}function Zd(){return this.each(qd)}function Gd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ud(){return this.each(Gd)}function Qd(e){var t=typeof e=="function"?e:Wa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Jd(){return null}function jd(e,t){var n=typeof e=="function"?e:Wa(e),r=t==null?Jd:typeof t=="function"?t:Mo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ef(){var e=this.parentNode;e&&e.removeChild(this)}function tf(){return this.each(ef)}function nf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function of(e){return this.select(e?rf:nf)}function sf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function af(e){return function(t){e.call(this,t,this.__data__)}}function lf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function cf(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function uf(e,t,n){return function(){var r=this.__on,i,o=af(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function df(e,t,n){var r=lf(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(i=0,d=a[l];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?uf:cf,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function ja(e,t,n){var r=Za(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ff(e,t){return function(){return ja(this,e,t)}}function hf(e,t){return function(){return ja(this,e,t.apply(this,arguments))}}function gf(e,t){return this.each((typeof t=="function"?hf:ff)(e,t))}function*$f(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var el=[null];function ct(e,t){this._groups=e,this._parents=t}function pr(){return new ct([[document.documentElement]],el)}function vf(){return this}ct.prototype=pr.prototype={constructor:ct,select:Vu,selectAll:Bu,selectChild:Gu,selectChildren:ju,filter:ed,data:sd,enter:td,exit:ld,join:cd,merge:ud,selection:vf,order:dd,sort:fd,call:gd,nodes:$d,node:vd,size:yd,empty:md,each:pd,attr:Sd,style:Md,property:Td,classed:Rd,text:Xd,html:Kd,raise:Zd,lower:Ud,append:Qd,insert:jd,remove:tf,clone:of,datum:sf,on:df,dispatch:gf,[Symbol.iterator]:$f};function st(e){return typeof e=="string"?new ct([[document.querySelector(e)]],[document.documentElement]):new ct([[e]],el)}function yf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=yf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const mf={passive:!1},tr={capture:!0,passive:!1};function Li(e){e.stopImmediatePropagation()}function pn(e){e.preventDefault(),e.stopImmediatePropagation()}function tl(e){var t=e.document.documentElement,n=st(e).on("dragstart.drag",pn,tr);"onselectstart"in t?n.on("selectstart.drag",pn,tr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function nl(e,t){var n=e.document.documentElement,r=st(e).on("dragstart.drag",null);t&&(r.on("click.drag",pn,tr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sr=e=>()=>e;function oo(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}oo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pf(e){return!e.ctrlKey&&!e.button}function wf(){return this.parentNode}function bf(e,t){return t??{x:e.x,y:e.y}}function _f(){return navigator.maxTouchPoints||"ontouchstart"in this}function rl(){var e=pf,t=wf,n=bf,r=_f,i={},o=xi("start","drag","end"),s=0,a,l,c,d,h=0;function f(v){v.on("mousedown.drag",g).filter(r).on("touchstart.drag",p).on("touchmove.drag",w,mf).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(v,A){if(!(d||!e.call(this,v,A))){var C=x(this,t.call(this,v,A),v,A,"mouse");C&&(st(v.view).on("mousemove.drag",y,tr).on("mouseup.drag",m,tr),tl(v.view),Li(v),c=!1,a=v.clientX,l=v.clientY,C("start",v))}}function y(v){if(pn(v),!c){var A=v.clientX-a,C=v.clientY-l;c=A*A+C*C>h}i.mouse("drag",v)}function m(v){st(v.view).on("mousemove.drag mouseup.drag",null),nl(v.view,c),pn(v),i.mouse("end",v)}function p(v,A){if(e.call(this,v,A)){var C=v.changedTouches,b=t.call(this,v,A),H=C.length,W,q;for(W=0;W<H;++W)(q=x(this,b,v,A,C[W].identifier,C[W]))&&(Li(v),q("start",v,C[W]))}}function w(v){var A=v.changedTouches,C=A.length,b,H;for(b=0;b<C;++b)(H=i[A[b].identifier])&&(pn(v),H("drag",v,A[b]))}function z(v){var A=v.changedTouches,C=A.length,b,H;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<C;++b)(H=i[A[b].identifier])&&(Li(v),H("end",v,A[b]))}function x(v,A,C,b,H,W){var q=o.copy(),k=ft(W||C,A),N,M,$;if(($=n.call(v,new oo("beforestart",{sourceEvent:C,target:f,identifier:H,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:q}),b))!=null)return N=$.x-k[0]||0,M=$.y-k[1]||0,function S(P,V,L){var D=k,F;switch(P){case"start":i[H]=S,F=s++;break;case"end":delete i[H],--s;case"drag":k=ft(L||V,A),F=s;break}q.call(P,v,new oo(P,{sourceEvent:V,subject:$,target:f,identifier:H,active:F,x:k[0]+N,y:k[1]+M,dx:k[0]-D[0],dy:k[1]-D[1],dispatch:q}),b)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Sr(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Sr(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Sr(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Sr(!!v),f):r},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,f):Math.sqrt(h)},f}function Io(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function il(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wr(){}var nr=.7,Jr=1/nr,wn="\\s*([+-]?\\d+)\\s*",rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xf=/^#([0-9a-f]{3,8})$/,kf=new RegExp(`^rgb\\(${wn},${wn},${wn}\\)$`),Ef=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Sf=new RegExp(`^rgba\\(${wn},${wn},${wn},${rr}\\)$`),Pf=new RegExp(`^rgba\\(${bt},${bt},${bt},${rr}\\)$`),Cf=new RegExp(`^hsl\\(${rr},${bt},${bt}\\)$`),Nf=new RegExp(`^hsla\\(${rr},${bt},${bt},${rr}\\)$`),fs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Io(wr,ir,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hs,formatHex:hs,formatHex8:Mf,formatHsl:Af,formatRgb:gs,toString:gs});function hs(){return this.rgb().formatHex()}function Mf(){return this.rgb().formatHex8()}function Af(){return ol(this).formatHsl()}function gs(){return this.rgb().formatRgb()}function ir(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$s(t):n===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Pr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Pr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kf.exec(e))?new nt(t[1],t[2],t[3],1):(t=Ef.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Sf.exec(e))?Pr(t[1],t[2],t[3],t[4]):(t=Pf.exec(e))?Pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Cf.exec(e))?ms(t[1],t[2]/100,t[3]/100,1):(t=Nf.exec(e))?ms(t[1],t[2]/100,t[3]/100,t[4]):fs.hasOwnProperty(e)?$s(fs[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function $s(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function Pr(e,t,n,r){return r<=0&&(e=t=n=NaN),new nt(e,t,n,r)}function If(e){return e instanceof wr||(e=ir(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function so(e,t,n,r){return arguments.length===1?If(e):new nt(e,t,n,r??1)}function nt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Io(nt,so,il(wr,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nr:Math.pow(nr,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(sn(this.r),sn(this.g),sn(this.b),jr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vs,formatHex:vs,formatHex8:zf,formatRgb:ys,toString:ys}));function vs(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}`}function zf(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}${rn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ys(){const e=jr(this.opacity);return`${e===1?"rgb(":"rgba("}${sn(this.r)}, ${sn(this.g)}, ${sn(this.b)}${e===1?")":`, ${e})`}`}function jr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rn(e){return e=sn(e),(e<16?"0":"")+e.toString(16)}function ms(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gt(e,t,n,r)}function ol(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof wr||(e=ir(e)),!e)return new gt;if(e instanceof gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new gt(s,a,l,e.opacity)}function Tf(e,t,n,r){return arguments.length===1?ol(e):new gt(e,t,n,r??1)}function gt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Io(gt,Tf,il(wr,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nr:Math.pow(nr,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new nt(Yi(e>=240?e-240:e+120,i,r),Yi(e,i,r),Yi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new gt(ps(this.h),Cr(this.s),Cr(this.l),jr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jr(this.opacity);return`${e===1?"hsl(":"hsla("}${ps(this.h)}, ${Cr(this.s)*100}%, ${Cr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ps(e){return e=(e||0)%360,e<0?e+360:e}function Cr(e){return Math.max(0,Math.min(1,e||0))}function Yi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const sl=e=>()=>e;function Hf(e,t){return function(n){return e+n*t}}function Of(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Df(e){return(e=+e)==1?al:function(t,n){return n-t?Of(t,n,e):sl(isNaN(t)?n:t)}}function al(e,t){var n=t-e;return n?Hf(e,n):sl(isNaN(e)?t:e)}const ws=function e(t){var n=Df(t);function r(i,o){var s=n((i=so(i)).r,(o=so(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=al(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=e,r}(1);function Ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vi=new RegExp(ao.source,"g");function Rf(e){return function(){return e}}function Lf(e){return function(t){return e(t)+""}}function Yf(e,t){var n=ao.lastIndex=Vi.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ao.exec(e))&&(i=Vi.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ft(r,i)})),n=Vi.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Lf(l[0].x):Rf(t):(t=l.length,function(c){for(var d=0,h;d<t;++d)a[(h=l[d]).i]=h.x(c);return a.join("")})}var bs=180/Math.PI,lo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ll(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*bs,skewX:Math.atan(l)*bs,scaleX:s,scaleY:a}}var Nr;function Vf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lo:ll(t.a,t.b,t.c,t.d,t.e,t.f)}function Xf(e){return e==null||(Nr||(Nr=document.createElementNS("http://www.w3.org/2000/svg","g")),Nr.setAttribute("transform",e),!(e=Nr.transform.baseVal.consolidate()))?lo:(e=e.matrix,ll(e.a,e.b,e.c,e.d,e.e,e.f))}function cl(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,d,h,f,g,y){if(c!==h||d!==f){var m=g.push("translate(",null,t,null,n);y.push({i:m-4,x:Ft(c,h)},{i:m-2,x:Ft(d,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ft(c,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(c,d,h,f){c!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ft(c,d)}):d&&h.push(i(h)+"skewX("+d+r)}function l(c,d,h,f,g,y){if(c!==h||d!==f){var m=g.push(i(g)+"scale(",null,",",null,")");y.push({i:m-4,x:Ft(c,h)},{i:m-2,x:Ft(d,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,f),s(c.rotate,d.rotate,h,f),a(c.skewX,d.skewX,h,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(g){for(var y=-1,m=f.length,p;++y<m;)h[(p=f[y]).i]=p.x(g);return h.join("")}}}var Wf=cl(Vf,"px, ","px)","deg)"),Ff=cl(Xf,", ",")",")"),Bf=1e-12;function _s(e){return((e=Math.exp(e))+1/e)/2}function Kf(e){return((e=Math.exp(e))-1/e)/2}function qf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zf=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],d=s[0],h=s[1],f=s[2],g=d-a,y=h-l,m=g*g+y*y,p,w;if(m<Bf)w=Math.log(f/c)/t,p=function(b){return[a+b*g,l+b*y,c*Math.exp(t*b*w)]};else{var z=Math.sqrt(m),x=(f*f-c*c+r*m)/(2*c*n*z),v=(f*f-c*c-r*m)/(2*f*n*z),A=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(v*v+1)-v);w=(C-A)/t,p=function(b){var H=b*w,W=_s(A),q=c/(n*z)*(W*qf(t*H+A)-Kf(A));return[a+q*g,l+q*y,c*W/_s(t*H+A)]}}return p.duration=w*1e3*t/Math.SQRT2,p}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Cn=0,Kn=0,Wn=0,ul=1e3,ei,qn,ti=0,ln=0,Ei=0,or=typeof performance=="object"&&performance.now?performance:Date,dl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zo(){return ln||(dl(Gf),ln=or.now()+Ei)}function Gf(){ln=0}function ni(){this._call=this._time=this._next=null}ni.prototype=fl.prototype={constructor:ni,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zo():+n)+(t==null?0:+t),!this._next&&qn!==this&&(qn?qn._next=this:ei=this,qn=this),this._call=e,this._time=n,co()},stop:function(){this._call&&(this._call=null,this._time=1/0,co())}};function fl(e,t,n){var r=new ni;return r.restart(e,t,n),r}function Uf(){zo(),++Cn;for(var e=ei,t;e;)(t=ln-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cn}function xs(){ln=(ti=or.now())+Ei,Cn=Kn=0;try{Uf()}finally{Cn=0,Jf(),ln=0}}function Qf(){var e=or.now(),t=e-ti;t>ul&&(Ei-=t,ti=e)}function Jf(){for(var e,t=ei,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ei=n);qn=e,co(r)}function co(e){if(!Cn){Kn&&(Kn=clearTimeout(Kn));var t=e-ln;t>24?(e<1/0&&(Kn=setTimeout(xs,e-or.now()-Ei)),Wn&&(Wn=clearInterval(Wn))):(Wn||(ti=or.now(),Wn=setInterval(Qf,ul)),Cn=1,dl(xs))}}function ks(e,t,n){var r=new ni;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var jf=xi("start","end","cancel","interrupt"),eh=[],hl=0,Es=1,uo=2,Dr=3,Ss=4,fo=5,Rr=6;function Si(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;th(e,n,{name:t,index:r,group:i,on:jf,tween:eh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:hl})}function To(e,t){var n=pt(e,t);if(n.state>hl)throw new Error("too late; already scheduled");return n}function Pt(e,t){var n=pt(e,t);if(n.state>Dr)throw new Error("too late; already running");return n}function pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function th(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=fl(o,0,n.time);function o(c){n.state=Es,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,h,f,g;if(n.state!==Es)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===Dr)return ks(s);g.state===Ss?(g.state=Rr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[d]):+d<t&&(g.state=Rr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[d])}if(ks(function(){n.state===Dr&&(n.state=Ss,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=uo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===uo){for(n.state=Dr,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=fo,1),h=-1,f=i.length;++h<f;)i[h].call(e,d);n.state===fo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Rr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Lr(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>uo&&r.state<fo,r.state=Rr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function nh(e){return this.each(function(){Lr(this,e)})}function rh(e,t){var n,r;return function(){var i=Pt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ih(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Pt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function oh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?rh:ih)(n,e,t))}function Ho(e,t,n){var r=e._id;return e.each(function(){var i=Pt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return pt(i,r).value[t]}}function gl(e,t){var n;return(typeof t=="number"?Ft:t instanceof ir?ws:(n=ir(t))?(t=n,ws):Yf)(e,t)}function sh(e){return function(){this.removeAttribute(e)}}function ah(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lh(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function ch(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function uh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function dh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function fh(e,t){var n=ki(e),r=n==="transform"?Ff:gl;return this.attrTween(e,typeof t=="function"?(n.local?dh:uh)(n,r,Ho(this,"attr."+e,t)):t==null?(n.local?ah:sh)(n):(n.local?ch:lh)(n,r,t))}function hh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $h(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&gh(e,o)),n}return i._value=t,i}function vh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&hh(e,o)),n}return i._value=t,i}function yh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ki(e);return this.tween(n,(r.local?$h:vh)(r,t))}function mh(e,t){return function(){To(this,e).delay=+t.apply(this,arguments)}}function ph(e,t){return t=+t,function(){To(this,e).delay=t}}function wh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mh:ph)(t,e)):pt(this.node(),t).delay}function bh(e,t){return function(){Pt(this,e).duration=+t.apply(this,arguments)}}function _h(e,t){return t=+t,function(){Pt(this,e).duration=t}}function xh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bh:_h)(t,e)):pt(this.node(),t).duration}function kh(e,t){if(typeof t!="function")throw new Error;return function(){Pt(this,e).ease=t}}function Eh(e){var t=this._id;return arguments.length?this.each(kh(t,e)):pt(this.node(),t).ease}function Sh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pt(this,e).ease=n}}function Ph(e){if(typeof e!="function")throw new Error;return this.each(Sh(this._id,e))}function Ch(e){typeof e!="function"&&(e=Ba(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Dt(r,this._parents,this._name,this._id)}function Nh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],d=l.length,h=s[a]=new Array(d),f,g=0;g<d;++g)(f=l[g]||c[g])&&(h[g]=f);for(;a<r;++a)s[a]=t[a];return new Dt(s,this._parents,this._name,this._id)}function Mh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ah(e,t,n){var r,i,o=Mh(t)?To:Pt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Ih(e,t){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(e):this.each(Ah(n,e,t))}function zh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Th(){return this.on("end.remove",zh(this._id))}function Hh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mo(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),d,h,f=0;f<l;++f)(d=a[f])&&(h=e.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,Si(c[f],t,n,f,c,pt(d,n)));return new Dt(o,this._parents,t,n)}function Oh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fa(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,d,h=0;h<c;++h)if(d=l[h]){for(var f=e.call(d,d.__data__,h,l),g,y=pt(d,n),m=0,p=f.length;m<p;++m)(g=f[m])&&Si(g,t,n,m,f,y);o.push(f),s.push(d)}return new Dt(o,s,t,n)}var Dh=pr.prototype.constructor;function Rh(){return new Dh(this._groups,this._parents)}function Lh(e,t){var n,r,i;return function(){var o=Pn(this,e),s=(this.style.removeProperty(e),Pn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function $l(e){return function(){this.style.removeProperty(e)}}function Yh(e,t,n){var r,i=n+"",o;return function(){var s=Pn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Vh(e,t,n){var r,i,o;return function(){var s=Pn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Pn(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function Xh(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Pt(this,e),c=l.on,d=l.value[o]==null?a||(a=$l(t)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(s,i=d),l.on=r}}function Wh(e,t,n){var r=(e+="")=="transform"?Wf:gl;return t==null?this.styleTween(e,Lh(e,r)).on("end.style."+e,$l(e)):typeof t=="function"?this.styleTween(e,Vh(e,r,Ho(this,"style."+e,t))).each(Xh(this._id,e)):this.styleTween(e,Yh(e,r,t),n).on("end.style."+e,null)}function Fh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Bh(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Fh(e,s,n)),r}return o._value=t,o}function Kh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Bh(e,t,n??""))}function qh(e){return function(){this.textContent=e}}function Zh(e){return function(){var t=e(this);this.textContent=t??""}}function Gh(e){return this.tween("text",typeof e=="function"?Zh(Ho(this,"text",e)):qh(e==null?"":e+""))}function Uh(e){return function(t){this.textContent=e.call(this,t)}}function Qh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Uh(i)),t}return r._value=e,r}function Jh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qh(e))}function jh(){for(var e=this._name,t=this._id,n=vl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var d=pt(l,t);Si(l,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Dt(r,this._parents,e,n)}function eg(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=Pt(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&o()})}var tg=0;function Dt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vl(){return++tg}var Nt=pr.prototype;Dt.prototype={constructor:Dt,select:Hh,selectAll:Oh,selectChild:Nt.selectChild,selectChildren:Nt.selectChildren,filter:Ch,merge:Nh,selection:Rh,transition:jh,call:Nt.call,nodes:Nt.nodes,node:Nt.node,size:Nt.size,empty:Nt.empty,each:Nt.each,on:Ih,attr:fh,attrTween:yh,style:Wh,styleTween:Kh,text:Gh,textTween:Jh,remove:Th,tween:oh,delay:wh,duration:xh,ease:Eh,easeVarying:Ph,end:eg,[Symbol.iterator]:Nt[Symbol.iterator]};function ng(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var rg={time:null,delay:0,duration:250,ease:ng};function ig(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function og(e){var t,n;e instanceof Dt?(t=e._id,e=e._name):(t=vl(),(n=rg).time=zo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Si(l,e,t,c,s,n||ig(l,t));return new Dt(r,this._parents,e,t)}pr.prototype.interrupt=nh;pr.prototype.transition=og;const Mr=e=>()=>e;function sg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function At(e,t,n){this.k=e,this.x=t,this.y=n}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pi=new At(1,0,0);yl.prototype=At.prototype;function yl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Pi;return e.__zoom}function Xi(e){e.stopImmediatePropagation()}function Fn(e){e.preventDefault(),e.stopImmediatePropagation()}function ag(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function lg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ps(){return this.__zoom||Pi}function cg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ug(){return navigator.maxTouchPoints||"ontouchstart"in this}function dg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function ml(){var e=ag,t=lg,n=dg,r=cg,i=ug,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Zf,c=xi("start","zoom","end"),d,h,f,g=500,y=150,m=0,p=10;function w($){$.property("__zoom",Ps).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",q).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function($,S,P,V){var L=$.selection?$.selection():$;L.property("__zoom",Ps),$!==L?A($,S,P,V):L.interrupt().each(function(){C(this,arguments).event(V).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},w.scaleBy=function($,S,P,V){w.scaleTo($,function(){var L=this.__zoom.k,D=typeof S=="function"?S.apply(this,arguments):S;return L*D},P,V)},w.scaleTo=function($,S,P,V){w.transform($,function(){var L=t.apply(this,arguments),D=this.__zoom,F=P==null?v(L):typeof P=="function"?P.apply(this,arguments):P,K=D.invert(F),oe=typeof S=="function"?S.apply(this,arguments):S;return n(x(z(D,oe),F,K),L,s)},P,V)},w.translateBy=function($,S,P,V){w.transform($,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),s)},null,V)},w.translateTo=function($,S,P,V,L){w.transform($,function(){var D=t.apply(this,arguments),F=this.__zoom,K=V==null?v(D):typeof V=="function"?V.apply(this,arguments):V;return n(Pi.translate(K[0],K[1]).scale(F.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof P=="function"?-P.apply(this,arguments):-P),D,s)},V,L)};function z($,S){return S=Math.max(o[0],Math.min(o[1],S)),S===$.k?$:new At(S,$.x,$.y)}function x($,S,P){var V=S[0]-P[0]*$.k,L=S[1]-P[1]*$.k;return V===$.x&&L===$.y?$:new At($.k,V,L)}function v($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function A($,S,P,V){$.on("start.zoom",function(){C(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(V).end()}).tween("zoom",function(){var L=this,D=arguments,F=C(L,D).event(V),K=t.apply(L,D),oe=P==null?v(K):typeof P=="function"?P.apply(L,D):P,$e=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),ae=L.__zoom,Q=typeof S=="function"?S.apply(L,D):S,J=l(ae.invert(oe).concat($e/ae.k),Q.invert(oe).concat($e/Q.k));return function(ie){if(ie===1)ie=Q;else{var ne=J(ie),ve=$e/ne[2];ie=new At(ve,oe[0]-ne[0]*ve,oe[1]-ne[1]*ve)}F.zoom(null,ie)}})}function C($,S,P){return!P&&$.__zooming||new b($,S)}function b($,S){this.that=$,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply($,S),this.taps=0}b.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,S){return this.mouse&&$!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var S=st(this.that).datum();c.call($,this.that,new sg($,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:c}),S)}};function H($,...S){if(!e.apply(this,arguments))return;var P=C(this,S).event($),V=this.__zoom,L=Math.max(o[0],Math.min(o[1],V.k*Math.pow(2,r.apply(this,arguments)))),D=ft($);if(P.wheel)(P.mouse[0][0]!==D[0]||P.mouse[0][1]!==D[1])&&(P.mouse[1]=V.invert(P.mouse[0]=D)),clearTimeout(P.wheel);else{if(V.k===L)return;P.mouse=[D,V.invert(D)],Lr(this),P.start()}Fn($),P.wheel=setTimeout(F,y),P.zoom("mouse",n(x(z(V,L),P.mouse[0],P.mouse[1]),P.extent,s));function F(){P.wheel=null,P.end()}}function W($,...S){if(f||!e.apply(this,arguments))return;var P=$.currentTarget,V=C(this,S,!0).event($),L=st($.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",$e,!0),D=ft($,P),F=$.clientX,K=$.clientY;tl($.view),Xi($),V.mouse=[D,this.__zoom.invert(D)],Lr(this),V.start();function oe(ae){if(Fn(ae),!V.moved){var Q=ae.clientX-F,J=ae.clientY-K;V.moved=Q*Q+J*J>m}V.event(ae).zoom("mouse",n(x(V.that.__zoom,V.mouse[0]=ft(ae,P),V.mouse[1]),V.extent,s))}function $e(ae){L.on("mousemove.zoom mouseup.zoom",null),nl(ae.view,V.moved),Fn(ae),V.event(ae).end()}}function q($,...S){if(e.apply(this,arguments)){var P=this.__zoom,V=ft($.changedTouches?$.changedTouches[0]:$,this),L=P.invert(V),D=P.k*($.shiftKey?.5:2),F=n(x(z(P,D),V,L),t.apply(this,S),s);Fn($),a>0?st(this).transition().duration(a).call(A,F,V,$):st(this).call(w.transform,F,V,$)}}function k($,...S){if(e.apply(this,arguments)){var P=$.touches,V=P.length,L=C(this,S,$.changedTouches.length===V).event($),D,F,K,oe;for(Xi($),F=0;F<V;++F)K=P[F],oe=ft(K,this),oe=[oe,this.__zoom.invert(oe),K.identifier],L.touch0?!L.touch1&&L.touch0[2]!==oe[2]&&(L.touch1=oe,L.taps=0):(L.touch0=oe,D=!0,L.taps=1+!!d);d&&(d=clearTimeout(d)),D&&(L.taps<2&&(h=oe[0],d=setTimeout(function(){d=null},g)),Lr(this),L.start())}}function N($,...S){if(this.__zooming){var P=C(this,S).event($),V=$.changedTouches,L=V.length,D,F,K,oe;for(Fn($),D=0;D<L;++D)F=V[D],K=ft(F,this),P.touch0&&P.touch0[2]===F.identifier?P.touch0[0]=K:P.touch1&&P.touch1[2]===F.identifier&&(P.touch1[0]=K);if(F=P.that.__zoom,P.touch1){var $e=P.touch0[0],ae=P.touch0[1],Q=P.touch1[0],J=P.touch1[1],ie=(ie=Q[0]-$e[0])*ie+(ie=Q[1]-$e[1])*ie,ne=(ne=J[0]-ae[0])*ne+(ne=J[1]-ae[1])*ne;F=z(F,Math.sqrt(ie/ne)),K=[($e[0]+Q[0])/2,($e[1]+Q[1])/2],oe=[(ae[0]+J[0])/2,(ae[1]+J[1])/2]}else if(P.touch0)K=P.touch0[0],oe=P.touch0[1];else return;P.zoom("touch",n(x(F,K,oe),P.extent,s))}}function M($,...S){if(this.__zooming){var P=C(this,S).event($),V=$.changedTouches,L=V.length,D,F;for(Xi($),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),D=0;D<L;++D)F=V[D],P.touch0&&P.touch0[2]===F.identifier?delete P.touch0:P.touch1&&P.touch1[2]===F.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(F=ft(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<p)){var K=st(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return w.wheelDelta=function($){return arguments.length?(r=typeof $=="function"?$:Mr(+$),w):r},w.filter=function($){return arguments.length?(e=typeof $=="function"?$:Mr(!!$),w):e},w.touchable=function($){return arguments.length?(i=typeof $=="function"?$:Mr(!!$),w):i},w.extent=function($){return arguments.length?(t=typeof $=="function"?$:Mr([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),w):t},w.scaleExtent=function($){return arguments.length?(o[0]=+$[0],o[1]=+$[1],w):[o[0],o[1]]},w.translateExtent=function($){return arguments.length?(s[0][0]=+$[0][0],s[1][0]=+$[1][0],s[0][1]=+$[0][1],s[1][1]=+$[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function($){return arguments.length?(n=$,w):n},w.duration=function($){return arguments.length?(a=+$,w):a},w.interpolate=function($){return arguments.length?(l=$,w):l},w.on=function(){var $=c.on.apply(c,arguments);return $===c?w:$},w.clickDistance=function($){return arguments.length?(m=($=+$)*$,w):Math.sqrt(m)},w.tapDistance=function($){return arguments.length?(p=+$,w):p},w}const sr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ho=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],pl=["Enter"," ","Escape"];var Nn;(function(e){e.Strict="strict",e.Loose="loose"})(Nn||(Nn={}));var Qt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Qt||(Qt={}));var ri;(function(e){e.Partial="partial",e.Full="full"})(ri||(ri={}));const go={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Kt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kt||(Kt={}));var ar;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ar||(ar={}));var ke;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ke||(ke={}));const Cs={[ke.Left]:ke.Right,[ke.Right]:ke.Left,[ke.Top]:ke.Bottom,[ke.Bottom]:ke.Top};function fg(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Ns(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function hg(e){return e===null?null:e?"valid":"invalid"}const wl=e=>"id"in e&&"source"in e&&"target"in e,gg=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Oo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),br=(e,t=[0,0])=>{const{width:n,height:r}=tn(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},$g=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Oo(i)?i:t.nodeLookup.get(i.id));const a=s?ii(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ci(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ni(n)},_r=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=ii(r);n=Ci(n,i)}}),Ni(n)},bl=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...xr(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const c of e.values()){const{measured:d,selectable:h=!0,hidden:f=!1}=c;if(s&&!h||f)continue;const g=d.width??c.width??c.initialWidth??null,y=d.height??c.height??c.initialHeight??null,m=lr(a,An(c)),p=(g??0)*(y??0),w=o&&m>0;(!c.internals.handleBounds||w||m>=p||c.dragging)&&l.push(c)}return l},vg=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function yg(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function mg({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=yg(e,s),l=_r(a),c=Do(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function _l({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let h=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",sr.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(h=[[l,c],[l+g,c+y]])}else a&&In(s.extent)&&(h=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const f=In(h)?cn(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",sr.error015())),{position:{x:f.x-l+(s.measured.width??0)*d[0],y:f.y-c+(s.measured.height??0)*d[1]},positionAbsolute:f}}async function pg({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),y=!g&&f.parentId&&s.find(m=>m.id===f.parentId);(g||y)&&s.push(f)}const a=new Set(t.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),d=vg(s,l);for(const f of l)a.has(f.id)&&!d.find(y=>y.id===f.id)&&d.push(f);if(!i)return{edges:d,nodes:s};const h=await i({nodes:s,edges:d});return typeof h=="boolean"?h?{edges:d,nodes:s}:{edges:[],nodes:[]}:h}const Mn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),cn=(e={x:0,y:0},t,n)=>({x:Mn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Mn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function xl(e,t,n){const{width:r,height:i}=tn(n),{x:o,y:s}=n.internals.positionAbsolute;return cn(e,[[o,s],[o+r,s+i]],t)}const Ms=(e,t,n)=>e<t?Mn(Math.abs(e-t),1,t)/t:e>n?-Mn(Math.abs(e-n),1,t)/t:0,kl=(e,t,n=15,r=40)=>{const i=Ms(e.x,r,t.width-r)*n,o=Ms(e.y,r,t.height-r)*n;return[i,o]},Ci=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$o=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ni=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),An=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Oo(e)?e.internals.positionAbsolute:br(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},ii=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Oo(e)?e.internals.positionAbsolute:br(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},El=(e,t)=>Ni(Ci($o(e),$o(t))),lr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},As=e=>It(e.width)&&It(e.height)&&It(e.x)&&It(e.y),It=e=>!isNaN(e)&&isFinite(e),wg=(e,t)=>{},Mi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),xr=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Mi(a,s):a},oi=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function gn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function bg(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=gn(e,n),i=gn(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=gn(e.top??e.y??0,n),i=gn(e.bottom??e.y??0,n),o=gn(e.left??e.x??0,t),s=gn(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function _g(e,t,n,r,i,o){const{x:s,y:a}=oi(e,[t,n,r]),{x:l,y:c}=oi({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=i-l,h=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(h)}}const Do=(e,t,n,r,i,o)=>{const s=bg(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),d=Mn(c,r,i),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*d,y=n/2-f*d,m=_g(e,g,y,d,t,n),p={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:g-p.left+p.right,y:y-p.top+p.bottom,zoom:d}},si=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function In(e){return e!==void 0&&e!=="parent"}function tn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Sl(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function xg(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function Un(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=Tt(e),a=xr({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:c}=n?Mi(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const Pl=e=>({width:e.offsetWidth,height:e.offsetHeight}),Cl=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},kg=["INPUT","SELECT","TEXTAREA"];function Nl(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:kg.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Ml=e=>"clientX"in e,Tt=(e,t)=>{var o,s;const n=Ml(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Is=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Pl(s)}})};function Eg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,d=Math.abs(l-e),h=Math.abs(c-t);return[l,c,d,h]}function Ar(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function zs({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ke.Left:return[t-Ar(t-r,o),n];case ke.Right:return[t+Ar(r-t,o),n];case ke.Top:return[t,n-Ar(n-i,o)];case ke.Bottom:return[t,n+Ar(i-n,o)]}}function Al({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:i,targetPosition:o=ke.Top,curvature:s=.25}){const[a,l]=zs({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,d]=zs({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,f,g,y]=Eg({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${r},${i}`,h,f,g,y]}function Il({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function Sg({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function Pg({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Ci(ii(e),ii(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return lr(s,Ni(o))>0}const Cg=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Ng=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Mg=(e,t)=>{if(!e.source||!e.target)return t;let n;return wl(e)?n={...e}:n={...e,id:Cg(e)},Ng(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function zl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Il({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ts={[ke.Left]:{x:-1,y:0},[ke.Right]:{x:1,y:0},[ke.Top]:{x:0,y:-1},[ke.Bottom]:{x:0,y:1}},Ag=({source:e,sourcePosition:t=ke.Bottom,target:n})=>t===ke.Left||t===ke.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Hs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ig({source:e,sourcePosition:t=ke.Bottom,target:n,targetPosition:r=ke.Top,center:i,offset:o}){const s=Ts[t],a=Ts[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},d=Ag({source:l,sourcePosition:t,target:c}),h=d.x!==0?"x":"y",f=d[h];let g=[],y,m;const p={x:0,y:0},w={x:0,y:0},[z,x,v,A]=Il({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){y=i.x??z,m=i.y??x;const b=[{x:y,y:l.y},{x:y,y:c.y}],H=[{x:l.x,y:m},{x:c.x,y:m}];s[h]===f?g=h==="x"?b:H:g=h==="x"?H:b}else{const b=[{x:l.x,y:c.y}],H=[{x:c.x,y:l.y}];if(h==="x"?g=s.x===f?H:b:g=s.y===f?b:H,t===r){const M=Math.abs(e[h]-n[h]);if(M<=o){const $=Math.min(o-1,o-M);s[h]===f?p[h]=(l[h]>e[h]?-1:1)*$:w[h]=(c[h]>n[h]?-1:1)*$}}if(t!==r){const M=h==="x"?"y":"x",$=s[h]===a[M],S=l[M]>c[M],P=l[M]<c[M];(s[h]===1&&(!$&&S||$&&P)||s[h]!==1&&(!$&&P||$&&S))&&(g=h==="x"?b:H)}const W={x:l.x+p.x,y:l.y+p.y},q={x:c.x+w.x,y:c.y+w.y},k=Math.max(Math.abs(W.x-g[0].x),Math.abs(q.x-g[0].x)),N=Math.max(Math.abs(W.y-g[0].y),Math.abs(q.y-g[0].y));k>=N?(y=(W.x+q.x)/2,m=g[0].y):(y=g[0].x,m=(W.y+q.y)/2)}return[[e,{x:l.x+p.x,y:l.y+p.y},...g,{x:c.x+w.x,y:c.y+w.y},n],y,m,v,A]}function zg(e,t,n,r){const i=Math.min(Hs(e,t)/2,Hs(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*d}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Ro({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:i,targetPosition:o=ke.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[d,h,f,g,y]=Ig({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:c});return[d.reduce((p,w,z)=>{let x="";return z>0&&z<d.length-1?x=zg(d[z-1],w,d[z+1],s):x=`${z===0?"M":"L"}${w.x} ${w.y}`,p+=x,p},""),h,f,g,y]}function Os(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Tg(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Os(t)||!Os(n))return null;const r=t.internals.handleBounds||Ds(t.handles),i=n.internals.handleBounds||Ds(n.handles),o=Rs((r==null?void 0:r.source)??[],e.sourceHandle),s=Rs(e.connectionMode===Nn.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",sr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ke.Bottom,l=(s==null?void 0:s.position)||ke.Top,c=cr(t,o,a),d=cr(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}function Ds(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function cr(e,t,n=ke.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??tn(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case ke.Top:return{x:i+s/2,y:o};case ke.Right:return{x:i+s,y:o+a/2};case ke.Bottom:return{x:i+s/2,y:o+a};case ke.Left:return{x:i,y:o+a/2}}}function Rs(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function vo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Hg(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=vo(l,t);o.has(c)||(s.push({id:c,color:l.color||n,...l}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Lo={nodeOrigin:[0,0],nodeExtent:ho,elevateNodesOnSelect:!0,defaults:{}},Og={...Lo,checkEquality:!0};function Yo(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Dg(e,t,n){const r=Yo(Lo,n);for(const i of e.values())if(i.parentId)Vo(i,e,t,r);else{const o=br(i,r.nodeOrigin),s=In(i.extent)?i.extent:r.nodeExtent,a=cn(o,s,tn(i));i.internals.positionAbsolute=a}}function Rg(e,t,n,r){var l,c;const i=Yo(Og,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){let h=s.get(d.id);if(i.checkEquality&&d===(h==null?void 0:h.internals.userNode))t.set(d.id,h);else{const f=br(d,i.nodeOrigin),g=In(d.extent)?d.extent:i.nodeExtent,y=cn(f,g,tn(d));h={...i.defaults,...d,measured:{width:(l=d.measured)==null?void 0:l.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:d.measured?h==null?void 0:h.internals.handleBounds:void 0,z:Tl(d,a),userNode:d}},t.set(d.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(o=!1),d.parentId&&Vo(h,t,n,r)}return o}function Lg(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Vo(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=Yo(Lo,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Lg(e,n);const c=i?1e3:0,{x:d,y:h,z:f}=Yg(e,l,o,s,c),{positionAbsolute:g}=e.internals,y=d!==g.x||h!==g.y;(y||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:d,y:h}:g,z:f}})}function Tl(e,t){return(It(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Yg(e,t,n,r,i){const{x:o,y:s}=t.internals.positionAbsolute,a=tn(e),l=br(e,n),c=In(e.extent)?cn(l,e.extent,a):l;let d=cn({x:o+c.x,y:s+c.y},r,a);e.extent==="parent"&&(d=xl(d,a,t));const h=Tl(e,i),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>h?f:h}}function Vg(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??An(l),d=El(c,a.rect);o.set(a.parentId,{expandedRect:d,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},c)=>{var x;const d=l.internals.positionAbsolute,h=tn(l),f=l.origin??r,g=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,y=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,m=Math.max(h.width,Math.round(a.width)),p=Math.max(h.height,Math.round(a.height)),w=(m-h.width)*f[0],z=(p-h.height)*f[1];(g>0||y>0||w||z)&&(i.push({id:c,type:"position",position:{x:l.position.x-g+w,y:l.position.y-y+z}}),(x=n.get(c))==null||x.forEach(v=>{e.some(A=>A.id===v.id)||i.push({id:v.id,type:"position",position:{x:v.position.x+g,y:v.position.y+y}})})),(h.width<a.width||h.height<a.height||g||y)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:m+(g?f[0]*g-w:0),height:p+(y?f[1]*y-z:0)}})}),i}function Xg(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const y=Pl(f.nodeElement),m=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(m||!g.internals.handleBounds||f.force))){const w=f.nodeElement.getBoundingClientRect(),z=In(g.extent)?g.extent:o;let{positionAbsolute:x}=g.internals;g.parentId&&g.extent==="parent"?x=xl(x,y,t.get(g.parentId)):z&&(x=cn(x,z,y));const v={...g,measured:y,internals:{...g.internals,positionAbsolute:x,handleBounds:{source:Is("source",f.nodeElement,w,d,g.id),target:Is("target",f.nodeElement,w,d,g.id)}}};t.set(g.id,v),g.parentId&&Vo(v,t,n,{nodeOrigin:i}),a=!0,m&&(l.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:An(v,i)}))}}if(h.length>0){const f=Vg(h,t,n,i);l.push(...f)}return{changes:l,updatedInternals:a}}async function Wg({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Ls(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function Fg(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},c=`${i}-${s}--${o}-${a}`,d=`${o}-${a}--${i}-${s}`;Ls("source",l,d,e,i,s),Ls("target",l,c,e,o,a),t.set(r.id,r)}}function Hl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Hl(n,t):!1}function Ys(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Bg(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Hl(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Wi({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[c,d]of t){const h=(s=n.get(c))==null?void 0:s.internals.userNode;h&&i.push({...h,position:d.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function Kg({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},d=null,h=!1,f=null,g=!1;function y({noDragClassName:p,handleSelector:w,domNode:z,isSelectable:x,nodeId:v,nodeClickDistance:A=0}){f=st(z);function C({x:q,y:k},N){const{nodeLookup:M,nodeExtent:$,snapGrid:S,snapToGrid:P,nodeOrigin:V,onNodeDrag:L,onSelectionDrag:D,onError:F,updateNodePositions:K}=t();o={x:q,y:k};let oe=!1,$e={x:0,y:0,x2:0,y2:0};if(a.size>1&&$){const ae=_r(a);$e=$o(ae)}for(const[ae,Q]of a){if(!M.has(ae))continue;let J={x:q-Q.distance.x,y:k-Q.distance.y};P&&(J=Mi(J,S));let ie=[[$[0][0],$[0][1]],[$[1][0],$[1][1]]];if(a.size>1&&$&&!Q.extent){const{positionAbsolute:fe}=Q.internals,se=fe.x-$e.x+$[0][0],T=fe.x+Q.measured.width-$e.x2+$[1][0],O=fe.y-$e.y+$[0][1],R=fe.y+Q.measured.height-$e.y2+$[1][1];ie=[[se,O],[T,R]]}const{position:ne,positionAbsolute:ve}=_l({nodeId:ae,nextPosition:J,nodeLookup:M,nodeExtent:ie,nodeOrigin:V,onError:F});oe=oe||Q.position.x!==ne.x||Q.position.y!==ne.y,Q.position=ne,Q.internals.positionAbsolute=ve}if(oe&&(K(a,!0),N&&(r||L||!v&&D))){const[ae,Q]=Wi({nodeId:v,dragItems:a,nodeLookup:M});r==null||r(N,a,ae,Q),L==null||L(N,ae,Q),v||D==null||D(N,Q)}}async function b(){if(!d)return;const{transform:q,panBy:k,autoPanSpeed:N,autoPanOnNodeDrag:M}=t();if(!M){l=!1,cancelAnimationFrame(s);return}const[$,S]=kl(c,d,N);($!==0||S!==0)&&(o.x=(o.x??0)-$/q[2],o.y=(o.y??0)-S/q[2],await k({x:$,y:S})&&C(o,null)),s=requestAnimationFrame(b)}function H(q){var oe;const{nodeLookup:k,multiSelectionActive:N,nodesDraggable:M,transform:$,snapGrid:S,snapToGrid:P,selectNodesOnDrag:V,onNodeDragStart:L,onSelectionDragStart:D,unselectNodesAndEdges:F}=t();h=!0,(!V||!x)&&!N&&v&&((oe=k.get(v))!=null&&oe.selected||F()),x&&V&&v&&(e==null||e(v));const K=Un(q.sourceEvent,{transform:$,snapGrid:S,snapToGrid:P,containerBounds:d});if(o=K,a=Bg(k,M,K,v),a.size>0&&(n||L||!v&&D)){const[$e,ae]=Wi({nodeId:v,dragItems:a,nodeLookup:k});n==null||n(q.sourceEvent,a,$e,ae),L==null||L(q.sourceEvent,$e,ae),v||D==null||D(q.sourceEvent,ae)}}const W=rl().clickDistance(A).on("start",q=>{const{domNode:k,nodeDragThreshold:N,transform:M,snapGrid:$,snapToGrid:S}=t();d=(k==null?void 0:k.getBoundingClientRect())||null,g=!1,N===0&&H(q),o=Un(q.sourceEvent,{transform:M,snapGrid:$,snapToGrid:S,containerBounds:d}),c=Tt(q.sourceEvent,d)}).on("drag",q=>{const{autoPanOnNodeDrag:k,transform:N,snapGrid:M,snapToGrid:$,nodeDragThreshold:S,nodeLookup:P}=t(),V=Un(q.sourceEvent,{transform:N,snapGrid:M,snapToGrid:$,containerBounds:d});if((q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||v&&!P.has(v))&&(g=!0),!g){if(!l&&k&&h&&(l=!0,b()),!h){const L=V.xSnapped-(o.x??0),D=V.ySnapped-(o.y??0);Math.sqrt(L*L+D*D)>S&&H(q)}(o.x!==V.xSnapped||o.y!==V.ySnapped)&&a&&h&&(c=Tt(q.sourceEvent,d),C(V,q.sourceEvent))}}).on("end",q=>{if(!(!h||g)&&(l=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:k,updateNodePositions:N,onNodeDragStop:M,onSelectionDragStop:$}=t();if(N(a,!1),i||M||!v&&$){const[S,P]=Wi({nodeId:v,dragItems:a,nodeLookup:k,dragging:!1});i==null||i(q.sourceEvent,a,S,P),M==null||M(q.sourceEvent,S,P),v||$==null||$(q.sourceEvent,P)}}}).filter(q=>{const k=q.target;return!q.button&&(!p||!Ys(k,`.${p}`,z))&&(!w||Ys(k,w,z))});f.call(W)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function qg(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())lr(i,An(o))>0&&r.push(o);return r}const Zg=250;function Gg(e,t,n,r){var a,l;let i=[],o=1/0;const s=qg(e,n,t+Zg);for(const c of s){const d=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const h of d){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:f,y:g}=cr(c,h,h.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(i=[{...h,x:f,y:g}],o=y):y===o&&i.push({...h,x:f,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(d=>d.type===c)??i[0]}return i[0]}function Ol(e,t,n,r,i,o=!1){var c,d,h;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...cr(s,l,l.position,!0)}:l}function Dl(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ug(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Rl=()=>!0;function Qg(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:h,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:m,onConnectEnd:p,isValidConnection:w=Rl,onReconnectEnd:z,updateConnection:x,getTransform:v,getFromHandle:A,autoPanSpeed:C}){const b=Cl(e.target);let H=0,W;const{x:q,y:k}=Tt(e),N=b==null?void 0:b.elementFromPoint(q,k),M=Dl(o,N),$=a==null?void 0:a.getBoundingClientRect();if(!$||!M)return;const S=Ol(i,M,r,l,t);if(!S)return;let P=Tt(e,$),V=!1,L=null,D=!1,F=null;function K(){if(!d||!$)return;const[ve,fe]=kl(P,$,C);f({x:ve,y:fe}),H=requestAnimationFrame(K)}const oe={...S,nodeId:i,type:M,position:S.position},$e=l.get(i),Q={inProgress:!0,isValid:null,from:cr($e,oe,ke.Left,!0),fromHandle:oe,fromPosition:oe.position,fromNode:$e,to:P,toHandle:null,toPosition:Cs[oe.position],toNode:null};x(Q);let J=Q;y==null||y(e,{nodeId:i,handleId:r,handleType:M});function ie(ve){if(!A()||!oe){ne(ve);return}const fe=v();P=Tt(ve,$),W=Gg(xr(P,fe,!1,[1,1]),n,l,oe),V||(K(),V=!0);const se=Ll(ve,{handle:W,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:w,doc:b,lib:c,flowId:h,nodeLookup:l});F=se.handleDomNode,L=se.connection,D=Ug(!!W,se.isValid);const T={...J,isValid:D,to:W&&D?oi({x:W.x,y:W.y},fe):P,toHandle:se.toHandle,toPosition:D&&se.toHandle?se.toHandle.position:Cs[oe.position],toNode:se.toHandle?l.get(se.toHandle.nodeId):null};D&&W&&J.toHandle&&T.toHandle&&J.toHandle.type===T.toHandle.type&&J.toHandle.nodeId===T.toHandle.nodeId&&J.toHandle.id===T.toHandle.id&&J.to.x===T.to.x&&J.to.y===T.to.y||(x(T),J=T)}function ne(ve){(W||F)&&L&&D&&(m==null||m(L));const{inProgress:fe,...se}=J,T={...se,toPosition:J.toHandle?J.toPosition:null};p==null||p(ve,T),o&&(z==null||z(ve,T)),g(),cancelAnimationFrame(H),V=!1,D=!1,L=null,F=null,b.removeEventListener("mousemove",ie),b.removeEventListener("mouseup",ne),b.removeEventListener("touchmove",ie),b.removeEventListener("touchend",ne)}b.addEventListener("mousemove",ie),b.addEventListener("mouseup",ne),b.addEventListener("touchmove",ie),b.addEventListener("touchend",ne)}function Ll(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:c=Rl,nodeLookup:d}){const h=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=Tt(e),m=s.elementFromPoint(g,y),p=m!=null&&m.classList.contains(`${a}-flow__handle`)?m:f,w={handleDomNode:p,isValid:!1,connection:null,toHandle:null};if(p){const z=Dl(void 0,p),x=p.getAttribute("data-nodeid"),v=p.getAttribute("data-handleid"),A=p.classList.contains("connectable"),C=p.classList.contains("connectableend");if(!x||!z)return w;const b={source:h?x:r,sourceHandle:h?v:i,target:h?r:x,targetHandle:h?i:v};w.connection=b;const W=A&&C&&(n===Nn.Strict?h&&z==="source"||!h&&z==="target":x!==r||v!==i);w.isValid=W&&c(b),w.toHandle=Ol(x,z,v,d,n,!1)}return w}const Vs={onPointerDown:Qg,isValid:Ll};function Jg({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=st(e);function o({translateExtent:a,width:l,height:c,zoomStep:d=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const y=x=>{const v=n();if(x.sourceEvent.type!=="wheel"||!t)return;const A=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*d,C=v[2]*Math.pow(2,A);t.scaleTo(C)};let m=[0,0];const p=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(m=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},w=x=>{const v=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const A=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],C=[A[0]-m[0],A[1]-m[1]];m=A;const b=r()*Math.max(v[2],Math.log(v[2]))*(g?-1:1),H={x:v[0]-C[0]*b,y:v[1]-C[1]*b},W=[[0,0],[l,c]];t.setViewportConstrained({x:H.x,y:H.y,zoom:v[2]},W,a)},z=ml().on("start",p).on("zoom",h?w:null).on("zoom.wheel",f?y:null);i.call(z,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:ft}}const jg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ai=e=>({x:e.x,y:e.y,zoom:e.k}),Fi=({x:e,y:t,zoom:n})=>Pi.translate(e,t).scale(n),yn=(e,t)=>e.target.closest(`.${t}`),Yl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Bi=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Vl=e=>{const t=e.ctrlKey&&si()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function e$({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(yn(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(d.ctrlKey&&s){const p=ft(d),w=Vl(d),z=h*Math.pow(2,w);r.scaleTo(n,z,p,d);return}const f=d.deltaMode===1?20:1;let g=i===Qt.Vertical?0:d.deltaX*f,y=i===Qt.Horizontal?0:d.deltaY*f;!si()&&d.shiftKey&&i!==Qt.Vertical&&(g=d.deltaY*f,y=0),r.translateBy(n,-(g/h)*o,-(y/h)*o,{internal:!0});const m=Ai(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,m)),e.isPanScrolling&&(l==null||l(d,m),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,m),e.isPanScrolling=!1},150))}}function t$({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=yn(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function n$({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=Ai(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function r$({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&Yl(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,Ai(o.transform)))}}function i$({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&Yl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&jg(e.prevViewport,s.transform))){const l=Ai(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function o$({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return d=>{var y;const h=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(yn(d,`${c}-flow__node`)||yn(d,`${c}-flow__edge`)))return!0;if(!r&&!h&&!i&&!o&&!n||s||yn(d,a)&&d.type==="wheel"||yn(d,l)&&(d.type!=="wheel"||i&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!h&&!i&&!f&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&g}}function s$({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=ml().clickDistance(!It(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),g=st(e).call(f);x({x:o.x,y:o.y,zoom:Mn(o.zoom,t,n)},[[0,0],[h.width,h.height]],i);const y=g.on("wheel.zoom"),m=g.on("dblclick.zoom");f.wheelDelta(Vl);function p(N,M){return g?new Promise($=>{f==null||f.transform(Bi(g,M==null?void 0:M.duration,()=>$(!0)),N)}):Promise.resolve(!1)}function w({noWheelClassName:N,noPanClassName:M,onPaneContextMenu:$,userSelectionActive:S,panOnScroll:P,panOnDrag:V,panOnScrollMode:L,panOnScrollSpeed:D,preventScrolling:F,zoomOnPinch:K,zoomOnScroll:oe,zoomOnDoubleClick:$e,zoomActivationKeyPressed:ae,lib:Q,onTransformChange:J}){S&&!d.isZoomingOrPanning&&z();const ne=P&&!ae&&!S?e$({zoomPanValues:d,noWheelClassName:N,d3Selection:g,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:D,zoomOnPinch:K,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):t$({noWheelClassName:N,preventScrolling:F,d3ZoomHandler:y});if(g.on("wheel.zoom",ne,{passive:!1}),!S){const fe=n$({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:a});f.on("start",fe);const se=r$({zoomPanValues:d,panOnDrag:V,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:J});f.on("zoom",se);const T=i$({zoomPanValues:d,panOnDrag:V,panOnScroll:P,onPaneContextMenu:$,onPanZoomEnd:l,onDraggingChange:c});f.on("end",T)}const ve=o$({zoomActivationKeyPressed:ae,panOnDrag:V,zoomOnScroll:oe,panOnScroll:P,zoomOnDoubleClick:$e,zoomOnPinch:K,userSelectionActive:S,noPanClassName:M,noWheelClassName:N,lib:Q});f.filter(ve),$e?g.on("dblclick.zoom",m):g.on("dblclick.zoom",null)}function z(){f.on("zoom",null)}async function x(N,M,$){const S=Fi(N),P=f==null?void 0:f.constrain()(S,M,$);return P&&await p(P),new Promise(V=>V(P))}async function v(N,M){const $=Fi(N);return await p($,M),new Promise(S=>S($))}function A(N){if(g){const M=Fi(N),$=g.property("__zoom");($.k!==N.zoom||$.x!==N.x||$.y!==N.y)&&(f==null||f.transform(g,M,null,{sync:!0}))}}function C(){const N=g?yl(g.node()):{x:0,y:0,k:1};return{x:N.x,y:N.y,zoom:N.k}}function b(N,M){return g?new Promise($=>{f==null||f.scaleTo(Bi(g,M==null?void 0:M.duration,()=>$(!0)),N)}):Promise.resolve(!1)}function H(N,M){return g?new Promise($=>{f==null||f.scaleBy(Bi(g,M==null?void 0:M.duration,()=>$(!0)),N)}):Promise.resolve(!1)}function W(N){f==null||f.scaleExtent(N)}function q(N){f==null||f.translateExtent(N)}function k(N){const M=!It(N)||N<0?0:N;f==null||f.clickDistance(M)}return{update:w,destroy:z,setViewport:v,setViewportConstrained:x,getViewport:C,scaleTo:b,scaleBy:H,setScaleExtent:W,setTranslateExtent:q,syncViewport:A,setClickDistance:k}}var mn;(function(e){e.Line="line",e.Handle="handle"})(mn||(mn={}));function a$({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function l$(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Vt(e,t){return Math.max(0,t-e)}function Xt(e,t){return Math.max(0,e-t)}function Ir(e,t,n){return Math.max(0,t-e,e-n)}function Xs(e,t){return e?!t:t}function c$(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:h}=t,f=d&&h,{xSnapped:g,ySnapped:y}=n,{minWidth:m,maxWidth:p,minHeight:w,maxHeight:z}=r,{x,y:v,width:A,height:C,aspectRatio:b}=e;let H=Math.floor(d?g-e.pointerX:0),W=Math.floor(h?y-e.pointerY:0);const q=A+(l?-H:H),k=C+(c?-W:W),N=-o[0]*A,M=-o[1]*C;let $=Ir(q,m,p),S=Ir(k,w,z);if(s){let L=0,D=0;l&&H<0?L=Vt(x+H+N,s[0][0]):!l&&H>0&&(L=Xt(x+q+N,s[1][0])),c&&W<0?D=Vt(v+W+M,s[0][1]):!c&&W>0&&(D=Xt(v+k+M,s[1][1])),$=Math.max($,L),S=Math.max(S,D)}if(a){let L=0,D=0;l&&H>0?L=Xt(x+H,a[0][0]):!l&&H<0&&(L=Vt(x+q,a[1][0])),c&&W>0?D=Xt(v+W,a[0][1]):!c&&W<0&&(D=Vt(v+k,a[1][1])),$=Math.max($,L),S=Math.max(S,D)}if(i){if(d){const L=Ir(q/b,w,z)*b;if($=Math.max($,L),s){let D=0;!l&&!c||l&&!c&&f?D=Xt(v+M+q/b,s[1][1])*b:D=Vt(v+M+(l?H:-H)/b,s[0][1])*b,$=Math.max($,D)}if(a){let D=0;!l&&!c||l&&!c&&f?D=Vt(v+q/b,a[1][1])*b:D=Xt(v+(l?H:-H)/b,a[0][1])*b,$=Math.max($,D)}}if(h){const L=Ir(k*b,m,p)/b;if(S=Math.max(S,L),s){let D=0;!l&&!c||c&&!l&&f?D=Xt(x+k*b+N,s[1][0])/b:D=Vt(x+(c?W:-W)*b+N,s[0][0])/b,S=Math.max(S,D)}if(a){let D=0;!l&&!c||c&&!l&&f?D=Vt(x+k*b,a[1][0])/b:D=Xt(x+(c?W:-W)*b,a[0][0])/b,S=Math.max(S,D)}}}W=W+(W<0?S:-S),H=H+(H<0?$:-$),i&&(f?q>k*b?W=(Xs(l,c)?-H:H)/b:H=(Xs(l,c)?-W:W)*b:d?(W=H/b,c=l):(H=W*b,l=c));const P=l?x+H:x,V=c?v+W:v;return{width:A+(l?-H:H),height:C+(c?-W:W),x:o[0]*H*(l?-1:1)+P,y:o[1]*W*(c?-1:1)+V}}const Xl={width:0,height:0,x:0,y:0},u$={...Xl,pointerX:0,pointerY:0,aspectRatio:1};function d$(e){return[[0,0],[e.measured.width,e.measured.height]]}function f$(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function h$({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=st(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:d,resizeDirection:h,onResizeStart:f,onResize:g,onResizeEnd:y,shouldResize:m}){let p={...Xl},w={...u$};const z=l$(l);let x,v=null,A=[],C,b,H;const W=rl().on("start",q=>{const{nodeLookup:k,transform:N,snapGrid:M,snapToGrid:$,nodeOrigin:S,paneDomNode:P}=n();if(x=k.get(t),!x)return;v=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:V,ySnapped:L}=Un(q.sourceEvent,{transform:N,snapGrid:M,snapToGrid:$,containerBounds:v});p={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},w={...p,pointerX:V,pointerY:L,aspectRatio:p.width/p.height},C=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(C=k.get(x.parentId),b=C&&x.extent==="parent"?d$(C):void 0),A=[],H=void 0;for(const[D,F]of k)if(F.parentId===t&&(A.push({id:D,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const K=f$(F,x,F.origin??S);H?H=[[Math.min(K[0][0],H[0][0]),Math.min(K[0][1],H[0][1])],[Math.max(K[1][0],H[1][0]),Math.max(K[1][1],H[1][1])]]:H=K}f==null||f(q,{...p})}).on("drag",q=>{const{transform:k,snapGrid:N,snapToGrid:M,nodeOrigin:$}=n(),S=Un(q.sourceEvent,{transform:k,snapGrid:N,snapToGrid:M,containerBounds:v}),P=[];if(!x)return;const{x:V,y:L,width:D,height:F}=p,K={},oe=x.origin??$,{width:$e,height:ae,x:Q,y:J}=c$(w,z,S,c,d,oe,b,H),ie=$e!==D,ne=ae!==F,ve=Q!==V&&ie,fe=J!==L&&ne;if(!ve&&!fe&&!ie&&!ne)return;if((ve||fe||oe[0]===1||oe[1]===1)&&(K.x=ve?Q:p.x,K.y=fe?J:p.y,p.x=K.x,p.y=K.y,A.length>0)){const R=Q-V,X=J-L;for(const Y of A)Y.position={x:Y.position.x-R+oe[0]*($e-D),y:Y.position.y-X+oe[1]*(ae-F)},P.push(Y)}if((ie||ne)&&(K.width=ie&&(!h||h==="horizontal")?$e:p.width,K.height=ne&&(!h||h==="vertical")?ae:p.height,p.width=K.width,p.height=K.height),C&&x.expandParent){const R=oe[0]*(K.width??0);K.x&&K.x<R&&(p.x=R,w.x=w.x-(K.x-R));const X=oe[1]*(K.height??0);K.y&&K.y<X&&(p.y=X,w.y=w.y-(K.y-X))}const se=a$({width:p.width,prevWidth:D,height:p.height,prevHeight:F,affectsX:z.affectsX,affectsY:z.affectsY}),T={...p,direction:se};(m==null?void 0:m(q,T))!==!1&&(g==null||g(q,T),r(K,P))}).on("end",q=>{y==null||y(q,{...p}),i==null||i({...p})});o.call(W)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var g$=Te("<div><!></div>");function zn(e,t){Me(t,!0);let n=te(t,"id",3,null),r=te(t,"type",3,"source"),i=te(t,"position",19,()=>ke.Top),o=te(t,"isConnectableStart",3,!0),s=te(t,"isConnectableEnd",3,!0),a=Yt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=xn("svelteflow__node_id"),c=xn("svelteflow__node_connectable");let d=_(()=>r()==="target"),h=_(()=>t.isConnectable!==void 0?t.isConnectable:c.value),f=Ct(),g=null;Eo(()=>{if(t.onconnect||t.ondisconnect){f.edges;let k=f.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(g&&!fg(k,g)){const N=k??new Map;Ns(g,N,t.ondisconnect),Ns(N,g,t.onconnect)}g=new Map(k)}});let y=_(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:k,toHandle:N,isValid:M}=f.connection,$=k&&k.nodeId===l&&k.type===r()&&k.id===n(),S=N&&N.nodeId===l&&N.type===r()&&N.id===n(),P=f.connectionMode===Nn.Strict?(k==null?void 0:k.type)!==r():l!==(k==null?void 0:k.nodeId)||n()!==(k==null?void 0:k.id);return[!0,$,S,P,S&&M]}),m=_(()=>{let[k,N,M,$,S]=u(y);return k}),p=_(()=>{let[k,N,M,$,S]=u(y);return N}),w=_(()=>{let[k,N,M,$,S]=u(y);return M}),z=_(()=>{let[k,N,M,$,S]=u(y);return $}),x=_(()=>{let[k,N,M,$,S]=u(y);return S});function v(k){var M,$;const N=((M=f.onbeforeconnect)==null?void 0:M.call(f,k))??k;N&&(f.addEdge(N),($=f.onconnect)==null||$.call(f,k))}function A(k){const N=Ml(k);(N&&k.button===0||!N)&&Vs.onPointerDown(k,{handleId:n(),nodeId:l,isTarget:u(d),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:v,onConnectStart:(M,$)=>{var S;(S=f.onconnectstart)==null||S.call(f,M,{nodeId:$.nodeId,handleId:$.handleId,handleType:$.handleType})},onConnectEnd:(M,$)=>{var S;(S=f.onconnectend)==null||S.call(f,M,$)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle})}function C(k){var K,oe;if(!l||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){(K=f.onclickconnectstart)==null||K.call(f,k,{nodeId:l,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const N=Cl(k.target),M=t.isValidConnection??f.isValidConnection,{connectionMode:$,clickConnectStartHandle:S,flowId:P,nodeLookup:V}=f,{connection:L,isValid:D}=Vs.isValid(k,{handle:{nodeId:l,id:n(),type:r()},connectionMode:$,fromNodeId:S.nodeId,fromHandleId:S.id??null,fromType:S.type,isValidConnection:M,flowId:P,doc:N,lib:"svelte",nodeLookup:V});D&&L&&v(L);const F=structuredClone(la(f.connection));delete F.inProgress,F.toPosition=F.toHandle?F.toHandle.position:null,(oe=f.onclickconnectend)==null||oe.call(f,k,F),f.clickConnectStartHandle=null}var b=g$(),H=()=>{};let W;var q=Re(b);rt(q,()=>t.children??Rt),ze(k=>W=fn(b,W,{"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${f.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?C:void 0,onkeypress:H,style:t.style,role:"button",tabindex:"-1",...a,[$n]:k}),[()=>({valid:u(x),connectingto:u(w),connectingfrom:u(p),source:!u(d),target:u(d),connectablestart:o(),connectableend:s(),connectable:u(h),connectionindicator:u(h)&&(!u(m)||u(z))&&(u(m)||f.clickConnectStartHandle?s():o())})]),me(e,b),Ae()}var $$=Te("<!> <!>",1);function Wl(e,t){Me(t,!0);let n=te(t,"targetPosition",19,()=>ke.Top),r=te(t,"sourcePosition",19,()=>ke.Bottom);var i=$$(),o=Oe(i);zn(o,{type:"target",get position(){return n()}});var s=Se(o),a=Se(s);zn(a,{type:"source",get position(){return r()}}),ze(()=>{var l;return en(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),me(e,i),Ae()}var v$=Te(" <!>",1);function y$(e,t){Me(t,!0);let n=te(t,"data",19,()=>({label:"Node"})),r=te(t,"sourcePosition",19,()=>ke.Bottom);var i=v$(),o=Oe(i),s=Se(o);zn(s,{type:"source",get position(){return r()}}),ze(()=>{var a;return en(o,`${((a=n())==null?void 0:a.label)??""} `)}),me(e,i),Ae()}var m$=Te(" <!>",1);function p$(e,t){Me(t,!0);let n=te(t,"data",19,()=>({label:"Node"})),r=te(t,"targetPosition",19,()=>ke.Top);var i=m$(),o=Oe(i),s=Se(o);zn(s,{type:"target",get position(){return r()}}),ze(()=>{var a;return en(o,`${((a=n())==null?void 0:a.label)??""} `)}),me(e,i),Ae()}function w$(e,t){}function Ws(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Ki(e,t){const n=Ct();let r=t;return Ws(e,n.domNode,t),{async update(i){var o;i!==r&&((o=e.parentNode)==null||o.removeChild(e),r=i),Ws(e,n.domNode,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}const Fs=e=>gg(e),b$=e=>wl(e);function Et(e){return e===void 0?void 0:`${e}px`}const ai={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _$=Te("<div><!></div>");function x$(e,t){Me(t,!0);let n=te(t,"x",3,0),r=te(t,"y",3,0),i=te(t,"selectEdgeOnClick",3,!1),o=te(t,"transparent",3,!1),s=Yt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Ct(),l=xn("svelteflow__edge_id");let c=_(()=>{var y;return(y=a.visible.edges.get(l))==null?void 0:y.zIndex});var d=_$(),h=()=>{i()&&l&&a.handleEdgeSelection(l)};let f;var g=Re(d);rt(g,()=>t.children??Rt),Ge(d,(y,m)=>Ki==null?void 0:Ki(y,m),()=>"edge-labels"),ze((y,m)=>f=fn(d,f,{class:["svelte-flow__edge-label",{transparent:o()},t.class],role:"button",tabindex:"-1",onclick:h,...s,[wt]:{cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:y,height:m,"z-index":u(c)}},"svelte-w2n27y"),[()=>Et(t.width),()=>Et(t.height)]),me(e,d),Ae()}var k$=We("<path></path>"),E$=We('<path fill="none"></path><!><!>',1);function Ii(e,t){let n=te(t,"interactionWidth",3,20),r=Yt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=E$(),o=Oe(i),s=Se(o);{var a=d=>{var h=k$();let f;ze(()=>f=fn(h,f,{d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),me(d,h)};Xe(s,d=>{n()>0&&d(a)})}var l=Se(s);{var c=d=>{x$(d,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{var g=Oa();ze(()=>en(g,t.label)),me(h,g)},$$slots:{default:!0}})};Xe(l,d=>{t.label&&d(c)})}ze(()=>{_e(o,"id",t.id),_e(o,"d",t.path),mt(o,0,St(["svelte-flow__edge-path",t.class])),_e(o,"marker-start",t.markerStart),_e(o,"marker-end",t.markerEnd),lt(o,t.style)}),me(e,i)}function Fl(e,t){Me(t,!0);let n=_(()=>{var s;return Al({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(s=t.pathOptions)==null?void 0:s.curvature})}),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ii(e,{get id(){return t.id},get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function S$(e,t){Me(t,!0);let n=_(()=>Ro({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ii(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function P$(e,t){Me(t,!0);let n=_(()=>zl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ii(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function C$(e,t){Me(t,!0);let n=_(()=>Ro({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ii(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function N$(e){U(e,e.v+1)}function M$(e){let t=0,n=En(0),r;return()=>{Wc()&&(u(n),Ln(()=>(t===0&&(r=Je(()=>e(()=>N$(n)))),t+=1,()=>{nu().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}var fr,hr;class A${constructor(t,n){le(this,fr);le(this,hr);Vn(this,fr,t),Vn(this,hr,M$(n))}get current(){return I(this,hr).call(this),I(this,fr).call(this)}}fr=new WeakMap,hr=new WeakMap;const I$=/\(.+\)/;class z$ extends A${constructor(t,n){let r=I$.test(t)?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>no(i,"change",o))}}function T$(e,t,n,r){const i=new Map;return bl(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Bs(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l}=e,c=new Map;for(const d of t){const h=r.get(d.source),f=r.get(d.target);if(!h||!f)continue;if(a){const{visibleNodes:m,transform:p,width:w,height:z}=e;if(Pg({sourceNode:h,targetNode:f,width:w,height:z,transform:p}))m.set(h.id,h),m.set(f.id,f);else continue}const g=i.get(d.id);if(g&&d===g.edge&&h==g.sourceNode&&f==g.targetNode){c.set(d.id,g);continue}const y=Tg({id:d.id,sourceNode:h,targetNode:f,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:o,onError:s});y&&c.set(d.id,{...n,...d,...y,zIndex:Sg({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:l}),sourceNode:h,targetNode:f,edge:d})}return c}const Bl={input:y$,output:p$,default:Wl,group:w$},Kl={straight:P$,smoothstep:S$,default:Fl,step:C$};function H$(e){var n,r,i,o,s,a,l,c,d,h,f,g,y,m,p,w,z,x,v,A,C,b,H,W,q,k,N,M,$,S,P,V,L,D,F,K,oe,$e,ae,Q,J,ie,ne,ve,fe,se,T,O,R,X,Y,j,G,B,Z,re,ee,ce,ue,de,he,be,ge,pe,we,ye,Pe,xe,Ee,Ce,Ie;class t{constructor(){le(this,n,_(()=>e.props.id??"1"));le(this,r,Ne(null));le(this,i,Ne(null));le(this,o,Ne(qe(e.width??0)));le(this,s,Ne(qe(e.height??0)));le(this,a,_(()=>{var Be;const E=Rg(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&E&&((Be=this.fitViewOptions)!=null&&Be.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),E}));le(this,l,_(()=>this.panZoom!==null));le(this,c,_(()=>(Fg(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Fe(this,"_prevSelectedNodes",[]);Fe(this,"_prevSelectedNodeIds",new Set);le(this,d,_(()=>{const E=this._prevSelectedNodeIds.size,Be=new Set,Yn=this.nodes.filter(ut=>(ut.selected&&(Be.add(ut.id),this._prevSelectedNodeIds.delete(ut.id)),ut.selected));return(E!==Be.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Yn),this._prevSelectedNodeIds=Be,this._prevSelectedNodes}));Fe(this,"_prevSelectedEdges",[]);Fe(this,"_prevSelectedEdgeIds",new Set);le(this,h,_(()=>{const E=this._prevSelectedEdgeIds.size,Be=new Set,Yn=this.edges.filter(ut=>(ut.selected&&(Be.add(ut.id),this._prevSelectedEdgeIds.delete(ut.id)),ut.selected));return(E!==Be.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Yn),this._prevSelectedEdgeIds=Be,this._prevSelectedEdges}));Fe(this,"selectionChangeHandlers",new Map);Fe(this,"nodeLookup",new Map);Fe(this,"parentLookup",new Map);Fe(this,"connectionLookup",new Map);Fe(this,"edgeLookup",new Map);Fe(this,"_prevVisibleEdges",new Map);le(this,f,_(()=>{const{nodes:E,_edges:Be,_prevVisibleEdges:Yn,nodeLookup:ut,connectionMode:nc,onerror:rc,onlyRenderVisibleElements:ic,defaultEdgeOptions:oc}=this;let kr,zi;const Fo={edges:Be,defaultEdgeOptions:oc,previousEdges:Yn,nodeLookup:ut,connectionMode:nc,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:rc};if(ic){const{viewport:Ti,width:Bo,height:Ko}=this,qo=[Ti.x,Ti.y,Ti.zoom];kr=T$(ut,qo,Bo,Ko),zi=Bs({...Fo,onlyRenderVisible:!0,visibleNodes:kr,transform:qo,width:Bo,height:Ko})}else kr=this.nodeLookup,zi=Bs(Fo);return{nodes:kr,edges:zi}}));le(this,g,_(()=>e.props.nodesDraggable??!0));le(this,y,_(()=>e.props.nodesConnectable??!0));le(this,m,_(()=>e.props.elementsSelectable??!0));le(this,p,_(()=>e.props.nodesFocusable??!0));le(this,w,_(()=>e.props.edgesFocusable??!0));le(this,z,_(()=>e.props.disableKeyboardA11y??!1));le(this,x,_(()=>e.props.minZoom??.5));le(this,v,_(()=>e.props.maxZoom??2));le(this,A,_(()=>e.props.nodeOrigin??[0,0]));le(this,C,_(()=>e.props.nodeExtent??ho));le(this,b,_(()=>e.props.translateExtent??ho));le(this,H,_(()=>e.props.defaultEdgeOptions??{}));le(this,W,_(()=>e.props.nodeDragThreshold??1));le(this,q,_(()=>e.props.autoPanOnNodeDrag??!0));le(this,k,_(()=>e.props.autoPanOnConnect??!0));Fe(this,"fitViewQueued",e.props.fitView??!1);Fe(this,"fitViewOptions",e.props.fitViewOptions);Fe(this,"fitViewResolver",null);le(this,N,_(()=>e.props.snapGrid??null));le(this,M,Ne(!1));le(this,$,Ne(null));le(this,S,Ne(!1));le(this,P,Ne(!1));le(this,V,Ne(!1));le(this,L,Ne(!1));le(this,D,Ne(!1));le(this,F,Ne(null));le(this,K,Ne(""));le(this,oe,_(()=>e.props.selectionMode??ri.Partial));le(this,$e,_(()=>({...Bl,...e.props.nodeTypes})));le(this,ae,_(()=>({...Kl,...e.props.edgeTypes})));le(this,Q,_(()=>e.props.noPanClass??"nopan"));le(this,J,_(()=>e.props.noDragClass??"nodrag"));le(this,ie,_(()=>e.props.noWheelClass??"nowheel"));le(this,ne,Ne(qe(e.props.initialViewport??{x:0,y:0,zoom:1})));le(this,ve,Ne(qe(go)));le(this,fe,_(()=>this._connection.inProgress?{...this._connection,to:xr(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));le(this,se,_(()=>e.props.connectionMode??Nn.Strict));le(this,T,_(()=>e.props.connectionRadius??20));le(this,O,_(()=>e.props.isValidConnection??(()=>!0)));le(this,R,_(()=>e.props.selectNodesOnDrag??!0));le(this,X,_(()=>e.props.defaultMarkerColor??"#b1b1b7"));le(this,Y,_(()=>Hg(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));le(this,j,_(()=>e.props.onlyRenderVisibleElements??!1));le(this,G,_(()=>e.props.onflowerror??wg));le(this,B,_(()=>e.props.ondelete));le(this,Z,_(()=>e.props.onbeforedelete));le(this,re,_(()=>e.props.onbeforeconnect));le(this,ee,_(()=>e.props.onconnect));le(this,ce,_(()=>e.props.onconnectstart));le(this,ue,_(()=>e.props.onconnectend));le(this,de,_(()=>e.props.onbeforereconnect));le(this,he,_(()=>e.props.onreconnect));le(this,be,_(()=>e.props.onreconnectstart));le(this,ge,_(()=>e.props.onreconnectend));le(this,pe,_(()=>e.props.clickConnect??!0));le(this,we,_(()=>e.props.onclickconnectstart));le(this,ye,_(()=>e.props.onclickconnectend));le(this,Pe,Ne(null));le(this,xe,_(()=>e.props.onselectiondrag));le(this,Ee,_(()=>e.props.onselectiondragstart));le(this,Ce,_(()=>e.props.onselectiondragstop));Fe(this,"resolveFitView",async()=>{var E;this.panZoom&&(await mg({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(E=this.fitViewResolver)==null||E.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Fe(this,"_prefersDark",new z$("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));le(this,Ie,_(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"));if(e.props.fitView&&!e.props.initialViewport&&this.width&&this.height){const E=_r(this.nodeLookup,{filter:Be=>!!((Be.width||Be.initialWidth)&&(Be.height||Be.initialHeight))});this.viewport=Do(E,this.width,this.height,.5,2,.1)}}get flowId(){return u(I(this,n))}set flowId(E){U(I(this,n),E)}get domNode(){return u(I(this,r))}set domNode(E){U(I(this,r),E,!0)}get panZoom(){return u(I(this,i))}set panZoom(E){U(I(this,i),E,!0)}get width(){return u(I(this,o))}set width(E){U(I(this,o),E,!0)}get height(){return u(I(this,s))}set height(E){U(I(this,s),E,!0)}get nodesInitialized(){return u(I(this,a))}set nodesInitialized(E){U(I(this,a),E)}get viewportInitialized(){return u(I(this,l))}set viewportInitialized(E){U(I(this,l),E)}get _edges(){return u(I(this,c))}set _edges(E){U(I(this,c),E)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(E){e.nodes=E}get edges(){return this._edges}set edges(E){e.edges=E}get selectedNodes(){return u(I(this,d))}set selectedNodes(E){U(I(this,d),E)}get selectedEdges(){return u(I(this,h))}set selectedEdges(E){U(I(this,h),E)}get visible(){return u(I(this,f))}set visible(E){U(I(this,f),E)}get nodesDraggable(){return u(I(this,g))}set nodesDraggable(E){U(I(this,g),E)}get nodesConnectable(){return u(I(this,y))}set nodesConnectable(E){U(I(this,y),E)}get elementsSelectable(){return u(I(this,m))}set elementsSelectable(E){U(I(this,m),E)}get nodesFocusable(){return u(I(this,p))}set nodesFocusable(E){U(I(this,p),E)}get edgesFocusable(){return u(I(this,w))}set edgesFocusable(E){U(I(this,w),E)}get disableKeyboardA11y(){return u(I(this,z))}set disableKeyboardA11y(E){U(I(this,z),E)}get minZoom(){return u(I(this,x))}set minZoom(E){U(I(this,x),E)}get maxZoom(){return u(I(this,v))}set maxZoom(E){U(I(this,v),E)}get nodeOrigin(){return u(I(this,A))}set nodeOrigin(E){U(I(this,A),E)}get nodeExtent(){return u(I(this,C))}set nodeExtent(E){U(I(this,C),E)}get translateExtent(){return u(I(this,b))}set translateExtent(E){U(I(this,b),E)}get defaultEdgeOptions(){return u(I(this,H))}set defaultEdgeOptions(E){U(I(this,H),E)}get nodeDragThreshold(){return u(I(this,W))}set nodeDragThreshold(E){U(I(this,W),E)}get autoPanOnNodeDrag(){return u(I(this,q))}set autoPanOnNodeDrag(E){U(I(this,q),E)}get autoPanOnConnect(){return u(I(this,k))}set autoPanOnConnect(E){U(I(this,k),E)}get snapGrid(){return u(I(this,N))}set snapGrid(E){U(I(this,N),E)}get dragging(){return u(I(this,M))}set dragging(E){U(I(this,M),E,!0)}get selectionRect(){return u(I(this,$))}set selectionRect(E){U(I(this,$),E,!0)}get selectionKeyPressed(){return u(I(this,S))}set selectionKeyPressed(E){U(I(this,S),E,!0)}get multiselectionKeyPressed(){return u(I(this,P))}set multiselectionKeyPressed(E){U(I(this,P),E,!0)}get deleteKeyPressed(){return u(I(this,V))}set deleteKeyPressed(E){U(I(this,V),E,!0)}get panActivationKeyPressed(){return u(I(this,L))}set panActivationKeyPressed(E){U(I(this,L),E,!0)}get zoomActivationKeyPressed(){return u(I(this,D))}set zoomActivationKeyPressed(E){U(I(this,D),E,!0)}get selectionRectMode(){return u(I(this,F))}set selectionRectMode(E){U(I(this,F),E,!0)}get ariaLiveMessage(){return u(I(this,K))}set ariaLiveMessage(E){U(I(this,K),E,!0)}get selectionMode(){return u(I(this,oe))}set selectionMode(E){U(I(this,oe),E)}get nodeTypes(){return u(I(this,$e))}set nodeTypes(E){U(I(this,$e),E)}get edgeTypes(){return u(I(this,ae))}set edgeTypes(E){U(I(this,ae),E)}get noPanClass(){return u(I(this,Q))}set noPanClass(E){U(I(this,Q),E)}get noDragClass(){return u(I(this,J))}set noDragClass(E){U(I(this,J),E)}get noWheelClass(){return u(I(this,ie))}set noWheelClass(E){U(I(this,ie),E)}get _viewport(){return u(I(this,ne))}set _viewport(E){U(I(this,ne),E,!0)}get viewport(){return e.viewport??this._viewport}set viewport(E){e.viewport&&(e.viewport=E),this._viewport=E}get _connection(){return u(I(this,ve))}set _connection(E){U(I(this,ve),E,!0)}get connection(){return u(I(this,fe))}set connection(E){U(I(this,fe),E)}get connectionMode(){return u(I(this,se))}set connectionMode(E){U(I(this,se),E)}get connectionRadius(){return u(I(this,T))}set connectionRadius(E){U(I(this,T),E)}get isValidConnection(){return u(I(this,O))}set isValidConnection(E){U(I(this,O),E)}get selectNodesOnDrag(){return u(I(this,R))}set selectNodesOnDrag(E){U(I(this,R),E)}get defaultMarkerColor(){return u(I(this,X))}set defaultMarkerColor(E){U(I(this,X),E)}get markers(){return u(I(this,Y))}set markers(E){U(I(this,Y),E)}get onlyRenderVisibleElements(){return u(I(this,j))}set onlyRenderVisibleElements(E){U(I(this,j),E)}get onerror(){return u(I(this,G))}set onerror(E){U(I(this,G),E)}get ondelete(){return u(I(this,B))}set ondelete(E){U(I(this,B),E)}get onbeforedelete(){return u(I(this,Z))}set onbeforedelete(E){U(I(this,Z),E)}get onbeforeconnect(){return u(I(this,re))}set onbeforeconnect(E){U(I(this,re),E)}get onconnect(){return u(I(this,ee))}set onconnect(E){U(I(this,ee),E)}get onconnectstart(){return u(I(this,ce))}set onconnectstart(E){U(I(this,ce),E)}get onconnectend(){return u(I(this,ue))}set onconnectend(E){U(I(this,ue),E)}get onbeforereconnect(){return u(I(this,de))}set onbeforereconnect(E){U(I(this,de),E)}get onreconnect(){return u(I(this,he))}set onreconnect(E){U(I(this,he),E)}get onreconnectstart(){return u(I(this,be))}set onreconnectstart(E){U(I(this,be),E)}get onreconnectend(){return u(I(this,ge))}set onreconnectend(E){U(I(this,ge),E)}get clickConnect(){return u(I(this,pe))}set clickConnect(E){U(I(this,pe),E)}get onclickconnectstart(){return u(I(this,we))}set onclickconnectstart(E){U(I(this,we),E)}get onclickconnectend(){return u(I(this,ye))}set onclickconnectend(E){U(I(this,ye),E)}get clickConnectStartHandle(){return u(I(this,Pe))}set clickConnectStartHandle(E){U(I(this,Pe),E,!0)}get onselectiondrag(){return u(I(this,xe))}set onselectiondrag(E){U(I(this,xe),E)}get onselectiondragstart(){return u(I(this,Ee))}set onselectiondragstart(E){U(I(this,Ee),E)}get onselectiondragstop(){return u(I(this,Ce))}set onselectiondragstop(E){U(I(this,Ce),E)}get colorMode(){return u(I(this,Ie))}set colorMode(E){U(I(this,Ie),E)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=go,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap,z=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,C=new WeakMap,b=new WeakMap,H=new WeakMap,W=new WeakMap,q=new WeakMap,k=new WeakMap,N=new WeakMap,M=new WeakMap,$=new WeakMap,S=new WeakMap,P=new WeakMap,V=new WeakMap,L=new WeakMap,D=new WeakMap,F=new WeakMap,K=new WeakMap,oe=new WeakMap,$e=new WeakMap,ae=new WeakMap,Q=new WeakMap,J=new WeakMap,ie=new WeakMap,ne=new WeakMap,ve=new WeakMap,fe=new WeakMap,se=new WeakMap,T=new WeakMap,O=new WeakMap,R=new WeakMap,X=new WeakMap,Y=new WeakMap,j=new WeakMap,G=new WeakMap,B=new WeakMap,Z=new WeakMap,re=new WeakMap,ee=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,be=new WeakMap,ge=new WeakMap,pe=new WeakMap,we=new WeakMap,ye=new WeakMap,Pe=new WeakMap,xe=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,Ie=new WeakMap,new t}function Ct(){const e=xn(li);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const li=Symbol();function ql(e){const t=H$(e);function n(k){t.nodeTypes={...Bl,...k}}function r(k){t.edgeTypes={...Kl,...k}}function i(k){t.edges=Mg(k,t.edges)}const o=(k,N=!1)=>{t.nodes=t.nodes.map(M=>{const $=k.get(M.id);return $?{...M,position:$.position,dragging:N}:M})};function s(k){var S,P,V;const{changes:N,updatedInternals:M}=Xg(k,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!M)return;Dg(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const $=new Map;for(const L of N){const D=(S=t.nodeLookup.get(L.id))==null?void 0:S.internals.userNode;if(!D)continue;const F={...D};switch(L.type){case"dimensions":{const K={...F.measured,...L.dimensions};L.setAttributes&&(F.width=((P=L.dimensions)==null?void 0:P.width)??F.width,F.height=((V=L.dimensions)==null?void 0:V.height)??F.height),F.measured=K;break}case"position":F.position=L.position??F.position;break}$.set(L.id,F)}t.nodes=t.nodes.map(L=>$.get(L.id)??L),t.nodesInitialized||(t.nodesInitialized=!0)}function a(k){const N=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=k,t.fitViewResolver=N,t.nodes=[...t.nodes],N.promise}function l(k,N){const M=t.panZoom;return M?M.scaleBy(k,N):Promise.resolve(!1)}function c(k){return l(1.2,k)}function d(k){return l(1/1.2,k)}function h(k){const N=t.panZoom;N&&(N.setScaleExtent([k,t.maxZoom]),t.minZoom=k)}function f(k){const N=t.panZoom;N&&(N.setScaleExtent([t.minZoom,k]),t.maxZoom=k)}function g(k){const N=t.panZoom;N&&(N.setTranslateExtent(k),t.translateExtent=k)}function y(k){var N;(N=t.panZoom)==null||N.setClickDistance(k)}function m(k,N=null){let M=!1;const $=k.map(S=>(N?N.has(S.id):!0)&&S.selected?(M=!0,{...S,selected:!1}):S);return[M,$]}function p(k){const N=k!=null&&k.nodes?new Set(k.nodes.map(L=>L.id)):null,[M,$]=m(t.nodes,N);M&&(t.nodes=$);const S=k!=null&&k.edges?new Set(k.edges.map(L=>L.id)):null,[P,V]=m(t.edges,S);P&&(t.edges=V)}function w(k){const N=t.multiselectionKeyPressed;t.nodes=t.nodes.map(M=>{const $=k.includes(M.id),S=N&&M.selected||$;if(M.selected!==S){const P=t.nodeLookup.get(M.id);return P&&(P.selected=S),M.selected=S,{...M}}return M}),N||p({nodes:[]})}function z(k){const N=t.multiselectionKeyPressed;t.edges=t.edges.map(M=>{const $=k.includes(M.id),S=N&&M.selected||$;return M.selected!==S?{...M,selected:S}:M}),N||p({edges:[]})}function x(k,N,M){const $=t.nodeLookup.get(k);if(!$){console.warn("012",sr.error012(k));return}t.selectionRect=null,t.selectionRectMode=null,$.selected?(N||$.selected&&t.multiselectionKeyPressed)&&(p({nodes:[$],edges:[]}),requestAnimationFrame(()=>M==null?void 0:M.blur())):w([k])}function v(k){const N=t.edgeLookup.get(k);if(!N){console.warn("012",sr.error012(k));return}(N.selectable||t.elementsSelectable&&typeof N.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,N.selected?N.selected&&t.multiselectionKeyPressed&&p({nodes:[],edges:[N]}):z([k]))}function A(k,N){const{nodeExtent:M,snapGrid:$,nodeOrigin:S,nodeLookup:P,nodesDraggable:V,onerror:L}=t,D=new Map,F=($==null?void 0:$[0])??5,K=($==null?void 0:$[1])??5,oe=k.x*F*N,$e=k.y*K*N;for(const ae of P.values()){if(!(ae.selected&&(ae.draggable||V&&typeof ae.draggable>"u")))continue;let J={x:ae.internals.positionAbsolute.x+oe,y:ae.internals.positionAbsolute.y+$e};$&&(J=Mi(J,$));const{position:ie,positionAbsolute:ne}=_l({nodeId:ae.id,nextPosition:J,nodeLookup:P,nodeExtent:M,nodeOrigin:S,onError:L});ae.position=ie,ae.internals.positionAbsolute=ne,D.set(ae.id,ae)}o(D)}function C(k){return Wg({delta:k,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const b=k=>{t._connection={...k}};function H(){t._connection=go}function W(){t.resetStoreValues(),p()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:c,zoomOut:d,fitView:a,setMinZoom:h,setMaxZoom:f,setTranslateExtent:g,setPaneClickDistance:y,unselectNodesAndEdges:p,addSelectedNodes:w,addSelectedEdges:z,handleNodeSelection:x,handleEdgeSelection:v,moveSelectedNodes:A,panBy:C,updateConnection:b,cancelConnection:H,reset:W})}function qi(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,translateExtent:o,paneClickDistance:s,setPanZoomInstance:a,onDraggingChange:l,onTransformChange:c}=t,d=s$({domNode:e,minZoom:n,maxZoom:r,translateExtent:o,viewport:i,paneClickDistance:s,onDraggingChange:l}),h=d.getViewport();return(i.x!==h.x||i.y!==h.y||i.zoom!==h.zoom)&&c([h.x,h.y,h.zoom]),a(d),d.update(t),{update(f){d.update(f)}}}var O$=Te('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function D$(e,t){Me(t,!0);let n=te(t,"store",15),r=te(t,"panOnScrollMode",19,()=>Qt.Free),i=te(t,"preventScrolling",3,!0),o=te(t,"zoomOnScroll",3,!0),s=te(t,"zoomOnDoubleClick",3,!0),a=te(t,"zoomOnPinch",3,!0),l=te(t,"panOnDrag",3,!0),c=te(t,"panOnScroll",3,!1),d=te(t,"paneClickDistance",3,1),h=_(()=>n().panActivationKeyPressed||l()),f=_(()=>n().panActivationKeyPressed||c());const{viewport:g}=n();let y=!1;Ht(()=>{var w;!y&&n().viewportInitialized&&((w=t.oninit)==null||w.call(t),y=!0)});var m=O$(),p=Re(m);rt(p,()=>t.children),Ge(m,(w,z)=>qi==null?void 0:qi(w,z),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:w=>{n(n().dragging=w,!0)},setPanZoomInstance:w=>{n(n().panZoom=w,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:o(),zoomOnDoubleClick:s(),zoomOnPinch:a(),panOnScroll:u(f),panOnDrag:u(h),panOnScrollSpeed:.5,panOnScrollMode:r()||Qt.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof i()=="boolean"?i():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:d(),onTransformChange:w=>{n(n().viewport={x:w[0],y:w[1],zoom:w[2]},!0)}})),me(e,m),Ae()}function Ks(e,t){return n=>{n.target===t&&(e==null||e(n))}}function qs(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Zs(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var R$=Te("<div><!></div>");function L$(e,t){Me(t,!0);let n=te(t,"store",15),r=te(t,"panOnDrag",3,!0),i,o=null,s=new Set,a=new Set,l=_(()=>n().panActivationKeyPressed||r()),c=_(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&u(l)!==!0),d=_(()=>n().elementsSelectable&&(u(c)||n().selectionRectMode==="user")),h=!1;function f(C){var b;if(h||n().connection.inProgress){h=!1;return}(b=t.onpaneclick)==null||b.call(t,{event:C}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(C){var W,q,k;if(o=i==null?void 0:i.getBoundingClientRect(),!n().elementsSelectable||!u(c)||C.button!==0||C.target!==i||!o)return;(q=(W=C.target)==null?void 0:W.setPointerCapture)==null||q.call(W,C.pointerId);const{x:b,y:H}=Tt(C,o);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:b,startY:H,x:b,y:H},!0),(k=t.onselectionstart)==null||k.call(t,C)}function y(C){if(!u(c)||!o||!n().selectionRect)return;h=!0;const b=Tt(C,o),{startX:H=0,startY:W=0}=n().selectionRect,q={...n().selectionRect,x:b.x<H?b.x:H,y:b.y<W?b.y:W,width:Math.abs(b.x-H),height:Math.abs(b.y-W)},k=s,N=a;s=new Set(bl(n().nodeLookup,q,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===ri.Partial,!0).map($=>$.id));const M=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const $ of s){const S=n().connectionLookup.get($);if(S)for(const{edgeId:P}of S.values()){const V=n().edgeLookup.get(P);V&&(V.selectable??M)&&a.add(P)}}Zs(k,s)||n(n().nodes=n().nodes.map(qs(s)),!0),Zs(N,a)||n(n().edges=n().edges.map(qs(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=q,!0)}function m(C){var b,H,W;C.button===0&&((H=(b=C.target)==null?void 0:b.releasePointerCapture)==null||H.call(b,C.pointerId),!u(c)&&n().selectionRectMode==="user"&&C.target===i&&(f==null||f(C)),n(n().selectionRect=null,!0),s.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),(W=t.onselectionend)==null||W.call(t,C))}const p=C=>{var b;if(Array.isArray(u(l))&&u(l).includes(2)){C.preventDefault();return}(b=t.onpanecontextmenu)==null||b.call(t,{event:C})};var w=R$();let z;var x=_(()=>u(d)?void 0:Ks(f,i));w.__click=function(...C){var b;(b=u(x))==null||b.apply(this,C)},w.__pointerdown=function(...C){var b;(b=u(d)?g:void 0)==null||b.apply(this,C)},w.__pointermove=function(...C){var b;(b=u(d)?y:void 0)==null||b.apply(this,C)},w.__pointerup=function(...C){var b;(b=u(d)?m:void 0)==null||b.apply(this,C)};var v=_(()=>Ks(p,i));w.__contextmenu=function(...C){var b;(b=u(v))==null||b.apply(this,C)};var A=Re(w);rt(A,()=>t.children),kt(w,C=>i=C,()=>i),ze(C=>z=mt(w,1,"svelte-flow__pane svelte-flow__container",null,z,C),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:u(c)})]),me(e,w),Ae()}dn(["click","pointerdown","pointermove","pointerup","contextmenu"]);var Y$=Te('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function V$(e,t){Me(t,!0);var n=Y$();let r;var i=Re(n);rt(i,()=>t.children),ze(()=>r=lt(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),me(e,n),Ae()}function bn(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=Kg({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:d}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(c,d){if(d.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){a.destroy()}}}var X$=Te('<div aria-live="assertive" aria-atomic="true" style="position: absolute; width: 1px; height: 1px; margin: -1px; border: 0; padding: 0; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); clip-path: inset(100%);"> </div>'),W$=Te(`<div style="display: none;">Press enter or space to select a node. <!> Press delete to remove it and escape to cancel.</div> <div style="display: none;">Press enter or space to select an edge. You can then press delete to remove it or escape to
  cancel.</div> <!>`,1);function F$(e,t){Me(t,!0);var n=W$(),r=Oe(n),i=Se(Re(r));{var o=c=>{var d=Oa("You can then use the arrow keys to move the node around.");me(c,d)};Xe(i,c=>{t.store.disableKeyboardA11y||c(o)})}var s=Se(r,2),a=Se(s,2);{var l=c=>{var d=X$(),h=Re(d);ze(()=>{_e(d,"id",`${B$}-${t.store.flowId}`),en(h,t.store.ariaLiveMessage)}),me(c,d)};Xe(a,c=>{t.store.disableKeyboardA11y||c(l)})}ze(()=>{_e(r,"id",`${Zl}-${t.store.flowId}`),_e(s,"id",`${Gl}-${t.store.flowId}`)}),me(e,n),Ae()}const Zl="svelte-flow__node-desc",Gl="svelte-flow__edge-desc",B$="svelte-flow__aria-live";function K$(e,t,n,r,i,o,s){var a;u(t)&&(!n().selectNodesOnDrag||!u(r)||n().nodeDragThreshold>0)&&n().handleNodeSelection(i),(a=o.onnodeclick)==null||a.call(o,{node:u(s),event:e})}var q$=Te("<div><!></div>");function Z$(e,t){Me(t,!0);let n=te(t,"store",15),r=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return O}),i=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return R}),o=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return X}),s=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Y}),a=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return j}),l=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return G}),c=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return B}),d=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Z}),h=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return re}),f=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return ee}),g=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return ce}),y=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return ue}),m=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return de}),p=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return he}),w=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return be}),z=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return ge}),x=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return pe}),v=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return we}),A=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return ye}),C=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Pe}),b=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return xe}),H=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Ee}),W=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Ce}),q=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Ie}),k=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return Ye}),N=_(()=>{let{data:O={},selected:R=!1,draggable:X,selectable:Y,deletable:j=!0,connectable:G,focusable:B,hidden:Z=!1,dragging:re=!1,style:ee="",class:ce,type:ue="default",parentId:de,sourcePosition:he,targetPosition:be,measured:{width:ge,height:pe}={width:0,height:0},initialWidth:we,initialHeight:ye,width:Pe,height:xe,dragHandle:Ee,internals:{z:Ce=0,positionAbsolute:{x:Ie,y:Ye},userNode:E}}=t.node;return E}),{id:M}=t.node,$=_(()=>u(o)??n().nodesDraggable),S=_(()=>u(s)??n().elementsSelectable),P=_(()=>u(l)??n().nodesConnectable),V=_(()=>Sl(t.node)&&!!t.node.internals.handleBounds),L=_(()=>u(c)??n().nodesFocusable);function D(O){return n().parentLookup.has(O)}let F=_(()=>D(M)),K=Ne(null),oe=null,$e=u(y),ae=u(p),Q=u(w),J=_(()=>n().nodeTypes[u(y)]??Wl);Qn("svelteflow__node_connectable",{get value(){return u(P)}}),Qn("svelteflow__node_id",M);let ne=_(()=>{const O=u(z)===void 0?u(C)??u(v):u(C),R=u(x)===void 0?u(b)??u(A):u(b);if(!(O===void 0&&R===void 0&&u(f)===void 0))return`${u(f)};${O?`width:${Et(O)};`:""}${R?`height:${Et(R)};`:""}`});Ht(()=>{(u(y)!==$e||u(p)!==ae||u(w)!==Q)&&u(K)!==null&&requestAnimationFrame(()=>{u(K)!==null&&n().updateNodeInternals(new Map([[M,{id:M,nodeElement:u(K),force:!0}]]))}),$e=u(y),ae=u(p),Q=u(w)}),Ht(()=>{t.resizeObserver&&(!u(V)||u(K)!==oe)&&(oe&&t.resizeObserver.unobserve(oe),u(K)&&t.resizeObserver.observe(u(K)),oe=u(K))}),mr(()=>{var O;oe&&((O=t.resizeObserver)==null||O.unobserve(oe))});function ve(O){if(!(Nl(O)||n().disableKeyboardA11y))if(pl.includes(O.key)&&u(S)){const R=O.key==="Escape";n().handleNodeSelection(M,R,u(K))}else u($)&&t.node.selected&&Object.prototype.hasOwnProperty.call(ai,O.key)&&(O.preventDefault(),n(n().ariaLiveMessage=`Moved selected node ${O.key.replace("Arrow","").toLowerCase()}. New position, x: ${t.node.internals.positionAbsolute.x}, y: ${t.node.internals.positionAbsolute.y}`,!0),n().moveSelectedNodes(ai[O.key],O.shiftKey?4:1))}var fe=tt(),se=Oe(fe);{var T=O=>{var R=q$();_e(R,"data-id",M);let X,Y;R.__click=[K$,S,n,$,M,t,N],R.__pointermove=function(...G){var B;(B=t.onnodepointermove?Z=>t.onnodepointermove({node:u(N),event:Z}):void 0)==null||B.apply(this,G)},R.__contextmenu=function(...G){var B;(B=t.onnodecontextmenu?Z=>t.onnodecontextmenu({node:u(N),event:Z}):void 0)==null||B.apply(this,G)},R.__keydown=function(...G){var B;(B=u(L)?ve:void 0)==null||B.apply(this,G)};var j=Re(R);No(j,()=>u(J),(G,B)=>{B(G,{get data(){return u(r)},id:M,get selected(){return u(i)},get selectable(){return u(S)},get deletable(){return u(a)},get sourcePosition(){return u(p)},get targetPosition(){return u(w)},get zIndex(){return u(W)},get dragging(){return u(h)},get draggable(){return u($)},get dragHandle(){return u(H)},get parentId(){return u(m)},get type(){return u(y)},get isConnectable(){return u(P)},get positionAbsoluteX(){return u(q)},get positionAbsoluteY(){return u(k)},get width(){return u(C)},get height(){return u(b)}})}),Ge(R,(G,B)=>bn==null?void 0:bn(G,B),()=>({nodeId:M,isSelectable:u(S),disabled:!u($),handleSelector:u(H),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(G,B,Z,re)=>{var ee;(ee=t.onnodedrag)==null||ee.call(t,{event:G,targetNode:Z,nodes:re})},onDragStart:(G,B,Z,re)=>{var ee;(ee=t.onnodedragstart)==null||ee.call(t,{event:G,targetNode:Z,nodes:re})},onDragStop:(G,B,Z,re)=>{var ee;(ee=t.onnodedragstop)==null||ee.call(t,{event:G,targetNode:Z,nodes:re})},store:n()})),kt(R,G=>U(K,G),()=>u(K)),ze(G=>{X=mt(R,1,St(["svelte-flow__node",`svelte-flow__node-${u(y)}`,u(g)]),null,X,G),Y=lt(R,u(ne),Y,{"z-index":u(W),transform:`translate(${u(q)??""}px, ${u(k)??""}px)`,visibility:u(V)?"visible":"hidden"}),_e(R,"tabindex",u(L)?0:void 0),_e(R,"role",u(L)?"button":void 0),_e(R,"aria-describedby",n().disableKeyboardA11y?void 0:`${Zl}-${n().flowId}`)},[()=>({dragging:u(h),selected:u(i),draggable:u($),connectable:u(P),selectable:u(S),nopan:u($),parent:u(F)})]),Qe("pointerenter",R,function(...G){var B;(B=t.onnodepointerenter?Z=>t.onnodepointerenter({node:u(N),event:Z}):void 0)==null||B.apply(this,G)}),Qe("pointerleave",R,function(...G){var B;(B=t.onnodepointerleave?Z=>t.onnodepointerleave({node:u(N),event:Z}):void 0)==null||B.apply(this,G)}),me(O,R)};Xe(se,O=>{u(d)||O(T)})}me(e,fe),Ae()}dn(["click","pointermove","contextmenu","keydown"]);var G$=Te('<div class="svelte-flow__nodes"></div>');function U$(e,t){Me(t,!0);let n=te(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});mr(()=>{r==null||r.disconnect()});var i=G$();_i(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{Z$(o,{get node(){return u(s)},resizeObserver:r,get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),me(e,i),Ae()}var Q$=We('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function J$(e,t){Me(t,!0);let n=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return Q}),r=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return J}),i=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ie}),o=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ne}),s=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ve}),a=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return fe}),l=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return se}),c=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return T}),d=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return O}),h=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return R}),f=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return X}),g=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return Y}),y=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return j}),m=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return G}),p=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return B}),w=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return Z}),z=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return re}),x=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ee}),v=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ce}),A=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ue}),C=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return de}),b=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return he}),H=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return be}),W=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ge}),q=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return pe}),k=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return we}),N=_(()=>{let{source:Q,target:J,sourceX:ie,sourceY:ne,targetX:ve,targetY:fe,sourcePosition:se,targetPosition:T,animated:O=!1,selected:R=!1,label:X,labelStyle:Y,data:j={},style:G,interactionWidth:B,type:Z="default",sourceHandle:re,targetHandle:ee,markerStart:ce,markerEnd:ue,selectable:de,focusable:he,deletable:be=!0,hidden:ge,zIndex:pe,class:we,ariaLabel:ye}=t.edge;return ye}),M=null;const{id:$}=t.edge;Qn("svelteflow__edge_id",$);let S=_(()=>u(C)??t.store.elementsSelectable),P=_(()=>u(b)??t.store.edgesFocusable),V=_(()=>t.store.edgeTypes[u(w)]??Fl),L=_(()=>u(v)?`url('#${vo(u(v),t.store.flowId)}')`:void 0),D=_(()=>u(A)?`url('#${vo(u(A),t.store.flowId)}')`:void 0);function F(Q){var ie;const J=t.store.edgeLookup.get($);J&&(u(S)&&t.store.handleEdgeSelection($),(ie=t.onedgeclick)==null||ie.call(t,{event:Q,edge:J}))}function K(Q,J){const ie=t.store.edgeLookup.get($);ie&&J({event:Q,edge:ie})}onkeydown=Q=>{if(!t.store.disableKeyboardA11y&&pl.includes(Q.key)&&u(S)){const{unselectNodesAndEdges:J,addSelectedEdges:ie}=t.store;Q.key==="Escape"?(M==null||M.blur(),J({edges:[t.edge]})):ie([$])}};var oe=tt(),$e=Oe(oe);{var ae=Q=>{var J=Q$();let ie;var ne=Re(J);let ve;_e(ne,"data-id",$),ne.__click=F,ne.__contextmenu=function(...se){var T;(T=t.onedgecontextmenu?O=>{K(O,t.onedgecontextmenu)}:void 0)==null||T.apply(this,se)},ne.__keydown=function(...se){var T;(T=u(P)?onkeydown:void 0)==null||T.apply(this,se)};var fe=Re(ne);No(fe,()=>u(V),(se,T)=>{T(se,{id:$,get source(){return u(n)},get target(){return u(r)},get sourceX(){return u(i)},get sourceY(){return u(o)},get targetX(){return u(s)},get targetY(){return u(a)},get sourcePosition(){return u(l)},get targetPosition(){return u(c)},get animated(){return u(d)},get selected(){return u(h)},get label(){return u(f)},get labelStyle(){return u(g)},get data(){return u(y)},get style(){return u(m)},get interactionWidth(){return u(p)},get selectable(){return u(S)},get deletable(){return u(H)},get type(){return u(w)},get sourceHandleId(){return u(z)},get targetHandleId(){return u(x)},get markerStart(){return u(L)},get markerEnd(){return u(D)}})}),kt(ne,se=>M=se,()=>M),ze(se=>{ie=lt(J,"",ie,{"z-index":u(q)}),ve=mt(ne,0,St(["svelte-flow__edge",u(k)]),null,ve,se),_e(ne,"aria-label",u(N)===null?void 0:u(N)?u(N):`Edge from ${u(n)} to ${u(r)}`),_e(ne,"aria-describedby",u(P)?`${Gl}-${t.store.flowId}`:void 0),_e(ne,"role",u(P)?"button":"img"),_e(ne,"tabindex",u(P)?0:void 0)},[()=>({animated:u(d),selected:u(h),selectable:u(S)})]),Qe("pointerenter",ne,function(...se){var T;(T=t.onedgepointerenter?O=>{K(O,t.onedgepointerenter)}:void 0)==null||T.apply(this,se)}),Qe("pointerleave",ne,function(...se){var T;(T=t.onedgepointerleave?O=>{K(O,t.onedgepointerleave)}:void 0)==null||T.apply(this,se)}),me(Q,J)};Xe($e,Q=>{u(W)||Q(ae)})}me(e,oe),Ae()}dn(["click","contextmenu","keydown"]);Ec();var j$=We("<defs></defs>");function e0(e,t){Me(t,!1);const n=Ct();Nu();var r=j$();_i(r,5,()=>n.markers,i=>i.id,(i,o)=>{i0(i,Bt(()=>u(o)))}),me(e,r),Ae()}var t0=We('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),n0=We('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),r0=We('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function i0(e,t){Me(t,!0);let n=te(t,"width",3,12.5),r=te(t,"height",3,12.5),i=te(t,"markerUnits",3,"strokeWidth"),o=te(t,"orient",3,"auto-start-reverse");var s=r0(),a=Re(s);{var l=d=>{var h=t0();ze(()=>{_e(h,"stroke",t.color),_e(h,"stroke-width",t.strokeWidth)}),me(d,h)},c=(d,h)=>{{var f=g=>{var y=n0();ze(()=>{_e(y,"stroke",t.color),_e(y,"stroke-width",t.strokeWidth),_e(y,"fill",t.color)}),me(g,y)};Xe(d,g=>{t.type===ar.ArrowClosed&&g(f)},h)}};Xe(a,d=>{t.type===ar.Arrow?d(l):d(c,!1)})}ze(()=>{_e(s,"id",t.id),_e(s,"markerWidth",`${n()}`),_e(s,"markerHeight",`${r()}`),_e(s,"markerUnits",i()),_e(s,"orient",o())}),me(e,s),Ae()}var o0=Te('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function s0(e,t){Me(t,!0);let n=te(t,"store",15);var r=o0(),i=Re(r),o=Re(i);e0(o,{});var s=Se(i,2);_i(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{J$(a,{get edge(){return u(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),me(e,r),Ae()}var a0=Te('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Ul(e,t){Me(t,!0);let n=te(t,"x",3,0),r=te(t,"y",3,0),i=te(t,"width",3,0),o=te(t,"height",3,0),s=te(t,"isVisible",3,!0);var a=tt(),l=Oe(a);{var c=d=>{var h=a0();let f;ze((g,y)=>f=lt(h,"",f,{width:g,height:y,transform:`translate(${n()}px, ${r()}px)`}),[()=>typeof i()=="string"?i():Et(i()),()=>typeof o()=="string"?o():Et(o())]),me(d,h)};Xe(l,d=>{s()&&d(c)})}me(e,a),Ae()}function l0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectioncontextmenu)==null||r.call(t,{nodes:n,event:e})}function c0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectionclick)==null||r.call(t,{nodes:n,event:e})}var u0=Te("<div><!></div>");function d0(e,t){Me(t,!0);let n=Ne(void 0);Ht(()=>{var l;t.store.disableKeyboardA11y||(l=u(n))==null||l.focus({preventScroll:!0})});let r=_(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,_r(t.store.nodeLookup,{filter:l=>!!l.selected})):null);function i(l){Object.prototype.hasOwnProperty.call(ai,l.key)&&(l.preventDefault(),t.store.moveSelectedNodes(ai[l.key],l.shiftKey?4:1))}var o=tt(),s=Oe(o);{var a=l=>{var c=u0();c.__contextmenu=[l0,t],c.__click=[c0,t],c.__keydown=function(...f){var g;(g=t.store.disableKeyboardA11y?void 0:i)==null||g.apply(this,f)};let d;var h=Re(c);Ul(h,{width:"100%",height:"100%",x:0,y:0}),Ge(c,(f,g)=>bn==null?void 0:bn(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,y,m)=>{var p;(p=t.onnodedrag)==null||p.call(t,{event:f,targetNode:null,nodes:m})},onDragStart:(f,g,y,m)=>{var p;(p=t.onnodedragstart)==null||p.call(t,{event:f,targetNode:null,nodes:m})},onDragStop:(f,g,y,m)=>{var p;(p=t.onnodedragstop)==null||p.call(t,{event:f,targetNode:null,nodes:m})}})),kt(c,f=>U(n,f),()=>u(n)),ze((f,g)=>{mt(c,1,St(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),_e(c,"role",t.store.disableKeyboardA11y?void 0:"button"),_e(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),d=lt(c,"",d,{width:f,height:g,transform:`translate(${u(r).x??""}px, ${u(r).y??""}px)`})},[()=>Et(u(r).width),()=>Et(u(r).height)]),me(l,c)};Xe(s,l=>{t.store.selectionRectMode==="nodes"&&u(r)&&It(u(r).x)&&It(u(r).y)&&l(a)})}me(e,o),Ae()}dn(["contextmenu","click","keydown"]);function f0(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function He(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var d;const l=Array.isArray(r)?r:[r],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,f,g)=>f?h|1<<g:h,0);for(const h of l){const f={preventDefault:!1,enabled:!0,...h},{modifier:g,key:y,callback:m,preventDefault:p,enabled:w}=f;if(w){if(a.key!==y)continue;if(g===null||g===!1){if(c!==0)continue}else if(g!==void 0&&((d=g==null?void 0:g[0])==null?void 0:d.length)>0){const x=Array.isArray(g)?g:[g];let v=!1;for(const A of x)if((Array.isArray(A)?A:[A]).reduce((b,H)=>b|f0(H),0)===c){v=!0;break}if(!v)continue}p&&a.preventDefault();const z={node:e,trigger:f,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:z})),m==null||m(z)}}}let s;return n&&(s=no(e,i,o)),{update:a=>{const{enabled:l=!0,type:c="keydown"}=a;n&&(!l||i!==c)?s==null||s():!n&&l&&(s=no(e,c,o)),n=l,i=c,r=a.trigger},destroy:()=>{s==null||s()}}}function Xo(){const e=_(Ct),t=o=>{var c,d;const s=Fs(o)?o:u(e).nodeLookup.get(o.id),a=s.parentId?xg(s.position,s.measured,s.parentId,u(e).nodeLookup,u(e).nodeOrigin):s.position,l={...s,position:a,width:((c=s.measured)==null?void 0:c.width)??s.width,height:((d=s.measured)==null?void 0:d.height)??s.height};return An(l)};function n(o,s,a={replace:!1}){u(e).nodes=Je(()=>u(e).nodes).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a!=null&&a.replace&&Fs(c)?c:{...l,...c}}return l})}function r(o,s,a={replace:!1}){u(e).edges=Je(()=>u(e).edges).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a.replace&&b$(c)?c:{...l,...c}}return l})}const i=o=>u(e).nodeLookup.get(o);return{zoomIn:u(e).zoomIn,zoomOut:u(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?u(e).nodes:Gs(u(e).nodeLookup,o),getEdge:o=>u(e).edgeLookup.get(o),getEdges:o=>o===void 0?u(e).edges:Gs(u(e).edgeLookup,o),setZoom:(o,s)=>{const a=u(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>u(e).viewport.zoom,setViewport:async(o,s)=>{const a=u(e).viewport;return u(e).panZoom?(await u(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},{duration:s==null?void 0:s.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>la(u(e).viewport),setCenter:async(o,s,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:u(e).maxZoom,c=u(e).panZoom;return c?(await c.setViewport({x:u(e).width/2-o*l,y:u(e).height/2-s*l,zoom:l},{duration:a==null?void 0:a.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:o=>u(e).fitView(o),fitBounds:async(o,s)=>{if(!u(e).panZoom)return Promise.resolve(!1);const a=Do(o,u(e).width,u(e).height,u(e).minZoom,u(e).maxZoom,(s==null?void 0:s.padding)??.1);return await u(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=As(o),c=l?o:t(o);return c?(a||u(e).nodes).filter(d=>{const h=u(e).nodeLookup.get(d.id);if(!h||!l&&d.id===o.id)return!1;const f=An(h),g=lr(f,c);return s&&g>0||g>=c.width*c.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const c=As(o)?o:t(o);if(!c)return!1;const d=lr(c,s);return a&&d>0||d>=c.width*c.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{const{nodes:a,edges:l}=await pg({nodesToRemove:o,edgesToRemove:s,nodes:u(e).nodes,edges:u(e).edges,onBeforeDelete:u(e).onbeforedelete});return a&&(u(e).nodes=Je(()=>u(e).nodes).filter(c=>!a.some(({id:d})=>d===c.id))),l&&(u(e).edges=Je(()=>u(e).edges).filter(c=>!l.some(({id:d})=>d===c.id))),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!u(e).domNode)return o;const a=s.snapToGrid?u(e).snapGrid:!1,{x:l,y:c,zoom:d}=u(e).viewport,{x:h,y:f}=u(e).domNode.getBoundingClientRect(),g={x:o.x-h,y:o.y-f};return xr(g,[l,c,d],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!u(e).domNode)return o;const{x:s,y:a,zoom:l}=u(e).viewport,{x:c,y:d}=u(e).domNode.getBoundingClientRect(),h=oi(o,[s,a,l]);return{x:h.x+c,y:h.y+d}},toObject:()=>structuredClone({nodes:[...u(e).nodes],edges:[...u(e).edges],viewport:{...u(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var d;const l=(d=u(e).nodeLookup.get(o))==null?void 0:d.internals.userNode;if(!l)return;const c=typeof s=="function"?s(l):s;n(o,h=>({...h,data:a!=null&&a.replace?c:{...h.data,...c}}))},updateEdge:r,getNodesBounds:o=>$g(o,{nodeLookup:u(e).nodeLookup,nodeOrigin:u(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=u(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function Gs(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function h0(e,t){Me(t,!0);let n=te(t,"store",15),r=te(t,"selectionKey",3,"Shift"),i=te(t,"multiSelectionKey",19,()=>si()?"Meta":"Control"),o=te(t,"deleteKey",3,"Backspace"),s=te(t,"panActivationKey",3," "),a=te(t,"zoomActivationKey",19,()=>si()?"Meta":"Control"),{deleteElements:l}=Xo();function c(m){return m!==null&&typeof m=="object"}function d(m){return c(m)?m.modifier||[]:[]}function h(m){return m==null?"":c(m)?m.key:m}function f(m,p){return(Array.isArray(m)?m:[m]).map(z=>{const x=h(z);return{key:x,modifier:d(z),enabled:x!==null,callback:p}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function y(){var x,v;const m=n().nodes.filter(A=>A.selected),p=n().edges.filter(A=>A.selected),{deletedNodes:w,deletedEdges:z}=await l({nodes:m,edges:p});(w.length>0||z.length>0)&&((v=(x=n()).ondelete)==null||v.call(x,{nodes:w,edges:z}))}Qe("blur",Ze,g),Qe("contextmenu",Ze,g),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(o(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!Nl(m.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),y())}),type:"keydown"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Ge(Ze,(m,p)=>He==null?void 0:He(m,p),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Ae()}var g0=We('<path fill="none" class="svelte-flow__connection-path"></path>'),$0=We('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function v0(e,t){Me(t,!0);let n=_(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case Kt.Bezier:{const[a]=Al(s);return a}case Kt.Straight:{const[a]=zl(s);return a}case Kt.Step:case Kt.SmoothStep:{const[a]=Ro({...s,borderRadius:t.type===Kt.Step?0:void 0});return a}}});var r=tt(),i=Oe(r);{var o=s=>{var a=$0(),l=Re(a),c=Re(l);{var d=f=>{var g=tt(),y=Oe(g);No(y,()=>t.LineComponent,(m,p)=>{p(m,{})}),me(f,g)},h=f=>{var g=g0();ze(()=>{_e(g,"d",u(n)),lt(g,t.style)}),me(f,g)};Xe(c,f=>{t.LineComponent?f(d):f(h,!1)})}ze(f=>{_e(a,"width",t.store.width),_e(a,"height",t.store.height),lt(a,t.containerStyle),mt(l,0,f)},[()=>St(["svelte-flow__connection",hg(t.store.connection.isValid)])]),me(s,a)};Xe(i,s=>{t.store.connection.inProgress&&s(o)})}me(e,r),Ae()}var y0=Te("<div><!></div>");function ur(e,t){Me(t,!0);let n=te(t,"position",3,"top-right"),r=Yt(t,["$$slots","$$events","$$legacy","position","style","class","children"]);const i=Ct();let o=_(()=>`${n()}`.split("-"));var s=y0();let a;var l=Re(s);rt(l,()=>t.children??Rt),ze(c=>a=fn(s,a,{class:c,style:t.style,...r,[wt]:{"pointer-events":i.selectionRectMode?"none":""}}),[()=>["svelte-flow__panel",t.class,...u(o)]]),me(e,s),Ae()}var m0=Te('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function p0(e,t){Me(t,!0);let n=te(t,"position",3,"bottom-right");var r=tt(),i=Oe(r);{var o=s=>{ur(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var c=m0();me(a,c)},$$slots:{default:!0}})};Xe(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}me(e,r),Ae()}var w0=Te("<div><!></div>");function b0(e,t){Me(t,!0);let n=te(t,"domNode",15),r=te(t,"clientWidth",15),i=te(t,"clientHeight",15),o=_(()=>{let{id:d,class:h,nodeTypes:f,edgeTypes:g,colorMode:y,isValidConnection:m,onmove:p,onmovestart:w,onmoveend:z,onflowerror:x,ondelete:v,onbeforedelete:A,onbeforeconnect:C,onconnect:b,onconnectstart:H,onconnectend:W,onbeforereconnect:q,onreconnect:k,onreconnectstart:N,onreconnectend:M,onclickconnectstart:$,onclickconnectend:S,oninit:P,onselectionchange:V,onselectiondragstart:L,onselectiondrag:D,onselectiondragstop:F,onselectionstart:K,onselectionend:oe,clickConnect:$e,fitView:ae,fitViewOptions:Q,nodeOrigin:J,nodeDragThreshold:ie,minZoom:ne,maxZoom:ve,initialViewport:fe,connectionRadius:se,connectionMode:T,selectionMode:O,selectNodesOnDrag:R,snapGrid:X,defaultMarkerColor:Y,translateExtent:j,nodeExtent:G,onlyRenderVisibleElements:B,autoPanOnConnect:Z,autoPanOnNodeDrag:re,colorModeSSR:ee,style:ce,defaultEdgeOptions:ue,elevateNodesOnSelect:de,elevateEdgesOnSelect:he,nodesDraggable:be,nodesConnectable:ge,elementsSelectable:pe,nodesFocusable:we,edgesFocusable:ye,disableKeyboardA11y:Pe,noDragClass:xe,noPanClass:Ee,noWheelClass:Ce,...Ie}=t.rest;return h}),s=_(()=>{let{id:d,class:h,nodeTypes:f,edgeTypes:g,colorMode:y,isValidConnection:m,onmove:p,onmovestart:w,onmoveend:z,onflowerror:x,ondelete:v,onbeforedelete:A,onbeforeconnect:C,onconnect:b,onconnectstart:H,onconnectend:W,onbeforereconnect:q,onreconnect:k,onreconnectstart:N,onreconnectend:M,onclickconnectstart:$,onclickconnectend:S,oninit:P,onselectionchange:V,onselectiondragstart:L,onselectiondrag:D,onselectiondragstop:F,onselectionstart:K,onselectionend:oe,clickConnect:$e,fitView:ae,fitViewOptions:Q,nodeOrigin:J,nodeDragThreshold:ie,minZoom:ne,maxZoom:ve,initialViewport:fe,connectionRadius:se,connectionMode:T,selectionMode:O,selectNodesOnDrag:R,snapGrid:X,defaultMarkerColor:Y,translateExtent:j,nodeExtent:G,onlyRenderVisibleElements:B,autoPanOnConnect:Z,autoPanOnNodeDrag:re,colorModeSSR:ee,style:ce,defaultEdgeOptions:ue,elevateNodesOnSelect:de,elevateEdgesOnSelect:he,nodesDraggable:be,nodesConnectable:ge,elementsSelectable:pe,nodesFocusable:we,edgesFocusable:ye,disableKeyboardA11y:Pe,noDragClass:xe,noPanClass:Ee,noWheelClass:Ce,...Ie}=t.rest;return Ie});var a=w0();let l;var c=Re(a);rt(c,()=>t.children??Rt),kt(a,d=>n(d),()=>n()),ze((d,h)=>l=fn(a,l,{class:["svelte-flow","svelte-flow__container",u(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",...u(s),[wt]:{width:d,height:h}},"svelte-12wlba6"),[()=>Et(t.width),()=>Et(t.height)]),ss(a,"clientHeight",i),ss(a,"clientWidth",r),me(e,a),Ae()}var _0=Te('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),x0=Te("<!> <!>",1),k0=Te("<!> <!> <!> <!> <!>",1);function E0(e,t){Me(t,!0);let n=te(t,"paneClickDistance",3,1),r=te(t,"nodeClickDistance",3,1),i=te(t,"panOnScrollMode",19,()=>Qt.Free),o=te(t,"preventScrolling",3,!0),s=te(t,"zoomOnScroll",3,!0),a=te(t,"zoomOnDoubleClick",3,!0),l=te(t,"zoomOnPinch",3,!0),c=te(t,"panOnScroll",3,!1),d=te(t,"panOnDrag",3,!0),h=te(t,"selectionOnDrag",3,!0),f=te(t,"connectionLineType",19,()=>Kt.Bezier),g=te(t,"nodes",31,()=>qe([])),y=te(t,"edges",31,()=>qe([])),m=te(t,"viewport",15,void 0),p=Yt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),w=ql({props:p,width:t.width,height:t.height,get nodes(){return g()},set nodes(x){g(x)},get edges(){return y()},set edges(x){y(x)},get viewport(){return m()},set viewport(x){m(x)}});const z=xn(li);z&&z.setStore&&z.setStore(w),Qn(li,{provider:!1,getStore(){return w}}),Ht(()=>{var v;const x={nodes:w.selectedNodes,edges:w.selectedEdges};(v=Je(()=>t.onselectionchange))==null||v(x);for(const A of w.selectionChangeHandlers.values())A(x)}),mr(()=>{w.reset()}),b0(e,{get colorMode(){return w.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return p},get domNode(){return w.domNode},set domNode(x){w.domNode=x},get clientWidth(){return w.width},set clientWidth(x){w.width=x},get clientHeight(){return w.height},set clientHeight(x){w.height=x},children:(x,v)=>{var A=k0(),C=Oe(A);h0(C,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return w},set store(k){w=k}});var b=Se(C,2);D$(b,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return c()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return w},set store(k){w=k},children:(k,N)=>{L$(k,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get selectionOnDrag(){return h()},get store(){return w},set store(M){w=M},children:(M,$)=>{var S=x0(),P=Oe(S);V$(P,{get store(){return w},set store($e){w=$e},children:($e,ae)=>{var Q=_0(),J=Se(Oe(Q),2);s0(J,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return w},set store(fe){w=fe}});var ie=Se(J,4);v0(ie,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return w},set store(fe){w=fe}});var ne=Se(ie,2);U$(ne,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(fe){w=fe}});var ve=Se(ne,2);d0(ve,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(fe){w=fe}}),me($e,Q)},$$slots:{default:!0}});var V=Se(P,2);const L=_(()=>!!(w.selectionRect&&w.selectionRectMode==="user")),D=_(()=>{var $e;return($e=w.selectionRect)==null?void 0:$e.width}),F=_(()=>{var $e;return($e=w.selectionRect)==null?void 0:$e.height}),K=_(()=>{var $e;return($e=w.selectionRect)==null?void 0:$e.x}),oe=_(()=>{var $e;return($e=w.selectionRect)==null?void 0:$e.y});Ul(V,{get isVisible(){return u(L)},get width(){return u(D)},get height(){return u(F)},get x(){return u(K)},get y(){return u(oe)}}),me(M,S)},$$slots:{default:!0}})},$$slots:{default:!0}});var H=Se(b,2);p0(H,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var W=Se(H,2);F$(W,{store:w});var q=Se(W,2);rt(q,()=>t.children??Rt),me(x,A)},$$slots:{default:!0}}),Ae()}function S0(e,t){Me(t,!0);let n=Ne(ql({props:{},nodes:[],edges:[]}));Qn(li,{provider:!0,getStore(){return u(n)},setStore:o=>{U(n,o)}}),mr(()=>{u(n).reset()});var r=tt(),i=Oe(r);rt(i,()=>t.children??Rt),me(e,r),Ae()}var P0=Te("<button><!></button>");function zr(e,t){let n=Yt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=P0();let i;var o=Re(r);rt(o,()=>t.children??Rt),ze(()=>i=fn(r,i,{type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[wt]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}})),me(e,r)}var C0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function N0(e){var t=C0();me(e,t)}var M0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function A0(e){var t=M0();me(e,t)}var I0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function z0(e){var t=I0();me(e,t)}var T0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function H0(e){var t=T0();me(e,t)}var O0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function D0(e){var t=O0();me(e,t)}var R0=Te("<!> <!>",1),L0=Te("<!> <!> <!> <!> <!> <!>",1);function Y0(e,t){Me(t,!0);let n=te(t,"position",3,"bottom-left"),r=te(t,"orientation",3,"vertical"),i=te(t,"showZoom",3,!0),o=te(t,"showFitView",3,!0),s=te(t,"showLock",3,!0),a=Yt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","aria-label","fitViewOptions","children","before","after"]);const l=Ct(),c={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let d=Ne(qe(l.nodesDraggable||l.nodesConnectable||l.elementsSelectable)),h=_(()=>l.viewport.zoom<=l.minZoom),f=_(()=>l.viewport.zoom>=l.maxZoom),g=_(()=>r()==="horizontal"?"horizontal":"vertical");const y=()=>{l.zoomIn()},m=()=>{l.zoomOut()},p=()=>{l.fitView(t.fitViewOptions)},w=()=>{U(d,!u(d)),l.nodesDraggable=u(d),l.nodesConnectable=u(d),l.elementsSelectable=u(d)},z=_(()=>["svelte-flow__controls",u(g),t.class]),x=_(()=>t["aria-label"]??"Svelte Flow controls");ur(e,Bt({get class(){return u(z)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return u(x)},get style(){return t.style}},()=>a,{children:(v,A)=>{var C=L0(),b=Oe(C);{var H=D=>{var F=tt(),K=Oe(F);rt(K,()=>t.before),me(D,F)};Xe(b,D=>{t.before&&D(H)})}var W=Se(b,2);{var q=D=>{var F=R0(),K=Oe(F);zr(K,Bt({onclick:y,class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return u(f)}},c,{children:($e,ae)=>{N0($e)},$$slots:{default:!0}}));var oe=Se(K,2);zr(oe,Bt({onclick:m,class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return u(h)}},c,{children:($e,ae)=>{A0($e)},$$slots:{default:!0}})),me(D,F)};Xe(W,D=>{i()&&D(q)})}var k=Se(W,2);{var N=D=>{zr(D,Bt({class:"svelte-flow__controls-fitview",onclick:p,title:"fit view","aria-label":"fit view"},c,{children:(F,K)=>{z0(F)},$$slots:{default:!0}}))};Xe(k,D=>{o()&&D(N)})}var M=Se(k,2);{var $=D=>{zr(D,Bt({class:"svelte-flow__controls-interactive",onclick:w,title:"toggle interactivity","aria-label":"toggle interactivity"},c,{children:(F,K)=>{var oe=tt(),$e=Oe(oe);{var ae=J=>{D0(J)},Q=J=>{H0(J)};Xe($e,J=>{u(d)?J(ae):J(Q,!1)})}me(F,oe)},$$slots:{default:!0}}))};Xe(M,D=>{s()&&D($)})}var S=Se(M,2);{var P=D=>{var F=tt(),K=Oe(F);rt(K,()=>t.children),me(D,F)};Xe(S,D=>{t.children&&D(P)})}var V=Se(S,2);{var L=D=>{var F=tt(),K=Oe(F);rt(K,()=>t.after),me(D,F)};Xe(V,D=>{t.after&&D(L)})}me(v,C)},$$slots:{default:!0}})),Ae()}var Jt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Jt||(Jt={}));var V0=We("<circle></circle>");function X0(e,t){var n=V0();ze(()=>{_e(n,"cx",t.radius),_e(n,"cy",t.radius),_e(n,"r",t.radius),mt(n,0,St(["svelte-flow__background-pattern","dots",t.class]))}),me(e,n)}var W0=We("<path></path>");function F0(e,t){Me(t,!0);var n=W0();ze(()=>{_e(n,"stroke-width",t.lineWidth),_e(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),mt(n,0,St(["svelte-flow__background-pattern",t.variant,t.class]))}),me(e,n),Ae()}const B0={[Jt.Dots]:1,[Jt.Lines]:1,[Jt.Cross]:6};var K0=We('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function q0(e,t){Me(t,!0);let n=te(t,"variant",19,()=>Jt.Dots),r=te(t,"gap",3,20),i=te(t,"lineWidth",3,1);const o=Ct(),s=_(()=>n()===Jt.Dots),a=_(()=>n()===Jt.Cross),l=_(()=>Array.isArray(r())?r():[r(),r()]);let c=_(()=>`background-pattern-${o.flowId}-${t.id??""}`),d=_(()=>[u(l)[0]*o.viewport.zoom||1,u(l)[1]*o.viewport.zoom||1]),h=_(()=>(t.size??B0[n()])*o.viewport.zoom),f=_(()=>u(a)?[u(h),u(h)]:u(d)),g=_(()=>u(s)?[u(h)/2,u(h)/2]:[u(f)[0]/2,u(f)[1]/2]);var y=K0();let m;var p=Re(y),w=Re(p);{var z=A=>{const C=_(()=>u(h)/2);X0(A,{get radius(){return u(C)},get class(){return t.patternClass}})},x=A=>{F0(A,{get dimensions(){return u(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};Xe(w,A=>{u(s)?A(z):A(x,!1)})}var v=Se(p);ze(()=>{mt(y,0,St(["svelte-flow__background","svelte-flow__container",t.class])),m=lt(y,"",m,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),_e(p,"id",u(c)),_e(p,"x",o.viewport.x%u(d)[0]),_e(p,"y",o.viewport.y%u(d)[1]),_e(p,"width",u(d)[0]),_e(p,"height",u(d)[1]),_e(p,"patternTransform",`translate(-${u(g)[0]},-${u(g)[1]})`),_e(v,"fill",`url(#${u(c)})`)}),me(e,y),Ae()}var Z0=We("<rect></rect>");function G0(e,t){let n=te(t,"borderRadius",3,5),r=te(t,"strokeWidth",3,2);var i=Z0();let o,s;ze(a=>{o=mt(i,0,St(["svelte-flow__minimap-node",t.class]),null,o,a),_e(i,"x",t.x),_e(i,"y",t.y),_e(i,"rx",n()),_e(i,"ry",n()),_e(i,"width",t.width),_e(i,"height",t.height),_e(i,"shape-rendering",t.shapeRendering),s=lt(i,"",s,{fill:t.color,stroke:t.strokeColor,"stroke-width":r()})},[()=>({selected:t.selected})]),me(e,i)}function Zi(e,t){const n=Jg({domNode:e,panZoom:t.panZoom,getTransform:()=>{const{viewport:i}=t.store;return[i.x,i.y,i.zoom]},getViewScale:t.getViewScale});n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable});function r(i){n.update({translateExtent:i.translateExtent,width:i.width,height:i.height,inversePan:i.inversePan,zoomStep:i.zoomStep,pannable:i.pannable,zoomable:i.zoomable})}return{update:r,destroy(){n.destroy()}}}const Gi=e=>e instanceof Function?e:()=>e;var U0=We("<title> </title>"),Q0=We('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),J0=Te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function j0(e,t){Me(t,!0);let n=te(t,"position",3,"bottom-right"),r=te(t,"ariaLabel",3,"Mini map"),i=te(t,"nodeStrokeColor",3,"transparent"),o=te(t,"nodeClass",3,""),s=te(t,"nodeBorderRadius",3,5),a=te(t,"nodeStrokeWidth",3,2),l=te(t,"width",3,200),c=te(t,"height",3,150),d=te(t,"pannable",3,!0),h=te(t,"zoomable",3,!0),f=Yt(t,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),g=Ct();const y=t.nodeColor===void 0?void 0:Gi(t.nodeColor),m=Gi(i()),p=Gi(o()),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let z=_(()=>`svelte-flow__minimap-desc-${g.flowId}`),x=_(()=>({x:-g.viewport.x/g.viewport.zoom,y:-g.viewport.y/g.viewport.zoom,width:g.width/g.viewport.zoom,height:g.height/g.viewport.zoom})),v=_(()=>g.nodeLookup.size>0?El(_r(g.nodeLookup,{filter:D=>!D.hidden}),u(x)):u(x)),A=_(()=>u(v).width/l()),C=_(()=>u(v).height/c()),b=_(()=>Math.max(u(A),u(C))),H=_(()=>u(b)*l()),W=_(()=>u(b)*c()),q=_(()=>5*u(b)),k=_(()=>u(v).x-(u(H)-u(v).width)/2-u(q)),N=_(()=>u(v).y-(u(W)-u(v).height)/2-u(q)),M=_(()=>u(H)+u(q)*2),$=_(()=>u(W)+u(q)*2);const S=()=>u(b);var P=J0(),V=Oe(P);const L=_(()=>["svelte-flow__minimap",t.class]);yu(V,()=>({"--xy-minimap-background-color-props":t.bgColor})),ur(V.lastChild,Bt({get position(){return n()},get class(){return u(L)},"data-testid":"svelte-flow__minimap"},()=>f,{children:(D,F)=>{var K=tt(),oe=Oe(K);{var $e=ae=>{var Q=Q0();let J;var ie=Re(Q);{var ne=se=>{var T=U0(),O=Re(T);ze(()=>{_e(T,"id",u(z)),en(O,r())}),me(se,T)};Xe(ie,se=>{r()&&se(ne)})}var ve=Se(ie);_i(ve,17,()=>g.nodes,se=>se.id,(se,T)=>{var O=tt();const R=_(()=>g.nodeLookup.get(u(T).id));var X=Oe(O);{var Y=j=>{const G=_(()=>tn(u(R))),B=_(()=>y==null?void 0:y(u(R))),Z=_(()=>m(u(R))),re=_(()=>p(u(R)));G0(j,Bt({get x(){return u(R).internals.positionAbsolute.x},get y(){return u(R).internals.positionAbsolute.y}},()=>u(G),{get selected(){return u(R).selected},get color(){return u(B)},get borderRadius(){return s()},get strokeColor(){return u(Z)},get strokeWidth(){return a()},shapeRendering:w,get class(){return u(re)}}))};Xe(X,j=>{u(R)&&Sl(u(R))&&j(Y)})}me(se,O)});var fe=Se(ve);Ge(Q,(se,T)=>Zi==null?void 0:Zi(se,T),()=>({store:g,panZoom:g.panZoom,getViewScale:S,translateExtent:g.translateExtent,width:g.width,height:g.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:d(),zoomable:h()})),ze(()=>{_e(Q,"width",l()),_e(Q,"height",c()),_e(Q,"viewBox",`${u(k)??""} ${u(N)??""} ${u(M)??""} ${u($)??""}`),_e(Q,"aria-labelledby",u(z)),J=lt(Q,"",J,{"--xy-minimap-mask-background-color-props":t.maskColor,"--xy-minimap-mask-stroke-color-props":t.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":t.maskStrokeWidth?t.maskStrokeWidth*u(b):void 0}),_e(fe,"d",`M${u(k)-u(q)},${u(N)-u(q)}h${u(M)+u(q)*2}v${u($)+u(q)*2}h${-u(M)-u(q)*2}z
      M${u(x).x??""},${u(x).y??""}h${u(x).width??""}v${u(x).height??""}h${-u(x).width}z`)}),me(ae,Q)};Xe(oe,ae=>{g.panZoom&&ae($e)})}me(D,K)},$$slots:{default:!0}})),me(e,P),Ae()}var ev=Te("<div><!></div>");function tv(e,t){Me(t,!0);let n=te(t,"variant",19,()=>mn.Handle),r=te(t,"minWidth",3,10),i=te(t,"minHeight",3,10),o=te(t,"maxWidth",19,()=>Number.MAX_VALUE),s=te(t,"maxHeight",19,()=>Number.MAX_VALUE),a=te(t,"keepAspectRatio",3,!1),l=Yt(t,["$$slots","$$events","$$legacy","nodeId","position","variant","color","minWidth","minHeight","maxWidth","maxHeight","keepAspectRatio","shouldResize","onResizeStart","onResize","onResizeEnd","class","children"]);const c=Ct();let d=_(()=>typeof t.nodeId=="string"?t.nodeId:xn("svelteflow__node_id")),h,f=Ne(null),g=_(()=>{let z=n()===mn.Line?"right":"bottom-right";return t.position??z}),y=_(()=>u(g).split("-"));Ur(()=>(h&&U(f,h$({domNode:h,nodeId:u(d),getStoreItems:()=>({nodeLookup:c.nodeLookup,transform:[c.viewport.x,c.viewport.y,c.viewport.zoom],snapGrid:c.snapGrid??void 0,snapToGrid:!!c.snapGrid,nodeOrigin:c.nodeOrigin,paneDomNode:c.domNode}),onChange:(z,x)=>{const v=new Map;let A=z.x&&z.y?{x:z.x,y:z.y}:void 0;v.set(u(d),{...z,position:A});for(const C of x)v.set(C.id,{position:C.position});c.nodes=c.nodes.map(C=>{var H,W;const b=v.get(C.id);return b?{...C,position:{x:((H=b.position)==null?void 0:H.x)??C.position.x,y:((W=b.position)==null?void 0:W.y)??C.position.y},width:b.width??C.width,height:b.height??C.height}:C})}}),!0),()=>{var z;(z=u(f))==null||z.destroy()})),Eo(()=>{var z;(z=u(f))==null||z.update({controlPosition:u(g),boundaries:{minWidth:r(),minHeight:i(),maxWidth:o(),maxHeight:s()},keepAspectRatio:!!a(),onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeEnd:t.onResizeEnd,shouldResize:t.shouldResize})});var m=ev();let p;var w=Re(m);rt(w,()=>t.children??Rt),kt(m,z=>h=z,()=>h),ze(z=>p=fn(m,p,{class:z,...l,[wt]:{"border-color":n()===mn.Line?t.color:void 0,"background-color":n()===mn.Line?void 0:t.color}}),[()=>["svelte-flow__resize-control",c.noDragClass,...u(y),n(),t.class]]),me(e,m),Ae()}const Us=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),nn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),nv=(e,t={})=>{var n,r;return e.id in t?t[e.id]:{...e.position,width:e.width??((n=e.measured)==null?void 0:n.width)??0,height:e.height??((r=e.measured)==null?void 0:r.height)??0}},rv=e=>{const t={x:1/0,y:1/0},n={x:-1/0,y:-1/0};if(e.length===0)return{x:0,y:0,width:0,height:0};for(const r of e)t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),n.x=Math.max(n.x,r.x+r.width),n.y=Math.max(n.y,r.y+r.height);return{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}},$t=e=>e==null,iv=e=>/^-?\d+$/.test(e),Qs=e=>{let t=0;for(const n of Zn(e))if(iv(n.id)){const r=parseInt(n.id);r>t&&(t=r)}return t},ov=e=>e.toLowerCase().trim().replace(/[^\w]+/g,"-"),ci="My Graph",sv={type:"custom",sourcePosition:ke.Right,targetPosition:ke.Left},Ql={style:"stroke-width: 2px;",markerEnd:{type:ar.ArrowClosed,width:15,height:15},zIndex:1e4};function*Zn(e){var n;const t=[...e].reverse();for(;t.length;){const r=t.pop();if(yield r,(n=r.children)!=null&&n.length)for(let i=r.children.length-1;i>=0;i--)t.push(r.children[i])}}function Ui(e,t){for(let n=0;n<e.length;n++)t(e[n])&&e.splice(n,1);return e}class Tn{constructor(t,n,r=ci){Fe(this,"nodes");Fe(this,"edges");Fe(this,"title");this.nodes=t,this.edges=n,this.title=r}addNode(t,n){if($t(n)){this.nodes.push(t);return}const r=this.getNode(n);if(r===null){console.error("tried to create a node with bogus parent id",n);return}r==null||r.children.push(t)}refreshParentIds(){for(const t of this.nodes)t.parentId=void 0,this.refreshParentIdsUnderNode(t)}refreshParentIdsUnderNode(t){for(const n of t.children)n.parentId=t.id,this.refreshParentIdsUnderNode(n)}refreshCompletionStatus(){for(const t of this.nodes)this.refreshCompletionStatusUnderNode(t)}refreshCompletionStatusUnderNode(t){if(t.children.length===0){const i=t.completed?1:0;return t.completionStatus=i,i}let n=0;for(const i of t.children)n+=this.refreshCompletionStatusUnderNode(i);const r=n/t.children.length;return t.completionStatus=r,r}getCompletionStatus(t){var n;return this.refreshCompletionStatus(),((n=this.getNode(t))==null?void 0:n.completionStatus)??0}getNode(t){for(const n of Zn(this.nodes))if(n.id===t)return n;return null}getParent(t){for(const n of Zn(this.nodes))for(const r of n.children)if(r.id===t)return n;return null}updateNode(t,n){const r=this.getNode(t);if(r===null){console.error("tried to modify a node with bogus id",t);return}for(const i in n)r[i]=n[i]}deleteNode(t){if(this.getNode(t)===null){console.error("tried to delete a node with bogus id",t);return}const r=this.getParent(t);let i=this.nodes;r!==null&&(i=r.children),Ui(i,o=>o.id===t),this.edges=this.edges.filter(o=>o.source!==t&&o.target!==t)}addEdge(t){this.edges.push(t)}deleteEdge(t){Ui(this.edges,n=>n.id===t)}reparent(t,n,r){const i=this.getNode(r);if(i===null){console.error("tried to reparent",r,"but no node with that id exists");return}const o={...i};if($t(t))Ui(this.nodes,s=>s.id===r);else{const s=this.getNode(t);s!==null&&(s.children=s.children.filter(a=>a.id!==r))}if(n!==null){const s=this.getNode(n);s===null?console.error("tried to make",n,"the parent of",r,"but node",n,"does not exist"):s.children.push(o)}else this.nodes.push(o)}getIncomingNodes(t){const n=[];for(const r of this.edges)r.target===t&&n.push(r.source);return n}getOutgoingNodes(t){const n=[];for(const r of this.edges)r.source===t&&n.push(r.target);return n}isAncestor(t,n){var i,o;this.refreshParentIds();let r=(i=this.getNode(n))==null?void 0:i.parentId;for(;!$t(r);){if(r===t)return!0;r=(o=this.getNode(r))==null?void 0:o.parentId}return!1}isWorkable(t){this.refreshParentIds();const n=this.getNode(t);if(n&&n.completed)return!1;const r=this.getIncomingNodes(t);for(const i of r)if(!this.isCompletedOrParentCompleted(i))return!1;return n!=null&&n.parentId?this.isWorkable(n==null?void 0:n.parentId):!0}isCompletedOrParentCompleted(t){this.refreshParentIds();const n=this.getNode(t);return n?n.completed?!0:$t(n.parentId===null)?!1:this.isCompletedOrParentCompleted(n.parentId):!1}getDisplayState(t,n=1/0){const r={nodes:[],edges:[],title:this.title,description:"right-click to make a new node. left click to drag or edit nodes",backgroundColor:"#111"};this.refreshParentIds();const{nodes:i,edges:o}=this;if(t===null){r.nodes.push(...i.map(Yr));for(const a of i){const l=yo(a,n);r.nodes.push(...l.map(Yr))}}else{let a=!1;const l=Zn(i);for(const c of l)if(c.id===t){a=!0;const d=yo(c,n);console.log("nodesBelow",d),r.nodes.push(...d.map(Yr).map(h=>h.parentId===t?{...h,parentId:void 0}:h)),r.title=c.label,r.description=c.description,r.backgroundColor=c.backgroundColor;break}if(!a)return null}const s=vn(r.nodes);for(const a of o)(a.source in s||a.target in s)&&r.edges.push(jl(a));for(const a of r.nodes)this.isCompletedOrParentCompleted(a.id)&&(a.style="border-color: #49954aff"),this.isWorkable(a.id)&&(a.style="border-color: #f7c923ff;");return r}setTitle(t){this.title=t}getSerialized(){const t=new Tn(this.nodes,this.edges,this.title);for(const n of Zn(t.nodes))n.position={x:parseFloat(n.position.x.toFixed(2)),y:parseFloat(n.position.y.toFixed(2))};return t}}const yo=(e,t=1/0)=>{if(t<=0)return[];const n=[];n.push(...e.children);for(const r of e.children){const i=yo(r,t-1);n.push(...i)}return n},Yr=e=>{const{id:t,position:n,size:r,parentId:i}=e,{width:o,height:s}=r,a={id:t,position:n,parentId:i,measured:{width:o,height:s},data:{...e},...sv};return(!$t(e.lastManualResize)||e.children.length>0)&&(a.width=o,a.height=s),delete a.data.children,a},av=e=>{const{id:t,position:n,measured:r,height:i,width:o,data:s}=e;return{id:t,position:n,children:[],size:{width:o??(r==null?void 0:r.width),height:i??(r==null?void 0:r.height)},...s}},Jl=e=>{console.log("displayStateToGraph");const t=new Map,n=new Tn([],[],e.title);for(const r of e.nodes){const i=av(r);i.position=nn(i.position,{x:i.size.width/2,y:i.size.height/2}),t.set(r.id,i)}for(const r of e.nodes){const i=t.get(r.id);if(r.parentId==null)n.nodes.push(i);else{const o=t.get(r.parentId);o&&o.children.push(i)}}return n.edges=[...e.edges.map(ec)],n},vn=e=>{const t={};for(const n of e)t[n.id]=n;return t},jl=e=>({...e,...Ql}),ec=e=>{const{source:t,target:n,id:r}=e;return{source:t,target:n,id:r}},Wo=new Map;function lv(e,t){Wo.set(e,t)}function cv(e){Wo.delete(e)}function uv(e){return Wo.get(e)}const dv=(e,t,n,r)=>{Ke.graph.updateNode(t.id,{completed:u(n)}),r(t.id,{completed:u(n)}),Ke.refresh()};var fv=We('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" stroke-width="2" stroke="rgb(200, 200, 200)" fill="none" stroke-linecap="round" stroke-linejoin="round" style="position: absolute; right: 5px; bottom: 5px;"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><polyline points="16 20 20 20 20 16"></polyline><line x1="14" y1="14" x2="20" y2="20"></line><polyline points="8 4 4 4 4 8"></polyline><line x1="4" y1="4" x2="10" y2="10"></line></svg>'),hv=Te('<div class="control-panel"><input type="checkbox" title="mark completed/incomplete"></div> <div><!> <div class="sf-node"><div class="sf-node__label" contenteditable="true" spellcheck="false"> </div></div> <!> <!></div>',1);function gv(e,t){Me(t,!0);let n=te(t,"data",7);const{updateNodeData:r}=Xo();let i;Ur(()=>{lv(t.id,i)}),mr(()=>{cv(t.id)});let o,s=Ne(qe(n().completed));const a=()=>Ke.graph.isCompletedOrParentCompleted(t.id)?"opacity: 30%":"opacity: 100%",l=()=>{n().label=o.innerText,Ke.graph.updateNode(t.id,{label:n().label}),r(t.id,{label:n().label}),Ke.resizeNodeToEncapsulateChildren(t.parentId,{}),Ke.refresh()},c=()=>{n().label=o.innerText},d=(C,b)=>{const H={width:b.width,height:b.height};Ke.graph.updateNode(t.id,{lastManualResize:H,size:H}),Ke.resizeNodeToEncapsulateChildren(t.parentId,{})};Ur(()=>{o.addEventListener("focus",()=>{const C=window.getSelection(),b=document.createRange();b.selectNodeContents(o),b.collapse(!1),C.removeAllRanges(),C.addRange(b)})});const h=C=>{C.stopPropagation()};var f=hv(),g=Oe(f),y=Re(g);y.__change=[dv,t,s,r];var m=Se(g,2),p=Re(m);zn(p,{type:"target",get position(){return ke.Left},get isConnectable(){return t.isConnectable}});var w=Se(p,2),z=Re(w);z.__input=c;var x=Re(z);kt(z,C=>o=C,()=>o),kt(w,C=>i=C,()=>i);var v=Se(w,2);tv(v,{onResizeEnd:d,class:"node-hover",title:"resize",minWidth:100,minHeight:5,style:"background: transparent; border: none;",children:(C,b)=>{var H=fv();me(C,H)},$$slots:{default:!0}});var A=Se(v,2);zn(A,{type:"source",get position(){return ke.Right},get isConnectable(){return t.isConnectable}}),ze(C=>{lt(m,C),en(x,n().label)},[a]),Pu(y,()=>u(s),C=>U(s,C)),Qe("blur",z,l),Qe("mousedown",z,h,!0),Qe("mouseup",z,h,!0),Qe("click",z,h,!0),Qe("keydown",z,h,!0),Qe("compositionstart",z,h,!0),Qe("compositionend",z,h,!0),me(e,f),Ae()}dn(["change","input"]);const tc="graph",Vr=(e,t=tc)=>{console.log("saveGraphToLocalStorage"),localStorage.setItem(t,JSON.stringify(e,null,2))},$v=(e=tc)=>{var r;let t;const n={nodes:[],edges:[]};try{const i=localStorage.getItem(e),o=i?JSON.parse(i):n;t=new Tn(o.nodes,o.edges.map(ec),o.title??ci),o.nodes.length>0&&$t((r=o.nodes[0])==null?void 0:r.children)&&(t=Jl(o),Vr(t))}catch{t=new Tn([],[],ci)}return t};var vv=Te('<h1 class="title svelte-xojg15" contenteditable="true" spellcheck="false"> </h1>'),yv=(e,t,n)=>t(u(n).getSerialized(),ov(u(n).title)+".json"),mv=Te("<button>💾 Export</button> <button>📂 Import</button> <button>Clear</button>",1),pv=Te("<!> <!> <!> <!> <!>",1),wv=Te('<input type="file" accept="application/json" style="display: none;"> <!>',1);function bv(e,t){Me(t,!0);const{deleteElements:n,screenToFlowPosition:r,getIntersectingNodes:i,updateNode:o,getZoom:s,getNodesBounds:a,fitView:l}=Xo();let c="dark";const d={custom:gv};let h=Ne($v()),f=Ne(null),g=Qs(u(h).nodes)+1;const y=()=>`${g++}`;let m=u(h).getDisplayState(u(f));console.log("graph",u(h)),console.log("displayState",m);let p=Ne(m.nodes),w=Ne(m.edges),z=Ne(m.title),x=Ne(m.description),v;const A=()=>{(u(h).nodes.length>0||u(h).edges.length>0)&&!window.confirm("You have unsaved changes - importing from a file will discard them. Continue?")||v.click()};let C=Ne(!1);const b=T=>{u(C)&&(T.preventDefault(),T.returnValue="")},H=async()=>{console.log("refresh"),Vr(u(h)),U(C,!1);const T={};for(const O of u(p))O.selected&&(T[O.id]=!0);await n(m),m=u(h).getDisplayState(u(f)),console.log(u(h)),console.log("displayState",m),U(p,m.nodes),U(w,m.edges),U(z,m.title),U(x,m.description);for(const O in T)o(O,{selected:!0})},W=async T=>{var R;const[O]=T.target.files;if(O)try{const X=await O.text();let Y=JSON.parse(X);Y.nodes.length>0&&$t((R=Y.nodes[0])==null?void 0:R.children)&&(Y=Jl(Y)),u(h).nodes=Y.nodes,u(h).edges=Y.edges,u(h).title=Y.title??ci,g=Qs(u(h).nodes)+1,U(f,null),U(C,!1),await H().then(()=>l())}catch(X){console.error("Failed to load/parse JSON",X)}finally{T.target.value=""}},q=(T,O="graph-project.json")=>{const R=JSON.stringify(T),X=new Blob([R],{type:"application/json"}),Y=URL.createObjectURL(X),j=document.createElement("a");j.download=O,j.href=Y,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(Y),U(C,!1)},k=(T,O,R=null)=>{const X=r({x:T,y:O}),Y=1e-5,j={...X,width:Y,height:Y},G=i(j);let B=u(f);for(const Z of G){if(Z.id===R)continue;let re=!1;for(const ee of G)if(ee.id!==R&&ee!=null&&ee.parentId&&(ee==null?void 0:ee.parentId)===Z.id){re=!0;break}if(!re){B=Z;break}}return B},N=(T,O)=>{const X=vn(m.nodes)[O];return X?(console.log(T,O,X.position),X.parentId===null||X.parentId===void 0?nn(T,X.position):N(nn(T,X.position),X.parentId)):T},M=(T,O)=>{const X=vn(m.nodes)[O];return X?X.parentId===null||X.parentId===void 0?Us(T,X.position):M(Us(T,X.position),X.parentId):T},$=(T,O,R)=>{let X=k(O,R),Y=r({x:O,y:R});X&&(Y=N(Y,X.id));const j=ee=>50+7*(ee.length-5),G=`Task ${T}`,B={width:j(G),height:36};Y=nn(Y,{x:B.width/2,y:B.height/2});const Z={id:T,children:[],label:G,completed:!1,lastManualResize:null,size:B,backgroundColor:"#111",position:Y};u(h).addNode(Z,X==null?void 0:X.id);const re={};return re[T]={...Y,...B},X&&ae(X.id,{...vn(u(p)),[T]:{...Yr(Z),parentId:X.id}},re),Z},S=(T,O)=>({source:T,target:O,id:`${T}->${O}`}),P=T=>!1,V=(T,O)=>{var ce,ue,de;console.log("handleConnectEnd"),U(C,!0);const R=((ce=O.fromHandle)==null?void 0:ce.type)==="source",X=((ue=O.fromNode)==null?void 0:ue.id)??"1",Y=(de=O.toNode)==null?void 0:de.id,{clientX:j,clientY:G}="changedTouches"in T?T.changedTouches[0]:T,B=y();let Z=X,re=Y;if($t(Y)&&($(B,j,G),re=B),!R){const he=Z;Z=re,re=he}const ee=S(Z,re);u(h).addEdge(ee),m.edges=[...m.edges,jl(ee)],H()},L=(T,O=u(f))=>{console.log("handleNodeDragStop",T.nodes[0].id),U(C,!0);const{clientX:R,clientY:X}=T==null?void 0:T.event,Y=T.targetNode,j=k(R,X,Y.id),G=Y.parentId,B=(j==null?void 0:j.id)??O;if((j==null?void 0:j.id)===Y.id||u(h).isAncestor(Y.id,j==null?void 0:j.id))return;let Z=M(Y.position,Y.parentId);j&&(Z=N(Z,j.id)),o(Y.id,{position:Z,parentId:B}),u(h).reparent(G,B,Y.id),u(h).refreshParentIds(),u(h).updateNode(Y.id,{position:Z});const re=vn(u(p));$t(G)||ae(G,re),!$t(B)&&B!==G&&ae(B,re),H()},D=({event:T})=>{console.log("handlePaneContextMenu"),U(C,!0),T.preventDefault();const{clientX:O,clientY:R}=T,X=y();$(X,O,R),H()},F=({event:T})=>{console.log("handleNodeContextMenu"),U(C,!0),T.preventDefault();const{clientX:O,clientY:R}=T,X=y();$(X,O,R),H()},K=()=>{(u(h).nodes.length>0||u(h).edges.length>0)&&!window.confirm("Clear entire graph?")||(U(h,new Tn([],[])),g=1,Ke.graph=u(h),H())},oe=async({nodes:T,edges:O})=>{for(const R of T)u(h).deleteNode(R.id),ae(R.parentId,{});for(const R of O)u(h).deleteEdge(R.id);return H(),!0},$e=T=>{const O=uv(T);if(!O)return;const R=O.getBoundingClientRect(),X=s();return{width:Math.round(R.width/X),height:Math.round(R.height/X)}},ae=(T,O,R={})=>{if(console.log("resizing",T,{...R}),Object.keys(O).length===0&&(O=vn(u(p))),!(T in O))return;const X=$e(T),Y=O[T],j=[];for(const xe in O){const Ee=O[xe];(Ee==null?void 0:Ee.parentId)===T&&j.push(Ee)}const G=j.map(xe=>nv(xe,R)).map(xe=>({...xe,...M(xe,T)})),B=20,Z=rv(G),re=X.width/Z.width,ee=10,ce=14;let ue=ce;Z.width>0&&(ue=Math.max(ce,X.height*re));const de={width:Z.width,height:ue};let he={x:Z.x,y:Z.y-de.height-ee,width:Z.width,height:Z.height+de.height+ee};if(j.length===0){const xe=M(Y.position,Y==null?void 0:Y.parentId);he={x:xe.x+Y.measured.width/2,y:xe.y+Y.measured.height/2,width:de.width,height:de.height+ee}}const be=a(j);console.log("bounds (reported from svelteflow)",be),console.log("childBounds (estimated, should match svelteflow)",Z),console.log("total contentBounds (children + node label)",he);const ge={width:he.width+2*B,height:he.height+2*B};console.log("new size",ge),console.log("labelSize",X),console.log("newLabelSize",de);const pe=u(h).getNode(T);if(pe){const xe=pe.lastManualResize;xe&&(ge.width=Math.max(ge.width,xe.width),ge.height=Math.max(ge.height,xe.height))}const we=nn({x:he.x,y:he.y},{x:B,y:B}),ye=N(we,Y==null?void 0:Y.parentId);console.log("parent's position has changed from",Y.position,"to",ye,"(",we,")");const Pe=nn(ye,Y.position);console.log("parent has moved by ",Pe),o(Y.id,{...ge,position:ye}),u(h).updateNode(Y.id,{size:ge,position:ye}),R[Y.id]={...ye,...ge};for(const xe of j){let Ee=xe.position;xe.id in R&&(Ee={...R[xe.id]});const Ce=nn(Ee,Pe);o(xe.id,{position:Ce}),u(h).updateNode(xe.id,{position:Ce})}$t(pe.parentId)||ae(pe.parentId,O,R)},Q=T=>{U(f,T),H().then(()=>{l()})};let J;const ie=()=>{u(h).setTitle(J.innerText),Vr(u(h))},ne=()=>{U(z,J.innerText),u(h).setTitle(J.innerText),Vr(u(h))};Ke.refresh=H,Ke.graph=u(h),Ke.setFocusedNode=Q,Ke.resizeNodeToEncapsulateChildren=ae,Ht(()=>{Ke.refresh=H,Ke.graph=u(h),Ke.setFocusedNode=Q,Ke.resizeNodeToEncapsulateChildren=ae});var ve=wv();Qe("beforeunload",Ze,b);var fe=Oe(ve);fe.__change=W,kt(fe,T=>v=T,()=>v);var se=Se(fe,2);E0(se,{get colorMode(){return c},nodeTypes:d,defaultEdgeOptions:Ql,fitView:!0,onconnectend:V,onnodedragstop:L,onpanecontextmenu:D,onnodecontextmenu:F,ondelete:oe,isValidConnection:P,minZoom:.2,maxZoom:6,get nodes(){return u(p)},set nodes(T){U(p,T)},get edges(){return u(w)},set edges(T){U(w,T)},children:(T,O)=>{var R=pv(),X=Oe(R);ur(X,{position:"top-center",class:"titlebar","aria-hidden":"true",children:(Z,re)=>{var ee=vv();ee.__input=ie;var ce=Re(ee);kt(ee,ue=>J=ue,()=>J),ze(()=>en(ce,u(z))),Qe("blur",ee,ne),me(Z,ee)},$$slots:{default:!0}});var Y=Se(X,2);q0(Y,{});var j=Se(Y,2);Y0(j,{});var G=Se(j,2);j0(G,{});var B=Se(G,2);ur(B,{style:"display:flex; flex-direction: column; gap:2px;",children:(Z,re)=>{var ee=mv(),ce=Oe(ee);ce.__click=[yv,q,h];var ue=Se(ce,2);ue.__click=A;var de=Se(ue,2);de.__click=K,me(Z,ee)},$$slots:{default:!0}}),me(T,R)},$$slots:{default:!0}}),me(e,ve),Ae()}dn(["change","input","click"]);const Ke=qe({refresh:null,graph:null,setFocusedNode:null,resizeNodeToEncapsulateChildren:null});function _v(e){S0(e,{children:(t,n)=>{bv(t,{})},$$slots:{default:!0}})}gu(_v,{target:document.getElementById("app")});
