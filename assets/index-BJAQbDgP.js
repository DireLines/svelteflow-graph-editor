var fc=Object.defineProperty;var es=e=>{throw TypeError(e)};var hc=(e,t,n)=>t in e?fc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fe=(e,t,n)=>hc(e,typeof t!="symbol"?t+"":t,n),Li=(e,t,n)=>t.has(e)||es("Cannot "+n);var z=(e,t,n)=>(Li(e,t,"read from private field"),n?n.call(e):t.get(e)),ce=(e,t,n)=>t.has(e)?es("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Wn=(e,t,n,r)=>(Li(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ts=(e,t,n)=>(Li(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ns=!1;var gi=Array.isArray,gc=Array.prototype.indexOf,_o=Array.from,$c=Object.defineProperty,Ut=Object.getOwnPropertyDescriptor,sa=Object.getOwnPropertyDescriptors,aa=Object.prototype,vc=Array.prototype,$i=Object.getPrototypeOf,rs=Object.isExtensible;function Fn(e){return typeof e=="function"}const Lt=()=>{};function yc(e){return e()}function Fr(e){for(var t=0;t<e.length;t++)e[t]()}const vt=2,la=4,vi=8,xo=16,Yt=32,Dn=64,Br=128,lt=256,Kr=512,ot=1024,_t=2048,hn=4096,Tt=8192,yi=16384,mc=32768,vr=65536,pc=1<<17,wc=1<<19,ca=1<<20,to=1<<21,Jt=Symbol("$state"),ua=Symbol("legacy props"),bc=Symbol("");function da(e){return e===this.v}function fa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ko(e){return!fa(e,this.v)}function _c(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Sc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ec(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Pc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Cc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Nc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Rn=!1,Mc=!1;function Ic(){Rn=!0}const So=1,Eo=2,ha=4,Ac=8,zc=16,Tc=1,Hc=2,Oc=4,Dc=8,Rc=16,ga=1,Lc=2,je=Symbol(),Yc="http://www.w3.org/1999/xhtml",Vc="@attach",Xc=[];function $a(e,t=!1){return Or(e,new Map,"",Xc)}function Or(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(gi(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var a=0;a<e.length;a+=1){var l=e[a];a in e&&(s[a]=Or(l,t,n,r))}return s}if($i(e)===aa){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=Or(e[c],t,n,r);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Or(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function Po(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Re=null;function is(e){Re=e}function En(e){return va().get(e)}function jn(e,t){return va().set(e,t),t}function Ie(e,t=!1,n){var r=Re={p:Re,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Rn&&!t&&(Re.l={s:null,u:null,r1:[],r2:Cn(!1)}),Co(()=>{r.d=!0})}function Ae(e){const t=Re;if(t!==null){const s=t.e;if(s!==null){var n=Ve,r=Le;t.e=null;try{for(var i=0;i<s.length;i++){var o=s[i];en(o.effect),xt(o.reaction),Yn(o.fn)}}finally{en(n),xt(r)}}Re=t.p,t.m=!0}return{}}function mi(){return!Rn||Re!==null&&Re.l===null}function va(e){return Re===null&&Po(),Re.c??(Re.c=new Map(Wc(Re)||void 0))}function Wc(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function qe(e){if(typeof e!="object"||e===null||Jt in e)return e;const t=$i(e);if(t!==aa&&t!==vc)return e;var n=new Map,r=gi(e),i=Me(0),o=Le,s=a=>{var l=Le;xt(o);var c=a();return xt(l),c};return r&&n.set("length",Me(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Pc();var d=n.get(l);return d===void 0?(d=s(()=>Me(c.value)),n.set(l,d)):j(d,s(()=>qe(c.value))),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0)l in a&&(n.set(l,s(()=>Me(je))),Yi(i));else{if(r&&typeof l=="string"){var d=n.get("length"),h=Number(l);Number.isInteger(h)&&h<d.v&&j(d,h)}j(c,je),Yi(i)}return!0},get(a,l,c){var g;if(l===Jt)return e;var d=n.get(l),h=l in a;if(d===void 0&&(!h||(g=Ut(a,l))!=null&&g.writable)&&(d=s(()=>Me(qe(h?a[l]:je))),n.set(l,d)),d!==void 0){var f=u(d);return f===je?void 0:f}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=n.get(l);d&&(c.value=u(d))}else if(c===void 0){var h=n.get(l),f=h==null?void 0:h.v;if(h!==void 0&&f!==je)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(a,l){var f;if(l===Jt)return!0;var c=n.get(l),d=c!==void 0&&c.v!==je||Reflect.has(a,l);if(c!==void 0||Ve!==null&&(!d||(f=Ut(a,l))!=null&&f.writable)){c===void 0&&(c=s(()=>Me(d?qe(a[l]):je)),n.set(l,c));var h=u(c);if(h===je)return!1}return d},set(a,l,c,d){var T;var h=n.get(l),f=l in a;if(r&&l==="length")for(var g=c;g<h.v;g+=1){var y=n.get(g+"");y!==void 0?j(y,je):g in a&&(y=s(()=>Me(je)),n.set(g+"",y))}h===void 0?(!f||(T=Ut(a,l))!=null&&T.writable)&&(h=s(()=>Me(void 0)),j(h,s(()=>qe(c))),n.set(l,h)):(f=h.v!==je,j(h,s(()=>qe(c))));var m=Reflect.getOwnPropertyDescriptor(a,l);if(m!=null&&m.set&&m.set.call(d,c),!f){if(r&&typeof l=="string"){var w=n.get("length"),b=Number(l);Number.isInteger(b)&&b>=w.v&&j(w,b+1)}Yi(i)}return!0},ownKeys(a){u(i);var l=Reflect.ownKeys(a).filter(h=>{var f=n.get(h);return f===void 0||f.v!==je});for(var[c,d]of n)d.v!==je&&!(c in a)&&l.push(c);return l},setPrototypeOf(){Cc()}})}function Yi(e,t=1){j(e,e.v+t)}function Pn(e){var t=vt|_t,n=Le!==null&&(Le.f&vt)!==0?Le:null;return Ve===null||n!==null&&(n.f&lt)!==0?t|=lt:Ve.f|=ca,{ctx:Re,deps:null,effects:null,equals:da,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??Ve}}function _(e){const t=Pn(e);return za(t),t}function ya(e){const t=Pn(e);return t.equals=ko,t}function ma(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Dt(t[n])}}function Fc(e){for(var t=e.parent;t!==null;){if((t.f&vt)===0)return t;t=t.parent}return null}function pa(e){var t,n=Ve;en(Fc(e));try{ma(e),t=Da(e)}finally{en(n)}return t}function wa(e){var t=pa(e),n=(Gt||(e.f&lt)!==0)&&e.deps!==null?hn:ot;yt(e,n),e.equals(t)||(e.v=t,e.wv=Ha())}const er=new Map;function Cn(e,t){var n={f:0,v:e,reactions:null,equals:da,rv:0,wv:0};return n}function Me(e,t){const n=Cn(e);return za(n),n}function ba(e,t=!1){var r;const n=Cn(e);return t||(n.equals=ko),Rn&&Re!==null&&Re.l!==null&&((r=Re.l).s??(r.s=[])).push(n),n}function j(e,t,n=!1){Le!==null&&!ht&&mi()&&(Le.f&(vt|xo))!==0&&!(Je!=null&&Je.includes(e))&&Nc();let r=n?qe(t):t;return no(e,r)}function no(e,t){if(!e.equals(t)){var n=e.v;mr?er.set(e,t):er.set(e,n),e.v=t,(e.f&vt)!==0&&((e.f&_t)!==0&&pa(e),yt(e,(e.f&lt)===0?ot:hn)),e.wv=Ha(),_a(e,_t),mi()&&Ve!==null&&(Ve.f&ot)!==0&&(Ve.f&(Yt|Dn))===0&&(dt===null?tu([e]):dt.push(e))}return t}function _a(e,t){var n=e.reactions;if(n!==null)for(var r=mi(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;(a&_t)===0&&(!r&&s===Ve||(yt(s,t),(a&(ot|lt))!==0&&((a&vt)!==0?_a(s,hn):xi(s))))}}let Bc=!1;var et,xa,ka,Sa;function Kc(){if(et===void 0){et=window,xa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ka=Ut(t,"firstChild").get,Sa=Ut(t,"nextSibling").get,rs(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),rs(n)&&(n.__t=void 0)}}function pi(e=""){return document.createTextNode(e)}function It(e){return ka.call(e)}function wi(e){return Sa.call(e)}function Oe(e,t){return It(e)}function De(e,t){{var n=It(e);return n instanceof Comment&&n.data===""?wi(n):n}}function Ee(e,t=1,n=!1){let r=e;for(;t--;)r=wi(r);return r}function qc(e){e.textContent=""}function Ea(e){Ve===null&&Le===null&&kc(),Le!==null&&(Le.f&lt)!==0&&Ve===null&&xc(),mr&&_c()}function Zc(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ln(e,t,n,r=!0){var i=Ve,o={ctx:Re,deps:null,nodes_start:null,nodes_end:null,f:e|_t,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{Io(o),o.f|=mc}catch(l){throw Dt(o),l}else t!==null&&xi(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(ca|Br))===0;if(!s&&r&&(i!==null&&Zc(o,i),Le!==null&&(Le.f&vt)!==0)){var a=Le;(a.effects??(a.effects=[])).push(o)}return o}function Gc(){return Le!==null&&!ht}function Co(e){const t=Ln(vi,null,!1);return yt(t,ot),t.teardown=e,t}function Ot(e){Ea();var t=Ve!==null&&(Ve.f&Yt)!==0&&Re!==null&&!Re.m;if(t){var n=Re;(n.e??(n.e=[])).push({fn:e,effect:Ve,reaction:Le})}else{var r=Yn(e);return r}}function No(e){return Ea(),Vn(e)}function Uc(e){const t=Ln(Dn,e,!0);return(n={})=>new Promise(r=>{n.outro?tr(t,()=>{Dt(t),r(void 0)}):(Dt(t),r(void 0))})}function Yn(e){return Ln(la,e,!1)}function Vn(e){return Ln(vi,e,!0)}function ze(e,t=[],n=Pn){const r=t.map(n);return yr(()=>e(...r.map(u)))}function yr(e,t=0){return Ln(vi|xo|t,e,!0)}function ln(e,t=!0){return Ln(vi|Yt,e,!0,t)}function Pa(e){var t=e.teardown;if(t!==null){const n=mr,r=Le;os(!0),xt(null);try{t.call(null)}finally{os(n),xt(r)}}}function Ca(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&Dn)!==0?n.parent=null:Dt(n,t),n=r}}function Jc(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Yt)===0&&Dt(t),t=n}}function Dt(e,t=!0){var n=!1;(t||(e.f&wc)!==0)&&e.nodes_start!==null&&(Qc(e.nodes_start,e.nodes_end),n=!0),Ca(e,t&&!n),Jr(e,0),yt(e,yi);var r=e.transitions;if(r!==null)for(const o of r)o.stop();Pa(e);var i=e.parent;i!==null&&i.first!==null&&Na(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Qc(e,t){for(;e!==null;){var n=e===t?null:wi(e);e.remove(),e=n}}function Na(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function tr(e,t){var n=[];Mo(e,n,!0),Ma(n,()=>{Dt(e),t&&t()})}function Ma(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Mo(e,t,n){if((e.f&Tt)===0){if(e.f^=Tt,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&vr)!==0||(r.f&Yt)!==0;Mo(r,t,o?n:!1),r=i}}}function qr(e){Ia(e,!0)}function Ia(e,t){if((e.f&Tt)!==0){e.f^=Tt,(e.f&ot)===0&&(e.f^=ot),pr(e)&&(yt(e,_t),xi(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&vr)!==0||(n.f&Yt)!==0;Ia(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let nr=[],ro=[];function Aa(){var e=nr;nr=[],Fr(e)}function jc(){var e=ro;ro=[],Fr(e)}function bi(e){nr.length===0&&queueMicrotask(Aa),nr.push(e)}function eu(){nr.length>0&&Aa(),ro.length>0&&jc()}let Dr=!1,Zr=!1,Gr=null,sn=!1,mr=!1;function os(e){mr=e}let Jn=[];let Le=null,ht=!1;function xt(e){Le=e}let Ve=null;function en(e){Ve=e}let Je=null;function za(e){Le!==null&&Le.f&to&&(Je===null?Je=[e]:Je.push(e))}let Ge=null,st=0,dt=null;function tu(e){dt=e}let Ta=1,Ur=0,Gt=!1;function Ha(){return++Ta}function pr(e){var h;var t=e.f;if((t&_t)!==0)return!0;if((t&hn)!==0){var n=e.deps,r=(t&lt)!==0;if(n!==null){var i,o,s=(t&Kr)!==0,a=r&&Ve!==null&&!Gt,l=n.length;if(s||a){var c=e,d=c.parent;for(i=0;i<l;i++)o=n[i],(s||!((h=o==null?void 0:o.reactions)!=null&&h.includes(c)))&&(o.reactions??(o.reactions=[])).push(c);s&&(c.f^=Kr),a&&d!==null&&(d.f&lt)===0&&(c.f^=lt)}for(i=0;i<l;i++)if(o=n[i],pr(o)&&wa(o),o.wv>e.wv)return!0}(!r||Ve!==null&&!Gt)&&yt(e,ot)}return!1}function nu(e,t){for(var n=t;n!==null;){if((n.f&Br)!==0)try{n.fn(e);return}catch{n.f^=Br}n=n.parent}throw Dr=!1,e}function ss(e){return(e.f&yi)===0&&(e.parent===null||(e.parent.f&Br)===0)}function _i(e,t,n,r){if(Dr){if(n===null&&(Dr=!1),ss(t))throw e;return}if(n!==null&&(Dr=!0),nu(e,t),ss(t))throw e}function Oa(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];Je!=null&&Je.includes(e)||((o.f&vt)!==0?Oa(o,t,!1):t===o&&(n?yt(o,_t):(o.f&ot)!==0&&yt(o,hn),xi(o)))}}function Da(e){var g;var t=Ge,n=st,r=dt,i=Le,o=Gt,s=Je,a=Re,l=ht,c=e.f;Ge=null,st=0,dt=null,Gt=(c&lt)!==0&&(ht||!sn||Le===null),Le=(c&(Yt|Dn))===0?e:null,Je=null,is(e.ctx),ht=!1,Ur++,e.f|=to;try{var d=(0,e.fn)(),h=e.deps;if(Ge!==null){var f;if(Jr(e,st),h!==null&&st>0)for(h.length=st+Ge.length,f=0;f<Ge.length;f++)h[st+f]=Ge[f];else e.deps=h=Ge;if(!Gt)for(f=st;f<h.length;f++)((g=h[f]).reactions??(g.reactions=[])).push(e)}else h!==null&&st<h.length&&(Jr(e,st),h.length=st);if(mi()&&dt!==null&&!ht&&h!==null&&(e.f&(vt|hn|_t))===0)for(f=0;f<dt.length;f++)Oa(dt[f],e);return i!==null&&i!==e&&(Ur++,dt!==null&&(r===null?r=dt:r.push(...dt))),d}finally{Ge=t,st=n,dt=r,Le=i,Gt=o,Je=s,is(a),ht=l,e.f^=to}}function ru(e,t){let n=t.reactions;if(n!==null){var r=gc.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&vt)!==0&&(Ge===null||!Ge.includes(t))&&(yt(t,hn),(t.f&(lt|Kr))===0&&(t.f^=Kr),ma(t),Jr(t,0))}function Jr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ru(e,n[r])}function Io(e){var t=e.f;if((t&yi)===0){yt(e,ot);var n=Ve,r=Re,i=sn;Ve=e,sn=!0;try{(t&xo)!==0?Jc(e):Ca(e),Pa(e);var o=Da(e);e.teardown=typeof o=="function"?o:null,e.wv=Ta;var s=e.deps,a;ns&&Mc&&e.f&_t}catch(l){_i(l,e,n,r||e.ctx)}finally{sn=i,Ve=n}}}function iu(){try{Sc()}catch(e){if(Gr!==null)_i(e,Gr,null);else throw e}}function Ra(){var e=sn;try{var t=0;for(sn=!0;Jn.length>0;){t++>1e3&&iu();var n=Jn,r=n.length;Jn=[];for(var i=0;i<r;i++){var o=su(n[i]);ou(o)}er.clear()}}finally{Zr=!1,sn=e,Gr=null}}function ou(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(yi|Tt))===0)try{pr(r)&&(Io(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Na(r):r.fn=null))}catch(i){_i(i,r,null,r.ctx)}}}function xi(e){Zr||(Zr=!0,queueMicrotask(Ra));for(var t=Gr=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Dn|Yt))!==0){if((n&ot)===0)return;t.f^=ot}}Jn.push(t)}function su(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(Yt|Dn))!==0,o=i&&(r&ot)!==0;if(!o&&(r&Tt)===0){if((r&la)!==0)t.push(n);else if(i)n.f^=ot;else try{pr(n)&&Io(n)}catch(l){_i(l,n,null,n.ctx)}var s=n.first;if(s!==null){n=s;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}return t}function au(e){for(var t;;){if(eu(),Jn.length===0)return t;Zr=!0,Ra()}}async function lu(){await Promise.resolve(),au()}function u(e){var t=e.f,n=(t&vt)!==0;if(Le!==null&&!ht){if(!(Je!=null&&Je.includes(e))){var r=Le.deps;e.rv<Ur&&(e.rv=Ur,Ge===null&&r!==null&&r[st]===e?st++:Ge===null?Ge=[e]:(!Gt||!Ge.includes(e))&&Ge.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&lt)===0&&(i.f^=lt)}return n&&(i=e,pr(i)&&wa(i)),mr&&er.has(e)?er.get(e):e.v}function Ue(e){var t=ht;try{return ht=!0,e()}finally{ht=t}}const cu=-7169;function yt(e,t){e.f=e.f&cu|t}function La(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Jt in e)io(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Jt in n&&io(n)}}}function io(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{io(e[r],t)}catch{}const n=$i(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=sa(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function uu(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const du=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function fu(e){return du.includes(e)}const hu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function gu(e){return e=e.toLowerCase(),hu[e]??e}const $u=["touchstart","touchmove"];function vu(e){return $u.includes(e)}function yu(e,t){if(t){const n=document.body;e.autofocus=!0,bi(()=>{document.activeElement===n&&e.focus()})}}let as=!1;function mu(){as||(as=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Ya(e){var t=Le,n=Ve;xt(null),en(null);try{return e()}finally{xt(t),en(n)}}function pu(e,t,n,r=n){e.addEventListener(t,()=>Ya(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),mu()}const Va=new Set,oo=new Set;function Ao(e,t,n,r={}){function i(o){if(r.capture||qn.call(t,o),!o.cancelBubble)return Ya(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?bi(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function so(e,t,n,r={}){var i=Ao(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function tt(e,t,n,r,i){var o={capture:r,passive:i},s=Ao(e,t,n,o);(t===document.body||t===window||t===document)&&Co(()=>{t.removeEventListener(e,s,o)})}function gn(e){for(var t=0;t<e.length;t++)Va.add(e[t]);for(var n of oo)n(e)}function qn(e){var T;var t=this,n=t.ownerDocument,r=e.type,i=((T=e.composedPath)==null?void 0:T.call(e))||[],o=i[0]||e.target,s=0,a=e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){$c(e,"currentTarget",{configurable:!0,get(){return o||n}});var d=Le,h=Ve;xt(null),en(null);try{for(var f,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];if(m!=null&&(!o.disabled||e.target===o))if(gi(m)){var[w,...b]=m;w.apply(o,[e,...b])}else m.call(o,e)}catch(x){f?g.push(x):f=x}if(e.cancelBubble||y===t||y===null)break;o=y}if(f){for(let x of g)queueMicrotask(()=>{throw x});throw f}}finally{e.__root=t,delete e.currentTarget,xt(d),en(h)}}}function Xa(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Nn(e,t){var n=Ve;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Te(e,t){var n=(t&ga)!==0,r=(t&Lc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Xa(o?e:"<!>"+e),n||(i=It(i)));var s=r||xa?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=It(s),l=s.lastChild;Nn(a,l)}else Nn(s,s);return s}}function We(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&ga)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=Xa(o),l=It(a);if(i)for(s=document.createDocumentFragment();It(l);)s.appendChild(It(l));else s=It(l)}var c=s.cloneNode(!0);if(i){var d=It(c),h=c.lastChild;Nn(d,h)}else Nn(c,c);return c}}function Wa(e=""){{var t=pi(e+"");return Nn(t,t),t}}function nt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=pi();return e.append(t,n),Nn(t,n),e}function we(e,t){e!==null&&e.before(t)}function tn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function wu(e,t){return bu(e,t)}const vn=new Map;function bu(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){Kc();var a=new Set,l=h=>{for(var f=0;f<h.length;f++){var g=h[f];if(!a.has(g)){a.add(g);var y=vu(g);t.addEventListener(g,qn,{passive:y});var m=vn.get(g);m===void 0?(document.addEventListener(g,qn,{passive:y}),vn.set(g,1)):vn.set(g,m+1)}}};l(_o(Va)),oo.add(l);var c=void 0,d=Uc(()=>{var h=n??t.appendChild(pi());return ln(()=>{if(o){Ie({});var f=Re;f.c=o}i&&(r.$$events=i),c=e(h,r)||{},o&&Ae()}),()=>{var y;for(var f of a){t.removeEventListener(f,qn);var g=vn.get(f);--g===0?(document.removeEventListener(f,qn),vn.delete(f)):vn.set(f,g)}oo.delete(l),h!==n&&((y=h.parentNode)==null||y.removeChild(h))}});return _u.set(c,d),c}let _u=new WeakMap;function Xe(e,t,[n,r]=[0,0]){var i=e,o=null,s=null,a=je,l=n>0?vr:0,c=!1;const d=(f,g=!0)=>{c=!0,h(g,f)},h=(f,g)=>{a!==(a=f)&&(a?(o?qr(o):g&&(o=ln(()=>g(i))),s&&tr(s,()=>{s=null})):(s?qr(s):g&&(s=ln(()=>g(i,[n+1,r]))),o&&tr(o,()=>{o=null})))};yr(()=>{c=!1,t(d),c||h(null,null)},l)}function xu(e,t){Vn(()=>{var n=t();for(var r in n){var i=n[r];i?e.style.setProperty(r,i):e.style.removeProperty(r)}}),Co(()=>{e.remove()})}function ku(e,t,n,r){for(var i=[],o=t.length,s=0;s<o;s++)Mo(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;qc(l),l.append(n),r.clear(),Ft(e,t[0].prev,t[o-1].next)}Ma(i,()=>{for(var c=0;c<o;c++){var d=t[c];a||(r.delete(d.k),Ft(e,d.prev,d.next)),Dt(d.e,!a)}})}function ki(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&ha)!==0;if(l){var c=e;s=c.appendChild(pi())}var d=null,h=!1,f=ya(()=>{var g=n();return gi(g)?g:g==null?[]:_o(g)});yr(()=>{var g=u(f),y=g.length;h&&y===0||(h=y===0,Su(g,a,s,i,t,r,n),o!==null&&(y===0?d?qr(d):d=ln(()=>o(s)):d!==null&&tr(d,()=>{d=null})),u(f))})}function Su(e,t,n,r,i,o,s){var $,E,P,L;var a=(i&Ac)!==0,l=(i&(So|Eo))!==0,c=e.length,d=t.items,h=t.first,f=h,g,y=null,m,w=[],b=[],T,x,v,A;if(a)for(A=0;A<c;A+=1)T=e[A],x=o(T,A),v=d.get(x),v!==void 0&&(($=v.a)==null||$.measure(),(m??(m=new Set)).add(v));for(A=0;A<c;A+=1){if(T=e[A],x=o(T,A),v=d.get(x),v===void 0){var I=f?f.e.nodes_start:n;y=Pu(I,t,y,y===null?t.first:y.next,T,x,A,r,i,s),d.set(x,y),w=[],b=[],f=y.next;continue}if(l&&Eu(v,T,A,i),(v.e.f&Tt)!==0&&(qr(v.e),a&&((E=v.a)==null||E.unfix(),(m??(m=new Set)).delete(v))),v!==f){if(g!==void 0&&g.has(v)){if(w.length<b.length){var p=b[0],D;y=p.prev;var F=w[0],q=w[w.length-1];for(D=0;D<w.length;D+=1)ls(w[D],p,n);for(D=0;D<b.length;D+=1)g.delete(b[D]);Ft(t,F.prev,q.next),Ft(t,y,F),Ft(t,q,p),f=p,y=q,A-=1,w=[],b=[]}else g.delete(v),ls(v,f,n),Ft(t,v.prev,v.next),Ft(t,v,y===null?t.first:y.next),Ft(t,y,v),y=v;continue}for(w=[],b=[];f!==null&&f.k!==x;)(f.e.f&Tt)===0&&(g??(g=new Set)).add(f),b.push(f),f=f.next;if(f===null)continue;v=f}w.push(v),y=v,f=v.next}if(f!==null||g!==void 0){for(var k=g===void 0?[]:_o(g);f!==null;)(f.e.f&Tt)===0&&k.push(f),f=f.next;var N=k.length;if(N>0){var M=(i&ha)!==0&&c===0?n:null;if(a){for(A=0;A<N;A+=1)(P=k[A].a)==null||P.measure();for(A=0;A<N;A+=1)(L=k[A].a)==null||L.fix()}ku(t,k,M,d)}}a&&bi(()=>{var R;if(m!==void 0)for(v of m)(R=v.a)==null||R.apply()}),Ve.first=t.first&&t.first.e,Ve.last=y&&y.e}function Eu(e,t,n,r){(r&So)!==0&&no(e.v,t),(r&Eo)!==0?no(e.i,n):e.i=n}function Pu(e,t,n,r,i,o,s,a,l,c){var d=(l&So)!==0,h=(l&zc)===0,f=d?h?ba(i):Cn(i):i,g=(l&Eo)===0?s:Cn(s),y={i:g,v:f,k:o,a:null,e:null,prev:n,next:r};try{return y.e=ln(()=>a(e,f,g,c),Bc),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function ls(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var s=wi(o);i.before(o),o=s}}function Ft(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function it(e,t,...n){var r=e,i=Lt,o;yr(()=>{i!==(i=t())&&(o&&(Dt(o),o=null),o=ln(()=>i(r,...n)))},vr)}function zo(e,t,n){var r=e,i,o;yr(()=>{i!==(i=t())&&(o&&(tr(o),o=null),i&&(o=ln(()=>n(r,i))))},vr)}function Ze(e,t,n){Yn(()=>{var r=Ue(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};Vn(()=>{var s=n();La(s),i&&fa(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Cu(e,t){Yn(()=>{const n=t();return n&&n(e)})}function Fa(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Fa(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Nu(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Fa(e))&&(r&&(r+=" "),r+=t);return r}function Pt(e){return typeof e=="object"?Nu(e):e??""}const cs=[...` 	
\r\fÂ \v\uFEFF`];function Mu(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||cs.includes(r[s-1]))&&(a===r.length||cs.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function us(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function Vi(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Iu(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(Vi)),i&&l.push(...Object.keys(i).map(Vi));var c=0,d=-1;const m=e.length;for(var h=0;h<m;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):o?o===f&&(o=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!a&&o===!1&&s===0){if(f===":"&&d===-1)d=h;else if(f===";"||h===m-1){if(d!==-1){var g=Vi(e.substring(c,d).trim());if(!l.includes(g)){f!==";"&&h++;var y=e.substring(c,h).trim();n+=" "+y+";"}}c=h+1,d=-1}}}}return r&&(n+=us(r)),i&&(n+=us(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function mt(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=Mu(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var c=!!o[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return o}function Xi(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function Qe(e,t,n,r){var i=e.__style;if(i!==t){var o=Iu(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(Xi(e,n==null?void 0:n[0],r[0]),Xi(e,n==null?void 0:n[1],r[1],"important")):Xi(e,n,r));return r}const mn=Symbol("class"),wt=Symbol("style"),Ba=Symbol("is custom element"),Ka=Symbol("is html");function Au(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function _e(e,t,n,r){var i=qa(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[bc]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Za(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function $n(e,t,n,r,i=!1){var o=qa(e),s=o[Ba],a=!o[Ka],l=t||{},c=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=Pt(n.class):(r||n[mn])&&(n.class=null),n[wt]&&(n.style??(n.style=null));var h=Za(e);for(const x in n){let v=n[x];if(c&&x==="value"&&v==null){e.value=e.__value="",l[x]=v;continue}if(x==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";mt(e,f,v,r,t==null?void 0:t[mn],n[mn]),l[x]=v,l[mn]=n[mn];continue}if(x==="style"){Qe(e,v,t==null?void 0:t[wt],n[wt]),l[x]=v,l[wt]=n[wt];continue}var g=l[x];if(v!==g){l[x]=v;var y=x[0]+x[1];if(y!=="$$")if(y==="on"){const A={},I="$$"+x;let p=x.slice(2);var m=fu(p);if(uu(p)&&(p=p.slice(0,-7),A.capture=!0),!m&&g){if(v!=null)continue;e.removeEventListener(p,l[I],A),l[I]=null}if(v!=null)if(m)e[`__${p}`]=v,gn([p]);else{let D=function(F){l[x].call(this,F)};var T=D;l[I]=Ao(p,e,D,A)}else m&&(e[`__${p}`]=void 0)}else if(x==="style")_e(e,x,v);else if(x==="autofocus")yu(e,!!v);else if(!s&&(x==="__value"||x==="value"&&v!=null))e.value=e.__value=v;else if(x==="selected"&&c)Au(e,v);else{var w=x;a||(w=gu(w));var b=w==="defaultValue"||w==="defaultChecked";if(v==null&&!s&&!b)if(o[x]=null,w==="value"||w==="checked"){let A=e;const I=t===void 0;if(w==="value"){let p=A.defaultValue;A.removeAttribute(w),A.defaultValue=p,A.value=A.__value=I?p:null}else{let p=A.defaultChecked;A.removeAttribute(w),A.defaultChecked=p,A.checked=I?p:!1}}else e.removeAttribute(x);else b||h.includes(w)&&(s||typeof v!="string")?e[w]=v:typeof v!="function"&&_e(e,w,v)}}}for(let x of Object.getOwnPropertySymbols(n))x.description===Vc&&Cu(e,()=>n[x]);return l}function qa(e){return e.__attributes??(e.__attributes={[Ba]:e.nodeName.includes("-"),[Ka]:e.namespaceURI===Yc})}var ds=new Map;function Za(e){var t=ds.get(e.nodeName);if(t)return t;ds.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=sa(r);for(var o in n)n[o].set&&t.push(o);r=$i(r)}return t}function zu(e,t,n=t){pu(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),Ue(t)==null&&n(e.checked),Vn(()=>{var r=t();e.checked=!!r})}var Zt,Sn,hr,fi,Ga;const hi=class hi{constructor(t){ce(this,fi);ce(this,Zt,new WeakMap);ce(this,Sn);ce(this,hr);Wn(this,hr,t)}observe(t,n){var r=z(this,Zt).get(t)||new Set;return r.add(n),z(this,Zt).set(t,r),ts(this,fi,Ga).call(this).observe(t,z(this,hr)),()=>{var i=z(this,Zt).get(t);i.delete(n),i.size===0&&(z(this,Zt).delete(t),z(this,Sn).unobserve(t))}}};Zt=new WeakMap,Sn=new WeakMap,hr=new WeakMap,fi=new WeakSet,Ga=function(){return z(this,Sn)??Wn(this,Sn,new ResizeObserver(t=>{for(var n of t){hi.entries.set(n.target,n);for(var r of z(this,Zt).get(n.target)||[])r(n)}}))},Fe(hi,"entries",new WeakMap);let ao=hi;var Tu=new ao({box:"border-box"});function fs(e,t,n){var r=Tu.observe(e,()=>n(e[t]));Yn(()=>(Ue(()=>n(e[t])),r))}function hs(e,t){return e===t||(e==null?void 0:e[Jt])===t}function kt(e={},t,n,r){return Yn(()=>{var i,o;return Vn(()=>{i=o,o=[],Ue(()=>{e!==n(...o)&&(t(e,...o),i&&hs(n(...i),e)&&t(null,...i))})}),()=>{bi(()=>{o&&hs(n(...o),e)&&t(null,...o)})}}),e}function Hu(e=!1){const t=Re,n=t.l.u;if(!n)return;let r=()=>La(t.s);if(e){let i=0,o={};const s=Pn(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&i++,i});r=()=>u(s)}n.b.length&&No(()=>{gs(t,r),Fr(n.b)}),Ot(()=>{const i=Ue(()=>n.m.map(yc));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Ot(()=>{gs(t,r),Fr(n.a)})}function gs(e,t){if(e.l.s)for(const n of e.l.s)u(n);t()}let Pr=!1;function Ou(e){var t=Pr;try{return Pr=!1,[e(),Pr]}finally{Pr=t}}const Du={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Vt(e,t,n){return new Proxy({props:e,exclude:t},Du)}const Ru={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Fn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Fn(i)&&(i=i());const o=Ut(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Fn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=Ut(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Jt||t===ua)return!1;for(let n of e.props)if(Fn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Fn(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function Kt(...e){return new Proxy({props:e},Ru)}function $s(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function ee(e,t,n,r){var I;var i=(n&Tc)!==0,o=!Rn||(n&Hc)!==0,s=(n&Dc)!==0,a=(n&Rc)!==0,l=!1,c;s?[c,l]=Ou(()=>e[t]):c=e[t];var d=Jt in e||ua in e,h=s&&(((I=Ut(e,t))==null?void 0:I.set)??(d&&t in e&&(p=>e[t]=p)))||void 0,f=r,g=!0,y=!1,m=()=>(y=!0,g&&(g=!1,a?f=Ue(r):f=r),f);c===void 0&&r!==void 0&&(h&&o&&Ec(),c=m(),h&&h(c));var w;if(o)w=()=>{var p=e[t];return p===void 0?m():(g=!0,y=!1,p)};else{var b=(i?Pn:ya)(()=>e[t]);b.f|=pc,w=()=>{var p=u(b);return p!==void 0&&(f=void 0),p===void 0?f:p}}if((n&Oc)===0)return w;if(h){var T=e.$$legacy;return function(p,D){return arguments.length>0?((!o||!D||T||l)&&h(D?w():p),p):w()}}var x=!1,v=ba(c),A=Pn(()=>{var p=w(),D=u(v);return x?(x=!1,D):v.v=p});return s&&u(A),i||(A.equals=ko),function(p,D){if(arguments.length>0){const F=D?u(A):o&&s?qe(p):p;if(!A.equals(F)){if(x=!0,j(v,F),y&&f!==void 0&&(f=F),$s(A))return p;Ue(()=>u(A))}return p}return $s(A)?A.v:u(A)}}function Qr(e){Re===null&&Po(),Rn&&Re.l!==null?Lu(Re).m.push(e):Ot(()=>{const t=Ue(e);if(typeof t=="function")return t})}function wr(e){Re===null&&Po(),Qr(()=>()=>Ue(e))}function Lu(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Yu="5";var oa;typeof window<"u"&&((oa=window.__svelte??(window.__svelte={})).v??(oa.v=new Set)).add(Yu);var Vu={value:()=>{}};function Si(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Rr(n)}function Rr(e){this._=e}function Xu(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Rr.prototype=Si.prototype={constructor:Rr,on:function(e,t){var n=this._,r=Xu(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Wu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=vs(n[i],e.name,t);else if(t==null)for(i in n)n[i]=vs(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Rr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Wu(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function vs(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Vu,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var lo="http://www.w3.org/1999/xhtml";const ys={svg:"http://www.w3.org/2000/svg",xhtml:lo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ei(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ys.hasOwnProperty(t)?{space:ys[t],local:e}:e}function Fu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lo&&t.documentElement.namespaceURI===lo?t.createElement(e):t.createElementNS(n,e)}}function Bu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ua(e){var t=Ei(e);return(t.local?Bu:Fu)(t)}function Ku(){}function To(e){return e==null?Ku:function(){return this.querySelector(e)}}function qu(e){typeof e!="function"&&(e=To(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,c,d=0;d<s;++d)(l=o[d])&&(c=e.call(l,l.__data__,d,o))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new ct(r,this._parents)}function Zu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Gu(){return[]}function Ja(e){return e==null?Gu:function(){return this.querySelectorAll(e)}}function Uu(e){return function(){return Zu(e.apply(this,arguments))}}function Ju(e){typeof e=="function"?e=Uu(e):e=Ja(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),i.push(l));return new ct(r,i)}function Qa(e){return function(){return this.matches(e)}}function ja(e){return function(t){return t.matches(e)}}var Qu=Array.prototype.find;function ju(e){return function(){return Qu.call(this.children,e)}}function ed(){return this.firstElementChild}function td(e){return this.select(e==null?ed:ju(typeof e=="function"?e:ja(e)))}var nd=Array.prototype.filter;function rd(){return Array.from(this.children)}function id(e){return function(){return nd.call(this.children,e)}}function od(e){return this.selectAll(e==null?rd:id(typeof e=="function"?e:ja(e)))}function sd(e){typeof e!="function"&&(e=Qa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new ct(r,this._parents)}function el(e){return new Array(e.length)}function ad(){return new ct(this._enter||this._groups.map(el),this._parents)}function jr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jr.prototype={constructor:jr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ld(e){return function(){return e}}function cd(e,t,n,r,i,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new jr(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function ud(e,t,n,r,i,o,s){var a,l,c=new Map,d=t.length,h=o.length,f=new Array(d),g;for(a=0;a<d;++a)(l=t[a])&&(f[a]=g=s.call(l,l.__data__,a,t)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(l=c.get(g))?(r[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new jr(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&c.get(f[a])===l&&(i[a]=l)}function dd(e){return e.__data__}function fd(e,t){if(!arguments.length)return Array.from(this,dd);var n=t?ud:cd,r=this._parents,i=this._groups;typeof e!="function"&&(e=ld(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var d=r[c],h=i[c],f=h.length,g=hd(e.call(d,d&&d.__data__,c,r)),y=g.length,m=a[c]=new Array(y),w=s[c]=new Array(y),b=l[c]=new Array(f);n(d,h,m,w,b,g,t);for(var T=0,x=0,v,A;T<y;++T)if(v=m[T]){for(T>=x&&(x=T+1);!(A=w[x])&&++x<y;);v._next=A||null}}return s=new ct(s,r),s._enter=a,s._exit=l,s}function hd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gd(){return new ct(this._exit||this._groups.map(el),this._parents)}function $d(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function vd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],d=r[l],h=c.length,f=a[l]=new Array(h),g,y=0;y<h;++y)(g=c[y]||d[y])&&(f[y]=g);for(;l<i;++l)a[l]=n[l];return new ct(a,this._parents)}function yd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function md(e){e||(e=pd);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(l[d]=c);l.sort(t)}return new ct(i,this._parents).order()}function pd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bd(){return Array.from(this)}function _d(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function xd(){let e=0;for(const t of this)++e;return e}function kd(){return!this.node()}function Sd(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Ed(e){return function(){this.removeAttribute(e)}}function Pd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cd(e,t){return function(){this.setAttribute(e,t)}}function Nd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Md(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Id(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ad(e,t){var n=Ei(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pd:Ed:typeof t=="function"?n.local?Id:Md:n.local?Nd:Cd)(n,t))}function tl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zd(e){return function(){this.style.removeProperty(e)}}function Td(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hd(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Od(e,t,n){return arguments.length>1?this.each((t==null?zd:typeof t=="function"?Hd:Td)(e,t,n??"")):Mn(this.node(),e)}function Mn(e,t){return e.style.getPropertyValue(t)||tl(e).getComputedStyle(e,null).getPropertyValue(t)}function Dd(e){return function(){delete this[e]}}function Rd(e,t){return function(){this[e]=t}}function Ld(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Yd(e,t){return arguments.length>1?this.each((t==null?Dd:typeof t=="function"?Ld:Rd)(e,t)):this.node()[e]}function nl(e){return e.trim().split(/^|\s+/)}function Ho(e){return e.classList||new rl(e)}function rl(e){this._node=e,this._names=nl(e.getAttribute("class")||"")}rl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function il(e,t){for(var n=Ho(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ol(e,t){for(var n=Ho(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Vd(e){return function(){il(this,e)}}function Xd(e){return function(){ol(this,e)}}function Wd(e,t){return function(){(t.apply(this,arguments)?il:ol)(this,e)}}function Fd(e,t){var n=nl(e+"");if(arguments.length<2){for(var r=Ho(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wd:t?Vd:Xd)(n,t))}function Bd(){this.textContent=""}function Kd(e){return function(){this.textContent=e}}function qd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Zd(e){return arguments.length?this.each(e==null?Bd:(typeof e=="function"?qd:Kd)(e)):this.node().textContent}function Gd(){this.innerHTML=""}function Ud(e){return function(){this.innerHTML=e}}function Jd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qd(e){return arguments.length?this.each(e==null?Gd:(typeof e=="function"?Jd:Ud)(e)):this.node().innerHTML}function jd(){this.nextSibling&&this.parentNode.appendChild(this)}function ef(){return this.each(jd)}function tf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nf(){return this.each(tf)}function rf(e){var t=typeof e=="function"?e:Ua(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function of(){return null}function sf(e,t){var n=typeof e=="function"?e:Ua(e),r=t==null?of:typeof t=="function"?t:To(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function af(){var e=this.parentNode;e&&e.removeChild(this)}function lf(){return this.each(af)}function cf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function df(e){return this.select(e?uf:cf)}function ff(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hf(e){return function(t){e.call(this,t,this.__data__)}}function gf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $f(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function vf(e,t,n){return function(){var r=this.__on,i,o=hf(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function yf(e,t,n){var r=gf(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(i=0,d=a[l];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?vf:$f,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function sl(e,t,n){var r=tl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mf(e,t){return function(){return sl(this,e,t)}}function pf(e,t){return function(){return sl(this,e,t.apply(this,arguments))}}function wf(e,t){return this.each((typeof t=="function"?pf:mf)(e,t))}function*bf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var al=[null];function ct(e,t){this._groups=e,this._parents=t}function br(){return new ct([[document.documentElement]],al)}function _f(){return this}ct.prototype=br.prototype={constructor:ct,select:qu,selectAll:Ju,selectChild:td,selectChildren:od,filter:sd,data:fd,enter:ad,exit:gd,join:$d,merge:vd,selection:_f,order:yd,sort:md,call:wd,nodes:bd,node:_d,size:xd,empty:kd,each:Sd,attr:Ad,style:Od,property:Yd,classed:Fd,text:Zd,html:Qd,raise:ef,lower:nf,append:rf,insert:sf,remove:lf,clone:df,datum:ff,on:yf,dispatch:wf,[Symbol.iterator]:bf};function at(e){return typeof e=="string"?new ct([[document.querySelector(e)]],[document.documentElement]):new ct([[e]],al)}function xf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=xf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const kf={passive:!1},rr={capture:!0,passive:!1};function Wi(e){e.stopImmediatePropagation()}function _n(e){e.preventDefault(),e.stopImmediatePropagation()}function ll(e){var t=e.document.documentElement,n=at(e).on("dragstart.drag",_n,rr);"onselectstart"in t?n.on("selectstart.drag",_n,rr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function cl(e,t){var n=e.document.documentElement,r=at(e).on("dragstart.drag",null);t&&(r.on("click.drag",_n,rr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Cr=e=>()=>e;function co(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}co.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Sf(e){return!e.ctrlKey&&!e.button}function Ef(){return this.parentNode}function Pf(e,t){return t??{x:e.x,y:e.y}}function Cf(){return navigator.maxTouchPoints||"ontouchstart"in this}function ul(){var e=Sf,t=Ef,n=Pf,r=Cf,i={},o=Si("start","drag","end"),s=0,a,l,c,d,h=0;function f(v){v.on("mousedown.drag",g).filter(r).on("touchstart.drag",w).on("touchmove.drag",b,kf).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(v,A){if(!(d||!e.call(this,v,A))){var I=x(this,t.call(this,v,A),v,A,"mouse");I&&(at(v.view).on("mousemove.drag",y,rr).on("mouseup.drag",m,rr),ll(v.view),Wi(v),c=!1,a=v.clientX,l=v.clientY,I("start",v))}}function y(v){if(_n(v),!c){var A=v.clientX-a,I=v.clientY-l;c=A*A+I*I>h}i.mouse("drag",v)}function m(v){at(v.view).on("mousemove.drag mouseup.drag",null),cl(v.view,c),_n(v),i.mouse("end",v)}function w(v,A){if(e.call(this,v,A)){var I=v.changedTouches,p=t.call(this,v,A),D=I.length,F,q;for(F=0;F<D;++F)(q=x(this,p,v,A,I[F].identifier,I[F]))&&(Wi(v),q("start",v,I[F]))}}function b(v){var A=v.changedTouches,I=A.length,p,D;for(p=0;p<I;++p)(D=i[A[p].identifier])&&(_n(v),D("drag",v,A[p]))}function T(v){var A=v.changedTouches,I=A.length,p,D;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),p=0;p<I;++p)(D=i[A[p].identifier])&&(Wi(v),D("end",v,A[p]))}function x(v,A,I,p,D,F){var q=o.copy(),k=ft(F||I,A),N,M,$;if(($=n.call(v,new co("beforestart",{sourceEvent:I,target:f,identifier:D,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:q}),p))!=null)return N=$.x-k[0]||0,M=$.y-k[1]||0,function E(P,L,R){var O=k,B;switch(P){case"start":i[D]=E,B=s++;break;case"end":delete i[D],--s;case"drag":k=ft(R||L,A),B=s;break}q.call(P,v,new co(P,{sourceEvent:L,subject:$,target:f,identifier:D,active:B,x:k[0]+N,y:k[1]+M,dx:k[0]-O[0],dy:k[1]-O[1],dispatch:q}),p)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Cr(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Cr(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Cr(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Cr(!!v),f):r},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,f):Math.sqrt(h)},f}function Oo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function dl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _r(){}var ir=.7,ei=1/ir,xn="\\s*([+-]?\\d+)\\s*",or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nf=/^#([0-9a-f]{3,8})$/,Mf=new RegExp(`^rgb\\(${xn},${xn},${xn}\\)$`),If=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Af=new RegExp(`^rgba\\(${xn},${xn},${xn},${or}\\)$`),zf=new RegExp(`^rgba\\(${bt},${bt},${bt},${or}\\)$`),Tf=new RegExp(`^hsl\\(${or},${bt},${bt}\\)$`),Hf=new RegExp(`^hsla\\(${or},${bt},${bt},${or}\\)$`),ms={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oo(_r,sr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ps,formatHex:ps,formatHex8:Of,formatHsl:Df,formatRgb:ws,toString:ws});function ps(){return this.rgb().formatHex()}function Of(){return this.rgb().formatHex8()}function Df(){return fl(this).formatHsl()}function ws(){return this.rgb().formatRgb()}function sr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Nf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bs(t):n===3?new rt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Nr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Nr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Mf.exec(e))?new rt(t[1],t[2],t[3],1):(t=If.exec(e))?new rt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Af.exec(e))?Nr(t[1],t[2],t[3],t[4]):(t=zf.exec(e))?Nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tf.exec(e))?ks(t[1],t[2]/100,t[3]/100,1):(t=Hf.exec(e))?ks(t[1],t[2]/100,t[3]/100,t[4]):ms.hasOwnProperty(e)?bs(ms[e]):e==="transparent"?new rt(NaN,NaN,NaN,0):null}function bs(e){return new rt(e>>16&255,e>>8&255,e&255,1)}function Nr(e,t,n,r){return r<=0&&(e=t=n=NaN),new rt(e,t,n,r)}function Rf(e){return e instanceof _r||(e=sr(e)),e?(e=e.rgb(),new rt(e.r,e.g,e.b,e.opacity)):new rt}function uo(e,t,n,r){return arguments.length===1?Rf(e):new rt(e,t,n,r??1)}function rt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Oo(rt,uo,dl(_r,{brighter(e){return e=e==null?ei:Math.pow(ei,e),new rt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ir:Math.pow(ir,e),new rt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rt(an(this.r),an(this.g),an(this.b),ti(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_s,formatHex:_s,formatHex8:Lf,formatRgb:xs,toString:xs}));function _s(){return`#${on(this.r)}${on(this.g)}${on(this.b)}`}function Lf(){return`#${on(this.r)}${on(this.g)}${on(this.b)}${on((isNaN(this.opacity)?1:this.opacity)*255)}`}function xs(){const e=ti(this.opacity);return`${e===1?"rgb(":"rgba("}${an(this.r)}, ${an(this.g)}, ${an(this.b)}${e===1?")":`, ${e})`}`}function ti(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function an(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return e=an(e),(e<16?"0":"")+e.toString(16)}function ks(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gt(e,t,n,r)}function fl(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof _r||(e=sr(e)),!e)return new gt;if(e instanceof gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new gt(s,a,l,e.opacity)}function Yf(e,t,n,r){return arguments.length===1?fl(e):new gt(e,t,n,r??1)}function gt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Oo(gt,Yf,dl(_r,{brighter(e){return e=e==null?ei:Math.pow(ei,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ir:Math.pow(ir,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new rt(Fi(e>=240?e-240:e+120,i,r),Fi(e,i,r),Fi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new gt(Ss(this.h),Mr(this.s),Mr(this.l),ti(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ti(this.opacity);return`${e===1?"hsl(":"hsla("}${Ss(this.h)}, ${Mr(this.s)*100}%, ${Mr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ss(e){return e=(e||0)%360,e<0?e+360:e}function Mr(e){return Math.max(0,Math.min(1,e||0))}function Fi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hl=e=>()=>e;function Vf(e,t){return function(n){return e+n*t}}function Xf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Wf(e){return(e=+e)==1?gl:function(t,n){return n-t?Xf(t,n,e):hl(isNaN(t)?n:t)}}function gl(e,t){var n=t-e;return n?Vf(e,n):hl(isNaN(e)?t:e)}const Es=function e(t){var n=Wf(t);function r(i,o){var s=n((i=uo(i)).r,(o=uo(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=gl(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=e,r}(1);function Bt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bi=new RegExp(fo.source,"g");function Ff(e){return function(){return e}}function Bf(e){return function(t){return e(t)+""}}function Kf(e,t){var n=fo.lastIndex=Bi.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=fo.exec(e))&&(i=Bi.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Bt(r,i)})),n=Bi.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Bf(l[0].x):Ff(t):(t=l.length,function(c){for(var d=0,h;d<t;++d)a[(h=l[d]).i]=h.x(c);return a.join("")})}var Ps=180/Math.PI,ho={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $l(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ps,skewX:Math.atan(l)*Ps,scaleX:s,scaleY:a}}var Ir;function qf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ho:$l(t.a,t.b,t.c,t.d,t.e,t.f)}function Zf(e){return e==null||(Ir||(Ir=document.createElementNS("http://www.w3.org/2000/svg","g")),Ir.setAttribute("transform",e),!(e=Ir.transform.baseVal.consolidate()))?ho:(e=e.matrix,$l(e.a,e.b,e.c,e.d,e.e,e.f))}function vl(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,d,h,f,g,y){if(c!==h||d!==f){var m=g.push("translate(",null,t,null,n);y.push({i:m-4,x:Bt(c,h)},{i:m-2,x:Bt(d,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Bt(c,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(c,d,h,f){c!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Bt(c,d)}):d&&h.push(i(h)+"skewX("+d+r)}function l(c,d,h,f,g,y){if(c!==h||d!==f){var m=g.push(i(g)+"scale(",null,",",null,")");y.push({i:m-4,x:Bt(c,h)},{i:m-2,x:Bt(d,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,f),s(c.rotate,d.rotate,h,f),a(c.skewX,d.skewX,h,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(g){for(var y=-1,m=f.length,w;++y<m;)h[(w=f[y]).i]=w.x(g);return h.join("")}}}var Gf=vl(qf,"px, ","px)","deg)"),Uf=vl(Zf,", ",")",")"),Jf=1e-12;function Cs(e){return((e=Math.exp(e))+1/e)/2}function Qf(e){return((e=Math.exp(e))-1/e)/2}function jf(e){return((e=Math.exp(2*e))-1)/(e+1)}const eh=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],d=s[0],h=s[1],f=s[2],g=d-a,y=h-l,m=g*g+y*y,w,b;if(m<Jf)b=Math.log(f/c)/t,w=function(p){return[a+p*g,l+p*y,c*Math.exp(t*p*b)]};else{var T=Math.sqrt(m),x=(f*f-c*c+r*m)/(2*c*n*T),v=(f*f-c*c-r*m)/(2*f*n*T),A=Math.log(Math.sqrt(x*x+1)-x),I=Math.log(Math.sqrt(v*v+1)-v);b=(I-A)/t,w=function(p){var D=p*b,F=Cs(A),q=c/(n*T)*(F*jf(t*D+A)-Qf(A));return[a+q*g,l+q*y,c*F/Cs(t*D+A)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var In=0,Zn=0,Bn=0,yl=1e3,ni,Gn,ri=0,cn=0,Pi=0,ar=typeof performance=="object"&&performance.now?performance:Date,ml=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Do(){return cn||(ml(th),cn=ar.now()+Pi)}function th(){cn=0}function ii(){this._call=this._time=this._next=null}ii.prototype=pl.prototype={constructor:ii,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Do():+n)+(t==null?0:+t),!this._next&&Gn!==this&&(Gn?Gn._next=this:ni=this,Gn=this),this._call=e,this._time=n,go()},stop:function(){this._call&&(this._call=null,this._time=1/0,go())}};function pl(e,t,n){var r=new ii;return r.restart(e,t,n),r}function nh(){Do(),++In;for(var e=ni,t;e;)(t=cn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--In}function Ns(){cn=(ri=ar.now())+Pi,In=Zn=0;try{nh()}finally{In=0,ih(),cn=0}}function rh(){var e=ar.now(),t=e-ri;t>yl&&(Pi-=t,ri=e)}function ih(){for(var e,t=ni,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ni=n);Gn=e,go(r)}function go(e){if(!In){Zn&&(Zn=clearTimeout(Zn));var t=e-cn;t>24?(e<1/0&&(Zn=setTimeout(Ns,e-ar.now()-Pi)),Bn&&(Bn=clearInterval(Bn))):(Bn||(ri=ar.now(),Bn=setInterval(rh,yl)),In=1,ml(Ns))}}function Ms(e,t,n){var r=new ii;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var oh=Si("start","end","cancel","interrupt"),sh=[],wl=0,Is=1,$o=2,Lr=3,As=4,vo=5,Yr=6;function Ci(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;ah(e,n,{name:t,index:r,group:i,on:oh,tween:sh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:wl})}function Ro(e,t){var n=pt(e,t);if(n.state>wl)throw new Error("too late; already scheduled");return n}function Ct(e,t){var n=pt(e,t);if(n.state>Lr)throw new Error("too late; already running");return n}function pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ah(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=pl(o,0,n.time);function o(c){n.state=Is,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,h,f,g;if(n.state!==Is)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===Lr)return Ms(s);g.state===As?(g.state=Yr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[d]):+d<t&&(g.state=Yr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[d])}if(Ms(function(){n.state===Lr&&(n.state=As,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=$o,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$o){for(n.state=Lr,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=vo,1),h=-1,f=i.length;++h<f;)i[h].call(e,d);n.state===vo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Yr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Vr(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>$o&&r.state<vo,r.state=Yr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function lh(e){return this.each(function(){Vr(this,e)})}function ch(e,t){var n,r;return function(){var i=Ct(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function uh(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ct(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function dh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?ch:uh)(n,e,t))}function Lo(e,t,n){var r=e._id;return e.each(function(){var i=Ct(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return pt(i,r).value[t]}}function bl(e,t){var n;return(typeof t=="number"?Bt:t instanceof sr?Es:(n=sr(t))?(t=n,Es):Kf)(e,t)}function fh(e){return function(){this.removeAttribute(e)}}function hh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gh(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function $h(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function vh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function yh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function mh(e,t){var n=Ei(e),r=n==="transform"?Uf:bl;return this.attrTween(e,typeof t=="function"?(n.local?yh:vh)(n,r,Lo(this,"attr."+e,t)):t==null?(n.local?hh:fh)(n):(n.local?$h:gh)(n,r,t))}function ph(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&wh(e,o)),n}return i._value=t,i}function _h(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ph(e,o)),n}return i._value=t,i}function xh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ei(e);return this.tween(n,(r.local?bh:_h)(r,t))}function kh(e,t){return function(){Ro(this,e).delay=+t.apply(this,arguments)}}function Sh(e,t){return t=+t,function(){Ro(this,e).delay=t}}function Eh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kh:Sh)(t,e)):pt(this.node(),t).delay}function Ph(e,t){return function(){Ct(this,e).duration=+t.apply(this,arguments)}}function Ch(e,t){return t=+t,function(){Ct(this,e).duration=t}}function Nh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ph:Ch)(t,e)):pt(this.node(),t).duration}function Mh(e,t){if(typeof t!="function")throw new Error;return function(){Ct(this,e).ease=t}}function Ih(e){var t=this._id;return arguments.length?this.each(Mh(t,e)):pt(this.node(),t).ease}function Ah(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ct(this,e).ease=n}}function zh(e){if(typeof e!="function")throw new Error;return this.each(Ah(this._id,e))}function Th(e){typeof e!="function"&&(e=Qa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Rt(r,this._parents,this._name,this._id)}function Hh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],d=l.length,h=s[a]=new Array(d),f,g=0;g<d;++g)(f=l[g]||c[g])&&(h[g]=f);for(;a<r;++a)s[a]=t[a];return new Rt(s,this._parents,this._name,this._id)}function Oh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Dh(e,t,n){var r,i,o=Oh(t)?Ro:Ct;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Rh(e,t){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(e):this.each(Dh(n,e,t))}function Lh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Yh(){return this.on("end.remove",Lh(this._id))}function Vh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=To(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),d,h,f=0;f<l;++f)(d=a[f])&&(h=e.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,Ci(c[f],t,n,f,c,pt(d,n)));return new Rt(o,this._parents,t,n)}function Xh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ja(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,d,h=0;h<c;++h)if(d=l[h]){for(var f=e.call(d,d.__data__,h,l),g,y=pt(d,n),m=0,w=f.length;m<w;++m)(g=f[m])&&Ci(g,t,n,m,f,y);o.push(f),s.push(d)}return new Rt(o,s,t,n)}var Wh=br.prototype.constructor;function Fh(){return new Wh(this._groups,this._parents)}function Bh(e,t){var n,r,i;return function(){var o=Mn(this,e),s=(this.style.removeProperty(e),Mn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function _l(e){return function(){this.style.removeProperty(e)}}function Kh(e,t,n){var r,i=n+"",o;return function(){var s=Mn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function qh(e,t,n){var r,i,o;return function(){var s=Mn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Mn(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function Zh(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Ct(this,e),c=l.on,d=l.value[o]==null?a||(a=_l(t)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(s,i=d),l.on=r}}function Gh(e,t,n){var r=(e+="")=="transform"?Gf:bl;return t==null?this.styleTween(e,Bh(e,r)).on("end.style."+e,_l(e)):typeof t=="function"?this.styleTween(e,qh(e,r,Lo(this,"style."+e,t))).each(Zh(this._id,e)):this.styleTween(e,Kh(e,r,t),n).on("end.style."+e,null)}function Uh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Jh(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Uh(e,s,n)),r}return o._value=t,o}function Qh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Jh(e,t,n??""))}function jh(e){return function(){this.textContent=e}}function eg(e){return function(){var t=e(this);this.textContent=t??""}}function tg(e){return this.tween("text",typeof e=="function"?eg(Lo(this,"text",e)):jh(e==null?"":e+""))}function ng(e){return function(t){this.textContent=e.call(this,t)}}function rg(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ng(i)),t}return r._value=e,r}function ig(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,rg(e))}function og(){for(var e=this._name,t=this._id,n=xl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var d=pt(l,t);Ci(l,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Rt(r,this._parents,e,n)}function sg(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=Ct(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&o()})}var ag=0;function Rt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xl(){return++ag}var Mt=br.prototype;Rt.prototype={constructor:Rt,select:Vh,selectAll:Xh,selectChild:Mt.selectChild,selectChildren:Mt.selectChildren,filter:Th,merge:Hh,selection:Fh,transition:og,call:Mt.call,nodes:Mt.nodes,node:Mt.node,size:Mt.size,empty:Mt.empty,each:Mt.each,on:Rh,attr:mh,attrTween:xh,style:Gh,styleTween:Qh,text:tg,textTween:ig,remove:Yh,tween:dh,delay:Eh,duration:Nh,ease:Ih,easeVarying:zh,end:sg,[Symbol.iterator]:Mt[Symbol.iterator]};function lg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cg={time:null,delay:0,duration:250,ease:lg};function ug(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function dg(e){var t,n;e instanceof Rt?(t=e._id,e=e._name):(t=xl(),(n=cg).time=Do(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Ci(l,e,t,c,s,n||ug(l,t));return new Rt(r,this._parents,e,t)}br.prototype.interrupt=lh;br.prototype.transition=dg;const Ar=e=>()=>e;function fg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function At(e,t,n){this.k=e,this.x=t,this.y=n}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ni=new At(1,0,0);kl.prototype=At.prototype;function kl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ni;return e.__zoom}function Ki(e){e.stopImmediatePropagation()}function Kn(e){e.preventDefault(),e.stopImmediatePropagation()}function hg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function zs(){return this.__zoom||Ni}function $g(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vg(){return navigator.maxTouchPoints||"ontouchstart"in this}function yg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Sl(){var e=hg,t=gg,n=yg,r=$g,i=vg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=eh,c=Si("start","zoom","end"),d,h,f,g=500,y=150,m=0,w=10;function b($){$.property("__zoom",zs).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",q).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function($,E,P,L){var R=$.selection?$.selection():$;R.property("__zoom",zs),$!==R?A($,E,P,L):R.interrupt().each(function(){I(this,arguments).event(L).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},b.scaleBy=function($,E,P,L){b.scaleTo($,function(){var R=this.__zoom.k,O=typeof E=="function"?E.apply(this,arguments):E;return R*O},P,L)},b.scaleTo=function($,E,P,L){b.transform($,function(){var R=t.apply(this,arguments),O=this.__zoom,B=P==null?v(R):typeof P=="function"?P.apply(this,arguments):P,K=O.invert(B),se=typeof E=="function"?E.apply(this,arguments):E;return n(x(T(O,se),B,K),R,s)},P,L)},b.translateBy=function($,E,P,L){b.transform($,function(){return n(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),s)},null,L)},b.translateTo=function($,E,P,L,R){b.transform($,function(){var O=t.apply(this,arguments),B=this.__zoom,K=L==null?v(O):typeof L=="function"?L.apply(this,arguments):L;return n(Ni.translate(K[0],K[1]).scale(B.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof P=="function"?-P.apply(this,arguments):-P),O,s)},L,R)};function T($,E){return E=Math.max(o[0],Math.min(o[1],E)),E===$.k?$:new At(E,$.x,$.y)}function x($,E,P){var L=E[0]-P[0]*$.k,R=E[1]-P[1]*$.k;return L===$.x&&R===$.y?$:new At($.k,L,R)}function v($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function A($,E,P,L){$.on("start.zoom",function(){I(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(L).end()}).tween("zoom",function(){var R=this,O=arguments,B=I(R,O).event(L),K=t.apply(R,O),se=P==null?v(K):typeof P=="function"?P.apply(R,O):P,$e=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),le=R.__zoom,G=typeof E=="function"?E.apply(R,O):E,U=l(le.invert(se).concat($e/le.k),G.invert(se).concat($e/G.k));return function(ie){if(ie===1)ie=G;else{var ne=U(ie),ye=$e/ne[2];ie=new At(ye,se[0]-ne[0]*ye,se[1]-ne[1]*ye)}B.zoom(null,ie)}})}function I($,E,P){return!P&&$.__zooming||new p($,E)}function p($,E){this.that=$,this.args=E,this.active=0,this.sourceEvent=null,this.extent=t.apply($,E),this.taps=0}p.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,E){return this.mouse&&$!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var E=at(this.that).datum();c.call($,this.that,new fg($,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),E)}};function D($,...E){if(!e.apply(this,arguments))return;var P=I(this,E).event($),L=this.__zoom,R=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,r.apply(this,arguments)))),O=ft($);if(P.wheel)(P.mouse[0][0]!==O[0]||P.mouse[0][1]!==O[1])&&(P.mouse[1]=L.invert(P.mouse[0]=O)),clearTimeout(P.wheel);else{if(L.k===R)return;P.mouse=[O,L.invert(O)],Vr(this),P.start()}Kn($),P.wheel=setTimeout(B,y),P.zoom("mouse",n(x(T(L,R),P.mouse[0],P.mouse[1]),P.extent,s));function B(){P.wheel=null,P.end()}}function F($,...E){if(f||!e.apply(this,arguments))return;var P=$.currentTarget,L=I(this,E,!0).event($),R=at($.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",$e,!0),O=ft($,P),B=$.clientX,K=$.clientY;ll($.view),Ki($),L.mouse=[O,this.__zoom.invert(O)],Vr(this),L.start();function se(le){if(Kn(le),!L.moved){var G=le.clientX-B,U=le.clientY-K;L.moved=G*G+U*U>m}L.event(le).zoom("mouse",n(x(L.that.__zoom,L.mouse[0]=ft(le,P),L.mouse[1]),L.extent,s))}function $e(le){R.on("mousemove.zoom mouseup.zoom",null),cl(le.view,L.moved),Kn(le),L.event(le).end()}}function q($,...E){if(e.apply(this,arguments)){var P=this.__zoom,L=ft($.changedTouches?$.changedTouches[0]:$,this),R=P.invert(L),O=P.k*($.shiftKey?.5:2),B=n(x(T(P,O),L,R),t.apply(this,E),s);Kn($),a>0?at(this).transition().duration(a).call(A,B,L,$):at(this).call(b.transform,B,L,$)}}function k($,...E){if(e.apply(this,arguments)){var P=$.touches,L=P.length,R=I(this,E,$.changedTouches.length===L).event($),O,B,K,se;for(Ki($),B=0;B<L;++B)K=P[B],se=ft(K,this),se=[se,this.__zoom.invert(se),K.identifier],R.touch0?!R.touch1&&R.touch0[2]!==se[2]&&(R.touch1=se,R.taps=0):(R.touch0=se,O=!0,R.taps=1+!!d);d&&(d=clearTimeout(d)),O&&(R.taps<2&&(h=se[0],d=setTimeout(function(){d=null},g)),Vr(this),R.start())}}function N($,...E){if(this.__zooming){var P=I(this,E).event($),L=$.changedTouches,R=L.length,O,B,K,se;for(Kn($),O=0;O<R;++O)B=L[O],K=ft(B,this),P.touch0&&P.touch0[2]===B.identifier?P.touch0[0]=K:P.touch1&&P.touch1[2]===B.identifier&&(P.touch1[0]=K);if(B=P.that.__zoom,P.touch1){var $e=P.touch0[0],le=P.touch0[1],G=P.touch1[0],U=P.touch1[1],ie=(ie=G[0]-$e[0])*ie+(ie=G[1]-$e[1])*ie,ne=(ne=U[0]-le[0])*ne+(ne=U[1]-le[1])*ne;B=T(B,Math.sqrt(ie/ne)),K=[($e[0]+G[0])/2,($e[1]+G[1])/2],se=[(le[0]+U[0])/2,(le[1]+U[1])/2]}else if(P.touch0)K=P.touch0[0],se=P.touch0[1];else return;P.zoom("touch",n(x(B,K,se),P.extent,s))}}function M($,...E){if(this.__zooming){var P=I(this,E).event($),L=$.changedTouches,R=L.length,O,B;for(Ki($),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),O=0;O<R;++O)B=L[O],P.touch0&&P.touch0[2]===B.identifier?delete P.touch0:P.touch1&&P.touch1[2]===B.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(B=ft(B,this),Math.hypot(h[0]-B[0],h[1]-B[1])<w)){var K=at(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return b.wheelDelta=function($){return arguments.length?(r=typeof $=="function"?$:Ar(+$),b):r},b.filter=function($){return arguments.length?(e=typeof $=="function"?$:Ar(!!$),b):e},b.touchable=function($){return arguments.length?(i=typeof $=="function"?$:Ar(!!$),b):i},b.extent=function($){return arguments.length?(t=typeof $=="function"?$:Ar([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),b):t},b.scaleExtent=function($){return arguments.length?(o[0]=+$[0],o[1]=+$[1],b):[o[0],o[1]]},b.translateExtent=function($){return arguments.length?(s[0][0]=+$[0][0],s[1][0]=+$[1][0],s[0][1]=+$[0][1],s[1][1]=+$[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function($){return arguments.length?(n=$,b):n},b.duration=function($){return arguments.length?(a=+$,b):a},b.interpolate=function($){return arguments.length?(l=$,b):l},b.on=function(){var $=c.on.apply(c,arguments);return $===c?b:$},b.clickDistance=function($){return arguments.length?(m=($=+$)*$,b):Math.sqrt(m)},b.tapDistance=function($){return arguments.length?(w=+$,b):w},b}const lr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},yo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],El=["Enter"," ","Escape"];var An;(function(e){e.Strict="strict",e.Loose="loose"})(An||(An={}));var Qt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Qt||(Qt={}));var oi;(function(e){e.Partial="partial",e.Full="full"})(oi||(oi={}));const mo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var qt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qt||(qt={}));var cr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(cr||(cr={}));var ke;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ke||(ke={}));const Ts={[ke.Left]:ke.Right,[ke.Right]:ke.Left,[ke.Top]:ke.Bottom,[ke.Bottom]:ke.Top};function mg(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Hs(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function pg(e){return e===null?null:e?"valid":"invalid"}const Pl=e=>"id"in e&&"source"in e&&"target"in e,wg=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Yo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),xr=(e,t=[0,0])=>{const{width:n,height:r}=nn(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},bg=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Yo(i)?i:t.nodeLookup.get(i.id));const a=s?si(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Mi(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ii(n)},kr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=si(r);n=Mi(n,i)}}),Ii(n)},Cl=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...Sr(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const c of e.values()){const{measured:d,selectable:h=!0,hidden:f=!1}=c;if(s&&!h||f)continue;const g=d.width??c.width??c.initialWidth??null,y=d.height??c.height??c.initialHeight??null,m=ur(a,Tn(c)),w=(g??0)*(y??0),b=o&&m>0;(!c.internals.handleBounds||b||m>=w||c.dragging)&&l.push(c)}return l},_g=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function xg(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function kg({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=xg(e,s),l=kr(a),c=Vo(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Nl({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let h=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",lr.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(h=[[l,c],[l+g,c+y]])}else a&&Hn(s.extent)&&(h=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const f=Hn(h)?un(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",lr.error015())),{position:{x:f.x-l+(s.measured.width??0)*d[0],y:f.y-c+(s.measured.height??0)*d[1]},positionAbsolute:f}}async function Sg({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),y=!g&&f.parentId&&s.find(m=>m.id===f.parentId);(g||y)&&s.push(f)}const a=new Set(t.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),d=_g(s,l);for(const f of l)a.has(f.id)&&!d.find(y=>y.id===f.id)&&d.push(f);if(!i)return{edges:d,nodes:s};const h=await i({nodes:s,edges:d});return typeof h=="boolean"?h?{edges:d,nodes:s}:{edges:[],nodes:[]}:h}const zn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),un=(e={x:0,y:0},t,n)=>({x:zn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:zn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Ml(e,t,n){const{width:r,height:i}=nn(n),{x:o,y:s}=n.internals.positionAbsolute;return un(e,[[o,s],[o+r,s+i]],t)}const Os=(e,t,n)=>e<t?zn(Math.abs(e-t),1,t)/t:e>n?-zn(Math.abs(e-n),1,t)/t:0,Il=(e,t,n=15,r=40)=>{const i=Os(e.x,r,t.width-r)*n,o=Os(e.y,r,t.height-r)*n;return[i,o]},Mi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),po=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ii=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Tn=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Yo(e)?e.internals.positionAbsolute:xr(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},si=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Yo(e)?e.internals.positionAbsolute:xr(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},Al=(e,t)=>Ii(Mi(po(e),po(t))),ur=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ds=e=>zt(e.width)&&zt(e.height)&&zt(e.x)&&zt(e.y),zt=e=>!isNaN(e)&&isFinite(e),Eg=(e,t)=>{},Ai=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Sr=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Ai(a,s):a},ai=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function yn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Pg(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=yn(e,n),i=yn(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=yn(e.top??e.y??0,n),i=yn(e.bottom??e.y??0,n),o=yn(e.left??e.x??0,t),s=yn(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Cg(e,t,n,r,i,o){const{x:s,y:a}=ai(e,[t,n,r]),{x:l,y:c}=ai({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=i-l,h=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(h)}}const Vo=(e,t,n,r,i,o)=>{const s=Pg(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),d=zn(c,r,i),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*d,y=n/2-f*d,m=Cg(e,g,y,d,t,n),w={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:g-w.left+w.right,y:y-w.top+w.bottom,zoom:d}},li=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Hn(e){return e!==void 0&&e!=="parent"}function nn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function zl(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ng(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function Qn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=Ht(e),a=Sr({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:c}=n?Ai(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const Tl=e=>({width:e.offsetWidth,height:e.offsetHeight}),Hl=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Mg=["INPUT","SELECT","TEXTAREA"];function Ol(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Mg.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Dl=e=>"clientX"in e,Ht=(e,t)=>{var o,s;const n=Dl(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Rs=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Tl(s)}})};function Ig({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,d=Math.abs(l-e),h=Math.abs(c-t);return[l,c,d,h]}function zr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ls({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ke.Left:return[t-zr(t-r,o),n];case ke.Right:return[t+zr(r-t,o),n];case ke.Top:return[t,n-zr(n-i,o)];case ke.Bottom:return[t,n+zr(i-n,o)]}}function Rl({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:i,targetPosition:o=ke.Top,curvature:s=.25}){const[a,l]=Ls({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,d]=Ls({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,f,g,y]=Ig({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${r},${i}`,h,f,g,y]}function Ll({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function Ag({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function zg({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Mi(si(e),si(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return ur(s,Ii(o))>0}const Tg=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Hg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Og=(e,t)=>{if(!e.source||!e.target)return t;let n;return Pl(e)?n={...e}:n={...e,id:Tg(e)},Hg(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Yl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Ll({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ys={[ke.Left]:{x:-1,y:0},[ke.Right]:{x:1,y:0},[ke.Top]:{x:0,y:-1},[ke.Bottom]:{x:0,y:1}},Dg=({source:e,sourcePosition:t=ke.Bottom,target:n})=>t===ke.Left||t===ke.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Vs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Rg({source:e,sourcePosition:t=ke.Bottom,target:n,targetPosition:r=ke.Top,center:i,offset:o}){const s=Ys[t],a=Ys[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},d=Dg({source:l,sourcePosition:t,target:c}),h=d.x!==0?"x":"y",f=d[h];let g=[],y,m;const w={x:0,y:0},b={x:0,y:0},[T,x,v,A]=Ll({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){y=i.x??T,m=i.y??x;const p=[{x:y,y:l.y},{x:y,y:c.y}],D=[{x:l.x,y:m},{x:c.x,y:m}];s[h]===f?g=h==="x"?p:D:g=h==="x"?D:p}else{const p=[{x:l.x,y:c.y}],D=[{x:c.x,y:l.y}];if(h==="x"?g=s.x===f?D:p:g=s.y===f?p:D,t===r){const M=Math.abs(e[h]-n[h]);if(M<=o){const $=Math.min(o-1,o-M);s[h]===f?w[h]=(l[h]>e[h]?-1:1)*$:b[h]=(c[h]>n[h]?-1:1)*$}}if(t!==r){const M=h==="x"?"y":"x",$=s[h]===a[M],E=l[M]>c[M],P=l[M]<c[M];(s[h]===1&&(!$&&E||$&&P)||s[h]!==1&&(!$&&P||$&&E))&&(g=h==="x"?p:D)}const F={x:l.x+w.x,y:l.y+w.y},q={x:c.x+b.x,y:c.y+b.y},k=Math.max(Math.abs(F.x-g[0].x),Math.abs(q.x-g[0].x)),N=Math.max(Math.abs(F.y-g[0].y),Math.abs(q.y-g[0].y));k>=N?(y=(F.x+q.x)/2,m=g[0].y):(y=g[0].x,m=(F.y+q.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...g,{x:c.x+b.x,y:c.y+b.y},n],y,m,v,A]}function Lg(e,t,n,r){const i=Math.min(Vs(e,t)/2,Vs(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*d}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Xo({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:i,targetPosition:o=ke.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[d,h,f,g,y]=Rg({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:c});return[d.reduce((w,b,T)=>{let x="";return T>0&&T<d.length-1?x=Lg(d[T-1],b,d[T+1],s):x=`${T===0?"M":"L"}${b.x} ${b.y}`,w+=x,w},""),h,f,g,y]}function Xs(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Yg(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Xs(t)||!Xs(n))return null;const r=t.internals.handleBounds||Ws(t.handles),i=n.internals.handleBounds||Ws(n.handles),o=Fs((r==null?void 0:r.source)??[],e.sourceHandle),s=Fs(e.connectionMode===An.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",lr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ke.Bottom,l=(s==null?void 0:s.position)||ke.Top,c=dr(t,o,a),d=dr(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}function Ws(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function dr(e,t,n=ke.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??nn(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case ke.Top:return{x:i+s/2,y:o};case ke.Right:return{x:i+s,y:o+a/2};case ke.Bottom:return{x:i+s/2,y:o+a};case ke.Left:return{x:i,y:o+a/2}}}function Fs(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function wo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Vg(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=wo(l,t);o.has(c)||(s.push({id:c,color:l.color||n,...l}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Wo={nodeOrigin:[0,0],nodeExtent:yo,elevateNodesOnSelect:!0,defaults:{}},Xg={...Wo,checkEquality:!0};function Fo(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Wg(e,t,n){const r=Fo(Wo,n);for(const i of e.values())if(i.parentId)Bo(i,e,t,r);else{const o=xr(i,r.nodeOrigin),s=Hn(i.extent)?i.extent:r.nodeExtent,a=un(o,s,nn(i));i.internals.positionAbsolute=a}}function Fg(e,t,n,r){var l,c;const i=Fo(Xg,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){let h=s.get(d.id);if(i.checkEquality&&d===(h==null?void 0:h.internals.userNode))t.set(d.id,h);else{const f=xr(d,i.nodeOrigin),g=Hn(d.extent)?d.extent:i.nodeExtent,y=un(f,g,nn(d));h={...i.defaults,...d,measured:{width:(l=d.measured)==null?void 0:l.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:d.measured?h==null?void 0:h.internals.handleBounds:void 0,z:Vl(d,a),userNode:d}},t.set(d.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(o=!1),d.parentId&&Bo(h,t,n,r)}return o}function Bg(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Bo(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=Fo(Wo,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Bg(e,n);const c=i?1e3:0,{x:d,y:h,z:f}=Kg(e,l,o,s,c),{positionAbsolute:g}=e.internals,y=d!==g.x||h!==g.y;(y||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:d,y:h}:g,z:f}})}function Vl(e,t){return(zt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Kg(e,t,n,r,i){const{x:o,y:s}=t.internals.positionAbsolute,a=nn(e),l=xr(e,n),c=Hn(e.extent)?un(l,e.extent,a):l;let d=un({x:o+c.x,y:s+c.y},r,a);e.extent==="parent"&&(d=Ml(d,a,t));const h=Vl(e,i),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>h?f:h}}function qg(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Tn(l),d=Al(c,a.rect);o.set(a.parentId,{expandedRect:d,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},c)=>{var x;const d=l.internals.positionAbsolute,h=nn(l),f=l.origin??r,g=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,y=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,m=Math.max(h.width,Math.round(a.width)),w=Math.max(h.height,Math.round(a.height)),b=(m-h.width)*f[0],T=(w-h.height)*f[1];(g>0||y>0||b||T)&&(i.push({id:c,type:"position",position:{x:l.position.x-g+b,y:l.position.y-y+T}}),(x=n.get(c))==null||x.forEach(v=>{e.some(A=>A.id===v.id)||i.push({id:v.id,type:"position",position:{x:v.position.x+g,y:v.position.y+y}})})),(h.width<a.width||h.height<a.height||g||y)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:m+(g?f[0]*g-b:0),height:w+(y?f[1]*y-T:0)}})}),i}function Zg(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const y=Tl(f.nodeElement),m=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(m||!g.internals.handleBounds||f.force))){const b=f.nodeElement.getBoundingClientRect(),T=Hn(g.extent)?g.extent:o;let{positionAbsolute:x}=g.internals;g.parentId&&g.extent==="parent"?x=Ml(x,y,t.get(g.parentId)):T&&(x=un(x,T,y));const v={...g,measured:y,internals:{...g.internals,positionAbsolute:x,handleBounds:{source:Rs("source",f.nodeElement,b,d,g.id),target:Rs("target",f.nodeElement,b,d,g.id)}}};t.set(g.id,v),g.parentId&&Bo(v,t,n,{nodeOrigin:i}),a=!0,m&&(l.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:Tn(v,i)}))}}if(h.length>0){const f=qg(h,t,n,i);l.push(...f)}return{changes:l,updatedInternals:a}}async function Gg({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Bs(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function Ug(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},c=`${i}-${s}--${o}-${a}`,d=`${o}-${a}--${i}-${s}`;Bs("source",l,d,e,i,s),Bs("target",l,c,e,o,a),t.set(r.id,r)}}function Xl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Xl(n,t):!1}function Ks(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Jg(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Xl(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function qi({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[c,d]of t){const h=(s=n.get(c))==null?void 0:s.internals.userNode;h&&i.push({...h,position:d.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function Qg({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},d=null,h=!1,f=null,g=!1;function y({noDragClassName:w,handleSelector:b,domNode:T,isSelectable:x,nodeId:v,nodeClickDistance:A=0}){f=at(T);function I({x:q,y:k},N){const{nodeLookup:M,nodeExtent:$,snapGrid:E,snapToGrid:P,nodeOrigin:L,onNodeDrag:R,onSelectionDrag:O,onError:B,updateNodePositions:K}=t();o={x:q,y:k};let se=!1,$e={x:0,y:0,x2:0,y2:0};if(a.size>1&&$){const le=kr(a);$e=po(le)}for(const[le,G]of a){if(!M.has(le))continue;let U={x:q-G.distance.x,y:k-G.distance.y};P&&(U=Ai(U,E));let ie=[[$[0][0],$[0][1]],[$[1][0],$[1][1]]];if(a.size>1&&$&&!G.extent){const{positionAbsolute:ve}=G.internals,oe=ve.x-$e.x+$[0][0],ae=ve.x+G.measured.width-$e.x2+$[1][0],C=ve.y-$e.y+$[0][1],H=ve.y+G.measured.height-$e.y2+$[1][1];ie=[[oe,C],[ae,H]]}const{position:ne,positionAbsolute:ye}=Nl({nodeId:le,nextPosition:U,nodeLookup:M,nodeExtent:ie,nodeOrigin:L,onError:B});se=se||G.position.x!==ne.x||G.position.y!==ne.y,G.position=ne,G.internals.positionAbsolute=ye}if(se&&(K(a,!0),N&&(r||R||!v&&O))){const[le,G]=qi({nodeId:v,dragItems:a,nodeLookup:M});r==null||r(N,a,le,G),R==null||R(N,le,G),v||O==null||O(N,G)}}async function p(){if(!d)return;const{transform:q,panBy:k,autoPanSpeed:N,autoPanOnNodeDrag:M}=t();if(!M){l=!1,cancelAnimationFrame(s);return}const[$,E]=Il(c,d,N);($!==0||E!==0)&&(o.x=(o.x??0)-$/q[2],o.y=(o.y??0)-E/q[2],await k({x:$,y:E})&&I(o,null)),s=requestAnimationFrame(p)}function D(q){var se;const{nodeLookup:k,multiSelectionActive:N,nodesDraggable:M,transform:$,snapGrid:E,snapToGrid:P,selectNodesOnDrag:L,onNodeDragStart:R,onSelectionDragStart:O,unselectNodesAndEdges:B}=t();h=!0,(!L||!x)&&!N&&v&&((se=k.get(v))!=null&&se.selected||B()),x&&L&&v&&(e==null||e(v));const K=Qn(q.sourceEvent,{transform:$,snapGrid:E,snapToGrid:P,containerBounds:d});if(o=K,a=Jg(k,M,K,v),a.size>0&&(n||R||!v&&O)){const[$e,le]=qi({nodeId:v,dragItems:a,nodeLookup:k});n==null||n(q.sourceEvent,a,$e,le),R==null||R(q.sourceEvent,$e,le),v||O==null||O(q.sourceEvent,le)}}const F=ul().clickDistance(A).on("start",q=>{const{domNode:k,nodeDragThreshold:N,transform:M,snapGrid:$,snapToGrid:E}=t();d=(k==null?void 0:k.getBoundingClientRect())||null,g=!1,N===0&&D(q),o=Qn(q.sourceEvent,{transform:M,snapGrid:$,snapToGrid:E,containerBounds:d}),c=Ht(q.sourceEvent,d)}).on("drag",q=>{const{autoPanOnNodeDrag:k,transform:N,snapGrid:M,snapToGrid:$,nodeDragThreshold:E,nodeLookup:P}=t(),L=Qn(q.sourceEvent,{transform:N,snapGrid:M,snapToGrid:$,containerBounds:d});if((q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||v&&!P.has(v))&&(g=!0),!g){if(!l&&k&&h&&(l=!0,p()),!h){const R=L.xSnapped-(o.x??0),O=L.ySnapped-(o.y??0);Math.sqrt(R*R+O*O)>E&&D(q)}(o.x!==L.xSnapped||o.y!==L.ySnapped)&&a&&h&&(c=Ht(q.sourceEvent,d),I(L,q.sourceEvent))}}).on("end",q=>{if(!(!h||g)&&(l=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:k,updateNodePositions:N,onNodeDragStop:M,onSelectionDragStop:$}=t();if(N(a,!1),i||M||!v&&$){const[E,P]=qi({nodeId:v,dragItems:a,nodeLookup:k,dragging:!1});i==null||i(q.sourceEvent,a,E,P),M==null||M(q.sourceEvent,E,P),v||$==null||$(q.sourceEvent,P)}}}).filter(q=>{const k=q.target;return!q.button&&(!w||!Ks(k,`.${w}`,T))&&(!b||Ks(k,b,T))});f.call(F)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function jg(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())ur(i,Tn(o))>0&&r.push(o);return r}const e$=250;function t$(e,t,n,r){var a,l;let i=[],o=1/0;const s=jg(e,n,t+e$);for(const c of s){const d=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const h of d){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:f,y:g}=dr(c,h,h.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(i=[{...h,x:f,y:g}],o=y):y===o&&i.push({...h,x:f,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(d=>d.type===c)??i[0]}return i[0]}function Wl(e,t,n,r,i,o=!1){var c,d,h;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...dr(s,l,l.position,!0)}:l}function Fl(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function n$(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Bl=()=>!0;function r$(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:h,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:m,onConnectEnd:w,isValidConnection:b=Bl,onReconnectEnd:T,updateConnection:x,getTransform:v,getFromHandle:A,autoPanSpeed:I}){const p=Hl(e.target);let D=0,F;const{x:q,y:k}=Ht(e),N=p==null?void 0:p.elementFromPoint(q,k),M=Fl(o,N),$=a==null?void 0:a.getBoundingClientRect();if(!$||!M)return;const E=Wl(i,M,r,l,t);if(!E)return;let P=Ht(e,$),L=!1,R=null,O=!1,B=null;function K(){if(!d||!$)return;const[ye,ve]=Il(P,$,I);f({x:ye,y:ve}),D=requestAnimationFrame(K)}const se={...E,nodeId:i,type:M,position:E.position},$e=l.get(i),G={inProgress:!0,isValid:null,from:dr($e,se,ke.Left,!0),fromHandle:se,fromPosition:se.position,fromNode:$e,to:P,toHandle:null,toPosition:Ts[se.position],toNode:null};x(G);let U=G;y==null||y(e,{nodeId:i,handleId:r,handleType:M});function ie(ye){if(!A()||!se){ne(ye);return}const ve=v();P=Ht(ye,$),F=t$(Sr(P,ve,!1,[1,1]),n,l,se),L||(K(),L=!0);const oe=Kl(ye,{handle:F,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:b,doc:p,lib:c,flowId:h,nodeLookup:l});B=oe.handleDomNode,R=oe.connection,O=n$(!!F,oe.isValid);const ae={...U,isValid:O,to:F&&O?ai({x:F.x,y:F.y},ve):P,toHandle:oe.toHandle,toPosition:O&&oe.toHandle?oe.toHandle.position:Ts[se.position],toNode:oe.toHandle?l.get(oe.toHandle.nodeId):null};O&&F&&U.toHandle&&ae.toHandle&&U.toHandle.type===ae.toHandle.type&&U.toHandle.nodeId===ae.toHandle.nodeId&&U.toHandle.id===ae.toHandle.id&&U.to.x===ae.to.x&&U.to.y===ae.to.y||(x(ae),U=ae)}function ne(ye){(F||B)&&R&&O&&(m==null||m(R));const{inProgress:ve,...oe}=U,ae={...oe,toPosition:U.toHandle?U.toPosition:null};w==null||w(ye,ae),o&&(T==null||T(ye,ae)),g(),cancelAnimationFrame(D),L=!1,O=!1,R=null,B=null,p.removeEventListener("mousemove",ie),p.removeEventListener("mouseup",ne),p.removeEventListener("touchmove",ie),p.removeEventListener("touchend",ne)}p.addEventListener("mousemove",ie),p.addEventListener("mouseup",ne),p.addEventListener("touchmove",ie),p.addEventListener("touchend",ne)}function Kl(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:c=Bl,nodeLookup:d}){const h=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=Ht(e),m=s.elementFromPoint(g,y),w=m!=null&&m.classList.contains(`${a}-flow__handle`)?m:f,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const T=Fl(void 0,w),x=w.getAttribute("data-nodeid"),v=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),I=w.classList.contains("connectableend");if(!x||!T)return b;const p={source:h?x:r,sourceHandle:h?v:i,target:h?r:x,targetHandle:h?i:v};b.connection=p;const F=A&&I&&(n===An.Strict?h&&T==="source"||!h&&T==="target":x!==r||v!==i);b.isValid=F&&c(p),b.toHandle=Wl(x,T,v,d,n,!1)}return b}const qs={onPointerDown:r$,isValid:Kl};function i$({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=at(e);function o({translateExtent:a,width:l,height:c,zoomStep:d=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const y=x=>{const v=n();if(x.sourceEvent.type!=="wheel"||!t)return;const A=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*d,I=v[2]*Math.pow(2,A);t.scaleTo(I)};let m=[0,0];const w=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(m=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},b=x=>{const v=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const A=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],I=[A[0]-m[0],A[1]-m[1]];m=A;const p=r()*Math.max(v[2],Math.log(v[2]))*(g?-1:1),D={x:v[0]-I[0]*p,y:v[1]-I[1]*p},F=[[0,0],[l,c]];t.setViewportConstrained({x:D.x,y:D.y,zoom:v[2]},F,a)},T=Sl().on("start",w).on("zoom",h?b:null).on("zoom.wheel",f?y:null);i.call(T,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:ft}}const o$=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,zi=e=>({x:e.x,y:e.y,zoom:e.k}),Zi=({x:e,y:t,zoom:n})=>Ni.translate(e,t).scale(n),wn=(e,t)=>e.target.closest(`.${t}`),ql=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Gi=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Zl=e=>{const t=e.ctrlKey&&li()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function s$({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(wn(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(d.ctrlKey&&s){const w=ft(d),b=Zl(d),T=h*Math.pow(2,b);r.scaleTo(n,T,w,d);return}const f=d.deltaMode===1?20:1;let g=i===Qt.Vertical?0:d.deltaX*f,y=i===Qt.Horizontal?0:d.deltaY*f;!li()&&d.shiftKey&&i!==Qt.Vertical&&(g=d.deltaY*f,y=0),r.translateBy(n,-(g/h)*o,-(y/h)*o,{internal:!0});const m=zi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,m)),e.isPanScrolling&&(l==null||l(d,m),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,m),e.isPanScrolling=!1},150))}}function a$({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=wn(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function l$({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=zi(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function c$({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&ql(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,zi(o.transform)))}}function u$({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&ql(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&o$(e.prevViewport,s.transform))){const l=zi(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function d$({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return d=>{var y;const h=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(wn(d,`${c}-flow__node`)||wn(d,`${c}-flow__edge`)))return!0;if(!r&&!h&&!i&&!o&&!n||s||wn(d,a)&&d.type==="wheel"||wn(d,l)&&(d.type!=="wheel"||i&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!h&&!i&&!f&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&g}}function f$({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=Sl().clickDistance(!zt(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),g=at(e).call(f);x({x:o.x,y:o.y,zoom:zn(o.zoom,t,n)},[[0,0],[h.width,h.height]],i);const y=g.on("wheel.zoom"),m=g.on("dblclick.zoom");f.wheelDelta(Zl);function w(N,M){return g?new Promise($=>{f==null||f.transform(Gi(g,M==null?void 0:M.duration,()=>$(!0)),N)}):Promise.resolve(!1)}function b({noWheelClassName:N,noPanClassName:M,onPaneContextMenu:$,userSelectionActive:E,panOnScroll:P,panOnDrag:L,panOnScrollMode:R,panOnScrollSpeed:O,preventScrolling:B,zoomOnPinch:K,zoomOnScroll:se,zoomOnDoubleClick:$e,zoomActivationKeyPressed:le,lib:G,onTransformChange:U}){E&&!d.isZoomingOrPanning&&T();const ne=P&&!le&&!E?s$({zoomPanValues:d,noWheelClassName:N,d3Selection:g,d3Zoom:f,panOnScrollMode:R,panOnScrollSpeed:O,zoomOnPinch:K,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):a$({noWheelClassName:N,preventScrolling:B,d3ZoomHandler:y});if(g.on("wheel.zoom",ne,{passive:!1}),!E){const ve=l$({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:a});f.on("start",ve);const oe=c$({zoomPanValues:d,panOnDrag:L,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:U});f.on("zoom",oe);const ae=u$({zoomPanValues:d,panOnDrag:L,panOnScroll:P,onPaneContextMenu:$,onPanZoomEnd:l,onDraggingChange:c});f.on("end",ae)}const ye=d$({zoomActivationKeyPressed:le,panOnDrag:L,zoomOnScroll:se,panOnScroll:P,zoomOnDoubleClick:$e,zoomOnPinch:K,userSelectionActive:E,noPanClassName:M,noWheelClassName:N,lib:G});f.filter(ye),$e?g.on("dblclick.zoom",m):g.on("dblclick.zoom",null)}function T(){f.on("zoom",null)}async function x(N,M,$){const E=Zi(N),P=f==null?void 0:f.constrain()(E,M,$);return P&&await w(P),new Promise(L=>L(P))}async function v(N,M){const $=Zi(N);return await w($,M),new Promise(E=>E($))}function A(N){if(g){const M=Zi(N),$=g.property("__zoom");($.k!==N.zoom||$.x!==N.x||$.y!==N.y)&&(f==null||f.transform(g,M,null,{sync:!0}))}}function I(){const N=g?kl(g.node()):{x:0,y:0,k:1};return{x:N.x,y:N.y,zoom:N.k}}function p(N,M){return g?new Promise($=>{f==null||f.scaleTo(Gi(g,M==null?void 0:M.duration,()=>$(!0)),N)}):Promise.resolve(!1)}function D(N,M){return g?new Promise($=>{f==null||f.scaleBy(Gi(g,M==null?void 0:M.duration,()=>$(!0)),N)}):Promise.resolve(!1)}function F(N){f==null||f.scaleExtent(N)}function q(N){f==null||f.translateExtent(N)}function k(N){const M=!zt(N)||N<0?0:N;f==null||f.clickDistance(M)}return{update:b,destroy:T,setViewport:v,setViewportConstrained:x,getViewport:I,scaleTo:p,scaleBy:D,setScaleExtent:F,setTranslateExtent:q,syncViewport:A,setClickDistance:k}}var bn;(function(e){e.Line="line",e.Handle="handle"})(bn||(bn={}));function h$({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function g$(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Xt(e,t){return Math.max(0,t-e)}function Wt(e,t){return Math.max(0,e-t)}function Tr(e,t,n){return Math.max(0,t-e,e-n)}function Zs(e,t){return e?!t:t}function $$(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:h}=t,f=d&&h,{xSnapped:g,ySnapped:y}=n,{minWidth:m,maxWidth:w,minHeight:b,maxHeight:T}=r,{x,y:v,width:A,height:I,aspectRatio:p}=e;let D=Math.floor(d?g-e.pointerX:0),F=Math.floor(h?y-e.pointerY:0);const q=A+(l?-D:D),k=I+(c?-F:F),N=-o[0]*A,M=-o[1]*I;let $=Tr(q,m,w),E=Tr(k,b,T);if(s){let R=0,O=0;l&&D<0?R=Xt(x+D+N,s[0][0]):!l&&D>0&&(R=Wt(x+q+N,s[1][0])),c&&F<0?O=Xt(v+F+M,s[0][1]):!c&&F>0&&(O=Wt(v+k+M,s[1][1])),$=Math.max($,R),E=Math.max(E,O)}if(a){let R=0,O=0;l&&D>0?R=Wt(x+D,a[0][0]):!l&&D<0&&(R=Xt(x+q,a[1][0])),c&&F>0?O=Wt(v+F,a[0][1]):!c&&F<0&&(O=Xt(v+k,a[1][1])),$=Math.max($,R),E=Math.max(E,O)}if(i){if(d){const R=Tr(q/p,b,T)*p;if($=Math.max($,R),s){let O=0;!l&&!c||l&&!c&&f?O=Wt(v+M+q/p,s[1][1])*p:O=Xt(v+M+(l?D:-D)/p,s[0][1])*p,$=Math.max($,O)}if(a){let O=0;!l&&!c||l&&!c&&f?O=Xt(v+q/p,a[1][1])*p:O=Wt(v+(l?D:-D)/p,a[0][1])*p,$=Math.max($,O)}}if(h){const R=Tr(k*p,m,w)/p;if(E=Math.max(E,R),s){let O=0;!l&&!c||c&&!l&&f?O=Wt(x+k*p+N,s[1][0])/p:O=Xt(x+(c?F:-F)*p+N,s[0][0])/p,E=Math.max(E,O)}if(a){let O=0;!l&&!c||c&&!l&&f?O=Xt(x+k*p,a[1][0])/p:O=Wt(x+(c?F:-F)*p,a[0][0])/p,E=Math.max(E,O)}}}F=F+(F<0?E:-E),D=D+(D<0?$:-$),i&&(f?q>k*p?F=(Zs(l,c)?-D:D)/p:D=(Zs(l,c)?-F:F)*p:d?(F=D/p,c=l):(D=F*p,l=c));const P=l?x+D:x,L=c?v+F:v;return{width:A+(l?-D:D),height:I+(c?-F:F),x:o[0]*D*(l?-1:1)+P,y:o[1]*F*(c?-1:1)+L}}const Gl={width:0,height:0,x:0,y:0},v$={...Gl,pointerX:0,pointerY:0,aspectRatio:1};function y$(e){return[[0,0],[e.measured.width,e.measured.height]]}function m$(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function p$({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=at(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:d,resizeDirection:h,onResizeStart:f,onResize:g,onResizeEnd:y,shouldResize:m}){let w={...Gl},b={...v$};const T=g$(l);let x,v=null,A=[],I,p,D;const F=ul().on("start",q=>{const{nodeLookup:k,transform:N,snapGrid:M,snapToGrid:$,nodeOrigin:E,paneDomNode:P}=n();if(x=k.get(t),!x)return;v=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:L,ySnapped:R}=Qn(q.sourceEvent,{transform:N,snapGrid:M,snapToGrid:$,containerBounds:v});w={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},b={...w,pointerX:L,pointerY:R,aspectRatio:w.width/w.height},I=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(I=k.get(x.parentId),p=I&&x.extent==="parent"?y$(I):void 0),A=[],D=void 0;for(const[O,B]of k)if(B.parentId===t&&(A.push({id:O,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const K=m$(B,x,B.origin??E);D?D=[[Math.min(K[0][0],D[0][0]),Math.min(K[0][1],D[0][1])],[Math.max(K[1][0],D[1][0]),Math.max(K[1][1],D[1][1])]]:D=K}f==null||f(q,{...w})}).on("drag",q=>{const{transform:k,snapGrid:N,snapToGrid:M,nodeOrigin:$}=n(),E=Qn(q.sourceEvent,{transform:k,snapGrid:N,snapToGrid:M,containerBounds:v}),P=[];if(!x)return;const{x:L,y:R,width:O,height:B}=w,K={},se=x.origin??$,{width:$e,height:le,x:G,y:U}=$$(b,T,E,c,d,se,p,D),ie=$e!==O,ne=le!==B,ye=G!==L&&ie,ve=U!==R&&ne;if(!ye&&!ve&&!ie&&!ne)return;if((ye||ve||se[0]===1||se[1]===1)&&(K.x=ye?G:w.x,K.y=ve?U:w.y,w.x=K.x,w.y=K.y,A.length>0)){const H=G-L,W=U-R;for(const Y of A)Y.position={x:Y.position.x-H+se[0]*($e-O),y:Y.position.y-W+se[1]*(le-B)},P.push(Y)}if((ie||ne)&&(K.width=ie&&(!h||h==="horizontal")?$e:w.width,K.height=ne&&(!h||h==="vertical")?le:w.height,w.width=K.width,w.height=K.height),I&&x.expandParent){const H=se[0]*(K.width??0);K.x&&K.x<H&&(w.x=H,b.x=b.x-(K.x-H));const W=se[1]*(K.height??0);K.y&&K.y<W&&(w.y=W,b.y=b.y-(K.y-W))}const oe=h$({width:w.width,prevWidth:O,height:w.height,prevHeight:B,affectsX:T.affectsX,affectsY:T.affectsY}),ae={...w,direction:oe};(m==null?void 0:m(q,ae))!==!1&&(g==null||g(q,ae),r(K,P))}).on("end",q=>{y==null||y(q,{...w}),i==null||i({...w})});o.call(F)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var w$=Te("<div><!></div>");function On(e,t){Ie(t,!0);let n=ee(t,"id",3,null),r=ee(t,"type",3,"source"),i=ee(t,"position",19,()=>ke.Top),o=ee(t,"isConnectableStart",3,!0),s=ee(t,"isConnectableEnd",3,!0),a=Vt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=En("svelteflow__node_id"),c=En("svelteflow__node_connectable");let d=_(()=>r()==="target"),h=_(()=>t.isConnectable!==void 0?t.isConnectable:c.value),f=Nt(),g=null;No(()=>{if(t.onconnect||t.ondisconnect){f.edges;let k=f.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(g&&!mg(k,g)){const N=k??new Map;Hs(g,N,t.ondisconnect),Hs(N,g,t.onconnect)}g=new Map(k)}});let y=_(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:k,toHandle:N,isValid:M}=f.connection,$=k&&k.nodeId===l&&k.type===r()&&k.id===n(),E=N&&N.nodeId===l&&N.type===r()&&N.id===n(),P=f.connectionMode===An.Strict?(k==null?void 0:k.type)!==r():l!==(k==null?void 0:k.nodeId)||n()!==(k==null?void 0:k.id);return[!0,$,E,P,E&&M]}),m=_(()=>{let[k,N,M,$,E]=u(y);return k}),w=_(()=>{let[k,N,M,$,E]=u(y);return N}),b=_(()=>{let[k,N,M,$,E]=u(y);return M}),T=_(()=>{let[k,N,M,$,E]=u(y);return $}),x=_(()=>{let[k,N,M,$,E]=u(y);return E});function v(k){var M,$;const N=((M=f.onbeforeconnect)==null?void 0:M.call(f,k))??k;N&&(f.addEdge(N),($=f.onconnect)==null||$.call(f,k))}function A(k){const N=Dl(k);(N&&k.button===0||!N)&&qs.onPointerDown(k,{handleId:n(),nodeId:l,isTarget:u(d),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:v,onConnectStart:(M,$)=>{var E;(E=f.onconnectstart)==null||E.call(f,M,{nodeId:$.nodeId,handleId:$.handleId,handleType:$.handleType})},onConnectEnd:(M,$)=>{var E;(E=f.onconnectend)==null||E.call(f,M,$)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle})}function I(k){var K,se;if(!l||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){(K=f.onclickconnectstart)==null||K.call(f,k,{nodeId:l,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const N=Hl(k.target),M=t.isValidConnection??f.isValidConnection,{connectionMode:$,clickConnectStartHandle:E,flowId:P,nodeLookup:L}=f,{connection:R,isValid:O}=qs.isValid(k,{handle:{nodeId:l,id:n(),type:r()},connectionMode:$,fromNodeId:E.nodeId,fromHandleId:E.id??null,fromType:E.type,isValidConnection:M,flowId:P,doc:N,lib:"svelte",nodeLookup:L});O&&R&&v(R);const B=structuredClone($a(f.connection));delete B.inProgress,B.toPosition=B.toHandle?B.toHandle.position:null,(se=f.onclickconnectend)==null||se.call(f,k,B),f.clickConnectStartHandle=null}var p=w$(),D=()=>{};let F;var q=Oe(p);it(q,()=>t.children??Lt),ze(k=>F=$n(p,F,{"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${f.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?I:void 0,onkeypress:D,style:t.style,role:"button",tabindex:"-1",...a,[mn]:k}),[()=>({valid:u(x),connectingto:u(b),connectingfrom:u(w),source:!u(d),target:u(d),connectablestart:o(),connectableend:s(),connectable:u(h),connectionindicator:u(h)&&(!u(m)||u(T))&&(u(m)||f.clickConnectStartHandle?s():o())})]),we(e,p),Ae()}var b$=Te("<!> <!>",1);function Ul(e,t){Ie(t,!0);let n=ee(t,"targetPosition",19,()=>ke.Top),r=ee(t,"sourcePosition",19,()=>ke.Bottom);var i=b$(),o=De(i);On(o,{type:"target",get position(){return n()}});var s=Ee(o),a=Ee(s);On(a,{type:"source",get position(){return r()}}),ze(()=>{var l;return tn(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),we(e,i),Ae()}var _$=Te(" <!>",1);function x$(e,t){Ie(t,!0);let n=ee(t,"data",19,()=>({label:"Node"})),r=ee(t,"sourcePosition",19,()=>ke.Bottom);var i=_$(),o=De(i),s=Ee(o);On(s,{type:"source",get position(){return r()}}),ze(()=>{var a;return tn(o,`${((a=n())==null?void 0:a.label)??""} `)}),we(e,i),Ae()}var k$=Te(" <!>",1);function S$(e,t){Ie(t,!0);let n=ee(t,"data",19,()=>({label:"Node"})),r=ee(t,"targetPosition",19,()=>ke.Top);var i=k$(),o=De(i),s=Ee(o);On(s,{type:"target",get position(){return r()}}),ze(()=>{var a;return tn(o,`${((a=n())==null?void 0:a.label)??""} `)}),we(e,i),Ae()}function E$(e,t){}function Gs(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Ui(e,t){const n=Nt();let r=t;return Gs(e,n.domNode,t),{async update(i){var o;i!==r&&((o=e.parentNode)==null||o.removeChild(e),r=i),Gs(e,n.domNode,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}const Us=e=>wg(e),P$=e=>Pl(e);function St(e){return e===void 0?void 0:`${e}px`}const ci={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var C$=Te("<div><!></div>");function N$(e,t){Ie(t,!0);let n=ee(t,"x",3,0),r=ee(t,"y",3,0),i=ee(t,"selectEdgeOnClick",3,!1),o=ee(t,"transparent",3,!1),s=Vt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Nt(),l=En("svelteflow__edge_id");let c=_(()=>{var y;return(y=a.visible.edges.get(l))==null?void 0:y.zIndex});var d=C$(),h=()=>{i()&&l&&a.handleEdgeSelection(l)};let f;var g=Oe(d);it(g,()=>t.children??Lt),Ze(d,(y,m)=>Ui==null?void 0:Ui(y,m),()=>"edge-labels"),ze((y,m)=>f=$n(d,f,{class:["svelte-flow__edge-label",{transparent:o()},t.class],role:"button",tabindex:"-1",onclick:h,...s,[wt]:{cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:y,height:m,"z-index":u(c)}},"svelte-w2n27y"),[()=>St(t.width),()=>St(t.height)]),we(e,d),Ae()}var M$=We("<path></path>"),I$=We('<path fill="none"></path><!><!>',1);function Ti(e,t){let n=ee(t,"interactionWidth",3,20),r=Vt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=I$(),o=De(i),s=Ee(o);{var a=d=>{var h=M$();let f;ze(()=>f=$n(h,f,{d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),we(d,h)};Xe(s,d=>{n()>0&&d(a)})}var l=Ee(s);{var c=d=>{N$(d,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{var g=Wa();ze(()=>tn(g,t.label)),we(h,g)},$$slots:{default:!0}})};Xe(l,d=>{t.label&&d(c)})}ze(()=>{_e(o,"id",t.id),_e(o,"d",t.path),mt(o,0,Pt(["svelte-flow__edge-path",t.class])),_e(o,"marker-start",t.markerStart),_e(o,"marker-end",t.markerEnd),Qe(o,t.style)}),we(e,i)}function Jl(e,t){Ie(t,!0);let n=_(()=>{var s;return Rl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(s=t.pathOptions)==null?void 0:s.curvature})}),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ti(e,{get id(){return t.id},get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function A$(e,t){Ie(t,!0);let n=_(()=>Xo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ti(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function z$(e,t){Ie(t,!0);let n=_(()=>Yl({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ti(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function T$(e,t){Ie(t,!0);let n=_(()=>Xo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=_(()=>{let[s,a,l]=u(n);return s}),i=_(()=>{let[s,a,l]=u(n);return a}),o=_(()=>{let[s,a,l]=u(n);return l});Ti(e,{get path(){return u(r)},get labelX(){return u(i)},get labelY(){return u(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ae()}function H$(e){j(e,e.v+1)}function O$(e){let t=0,n=Cn(0),r;return()=>{Gc()&&(u(n),Vn(()=>(t===0&&(r=Ue(()=>e(()=>H$(n)))),t+=1,()=>{lu().then(()=>{t-=1,t===0&&(r==null||r(),r=void 0)})})))}}var gr,$r;class D${constructor(t,n){ce(this,gr);ce(this,$r);Wn(this,gr,t),Wn(this,$r,O$(n))}get current(){return z(this,$r).call(this),z(this,gr).call(this)}}gr=new WeakMap,$r=new WeakMap;const R$=/\(.+\)/;class L$ extends D${constructor(t,n){let r=R$.test(t)?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>so(i,"change",o))}}function Y$(e,t,n,r){const i=new Map;return Cl(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Js(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l}=e,c=new Map;for(const d of t){const h=r.get(d.source),f=r.get(d.target);if(!h||!f)continue;if(a){const{visibleNodes:m,transform:w,width:b,height:T}=e;if(zg({sourceNode:h,targetNode:f,width:b,height:T,transform:w}))m.set(h.id,h),m.set(f.id,f);else continue}const g=i.get(d.id);if(g&&d===g.edge&&h==g.sourceNode&&f==g.targetNode){c.set(d.id,g);continue}const y=Yg({id:d.id,sourceNode:h,targetNode:f,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:o,onError:s});y&&c.set(d.id,{...n,...d,...y,zIndex:Ag({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:l}),sourceNode:h,targetNode:f,edge:d})}return c}const Ql={input:x$,output:S$,default:Ul,group:E$},jl={straight:z$,smoothstep:A$,default:Jl,step:T$};function V$(e){var n,r,i,o,s,a,l,c,d,h,f,g,y,m,w,b,T,x,v,A,I,p,D,F,q,k,N,M,$,E,P,L,R,O,B,K,se,$e,le,G,U,ie,ne,ye,ve,oe,ae,C,H,W,Y,V,X,Z,J,Q,te,re,fe,he,ue,ge,pe,de,me,be,Pe,Ne,xe,Se,Ce;class t{constructor(){ce(this,n,_(()=>e.props.id??"1"));ce(this,r,Me(null));ce(this,i,Me(null));ce(this,o,Me(qe(e.width??0)));ce(this,s,Me(qe(e.height??0)));ce(this,a,_(()=>{var Ke;const S=Fg(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&S&&((Ke=this.fitViewOptions)!=null&&Ke.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),S}));ce(this,l,_(()=>this.panZoom!==null));ce(this,c,_(()=>(Ug(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Fe(this,"_prevSelectedNodes",[]);Fe(this,"_prevSelectedNodeIds",new Set);ce(this,d,_(()=>{const S=this._prevSelectedNodeIds.size,Ke=new Set,Xn=this.nodes.filter(ut=>(ut.selected&&(Ke.add(ut.id),this._prevSelectedNodeIds.delete(ut.id)),ut.selected));return(S!==Ke.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Xn),this._prevSelectedNodeIds=Ke,this._prevSelectedNodes}));Fe(this,"_prevSelectedEdges",[]);Fe(this,"_prevSelectedEdgeIds",new Set);ce(this,h,_(()=>{const S=this._prevSelectedEdgeIds.size,Ke=new Set,Xn=this.edges.filter(ut=>(ut.selected&&(Ke.add(ut.id),this._prevSelectedEdgeIds.delete(ut.id)),ut.selected));return(S!==Ke.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Xn),this._prevSelectedEdgeIds=Ke,this._prevSelectedEdges}));Fe(this,"selectionChangeHandlers",new Map);Fe(this,"nodeLookup",new Map);Fe(this,"parentLookup",new Map);Fe(this,"connectionLookup",new Map);Fe(this,"edgeLookup",new Map);Fe(this,"_prevVisibleEdges",new Map);ce(this,f,_(()=>{const{nodes:S,_edges:Ke,_prevVisibleEdges:Xn,nodeLookup:ut,connectionMode:lc,onerror:cc,onlyRenderVisibleElements:uc,defaultEdgeOptions:dc}=this;let Er,Di;const Uo={edges:Ke,defaultEdgeOptions:dc,previousEdges:Xn,nodeLookup:ut,connectionMode:lc,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:cc};if(uc){const{viewport:Ri,width:Jo,height:Qo}=this,jo=[Ri.x,Ri.y,Ri.zoom];Er=Y$(ut,jo,Jo,Qo),Di=Js({...Uo,onlyRenderVisible:!0,visibleNodes:Er,transform:jo,width:Jo,height:Qo})}else Er=this.nodeLookup,Di=Js(Uo);return{nodes:Er,edges:Di}}));ce(this,g,_(()=>e.props.nodesDraggable??!0));ce(this,y,_(()=>e.props.nodesConnectable??!0));ce(this,m,_(()=>e.props.elementsSelectable??!0));ce(this,w,_(()=>e.props.nodesFocusable??!0));ce(this,b,_(()=>e.props.edgesFocusable??!0));ce(this,T,_(()=>e.props.disableKeyboardA11y??!1));ce(this,x,_(()=>e.props.minZoom??.5));ce(this,v,_(()=>e.props.maxZoom??2));ce(this,A,_(()=>e.props.nodeOrigin??[0,0]));ce(this,I,_(()=>e.props.nodeExtent??yo));ce(this,p,_(()=>e.props.translateExtent??yo));ce(this,D,_(()=>e.props.defaultEdgeOptions??{}));ce(this,F,_(()=>e.props.nodeDragThreshold??1));ce(this,q,_(()=>e.props.autoPanOnNodeDrag??!0));ce(this,k,_(()=>e.props.autoPanOnConnect??!0));Fe(this,"fitViewQueued",e.props.fitView??!1);Fe(this,"fitViewOptions",e.props.fitViewOptions);Fe(this,"fitViewResolver",null);ce(this,N,_(()=>e.props.snapGrid??null));ce(this,M,Me(!1));ce(this,$,Me(null));ce(this,E,Me(!1));ce(this,P,Me(!1));ce(this,L,Me(!1));ce(this,R,Me(!1));ce(this,O,Me(!1));ce(this,B,Me(null));ce(this,K,Me(""));ce(this,se,_(()=>e.props.selectionMode??oi.Partial));ce(this,$e,_(()=>({...Ql,...e.props.nodeTypes})));ce(this,le,_(()=>({...jl,...e.props.edgeTypes})));ce(this,G,_(()=>e.props.noPanClass??"nopan"));ce(this,U,_(()=>e.props.noDragClass??"nodrag"));ce(this,ie,_(()=>e.props.noWheelClass??"nowheel"));ce(this,ne,Me(qe(e.props.initialViewport??{x:0,y:0,zoom:1})));ce(this,ye,Me(qe(mo)));ce(this,ve,_(()=>this._connection.inProgress?{...this._connection,to:Sr(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));ce(this,oe,_(()=>e.props.connectionMode??An.Strict));ce(this,ae,_(()=>e.props.connectionRadius??20));ce(this,C,_(()=>e.props.isValidConnection??(()=>!0)));ce(this,H,_(()=>e.props.selectNodesOnDrag??!0));ce(this,W,_(()=>e.props.defaultMarkerColor??"#b1b1b7"));ce(this,Y,_(()=>Vg(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));ce(this,V,_(()=>e.props.onlyRenderVisibleElements??!1));ce(this,X,_(()=>e.props.onflowerror??Eg));ce(this,Z,_(()=>e.props.ondelete));ce(this,J,_(()=>e.props.onbeforedelete));ce(this,Q,_(()=>e.props.onbeforeconnect));ce(this,te,_(()=>e.props.onconnect));ce(this,re,_(()=>e.props.onconnectstart));ce(this,fe,_(()=>e.props.onconnectend));ce(this,he,_(()=>e.props.onbeforereconnect));ce(this,ue,_(()=>e.props.onreconnect));ce(this,ge,_(()=>e.props.onreconnectstart));ce(this,pe,_(()=>e.props.onreconnectend));ce(this,de,_(()=>e.props.clickConnect??!0));ce(this,me,_(()=>e.props.onclickconnectstart));ce(this,be,_(()=>e.props.onclickconnectend));ce(this,Pe,Me(null));ce(this,Ne,_(()=>e.props.onselectiondrag));ce(this,xe,_(()=>e.props.onselectiondragstart));ce(this,Se,_(()=>e.props.onselectiondragstop));Fe(this,"resolveFitView",async()=>{var S;this.panZoom&&(await kg({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(S=this.fitViewResolver)==null||S.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Fe(this,"_prefersDark",new L$("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));ce(this,Ce,_(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"));if(e.props.fitView&&!e.props.initialViewport&&this.width&&this.height){const S=kr(this.nodeLookup,{filter:Ke=>!!((Ke.width||Ke.initialWidth)&&(Ke.height||Ke.initialHeight))});this.viewport=Vo(S,this.width,this.height,.5,2,.1)}}get flowId(){return u(z(this,n))}set flowId(S){j(z(this,n),S)}get domNode(){return u(z(this,r))}set domNode(S){j(z(this,r),S,!0)}get panZoom(){return u(z(this,i))}set panZoom(S){j(z(this,i),S,!0)}get width(){return u(z(this,o))}set width(S){j(z(this,o),S,!0)}get height(){return u(z(this,s))}set height(S){j(z(this,s),S,!0)}get nodesInitialized(){return u(z(this,a))}set nodesInitialized(S){j(z(this,a),S)}get viewportInitialized(){return u(z(this,l))}set viewportInitialized(S){j(z(this,l),S)}get _edges(){return u(z(this,c))}set _edges(S){j(z(this,c),S)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(S){e.nodes=S}get edges(){return this._edges}set edges(S){e.edges=S}get selectedNodes(){return u(z(this,d))}set selectedNodes(S){j(z(this,d),S)}get selectedEdges(){return u(z(this,h))}set selectedEdges(S){j(z(this,h),S)}get visible(){return u(z(this,f))}set visible(S){j(z(this,f),S)}get nodesDraggable(){return u(z(this,g))}set nodesDraggable(S){j(z(this,g),S)}get nodesConnectable(){return u(z(this,y))}set nodesConnectable(S){j(z(this,y),S)}get elementsSelectable(){return u(z(this,m))}set elementsSelectable(S){j(z(this,m),S)}get nodesFocusable(){return u(z(this,w))}set nodesFocusable(S){j(z(this,w),S)}get edgesFocusable(){return u(z(this,b))}set edgesFocusable(S){j(z(this,b),S)}get disableKeyboardA11y(){return u(z(this,T))}set disableKeyboardA11y(S){j(z(this,T),S)}get minZoom(){return u(z(this,x))}set minZoom(S){j(z(this,x),S)}get maxZoom(){return u(z(this,v))}set maxZoom(S){j(z(this,v),S)}get nodeOrigin(){return u(z(this,A))}set nodeOrigin(S){j(z(this,A),S)}get nodeExtent(){return u(z(this,I))}set nodeExtent(S){j(z(this,I),S)}get translateExtent(){return u(z(this,p))}set translateExtent(S){j(z(this,p),S)}get defaultEdgeOptions(){return u(z(this,D))}set defaultEdgeOptions(S){j(z(this,D),S)}get nodeDragThreshold(){return u(z(this,F))}set nodeDragThreshold(S){j(z(this,F),S)}get autoPanOnNodeDrag(){return u(z(this,q))}set autoPanOnNodeDrag(S){j(z(this,q),S)}get autoPanOnConnect(){return u(z(this,k))}set autoPanOnConnect(S){j(z(this,k),S)}get snapGrid(){return u(z(this,N))}set snapGrid(S){j(z(this,N),S)}get dragging(){return u(z(this,M))}set dragging(S){j(z(this,M),S,!0)}get selectionRect(){return u(z(this,$))}set selectionRect(S){j(z(this,$),S,!0)}get selectionKeyPressed(){return u(z(this,E))}set selectionKeyPressed(S){j(z(this,E),S,!0)}get multiselectionKeyPressed(){return u(z(this,P))}set multiselectionKeyPressed(S){j(z(this,P),S,!0)}get deleteKeyPressed(){return u(z(this,L))}set deleteKeyPressed(S){j(z(this,L),S,!0)}get panActivationKeyPressed(){return u(z(this,R))}set panActivationKeyPressed(S){j(z(this,R),S,!0)}get zoomActivationKeyPressed(){return u(z(this,O))}set zoomActivationKeyPressed(S){j(z(this,O),S,!0)}get selectionRectMode(){return u(z(this,B))}set selectionRectMode(S){j(z(this,B),S,!0)}get ariaLiveMessage(){return u(z(this,K))}set ariaLiveMessage(S){j(z(this,K),S,!0)}get selectionMode(){return u(z(this,se))}set selectionMode(S){j(z(this,se),S)}get nodeTypes(){return u(z(this,$e))}set nodeTypes(S){j(z(this,$e),S)}get edgeTypes(){return u(z(this,le))}set edgeTypes(S){j(z(this,le),S)}get noPanClass(){return u(z(this,G))}set noPanClass(S){j(z(this,G),S)}get noDragClass(){return u(z(this,U))}set noDragClass(S){j(z(this,U),S)}get noWheelClass(){return u(z(this,ie))}set noWheelClass(S){j(z(this,ie),S)}get _viewport(){return u(z(this,ne))}set _viewport(S){j(z(this,ne),S,!0)}get viewport(){return e.viewport??this._viewport}set viewport(S){e.viewport&&(e.viewport=S),this._viewport=S}get _connection(){return u(z(this,ye))}set _connection(S){j(z(this,ye),S,!0)}get connection(){return u(z(this,ve))}set connection(S){j(z(this,ve),S)}get connectionMode(){return u(z(this,oe))}set connectionMode(S){j(z(this,oe),S)}get connectionRadius(){return u(z(this,ae))}set connectionRadius(S){j(z(this,ae),S)}get isValidConnection(){return u(z(this,C))}set isValidConnection(S){j(z(this,C),S)}get selectNodesOnDrag(){return u(z(this,H))}set selectNodesOnDrag(S){j(z(this,H),S)}get defaultMarkerColor(){return u(z(this,W))}set defaultMarkerColor(S){j(z(this,W),S)}get markers(){return u(z(this,Y))}set markers(S){j(z(this,Y),S)}get onlyRenderVisibleElements(){return u(z(this,V))}set onlyRenderVisibleElements(S){j(z(this,V),S)}get onerror(){return u(z(this,X))}set onerror(S){j(z(this,X),S)}get ondelete(){return u(z(this,Z))}set ondelete(S){j(z(this,Z),S)}get onbeforedelete(){return u(z(this,J))}set onbeforedelete(S){j(z(this,J),S)}get onbeforeconnect(){return u(z(this,Q))}set onbeforeconnect(S){j(z(this,Q),S)}get onconnect(){return u(z(this,te))}set onconnect(S){j(z(this,te),S)}get onconnectstart(){return u(z(this,re))}set onconnectstart(S){j(z(this,re),S)}get onconnectend(){return u(z(this,fe))}set onconnectend(S){j(z(this,fe),S)}get onbeforereconnect(){return u(z(this,he))}set onbeforereconnect(S){j(z(this,he),S)}get onreconnect(){return u(z(this,ue))}set onreconnect(S){j(z(this,ue),S)}get onreconnectstart(){return u(z(this,ge))}set onreconnectstart(S){j(z(this,ge),S)}get onreconnectend(){return u(z(this,pe))}set onreconnectend(S){j(z(this,pe),S)}get clickConnect(){return u(z(this,de))}set clickConnect(S){j(z(this,de),S)}get onclickconnectstart(){return u(z(this,me))}set onclickconnectstart(S){j(z(this,me),S)}get onclickconnectend(){return u(z(this,be))}set onclickconnectend(S){j(z(this,be),S)}get clickConnectStartHandle(){return u(z(this,Pe))}set clickConnectStartHandle(S){j(z(this,Pe),S,!0)}get onselectiondrag(){return u(z(this,Ne))}set onselectiondrag(S){j(z(this,Ne),S)}get onselectiondragstart(){return u(z(this,xe))}set onselectiondragstart(S){j(z(this,xe),S)}get onselectiondragstop(){return u(z(this,Se))}set onselectiondragstop(S){j(z(this,Se),S)}get colorMode(){return u(z(this,Ce))}set colorMode(S){j(z(this,Ce),S)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=mo,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,I=new WeakMap,p=new WeakMap,D=new WeakMap,F=new WeakMap,q=new WeakMap,k=new WeakMap,N=new WeakMap,M=new WeakMap,$=new WeakMap,E=new WeakMap,P=new WeakMap,L=new WeakMap,R=new WeakMap,O=new WeakMap,B=new WeakMap,K=new WeakMap,se=new WeakMap,$e=new WeakMap,le=new WeakMap,G=new WeakMap,U=new WeakMap,ie=new WeakMap,ne=new WeakMap,ye=new WeakMap,ve=new WeakMap,oe=new WeakMap,ae=new WeakMap,C=new WeakMap,H=new WeakMap,W=new WeakMap,Y=new WeakMap,V=new WeakMap,X=new WeakMap,Z=new WeakMap,J=new WeakMap,Q=new WeakMap,te=new WeakMap,re=new WeakMap,fe=new WeakMap,he=new WeakMap,ue=new WeakMap,ge=new WeakMap,pe=new WeakMap,de=new WeakMap,me=new WeakMap,be=new WeakMap,Pe=new WeakMap,Ne=new WeakMap,xe=new WeakMap,Se=new WeakMap,Ce=new WeakMap,new t}function Nt(){const e=En(ui);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const ui=Symbol();function ec(e){const t=V$(e);function n(k){t.nodeTypes={...Ql,...k}}function r(k){t.edgeTypes={...jl,...k}}function i(k){t.edges=Og(k,t.edges)}const o=(k,N=!1)=>{t.nodes=t.nodes.map(M=>{const $=k.get(M.id);return $?{...M,position:$.position,dragging:N}:M})};function s(k){var E,P,L;const{changes:N,updatedInternals:M}=Zg(k,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!M)return;Wg(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const $=new Map;for(const R of N){const O=(E=t.nodeLookup.get(R.id))==null?void 0:E.internals.userNode;if(!O)continue;const B={...O};switch(R.type){case"dimensions":{const K={...B.measured,...R.dimensions};R.setAttributes&&(B.width=((P=R.dimensions)==null?void 0:P.width)??B.width,B.height=((L=R.dimensions)==null?void 0:L.height)??B.height),B.measured=K;break}case"position":B.position=R.position??B.position;break}$.set(R.id,B)}t.nodes=t.nodes.map(R=>$.get(R.id)??R),t.nodesInitialized||(t.nodesInitialized=!0)}function a(k){const N=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=k,t.fitViewResolver=N,t.nodes=[...t.nodes],N.promise}function l(k,N){const M=t.panZoom;return M?M.scaleBy(k,N):Promise.resolve(!1)}function c(k){return l(1.2,k)}function d(k){return l(1/1.2,k)}function h(k){const N=t.panZoom;N&&(N.setScaleExtent([k,t.maxZoom]),t.minZoom=k)}function f(k){const N=t.panZoom;N&&(N.setScaleExtent([t.minZoom,k]),t.maxZoom=k)}function g(k){const N=t.panZoom;N&&(N.setTranslateExtent(k),t.translateExtent=k)}function y(k){var N;(N=t.panZoom)==null||N.setClickDistance(k)}function m(k,N=null){let M=!1;const $=k.map(E=>(N?N.has(E.id):!0)&&E.selected?(M=!0,{...E,selected:!1}):E);return[M,$]}function w(k){const N=k!=null&&k.nodes?new Set(k.nodes.map(R=>R.id)):null,[M,$]=m(t.nodes,N);M&&(t.nodes=$);const E=k!=null&&k.edges?new Set(k.edges.map(R=>R.id)):null,[P,L]=m(t.edges,E);P&&(t.edges=L)}function b(k){const N=t.multiselectionKeyPressed;t.nodes=t.nodes.map(M=>{const $=k.includes(M.id),E=N&&M.selected||$;if(M.selected!==E){const P=t.nodeLookup.get(M.id);return P&&(P.selected=E),M.selected=E,{...M}}return M}),N||w({nodes:[]})}function T(k){const N=t.multiselectionKeyPressed;t.edges=t.edges.map(M=>{const $=k.includes(M.id),E=N&&M.selected||$;return M.selected!==E?{...M,selected:E}:M}),N||w({edges:[]})}function x(k,N,M){const $=t.nodeLookup.get(k);if(!$){console.warn("012",lr.error012(k));return}t.selectionRect=null,t.selectionRectMode=null,$.selected?(N||$.selected&&t.multiselectionKeyPressed)&&(w({nodes:[$],edges:[]}),requestAnimationFrame(()=>M==null?void 0:M.blur())):b([k])}function v(k){const N=t.edgeLookup.get(k);if(!N){console.warn("012",lr.error012(k));return}(N.selectable||t.elementsSelectable&&typeof N.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,N.selected?N.selected&&t.multiselectionKeyPressed&&w({nodes:[],edges:[N]}):T([k]))}function A(k,N){const{nodeExtent:M,snapGrid:$,nodeOrigin:E,nodeLookup:P,nodesDraggable:L,onerror:R}=t,O=new Map,B=($==null?void 0:$[0])??5,K=($==null?void 0:$[1])??5,se=k.x*B*N,$e=k.y*K*N;for(const le of P.values()){if(!(le.selected&&(le.draggable||L&&typeof le.draggable>"u")))continue;let U={x:le.internals.positionAbsolute.x+se,y:le.internals.positionAbsolute.y+$e};$&&(U=Ai(U,$));const{position:ie,positionAbsolute:ne}=Nl({nodeId:le.id,nextPosition:U,nodeLookup:P,nodeExtent:M,nodeOrigin:E,onError:R});le.position=ie,le.internals.positionAbsolute=ne,O.set(le.id,le)}o(O)}function I(k){return Gg({delta:k,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const p=k=>{t._connection={...k}};function D(){t._connection=mo}function F(){t.resetStoreValues(),w()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:c,zoomOut:d,fitView:a,setMinZoom:h,setMaxZoom:f,setTranslateExtent:g,setPaneClickDistance:y,unselectNodesAndEdges:w,addSelectedNodes:b,addSelectedEdges:T,handleNodeSelection:x,handleEdgeSelection:v,moveSelectedNodes:A,panBy:I,updateConnection:p,cancelConnection:D,reset:F})}function Ji(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,translateExtent:o,paneClickDistance:s,setPanZoomInstance:a,onDraggingChange:l,onTransformChange:c}=t,d=f$({domNode:e,minZoom:n,maxZoom:r,translateExtent:o,viewport:i,paneClickDistance:s,onDraggingChange:l}),h=d.getViewport();return(i.x!==h.x||i.y!==h.y||i.zoom!==h.zoom)&&c([h.x,h.y,h.zoom]),a(d),d.update(t),{update(f){d.update(f)}}}var X$=Te('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function W$(e,t){Ie(t,!0);let n=ee(t,"store",15),r=ee(t,"panOnScrollMode",19,()=>Qt.Free),i=ee(t,"preventScrolling",3,!0),o=ee(t,"zoomOnScroll",3,!0),s=ee(t,"zoomOnDoubleClick",3,!0),a=ee(t,"zoomOnPinch",3,!0),l=ee(t,"panOnDrag",3,!0),c=ee(t,"panOnScroll",3,!1),d=ee(t,"paneClickDistance",3,1),h=_(()=>n().panActivationKeyPressed||l()),f=_(()=>n().panActivationKeyPressed||c());const{viewport:g}=n();let y=!1;Ot(()=>{var b;!y&&n().viewportInitialized&&((b=t.oninit)==null||b.call(t),y=!0)});var m=X$(),w=Oe(m);it(w,()=>t.children),Ze(m,(b,T)=>Ji==null?void 0:Ji(b,T),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:b=>{n(n().dragging=b,!0)},setPanZoomInstance:b=>{n(n().panZoom=b,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:o(),zoomOnDoubleClick:s(),zoomOnPinch:a(),panOnScroll:u(f),panOnDrag:u(h),panOnScrollSpeed:.5,panOnScrollMode:r()||Qt.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof i()=="boolean"?i():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:d(),onTransformChange:b=>{n(n().viewport={x:b[0],y:b[1],zoom:b[2]},!0)}})),we(e,m),Ae()}function Qs(e,t){return n=>{n.target===t&&(e==null||e(n))}}function js(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function ea(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var F$=Te("<div><!></div>");function B$(e,t){Ie(t,!0);let n=ee(t,"store",15),r=ee(t,"panOnDrag",3,!0),i,o=null,s=new Set,a=new Set,l=_(()=>n().panActivationKeyPressed||r()),c=_(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&u(l)!==!0),d=_(()=>n().elementsSelectable&&(u(c)||n().selectionRectMode==="user")),h=!1;function f(I){var p;if(h||n().connection.inProgress){h=!1;return}(p=t.onpaneclick)==null||p.call(t,{event:I}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(I){var F,q,k;if(o=i==null?void 0:i.getBoundingClientRect(),!n().elementsSelectable||!u(c)||I.button!==0||I.target!==i||!o)return;(q=(F=I.target)==null?void 0:F.setPointerCapture)==null||q.call(F,I.pointerId);const{x:p,y:D}=Ht(I,o);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:p,startY:D,x:p,y:D},!0),(k=t.onselectionstart)==null||k.call(t,I)}function y(I){if(!u(c)||!o||!n().selectionRect)return;h=!0;const p=Ht(I,o),{startX:D=0,startY:F=0}=n().selectionRect,q={...n().selectionRect,x:p.x<D?p.x:D,y:p.y<F?p.y:F,width:Math.abs(p.x-D),height:Math.abs(p.y-F)},k=s,N=a;s=new Set(Cl(n().nodeLookup,q,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===oi.Partial,!0).map($=>$.id));const M=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const $ of s){const E=n().connectionLookup.get($);if(E)for(const{edgeId:P}of E.values()){const L=n().edgeLookup.get(P);L&&(L.selectable??M)&&a.add(P)}}ea(k,s)||n(n().nodes=n().nodes.map(js(s)),!0),ea(N,a)||n(n().edges=n().edges.map(js(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=q,!0)}function m(I){var p,D,F;I.button===0&&((D=(p=I.target)==null?void 0:p.releasePointerCapture)==null||D.call(p,I.pointerId),!u(c)&&n().selectionRectMode==="user"&&I.target===i&&(f==null||f(I)),n(n().selectionRect=null,!0),s.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),(F=t.onselectionend)==null||F.call(t,I))}const w=I=>{var p;if(Array.isArray(u(l))&&u(l).includes(2)){I.preventDefault();return}(p=t.onpanecontextmenu)==null||p.call(t,{event:I})};var b=F$();let T;var x=_(()=>u(d)?void 0:Qs(f,i));b.__click=function(...I){var p;(p=u(x))==null||p.apply(this,I)},b.__pointerdown=function(...I){var p;(p=u(d)?g:void 0)==null||p.apply(this,I)},b.__pointermove=function(...I){var p;(p=u(d)?y:void 0)==null||p.apply(this,I)},b.__pointerup=function(...I){var p;(p=u(d)?m:void 0)==null||p.apply(this,I)};var v=_(()=>Qs(w,i));b.__contextmenu=function(...I){var p;(p=u(v))==null||p.apply(this,I)};var A=Oe(b);it(A,()=>t.children),kt(b,I=>i=I,()=>i),ze(I=>T=mt(b,1,"svelte-flow__pane svelte-flow__container",null,T,I),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:u(c)})]),we(e,b),Ae()}gn(["click","pointerdown","pointermove","pointerup","contextmenu"]);var K$=Te('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function q$(e,t){Ie(t,!0);var n=K$();let r;var i=Oe(n);it(i,()=>t.children),ze(()=>r=Qe(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),we(e,n),Ae()}function kn(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=Qg({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:d}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(c,d){if(d.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){a.destroy()}}}var Z$=Te('<div aria-live="assertive" aria-atomic="true" style="position: absolute; width: 1px; height: 1px; margin: -1px; border: 0; padding: 0; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); clip-path: inset(100%);"> </div>'),G$=Te(`<div style="display: none;">Press enter or space to select a node. <!> Press delete to remove it and escape to cancel.</div> <div style="display: none;">Press enter or space to select an edge. You can then press delete to remove it or escape to
  cancel.</div> <!>`,1);function U$(e,t){Ie(t,!0);var n=G$(),r=De(n),i=Ee(Oe(r));{var o=c=>{var d=Wa("You can then use the arrow keys to move the node around.");we(c,d)};Xe(i,c=>{t.store.disableKeyboardA11y||c(o)})}var s=Ee(r,2),a=Ee(s,2);{var l=c=>{var d=Z$(),h=Oe(d);ze(()=>{_e(d,"id",`${J$}-${t.store.flowId}`),tn(h,t.store.ariaLiveMessage)}),we(c,d)};Xe(a,c=>{t.store.disableKeyboardA11y||c(l)})}ze(()=>{_e(r,"id",`${tc}-${t.store.flowId}`),_e(s,"id",`${nc}-${t.store.flowId}`)}),we(e,n),Ae()}const tc="svelte-flow__node-desc",nc="svelte-flow__edge-desc",J$="svelte-flow__aria-live";function Q$(e,t,n,r,i,o,s){var a;u(t)&&(!n().selectNodesOnDrag||!u(r)||n().nodeDragThreshold>0)&&n().handleNodeSelection(i),(a=o.onnodeclick)==null||a.call(o,{node:u(s),event:e})}var j$=Te("<div><!></div>");function e0(e,t){Ie(t,!0);let n=ee(t,"store",15),r=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return C}),i=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return H}),o=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return W}),s=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Y}),a=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return V}),l=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return X}),c=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Z}),d=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return J}),h=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Q}),f=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return te}),g=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return re}),y=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return fe}),m=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return he}),w=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return ue}),b=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return ge}),T=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return pe}),x=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return de}),v=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return me}),A=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return be}),I=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Pe}),p=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Ne}),D=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return xe}),F=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Se}),q=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Ce}),k=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return Ye}),N=_(()=>{let{data:C={},selected:H=!1,draggable:W,selectable:Y,deletable:V=!0,connectable:X,focusable:Z,hidden:J=!1,dragging:Q=!1,style:te="",class:re,type:fe="default",parentId:he,sourcePosition:ue,targetPosition:ge,measured:{width:pe,height:de}={width:0,height:0},initialWidth:me,initialHeight:be,width:Pe,height:Ne,dragHandle:xe,internals:{z:Se=0,positionAbsolute:{x:Ce,y:Ye},userNode:S}}=t.node;return S}),{id:M}=t.node,$=_(()=>u(o)??n().nodesDraggable),E=_(()=>u(s)??n().elementsSelectable),P=_(()=>u(l)??n().nodesConnectable),L=_(()=>zl(t.node)&&!!t.node.internals.handleBounds),R=_(()=>u(c)??n().nodesFocusable);function O(C){return n().parentLookup.has(C)}let B=_(()=>O(M)),K=Me(null),se=null,$e=u(y),le=u(w),G=u(b),U=_(()=>n().nodeTypes[u(y)]??Ul);jn("svelteflow__node_connectable",{get value(){return u(P)}}),jn("svelteflow__node_id",M);let ne=_(()=>{const C=u(T)===void 0?u(I)??u(v):u(I),H=u(x)===void 0?u(p)??u(A):u(p);if(!(C===void 0&&H===void 0&&u(f)===void 0))return`${u(f)};${C?`width:${St(C)};`:""}${H?`height:${St(H)};`:""}`});Ot(()=>{(u(y)!==$e||u(w)!==le||u(b)!==G)&&u(K)!==null&&requestAnimationFrame(()=>{u(K)!==null&&n().updateNodeInternals(new Map([[M,{id:M,nodeElement:u(K),force:!0}]]))}),$e=u(y),le=u(w),G=u(b)}),Ot(()=>{t.resizeObserver&&(!u(L)||u(K)!==se)&&(se&&t.resizeObserver.unobserve(se),u(K)&&t.resizeObserver.observe(u(K)),se=u(K))}),wr(()=>{var C;se&&((C=t.resizeObserver)==null||C.unobserve(se))});function ye(C){if(!(Ol(C)||n().disableKeyboardA11y))if(El.includes(C.key)&&u(E)){const H=C.key==="Escape";n().handleNodeSelection(M,H,u(K))}else u($)&&t.node.selected&&Object.prototype.hasOwnProperty.call(ci,C.key)&&(C.preventDefault(),n(n().ariaLiveMessage=`Moved selected node ${C.key.replace("Arrow","").toLowerCase()}. New position, x: ${t.node.internals.positionAbsolute.x}, y: ${t.node.internals.positionAbsolute.y}`,!0),n().moveSelectedNodes(ci[C.key],C.shiftKey?4:1))}var ve=nt(),oe=De(ve);{var ae=C=>{var H=j$();_e(H,"data-id",M);let W,Y;H.__click=[Q$,E,n,$,M,t,N],H.__pointermove=function(...X){var Z;(Z=t.onnodepointermove?J=>t.onnodepointermove({node:u(N),event:J}):void 0)==null||Z.apply(this,X)},H.__contextmenu=function(...X){var Z;(Z=t.onnodecontextmenu?J=>t.onnodecontextmenu({node:u(N),event:J}):void 0)==null||Z.apply(this,X)},H.__keydown=function(...X){var Z;(Z=u(R)?ye:void 0)==null||Z.apply(this,X)};var V=Oe(H);zo(V,()=>u(U),(X,Z)=>{Z(X,{get data(){return u(r)},id:M,get selected(){return u(i)},get selectable(){return u(E)},get deletable(){return u(a)},get sourcePosition(){return u(w)},get targetPosition(){return u(b)},get zIndex(){return u(F)},get dragging(){return u(h)},get draggable(){return u($)},get dragHandle(){return u(D)},get parentId(){return u(m)},get type(){return u(y)},get isConnectable(){return u(P)},get positionAbsoluteX(){return u(q)},get positionAbsoluteY(){return u(k)},get width(){return u(I)},get height(){return u(p)}})}),Ze(H,(X,Z)=>kn==null?void 0:kn(X,Z),()=>({nodeId:M,isSelectable:u(E),disabled:!u($),handleSelector:u(D),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(X,Z,J,Q)=>{var te;(te=t.onnodedrag)==null||te.call(t,{event:X,targetNode:J,nodes:Q})},onDragStart:(X,Z,J,Q)=>{var te;(te=t.onnodedragstart)==null||te.call(t,{event:X,targetNode:J,nodes:Q})},onDragStop:(X,Z,J,Q)=>{var te;(te=t.onnodedragstop)==null||te.call(t,{event:X,targetNode:J,nodes:Q})},store:n()})),kt(H,X=>j(K,X),()=>u(K)),ze(X=>{W=mt(H,1,Pt(["svelte-flow__node",`svelte-flow__node-${u(y)}`,u(g)]),null,W,X),Y=Qe(H,u(ne),Y,{"z-index":u(F),transform:`translate(${u(q)??""}px, ${u(k)??""}px)`,visibility:u(L)?"visible":"hidden"}),_e(H,"tabindex",u(R)?0:void 0),_e(H,"role",u(R)?"button":void 0),_e(H,"aria-describedby",n().disableKeyboardA11y?void 0:`${tc}-${n().flowId}`)},[()=>({dragging:u(h),selected:u(i),draggable:u($),connectable:u(P),selectable:u(E),nopan:u($),parent:u(B)})]),tt("pointerenter",H,function(...X){var Z;(Z=t.onnodepointerenter?J=>t.onnodepointerenter({node:u(N),event:J}):void 0)==null||Z.apply(this,X)}),tt("pointerleave",H,function(...X){var Z;(Z=t.onnodepointerleave?J=>t.onnodepointerleave({node:u(N),event:J}):void 0)==null||Z.apply(this,X)}),we(C,H)};Xe(oe,C=>{u(d)||C(ae)})}we(e,ve),Ae()}gn(["click","pointermove","contextmenu","keydown"]);var t0=Te('<div class="svelte-flow__nodes"></div>');function n0(e,t){Ie(t,!0);let n=ee(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});wr(()=>{r==null||r.disconnect()});var i=t0();ki(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{e0(o,{get node(){return u(s)},resizeObserver:r,get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),we(e,i),Ae()}var r0=We('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function i0(e,t){Ie(t,!0);let n=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return G}),r=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return U}),i=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ie}),o=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ne}),s=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ye}),a=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ve}),l=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return oe}),c=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ae}),d=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return C}),h=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return H}),f=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return W}),g=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return Y}),y=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return V}),m=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return X}),w=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return Z}),b=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return J}),T=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return Q}),x=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return te}),v=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return re}),A=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return fe}),I=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return he}),p=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ue}),D=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return ge}),F=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return pe}),q=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return de}),k=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return me}),N=_(()=>{let{source:G,target:U,sourceX:ie,sourceY:ne,targetX:ye,targetY:ve,sourcePosition:oe,targetPosition:ae,animated:C=!1,selected:H=!1,label:W,labelStyle:Y,data:V={},style:X,interactionWidth:Z,type:J="default",sourceHandle:Q,targetHandle:te,markerStart:re,markerEnd:fe,selectable:he,focusable:ue,deletable:ge=!0,hidden:pe,zIndex:de,class:me,ariaLabel:be}=t.edge;return be}),M=null;const{id:$}=t.edge;jn("svelteflow__edge_id",$);let E=_(()=>u(I)??t.store.elementsSelectable),P=_(()=>u(p)??t.store.edgesFocusable),L=_(()=>t.store.edgeTypes[u(b)]??Jl),R=_(()=>u(v)?`url('#${wo(u(v),t.store.flowId)}')`:void 0),O=_(()=>u(A)?`url('#${wo(u(A),t.store.flowId)}')`:void 0);function B(G){var ie;const U=t.store.edgeLookup.get($);U&&(u(E)&&t.store.handleEdgeSelection($),(ie=t.onedgeclick)==null||ie.call(t,{event:G,edge:U}))}function K(G,U){const ie=t.store.edgeLookup.get($);ie&&U({event:G,edge:ie})}onkeydown=G=>{if(!t.store.disableKeyboardA11y&&El.includes(G.key)&&u(E)){const{unselectNodesAndEdges:U,addSelectedEdges:ie}=t.store;G.key==="Escape"?(M==null||M.blur(),U({edges:[t.edge]})):ie([$])}};var se=nt(),$e=De(se);{var le=G=>{var U=r0();let ie;var ne=Oe(U);let ye;_e(ne,"data-id",$),ne.__click=B,ne.__contextmenu=function(...oe){var ae;(ae=t.onedgecontextmenu?C=>{K(C,t.onedgecontextmenu)}:void 0)==null||ae.apply(this,oe)},ne.__keydown=function(...oe){var ae;(ae=u(P)?onkeydown:void 0)==null||ae.apply(this,oe)};var ve=Oe(ne);zo(ve,()=>u(L),(oe,ae)=>{ae(oe,{id:$,get source(){return u(n)},get target(){return u(r)},get sourceX(){return u(i)},get sourceY(){return u(o)},get targetX(){return u(s)},get targetY(){return u(a)},get sourcePosition(){return u(l)},get targetPosition(){return u(c)},get animated(){return u(d)},get selected(){return u(h)},get label(){return u(f)},get labelStyle(){return u(g)},get data(){return u(y)},get style(){return u(m)},get interactionWidth(){return u(w)},get selectable(){return u(E)},get deletable(){return u(D)},get type(){return u(b)},get sourceHandleId(){return u(T)},get targetHandleId(){return u(x)},get markerStart(){return u(R)},get markerEnd(){return u(O)}})}),kt(ne,oe=>M=oe,()=>M),ze(oe=>{ie=Qe(U,"",ie,{"z-index":u(q)}),ye=mt(ne,0,Pt(["svelte-flow__edge",u(k)]),null,ye,oe),_e(ne,"aria-label",u(N)===null?void 0:u(N)?u(N):`Edge from ${u(n)} to ${u(r)}`),_e(ne,"aria-describedby",u(P)?`${nc}-${t.store.flowId}`:void 0),_e(ne,"role",u(P)?"button":"img"),_e(ne,"tabindex",u(P)?0:void 0)},[()=>({animated:u(d),selected:u(h),selectable:u(E)})]),tt("pointerenter",ne,function(...oe){var ae;(ae=t.onedgepointerenter?C=>{K(C,t.onedgepointerenter)}:void 0)==null||ae.apply(this,oe)}),tt("pointerleave",ne,function(...oe){var ae;(ae=t.onedgepointerleave?C=>{K(C,t.onedgepointerleave)}:void 0)==null||ae.apply(this,oe)}),we(G,U)};Xe($e,G=>{u(F)||G(le)})}we(e,se),Ae()}gn(["click","contextmenu","keydown"]);Ic();var o0=We("<defs></defs>");function s0(e,t){Ie(t,!1);const n=Nt();Hu();var r=o0();ki(r,5,()=>n.markers,i=>i.id,(i,o)=>{u0(i,Kt(()=>u(o)))}),we(e,r),Ae()}var a0=We('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),l0=We('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),c0=We('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function u0(e,t){Ie(t,!0);let n=ee(t,"width",3,12.5),r=ee(t,"height",3,12.5),i=ee(t,"markerUnits",3,"strokeWidth"),o=ee(t,"orient",3,"auto-start-reverse");var s=c0(),a=Oe(s);{var l=d=>{var h=a0();ze(()=>{_e(h,"stroke",t.color),_e(h,"stroke-width",t.strokeWidth)}),we(d,h)},c=(d,h)=>{{var f=g=>{var y=l0();ze(()=>{_e(y,"stroke",t.color),_e(y,"stroke-width",t.strokeWidth),_e(y,"fill",t.color)}),we(g,y)};Xe(d,g=>{t.type===cr.ArrowClosed&&g(f)},h)}};Xe(a,d=>{t.type===cr.Arrow?d(l):d(c,!1)})}ze(()=>{_e(s,"id",t.id),_e(s,"markerWidth",`${n()}`),_e(s,"markerHeight",`${r()}`),_e(s,"markerUnits",i()),_e(s,"orient",o())}),we(e,s),Ae()}var d0=Te('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function f0(e,t){Ie(t,!0);let n=ee(t,"store",15);var r=d0(),i=Oe(r),o=Oe(i);s0(o,{});var s=Ee(i,2);ki(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{i0(a,{get edge(){return u(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),we(e,r),Ae()}var h0=Te('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function rc(e,t){Ie(t,!0);let n=ee(t,"x",3,0),r=ee(t,"y",3,0),i=ee(t,"width",3,0),o=ee(t,"height",3,0),s=ee(t,"isVisible",3,!0);var a=nt(),l=De(a);{var c=d=>{var h=h0();let f;ze((g,y)=>f=Qe(h,"",f,{width:g,height:y,transform:`translate(${n()}px, ${r()}px)`}),[()=>typeof i()=="string"?i():St(i()),()=>typeof o()=="string"?o():St(o())]),we(d,h)};Xe(l,d=>{s()&&d(c)})}we(e,a),Ae()}function g0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectioncontextmenu)==null||r.call(t,{nodes:n,event:e})}function $0(e,t){var r;const n=t.store.nodes.filter(i=>i.selected);(r=t.onselectionclick)==null||r.call(t,{nodes:n,event:e})}var v0=Te("<div><!></div>");function y0(e,t){Ie(t,!0);let n=Me(void 0);Ot(()=>{var l;t.store.disableKeyboardA11y||(l=u(n))==null||l.focus({preventScroll:!0})});let r=_(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,kr(t.store.nodeLookup,{filter:l=>!!l.selected})):null);function i(l){Object.prototype.hasOwnProperty.call(ci,l.key)&&(l.preventDefault(),t.store.moveSelectedNodes(ci[l.key],l.shiftKey?4:1))}var o=nt(),s=De(o);{var a=l=>{var c=v0();c.__contextmenu=[g0,t],c.__click=[$0,t],c.__keydown=function(...f){var g;(g=t.store.disableKeyboardA11y?void 0:i)==null||g.apply(this,f)};let d;var h=Oe(c);rc(h,{width:"100%",height:"100%",x:0,y:0}),Ze(c,(f,g)=>kn==null?void 0:kn(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,y,m)=>{var w;(w=t.onnodedrag)==null||w.call(t,{event:f,targetNode:null,nodes:m})},onDragStart:(f,g,y,m)=>{var w;(w=t.onnodedragstart)==null||w.call(t,{event:f,targetNode:null,nodes:m})},onDragStop:(f,g,y,m)=>{var w;(w=t.onnodedragstop)==null||w.call(t,{event:f,targetNode:null,nodes:m})}})),kt(c,f=>j(n,f),()=>u(n)),ze((f,g)=>{mt(c,1,Pt(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),_e(c,"role",t.store.disableKeyboardA11y?void 0:"button"),_e(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),d=Qe(c,"",d,{width:f,height:g,transform:`translate(${u(r).x??""}px, ${u(r).y??""}px)`})},[()=>St(u(r).width),()=>St(u(r).height)]),we(l,c)};Xe(s,l=>{t.store.selectionRectMode==="nodes"&&u(r)&&zt(u(r).x)&&zt(u(r).y)&&l(a)})}we(e,o),Ae()}gn(["contextmenu","click","keydown"]);function m0(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function He(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var d;const l=Array.isArray(r)?r:[r],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,f,g)=>f?h|1<<g:h,0);for(const h of l){const f={preventDefault:!1,enabled:!0,...h},{modifier:g,key:y,callback:m,preventDefault:w,enabled:b}=f;if(b){if(a.key!==y)continue;if(g===null||g===!1){if(c!==0)continue}else if(g!==void 0&&((d=g==null?void 0:g[0])==null?void 0:d.length)>0){const x=Array.isArray(g)?g:[g];let v=!1;for(const A of x)if((Array.isArray(A)?A:[A]).reduce((p,D)=>p|m0(D),0)===c){v=!0;break}if(!v)continue}w&&a.preventDefault();const T={node:e,trigger:f,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:T})),m==null||m(T)}}}let s;return n&&(s=so(e,i,o)),{update:a=>{const{enabled:l=!0,type:c="keydown"}=a;n&&(!l||i!==c)?s==null||s():!n&&l&&(s=so(e,c,o)),n=l,i=c,r=a.trigger},destroy:()=>{s==null||s()}}}function Ko(){const e=_(Nt),t=o=>{var c,d;const s=Us(o)?o:u(e).nodeLookup.get(o.id),a=s.parentId?Ng(s.position,s.measured,s.parentId,u(e).nodeLookup,u(e).nodeOrigin):s.position,l={...s,position:a,width:((c=s.measured)==null?void 0:c.width)??s.width,height:((d=s.measured)==null?void 0:d.height)??s.height};return Tn(l)};function n(o,s,a={replace:!1}){u(e).nodes=Ue(()=>u(e).nodes).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a!=null&&a.replace&&Us(c)?c:{...l,...c}}return l})}function r(o,s,a={replace:!1}){u(e).edges=Ue(()=>u(e).edges).map(l=>{if(l.id===o){const c=typeof s=="function"?s(l):s;return a.replace&&P$(c)?c:{...l,...c}}return l})}const i=o=>u(e).nodeLookup.get(o);return{zoomIn:u(e).zoomIn,zoomOut:u(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?u(e).nodes:ta(u(e).nodeLookup,o),getEdge:o=>u(e).edgeLookup.get(o),getEdges:o=>o===void 0?u(e).edges:ta(u(e).edgeLookup,o),setZoom:(o,s)=>{const a=u(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>u(e).viewport.zoom,setViewport:async(o,s)=>{const a=u(e).viewport;return u(e).panZoom?(await u(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},{duration:s==null?void 0:s.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>$a(u(e).viewport),setCenter:async(o,s,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:u(e).maxZoom,c=u(e).panZoom;return c?(await c.setViewport({x:u(e).width/2-o*l,y:u(e).height/2-s*l,zoom:l},{duration:a==null?void 0:a.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:o=>u(e).fitView(o),fitBounds:async(o,s)=>{if(!u(e).panZoom)return Promise.resolve(!1);const a=Vo(o,u(e).width,u(e).height,u(e).minZoom,u(e).maxZoom,(s==null?void 0:s.padding)??.1);return await u(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=Ds(o),c=l?o:t(o);return c?(a||u(e).nodes).filter(d=>{const h=u(e).nodeLookup.get(d.id);if(!h||!l&&d.id===o.id)return!1;const f=Tn(h),g=ur(f,c);return s&&g>0||g>=c.width*c.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const c=Ds(o)?o:t(o);if(!c)return!1;const d=ur(c,s);return a&&d>0||d>=c.width*c.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{const{nodes:a,edges:l}=await Sg({nodesToRemove:o,edgesToRemove:s,nodes:u(e).nodes,edges:u(e).edges,onBeforeDelete:u(e).onbeforedelete});return a&&(u(e).nodes=Ue(()=>u(e).nodes).filter(c=>!a.some(({id:d})=>d===c.id))),l&&(u(e).edges=Ue(()=>u(e).edges).filter(c=>!l.some(({id:d})=>d===c.id))),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!u(e).domNode)return o;const a=s.snapToGrid?u(e).snapGrid:!1,{x:l,y:c,zoom:d}=u(e).viewport,{x:h,y:f}=u(e).domNode.getBoundingClientRect(),g={x:o.x-h,y:o.y-f};return Sr(g,[l,c,d],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!u(e).domNode)return o;const{x:s,y:a,zoom:l}=u(e).viewport,{x:c,y:d}=u(e).domNode.getBoundingClientRect(),h=ai(o,[s,a,l]);return{x:h.x+c,y:h.y+d}},toObject:()=>structuredClone({nodes:[...u(e).nodes],edges:[...u(e).edges],viewport:{...u(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var d;const l=(d=u(e).nodeLookup.get(o))==null?void 0:d.internals.userNode;if(!l)return;const c=typeof s=="function"?s(l):s;n(o,h=>({...h,data:a!=null&&a.replace?c:{...h.data,...c}}))},updateEdge:r,getNodesBounds:o=>bg(o,{nodeLookup:u(e).nodeLookup,nodeOrigin:u(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=u(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function ta(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function p0(e,t){Ie(t,!0);let n=ee(t,"store",15),r=ee(t,"selectionKey",3,"Shift"),i=ee(t,"multiSelectionKey",19,()=>li()?"Meta":"Control"),o=ee(t,"deleteKey",3,"Backspace"),s=ee(t,"panActivationKey",3," "),a=ee(t,"zoomActivationKey",19,()=>li()?"Meta":"Control"),{deleteElements:l}=Ko();function c(m){return m!==null&&typeof m=="object"}function d(m){return c(m)?m.modifier||[]:[]}function h(m){return m==null?"":c(m)?m.key:m}function f(m,w){return(Array.isArray(m)?m:[m]).map(T=>{const x=h(T);return{key:x,modifier:d(T),enabled:x!==null,callback:w}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function y(){var x,v;const m=n().nodes.filter(A=>A.selected),w=n().edges.filter(A=>A.selected),{deletedNodes:b,deletedEdges:T}=await l({nodes:m,edges:w});(b.length>0||T.length>0)&&((v=(x=n()).ondelete)==null||v.call(x,{nodes:b,edges:T}))}tt("blur",et,g),tt("contextmenu",et,g),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(o(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!Ol(m.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),y())}),type:"keydown"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Ze(et,(m,w)=>He==null?void 0:He(m,w),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Ae()}var w0=We('<path fill="none" class="svelte-flow__connection-path"></path>'),b0=We('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function _0(e,t){Ie(t,!0);let n=_(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case qt.Bezier:{const[a]=Rl(s);return a}case qt.Straight:{const[a]=Yl(s);return a}case qt.Step:case qt.SmoothStep:{const[a]=Xo({...s,borderRadius:t.type===qt.Step?0:void 0});return a}}});var r=nt(),i=De(r);{var o=s=>{var a=b0(),l=Oe(a),c=Oe(l);{var d=f=>{var g=nt(),y=De(g);zo(y,()=>t.LineComponent,(m,w)=>{w(m,{})}),we(f,g)},h=f=>{var g=w0();ze(()=>{_e(g,"d",u(n)),Qe(g,t.style)}),we(f,g)};Xe(c,f=>{t.LineComponent?f(d):f(h,!1)})}ze(f=>{_e(a,"width",t.store.width),_e(a,"height",t.store.height),Qe(a,t.containerStyle),mt(l,0,f)},[()=>Pt(["svelte-flow__connection",pg(t.store.connection.isValid)])]),we(s,a)};Xe(i,s=>{t.store.connection.inProgress&&s(o)})}we(e,r),Ae()}var x0=Te("<div><!></div>");function fr(e,t){Ie(t,!0);let n=ee(t,"position",3,"top-right"),r=Vt(t,["$$slots","$$events","$$legacy","position","style","class","children"]);const i=Nt();let o=_(()=>`${n()}`.split("-"));var s=x0();let a;var l=Oe(s);it(l,()=>t.children??Lt),ze(c=>a=$n(s,a,{class:c,style:t.style,...r,[wt]:{"pointer-events":i.selectionRectMode?"none":""}}),[()=>["svelte-flow__panel",t.class,...u(o)]]),we(e,s),Ae()}var k0=Te('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function S0(e,t){Ie(t,!0);let n=ee(t,"position",3,"bottom-right");var r=nt(),i=De(r);{var o=s=>{fr(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var c=k0();we(a,c)},$$slots:{default:!0}})};Xe(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}we(e,r),Ae()}var E0=Te("<div><!></div>");function P0(e,t){Ie(t,!0);let n=ee(t,"domNode",15),r=ee(t,"clientWidth",15),i=ee(t,"clientHeight",15),o=_(()=>{let{id:d,class:h,nodeTypes:f,edgeTypes:g,colorMode:y,isValidConnection:m,onmove:w,onmovestart:b,onmoveend:T,onflowerror:x,ondelete:v,onbeforedelete:A,onbeforeconnect:I,onconnect:p,onconnectstart:D,onconnectend:F,onbeforereconnect:q,onreconnect:k,onreconnectstart:N,onreconnectend:M,onclickconnectstart:$,onclickconnectend:E,oninit:P,onselectionchange:L,onselectiondragstart:R,onselectiondrag:O,onselectiondragstop:B,onselectionstart:K,onselectionend:se,clickConnect:$e,fitView:le,fitViewOptions:G,nodeOrigin:U,nodeDragThreshold:ie,minZoom:ne,maxZoom:ye,initialViewport:ve,connectionRadius:oe,connectionMode:ae,selectionMode:C,selectNodesOnDrag:H,snapGrid:W,defaultMarkerColor:Y,translateExtent:V,nodeExtent:X,onlyRenderVisibleElements:Z,autoPanOnConnect:J,autoPanOnNodeDrag:Q,colorModeSSR:te,style:re,defaultEdgeOptions:fe,elevateNodesOnSelect:he,elevateEdgesOnSelect:ue,nodesDraggable:ge,nodesConnectable:pe,elementsSelectable:de,nodesFocusable:me,edgesFocusable:be,disableKeyboardA11y:Pe,noDragClass:Ne,noPanClass:xe,noWheelClass:Se,...Ce}=t.rest;return h}),s=_(()=>{let{id:d,class:h,nodeTypes:f,edgeTypes:g,colorMode:y,isValidConnection:m,onmove:w,onmovestart:b,onmoveend:T,onflowerror:x,ondelete:v,onbeforedelete:A,onbeforeconnect:I,onconnect:p,onconnectstart:D,onconnectend:F,onbeforereconnect:q,onreconnect:k,onreconnectstart:N,onreconnectend:M,onclickconnectstart:$,onclickconnectend:E,oninit:P,onselectionchange:L,onselectiondragstart:R,onselectiondrag:O,onselectiondragstop:B,onselectionstart:K,onselectionend:se,clickConnect:$e,fitView:le,fitViewOptions:G,nodeOrigin:U,nodeDragThreshold:ie,minZoom:ne,maxZoom:ye,initialViewport:ve,connectionRadius:oe,connectionMode:ae,selectionMode:C,selectNodesOnDrag:H,snapGrid:W,defaultMarkerColor:Y,translateExtent:V,nodeExtent:X,onlyRenderVisibleElements:Z,autoPanOnConnect:J,autoPanOnNodeDrag:Q,colorModeSSR:te,style:re,defaultEdgeOptions:fe,elevateNodesOnSelect:he,elevateEdgesOnSelect:ue,nodesDraggable:ge,nodesConnectable:pe,elementsSelectable:de,nodesFocusable:me,edgesFocusable:be,disableKeyboardA11y:Pe,noDragClass:Ne,noPanClass:xe,noWheelClass:Se,...Ce}=t.rest;return Ce});var a=E0();let l;var c=Oe(a);it(c,()=>t.children??Lt),kt(a,d=>n(d),()=>n()),ze((d,h)=>l=$n(a,l,{class:["svelte-flow","svelte-flow__container",u(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",...u(s),[wt]:{width:d,height:h}},"svelte-12wlba6"),[()=>St(t.width),()=>St(t.height)]),fs(a,"clientHeight",i),fs(a,"clientWidth",r),we(e,a),Ae()}var C0=Te('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),N0=Te("<!> <!>",1),M0=Te("<!> <!> <!> <!> <!>",1);function I0(e,t){Ie(t,!0);let n=ee(t,"paneClickDistance",3,1),r=ee(t,"nodeClickDistance",3,1),i=ee(t,"panOnScrollMode",19,()=>Qt.Free),o=ee(t,"preventScrolling",3,!0),s=ee(t,"zoomOnScroll",3,!0),a=ee(t,"zoomOnDoubleClick",3,!0),l=ee(t,"zoomOnPinch",3,!0),c=ee(t,"panOnScroll",3,!1),d=ee(t,"panOnDrag",3,!0),h=ee(t,"selectionOnDrag",3,!0),f=ee(t,"connectionLineType",19,()=>qt.Bezier),g=ee(t,"nodes",31,()=>qe([])),y=ee(t,"edges",31,()=>qe([])),m=ee(t,"viewport",15,void 0),w=Vt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),b=ec({props:w,width:t.width,height:t.height,get nodes(){return g()},set nodes(x){g(x)},get edges(){return y()},set edges(x){y(x)},get viewport(){return m()},set viewport(x){m(x)}});const T=En(ui);T&&T.setStore&&T.setStore(b),jn(ui,{provider:!1,getStore(){return b}}),Ot(()=>{var v;const x={nodes:b.selectedNodes,edges:b.selectedEdges};(v=Ue(()=>t.onselectionchange))==null||v(x);for(const A of b.selectionChangeHandlers.values())A(x)}),wr(()=>{b.reset()}),P0(e,{get colorMode(){return b.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return w},get domNode(){return b.domNode},set domNode(x){b.domNode=x},get clientWidth(){return b.width},set clientWidth(x){b.width=x},get clientHeight(){return b.height},set clientHeight(x){b.height=x},children:(x,v)=>{var A=M0(),I=De(A);p0(I,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return b},set store(k){b=k}});var p=Ee(I,2);W$(p,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return c()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return b},set store(k){b=k},children:(k,N)=>{B$(k,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get selectionOnDrag(){return h()},get store(){return b},set store(M){b=M},children:(M,$)=>{var E=N0(),P=De(E);q$(P,{get store(){return b},set store($e){b=$e},children:($e,le)=>{var G=C0(),U=Ee(De(G),2);f0(U,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return b},set store(ve){b=ve}});var ie=Ee(U,4);_0(ie,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return b},set store(ve){b=ve}});var ne=Ee(ie,2);n0(ne,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return b},set store(ve){b=ve}});var ye=Ee(ne,2);y0(ye,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return b},set store(ve){b=ve}}),we($e,G)},$$slots:{default:!0}});var L=Ee(P,2);const R=_(()=>!!(b.selectionRect&&b.selectionRectMode==="user")),O=_(()=>{var $e;return($e=b.selectionRect)==null?void 0:$e.width}),B=_(()=>{var $e;return($e=b.selectionRect)==null?void 0:$e.height}),K=_(()=>{var $e;return($e=b.selectionRect)==null?void 0:$e.x}),se=_(()=>{var $e;return($e=b.selectionRect)==null?void 0:$e.y});rc(L,{get isVisible(){return u(R)},get width(){return u(O)},get height(){return u(B)},get x(){return u(K)},get y(){return u(se)}}),we(M,E)},$$slots:{default:!0}})},$$slots:{default:!0}});var D=Ee(p,2);S0(D,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var F=Ee(D,2);U$(F,{store:b});var q=Ee(F,2);it(q,()=>t.children??Lt),we(x,A)},$$slots:{default:!0}}),Ae()}function A0(e,t){Ie(t,!0);let n=Me(ec({props:{},nodes:[],edges:[]}));jn(ui,{provider:!0,getStore(){return u(n)},setStore:o=>{j(n,o)}}),wr(()=>{u(n).reset()});var r=nt(),i=De(r);it(i,()=>t.children??Lt),we(e,r),Ae()}var z0=Te("<button><!></button>");function Hr(e,t){let n=Vt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=z0();let i;var o=Oe(r);it(o,()=>t.children??Lt),ze(()=>i=$n(r,i,{type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[wt]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}})),we(e,r)}var T0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function H0(e){var t=T0();we(e,t)}var O0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function D0(e){var t=O0();we(e,t)}var R0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function L0(e){var t=R0();we(e,t)}var Y0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function V0(e){var t=Y0();we(e,t)}var X0=We('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function W0(e){var t=X0();we(e,t)}var F0=Te("<!> <!>",1),B0=Te("<!> <!> <!> <!> <!> <!>",1);function K0(e,t){Ie(t,!0);let n=ee(t,"position",3,"bottom-left"),r=ee(t,"orientation",3,"vertical"),i=ee(t,"showZoom",3,!0),o=ee(t,"showFitView",3,!0),s=ee(t,"showLock",3,!0),a=Vt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","aria-label","fitViewOptions","children","before","after"]);const l=Nt(),c={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let d=Me(qe(l.nodesDraggable||l.nodesConnectable||l.elementsSelectable)),h=_(()=>l.viewport.zoom<=l.minZoom),f=_(()=>l.viewport.zoom>=l.maxZoom),g=_(()=>r()==="horizontal"?"horizontal":"vertical");const y=()=>{l.zoomIn()},m=()=>{l.zoomOut()},w=()=>{l.fitView(t.fitViewOptions)},b=()=>{j(d,!u(d)),l.nodesDraggable=u(d),l.nodesConnectable=u(d),l.elementsSelectable=u(d)},T=_(()=>["svelte-flow__controls",u(g),t.class]),x=_(()=>t["aria-label"]??"Svelte Flow controls");fr(e,Kt({get class(){return u(T)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return u(x)},get style(){return t.style}},()=>a,{children:(v,A)=>{var I=B0(),p=De(I);{var D=O=>{var B=nt(),K=De(B);it(K,()=>t.before),we(O,B)};Xe(p,O=>{t.before&&O(D)})}var F=Ee(p,2);{var q=O=>{var B=F0(),K=De(B);Hr(K,Kt({onclick:y,class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return u(f)}},c,{children:($e,le)=>{H0($e)},$$slots:{default:!0}}));var se=Ee(K,2);Hr(se,Kt({onclick:m,class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return u(h)}},c,{children:($e,le)=>{D0($e)},$$slots:{default:!0}})),we(O,B)};Xe(F,O=>{i()&&O(q)})}var k=Ee(F,2);{var N=O=>{Hr(O,Kt({class:"svelte-flow__controls-fitview",onclick:w,title:"fit view","aria-label":"fit view"},c,{children:(B,K)=>{L0(B)},$$slots:{default:!0}}))};Xe(k,O=>{o()&&O(N)})}var M=Ee(k,2);{var $=O=>{Hr(O,Kt({class:"svelte-flow__controls-interactive",onclick:b,title:"toggle interactivity","aria-label":"toggle interactivity"},c,{children:(B,K)=>{var se=nt(),$e=De(se);{var le=U=>{W0(U)},G=U=>{V0(U)};Xe($e,U=>{u(d)?U(le):U(G,!1)})}we(B,se)},$$slots:{default:!0}}))};Xe(M,O=>{s()&&O($)})}var E=Ee(M,2);{var P=O=>{var B=nt(),K=De(B);it(K,()=>t.children),we(O,B)};Xe(E,O=>{t.children&&O(P)})}var L=Ee(E,2);{var R=O=>{var B=nt(),K=De(B);it(K,()=>t.after),we(O,B)};Xe(L,O=>{t.after&&O(R)})}we(v,I)},$$slots:{default:!0}})),Ae()}var jt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(jt||(jt={}));var q0=We("<circle></circle>");function Z0(e,t){var n=q0();ze(()=>{_e(n,"cx",t.radius),_e(n,"cy",t.radius),_e(n,"r",t.radius),mt(n,0,Pt(["svelte-flow__background-pattern","dots",t.class]))}),we(e,n)}var G0=We("<path></path>");function U0(e,t){Ie(t,!0);var n=G0();ze(()=>{_e(n,"stroke-width",t.lineWidth),_e(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),mt(n,0,Pt(["svelte-flow__background-pattern",t.variant,t.class]))}),we(e,n),Ae()}const J0={[jt.Dots]:1,[jt.Lines]:1,[jt.Cross]:6};var Q0=We('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function j0(e,t){Ie(t,!0);let n=ee(t,"variant",19,()=>jt.Dots),r=ee(t,"gap",3,20),i=ee(t,"lineWidth",3,1);const o=Nt(),s=_(()=>n()===jt.Dots),a=_(()=>n()===jt.Cross),l=_(()=>Array.isArray(r())?r():[r(),r()]);let c=_(()=>`background-pattern-${o.flowId}-${t.id??""}`),d=_(()=>[u(l)[0]*o.viewport.zoom||1,u(l)[1]*o.viewport.zoom||1]),h=_(()=>(t.size??J0[n()])*o.viewport.zoom),f=_(()=>u(a)?[u(h),u(h)]:u(d)),g=_(()=>u(s)?[u(h)/2,u(h)/2]:[u(f)[0]/2,u(f)[1]/2]);var y=Q0();let m;var w=Oe(y),b=Oe(w);{var T=A=>{const I=_(()=>u(h)/2);Z0(A,{get radius(){return u(I)},get class(){return t.patternClass}})},x=A=>{U0(A,{get dimensions(){return u(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};Xe(b,A=>{u(s)?A(T):A(x,!1)})}var v=Ee(w);ze(()=>{mt(y,0,Pt(["svelte-flow__background","svelte-flow__container",t.class])),m=Qe(y,"",m,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),_e(w,"id",u(c)),_e(w,"x",o.viewport.x%u(d)[0]),_e(w,"y",o.viewport.y%u(d)[1]),_e(w,"width",u(d)[0]),_e(w,"height",u(d)[1]),_e(w,"patternTransform",`translate(-${u(g)[0]},-${u(g)[1]})`),_e(v,"fill",`url(#${u(c)})`)}),we(e,y),Ae()}var ev=We("<rect></rect>");function tv(e,t){let n=ee(t,"borderRadius",3,5),r=ee(t,"strokeWidth",3,2);var i=ev();let o,s;ze(a=>{o=mt(i,0,Pt(["svelte-flow__minimap-node",t.class]),null,o,a),_e(i,"x",t.x),_e(i,"y",t.y),_e(i,"rx",n()),_e(i,"ry",n()),_e(i,"width",t.width),_e(i,"height",t.height),_e(i,"shape-rendering",t.shapeRendering),s=Qe(i,"",s,{fill:t.color,stroke:t.strokeColor,"stroke-width":r()})},[()=>({selected:t.selected})]),we(e,i)}function Qi(e,t){const n=i$({domNode:e,panZoom:t.panZoom,getTransform:()=>{const{viewport:i}=t.store;return[i.x,i.y,i.zoom]},getViewScale:t.getViewScale});n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable});function r(i){n.update({translateExtent:i.translateExtent,width:i.width,height:i.height,inversePan:i.inversePan,zoomStep:i.zoomStep,pannable:i.pannable,zoomable:i.zoomable})}return{update:r,destroy(){n.destroy()}}}const ji=e=>e instanceof Function?e:()=>e;var nv=We("<title> </title>"),rv=We('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),iv=Te('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ov(e,t){Ie(t,!0);let n=ee(t,"position",3,"bottom-right"),r=ee(t,"ariaLabel",3,"Mini map"),i=ee(t,"nodeStrokeColor",3,"transparent"),o=ee(t,"nodeClass",3,""),s=ee(t,"nodeBorderRadius",3,5),a=ee(t,"nodeStrokeWidth",3,2),l=ee(t,"width",3,200),c=ee(t,"height",3,150),d=ee(t,"pannable",3,!0),h=ee(t,"zoomable",3,!0),f=Vt(t,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),g=Nt();const y=t.nodeColor===void 0?void 0:ji(t.nodeColor),m=ji(i()),w=ji(o()),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";let T=_(()=>`svelte-flow__minimap-desc-${g.flowId}`),x=_(()=>({x:-g.viewport.x/g.viewport.zoom,y:-g.viewport.y/g.viewport.zoom,width:g.width/g.viewport.zoom,height:g.height/g.viewport.zoom})),v=_(()=>g.nodeLookup.size>0?Al(kr(g.nodeLookup,{filter:O=>!O.hidden}),u(x)):u(x)),A=_(()=>u(v).width/l()),I=_(()=>u(v).height/c()),p=_(()=>Math.max(u(A),u(I))),D=_(()=>u(p)*l()),F=_(()=>u(p)*c()),q=_(()=>5*u(p)),k=_(()=>u(v).x-(u(D)-u(v).width)/2-u(q)),N=_(()=>u(v).y-(u(F)-u(v).height)/2-u(q)),M=_(()=>u(D)+u(q)*2),$=_(()=>u(F)+u(q)*2);const E=()=>u(p);var P=iv(),L=De(P);const R=_(()=>["svelte-flow__minimap",t.class]);xu(L,()=>({"--xy-minimap-background-color-props":t.bgColor})),fr(L.lastChild,Kt({get position(){return n()},get class(){return u(R)},"data-testid":"svelte-flow__minimap"},()=>f,{children:(O,B)=>{var K=nt(),se=De(K);{var $e=le=>{var G=rv();let U;var ie=Oe(G);{var ne=oe=>{var ae=nv(),C=Oe(ae);ze(()=>{_e(ae,"id",u(T)),tn(C,r())}),we(oe,ae)};Xe(ie,oe=>{r()&&oe(ne)})}var ye=Ee(ie);ki(ye,17,()=>g.nodes,oe=>oe.id,(oe,ae)=>{var C=nt();const H=_(()=>g.nodeLookup.get(u(ae).id));var W=De(C);{var Y=V=>{const X=_(()=>nn(u(H))),Z=_(()=>y==null?void 0:y(u(H))),J=_(()=>m(u(H))),Q=_(()=>w(u(H)));tv(V,Kt({get x(){return u(H).internals.positionAbsolute.x},get y(){return u(H).internals.positionAbsolute.y}},()=>u(X),{get selected(){return u(H).selected},get color(){return u(Z)},get borderRadius(){return s()},get strokeColor(){return u(J)},get strokeWidth(){return a()},shapeRendering:b,get class(){return u(Q)}}))};Xe(W,V=>{u(H)&&zl(u(H))&&V(Y)})}we(oe,C)});var ve=Ee(ye);Ze(G,(oe,ae)=>Qi==null?void 0:Qi(oe,ae),()=>({store:g,panZoom:g.panZoom,getViewScale:E,translateExtent:g.translateExtent,width:g.width,height:g.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:d(),zoomable:h()})),ze(()=>{_e(G,"width",l()),_e(G,"height",c()),_e(G,"viewBox",`${u(k)??""} ${u(N)??""} ${u(M)??""} ${u($)??""}`),_e(G,"aria-labelledby",u(T)),U=Qe(G,"",U,{"--xy-minimap-mask-background-color-props":t.maskColor,"--xy-minimap-mask-stroke-color-props":t.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":t.maskStrokeWidth?t.maskStrokeWidth*u(p):void 0}),_e(ve,"d",`M${u(k)-u(q)},${u(N)-u(q)}h${u(M)+u(q)*2}v${u($)+u(q)*2}h${-u(M)-u(q)*2}z
      M${u(x).x??""},${u(x).y??""}h${u(x).width??""}v${u(x).height??""}h${-u(x).width}z`)}),we(le,G)};Xe(se,le=>{g.panZoom&&le($e)})}we(O,K)},$$slots:{default:!0}})),we(e,P),Ae()}var sv=Te("<div><!></div>");function av(e,t){Ie(t,!0);let n=ee(t,"variant",19,()=>bn.Handle),r=ee(t,"minWidth",3,10),i=ee(t,"minHeight",3,10),o=ee(t,"maxWidth",19,()=>Number.MAX_VALUE),s=ee(t,"maxHeight",19,()=>Number.MAX_VALUE),a=ee(t,"keepAspectRatio",3,!1),l=Vt(t,["$$slots","$$events","$$legacy","nodeId","position","variant","color","minWidth","minHeight","maxWidth","maxHeight","keepAspectRatio","shouldResize","onResizeStart","onResize","onResizeEnd","class","children"]);const c=Nt();let d=_(()=>typeof t.nodeId=="string"?t.nodeId:En("svelteflow__node_id")),h,f=Me(null),g=_(()=>{let T=n()===bn.Line?"right":"bottom-right";return t.position??T}),y=_(()=>u(g).split("-"));Qr(()=>(h&&j(f,p$({domNode:h,nodeId:u(d),getStoreItems:()=>({nodeLookup:c.nodeLookup,transform:[c.viewport.x,c.viewport.y,c.viewport.zoom],snapGrid:c.snapGrid??void 0,snapToGrid:!!c.snapGrid,nodeOrigin:c.nodeOrigin,paneDomNode:c.domNode}),onChange:(T,x)=>{const v=new Map;let A=T.x&&T.y?{x:T.x,y:T.y}:void 0;v.set(u(d),{...T,position:A});for(const I of x)v.set(I.id,{position:I.position});c.nodes=c.nodes.map(I=>{var D,F;const p=v.get(I.id);return p?{...I,position:{x:((D=p.position)==null?void 0:D.x)??I.position.x,y:((F=p.position)==null?void 0:F.y)??I.position.y},width:p.width??I.width,height:p.height??I.height}:I})}}),!0),()=>{var T;(T=u(f))==null||T.destroy()})),No(()=>{var T;(T=u(f))==null||T.update({controlPosition:u(g),boundaries:{minWidth:r(),minHeight:i(),maxWidth:o(),maxHeight:s()},keepAspectRatio:!!a(),onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeEnd:t.onResizeEnd,shouldResize:t.shouldResize})});var m=sv();let w;var b=Oe(m);it(b,()=>t.children??Lt),kt(m,T=>h=T,()=>h),ze(T=>w=$n(m,w,{class:T,...l,[wt]:{"border-color":n()===bn.Line?t.color:void 0,"background-color":n()===bn.Line?void 0:t.color}}),[()=>["svelte-flow__resize-control",c.noDragClass,...u(y),n(),t.class]]),we(e,m),Ae()}const na=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),rn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),lv=(e,t={})=>{var n,r;return e.id in t?t[e.id]:{...e.position,width:e.width??((n=e.measured)==null?void 0:n.width)??0,height:e.height??((r=e.measured)==null?void 0:r.height)??0}},cv=e=>{const t={x:1/0,y:1/0},n={x:-1/0,y:-1/0};if(e.length===0)return{x:0,y:0,width:0,height:0};for(const r of e)t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),n.x=Math.max(n.x,r.x+r.width),n.y=Math.max(n.y,r.y+r.height);return{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}},$t=e=>e==null,uv=e=>/^-?\d+$/.test(e),ra=e=>{let t=0;for(const n of Un(e))if(uv(n.id)){const r=parseInt(n.id);r>t&&(t=r)}return t},dv=e=>e.toLowerCase().trim().replace(/[^\w]+/g,"-"),dn="My Graph",fv={type:"custom",sourcePosition:ke.Right,targetPosition:ke.Left},ic={style:"stroke-width: 2px;",markerEnd:{type:cr.ArrowClosed,width:15,height:15},zIndex:1e4};function*Un(e){var n;const t=[...e].reverse();for(;t.length;){const r=t.pop();if(yield r,(n=r.children)!=null&&n.length)for(let i=r.children.length-1;i>=0;i--)t.push(r.children[i])}}function eo(e,t){for(let n=0;n<e.length;n++)t(e[n])&&e.splice(n,1);return e}class Et{constructor(t,n,r=dn){Fe(this,"nodes");Fe(this,"edges");Fe(this,"title");this.nodes=t,this.edges=n,this.title=r}addNode(t,n){if($t(n)){this.nodes.push(t);return}const r=this.getNode(n);if(r===null){console.error("tried to create a node with bogus parent id",n);return}r==null||r.children.push(t)}refreshParentIds(){for(const t of this.nodes)t.parentId=void 0,this.refreshParentIdsUnderNode(t)}refreshParentIdsUnderNode(t){for(const n of t.children)n.parentId=t.id,this.refreshParentIdsUnderNode(n)}refreshCompletionStatus(){for(const t of this.nodes)this.refreshCompletionStatusUnderNode(t)}refreshCompletionStatusUnderNode(t){if(t.children.length===0){const i=t.completed?1:0;return t.completionStatus=i,i}let n=0;for(const i of t.children)n+=this.refreshCompletionStatusUnderNode(i);const r=n/t.children.length;return t.completionStatus=r,r}getCompletionStatus(t){var n;return this.refreshCompletionStatus(),((n=this.getNode(t))==null?void 0:n.completionStatus)??0}getNode(t){for(const n of Un(this.nodes))if(n.id===t)return n;return null}getParent(t){for(const n of Un(this.nodes))for(const r of n.children)if(r.id===t)return n;return null}updateNode(t,n){const r=this.getNode(t);if(r===null){console.error("tried to modify a node with bogus id",t);return}for(const i in n)r[i]=n[i]}deleteNode(t){if(this.getNode(t)===null){console.error("tried to delete a node with bogus id",t);return}const r=this.getParent(t);let i=this.nodes;r!==null&&(i=r.children),eo(i,o=>o.id===t),this.edges=this.edges.filter(o=>o.source!==t&&o.target!==t)}addEdge(t){this.edges.push(t)}deleteEdge(t){eo(this.edges,n=>n.id===t)}reparent(t,n,r){const i=this.getNode(r);if(i===null){console.error("tried to reparent",r,"but no node with that id exists");return}const o={...i};if($t(t))eo(this.nodes,s=>s.id===r);else{const s=this.getNode(t);s!==null&&(s.children=s.children.filter(a=>a.id!==r))}if(n!==null){const s=this.getNode(n);s===null?console.error("tried to make",n,"the parent of",r,"but node",n,"does not exist"):s.children.push(o)}else this.nodes.push(o)}getIncomingNodes(t){const n=[];for(const r of this.edges)r.target===t&&n.push(r.source);return n}getOutgoingNodes(t){const n=[];for(const r of this.edges)r.source===t&&n.push(r.target);return n}isAncestor(t,n){var i,o;this.refreshParentIds();let r=(i=this.getNode(n))==null?void 0:i.parentId;for(;!$t(r);){if(r===t)return!0;r=(o=this.getNode(r))==null?void 0:o.parentId}return!1}isWorkable(t){this.refreshParentIds();const n=this.getNode(t);if(n&&n.completed)return!1;const r=this.getIncomingNodes(t);for(const i of r)if(!this.isCompletedOrParentCompleted(i))return!1;return n!=null&&n.parentId?this.isWorkable(n==null?void 0:n.parentId):!0}isCompletedOrParentCompleted(t){this.refreshParentIds();const n=this.getNode(t);return n?n.completed?!0:$t(n.parentId===null)?!1:this.isCompletedOrParentCompleted(n.parentId):!1}getDisplayState(t,n=1/0){const r={nodes:[],edges:[],title:this.title,description:"right-click to make a new node. left click to drag or edit nodes",backgroundColor:"#111"};this.refreshParentIds();const{nodes:i,edges:o}=this;if(t===null){r.nodes.push(...i.map(Xr));for(const a of i){const l=bo(a,n);r.nodes.push(...l.map(Xr))}}else{let a=!1;const l=Un(i);for(const c of l)if(c.id===t){a=!0;const d=bo(c,n);console.log("nodesBelow",d),r.nodes.push(...d.map(Xr).map(h=>h.parentId===t?{...h,parentId:void 0}:h)),r.title=c.label,r.description=c.description,r.backgroundColor=c.backgroundColor;break}if(!a)return null}const s=pn(r.nodes);for(const a of o)(a.source in s||a.target in s)&&r.edges.push(sc(a));for(const a of r.nodes)this.isCompletedOrParentCompleted(a.id)&&(a.style="border-color: #49954aff"),this.isWorkable(a.id)&&(a.style="border-color: #f7c923ff;");return r}setTitle(t){this.title=t}getSerialized(){const t=new Et(this.nodes,this.edges,this.title);for(const n of Un(t.nodes))n.position={x:parseFloat(n.position.x.toFixed(2)),y:parseFloat(n.position.y.toFixed(2))};return t}}const bo=(e,t=1/0)=>{if(t<=0)return[];const n=[];n.push(...e.children);for(const r of e.children){const i=bo(r,t-1);n.push(...i)}return n},Xr=e=>{const{id:t,position:n,size:r,parentId:i}=e,{width:o,height:s}=r,a={id:t,position:n,parentId:i,measured:{width:o,height:s},data:{...e},...fv};return(!$t(e.lastManualResize)||e.children.length>0)&&(a.width=o,a.height=s),delete a.data.children,a},hv=e=>{const{id:t,position:n,measured:r,height:i,width:o,data:s}=e;return{id:t,position:n,children:[],size:{width:o??(r==null?void 0:r.width),height:i??(r==null?void 0:r.height)},...s}},oc=e=>{console.log("displayStateToGraph");const t=new Map,n=new Et([],[],e.title);for(const r of e.nodes){const i=hv(r);i.position=rn(i.position,{x:i.size.width/2,y:i.size.height/2}),t.set(r.id,i)}for(const r of e.nodes){const i=t.get(r.id);if(r.parentId==null)n.nodes.push(i);else{const o=t.get(r.parentId);o&&o.children.push(i)}}return n.edges=[...e.edges.map(Hi)],n},pn=e=>{const t={};for(const n of e)t[n.id]=n;return t},sc=e=>({...e,...ic}),Hi=e=>{const{source:t,target:n,id:r}=e;return{source:t,target:n,id:r}},qo=new Map;function gv(e,t){qo.set(e,t)}function $v(e){qo.delete(e)}function vv(e){return qo.get(e)}const yv=(e,t,n,r)=>{Be.graph.updateNode(t.id,{completed:u(n)}),r(t.id,{completed:u(n)}),Be.refresh()};var mv=We('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" stroke-width="2" stroke="rgb(200, 200, 200)" fill="none" stroke-linecap="round" stroke-linejoin="round" style="position: absolute; right: 5px; bottom: 5px;"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><polyline points="16 20 20 20 20 16"></polyline><line x1="14" y1="14" x2="20" y2="20"></line><polyline points="8 4 4 4 4 8"></polyline><line x1="4" y1="4" x2="10" y2="10"></line></svg>'),pv=Te('<div class="control-panel"><input type="checkbox" title="mark completed/incomplete"></div> <div><!> <div class="sf-node"><div class="sf-node__label" contenteditable="true" spellcheck="false"> </div></div> <!> <!></div>',1);function wv(e,t){Ie(t,!0);let n=ee(t,"data",7);const{updateNodeData:r}=Ko();let i;Qr(()=>{gv(t.id,i)}),wr(()=>{$v(t.id)});let o,s=Me(qe(n().completed));const a=()=>Be.graph.isCompletedOrParentCompleted(t.id)?"opacity: 30%":"opacity: 100%",l=()=>{n().label=o.innerText,Be.graph.updateNode(t.id,{label:n().label}),r(t.id,{label:n().label}),Be.resizeNodeToEncapsulateChildren(t.parentId,{}),Be.refresh()},c=()=>{n().label=o.innerText},d=(I,p)=>{const D={width:p.width,height:p.height};Be.graph.updateNode(t.id,{lastManualResize:D,size:D}),Be.resizeNodeToEncapsulateChildren(t.parentId,{})};Qr(()=>{o.addEventListener("focus",()=>{const I=window.getSelection(),p=document.createRange();p.selectNodeContents(o),p.collapse(!1),I.removeAllRanges(),I.addRange(p)})});const h=I=>{I.stopPropagation()};var f=pv(),g=De(f),y=Oe(g);y.__change=[yv,t,s,r];var m=Ee(g,2),w=Oe(m);On(w,{type:"target",get position(){return ke.Left},get isConnectable(){return t.isConnectable}});var b=Ee(w,2),T=Oe(b);T.__input=c;var x=Oe(T);kt(T,I=>o=I,()=>o),kt(b,I=>i=I,()=>i);var v=Ee(b,2);av(v,{onResizeEnd:d,class:"node-hover",title:"resize",minWidth:100,minHeight:5,style:"background: transparent; border: none;",children:(I,p)=>{var D=mv();we(I,D)},$$slots:{default:!0}});var A=Ee(v,2);On(A,{type:"source",get position(){return ke.Right},get isConnectable(){return t.isConnectable}}),ze(I=>{Qe(m,I),tn(x,n().label)},[a]),zu(y,()=>u(s),I=>j(s,I)),tt("blur",T,l),tt("mousedown",T,h,!0),tt("mouseup",T,h,!0),tt("click",T,h,!0),tt("keydown",T,h,!0),tt("compositionstart",T,h,!0),tt("compositionend",T,h,!0),we(e,f),Ae()}gn(["change","input"]);const ac="graph",di="revisions",fn="revision",bv=new Et([],[],dn),Zo=[bv],Oi={revision:0,numRevisions:1},Wr=(e,t=ac)=>{console.log("saveGraphToLocalStorage");const n=Go("saveGraphToLocalStorage");localStorage.setItem(t,JSON.stringify(e)),n("save graph");{const r=localStorage.getItem(di),i=localStorage.getItem(fn);let o=r?JSON.parse(r):Zo,s=i?JSON.parse(i):Oi;s.revision<o.length-1&&o.length>0&&(o=o.slice(0,s.revision+1)),o.push(e),o=o.slice(-50),s={revision:o.length-1,numRevisions:o.length},localStorage.setItem(di,JSON.stringify(o)),localStorage.setItem(fn,JSON.stringify(s)),n("append revision")}},_v=(e=ac)=>{var r;let t;const n={nodes:[],edges:[]};try{const i=localStorage.getItem(e),o=i?JSON.parse(i):n;t=new Et(o.nodes,o.edges.map(Hi),o.title??dn),o.nodes.length>0&&$t((r=o.nodes[0])==null?void 0:r.children)&&(t=oc(o),Wr(t))}catch{t=new Et([],[],dn)}return t},Go=e=>{let t=Date.now();const n=e?`${e}: `:"";return r=>{const i=Date.now(),o=i-t;t=i,console.log(`${n}${r} took ${o} ms`)}},xv=()=>{const e=Go("undo"),t=localStorage.getItem(di),n=localStorage.getItem(fn);let r=t?JSON.parse(t):Zo,i=n?JSON.parse(n):Oi;i.revision>0&&(i.revision-=1,localStorage.setItem(fn,JSON.stringify(i)));const o=r[i.revision];return e("undo"),new Et(o.nodes,o.edges.map(Hi),o.title??dn)},kv=()=>{const e=Go("redo"),t=localStorage.getItem(di),n=localStorage.getItem(fn);let r=t?JSON.parse(t):Zo,i=n?JSON.parse(n):Oi;i.revision<r.length-1&&(i.revision+=1,localStorage.setItem(fn,JSON.stringify(i)));const o=r[i.revision];return e("redo"),new Et(o.nodes,o.edges.map(Hi),o.title??dn)},ia=()=>{const e=localStorage.getItem(fn);let t=e?JSON.parse(e):Oi;return t.numRevisions===1?{canUndo:!1,canRedo:!1}:{canUndo:t.revision>0,canRedo:t.revision<t.numRevisions-1}};var Sv=Te('<h1 class="title svelte-xojg15" contenteditable="true" spellcheck="false"> </h1>'),Ev=(e,t,n)=>t(u(n).getSerialized(),dv(u(n).title)+".json"),Pv=(e,t,n)=>{t(xv()),n(!1)},Cv=(e,t,n)=>{t(kv()),n(!1)},Nv=Te('<button>ð¾ Export</button> <button>ð Import</button> <button>Clear</button> <div style="display:flex; flex-direction: row; gap:20px;"><button>â©</button> <button>âª</button></div>',1),Mv=Te("<!> <!> <!> <!> <!>",1),Iv=Te('<input type="file" accept="application/json" style="display: none;"> <!>',1);function Av(e,t){Ie(t,!0);const{deleteElements:n,screenToFlowPosition:r,getIntersectingNodes:i,updateNode:o,getZoom:s,getNodesBounds:a,fitView:l}=Ko();let c="dark";const d={custom:wv};let h=Me(_v()),f=Me(null),g=ra(u(h).nodes)+1;const y=()=>`${g++}`;let m=u(h).getDisplayState(u(f));console.log("graph",u(h)),console.log("displayState",m);let w=Me(m.nodes),b=Me(m.edges),T=Me(m.title),x=Me(m.description),v=Me(ia()),A;const I=()=>{(u(h).nodes.length>0||u(h).edges.length>0)&&!window.confirm("You have unsaved changes - importing from a file will discard them. Continue?")||A.click()},p=async(C=!0)=>{console.log("refresh"),C&&Wr(u(h));const H={};for(const W of u(w))W.selected&&(H[W.id]=!0);await n(m),m=u(h).getDisplayState(u(f)),console.log(u(h)),console.log("displayState",m),j(w,m.nodes),j(b,m.edges),j(T,m.title),j(x,m.description),j(v,ia());for(const W in H)o(W,{selected:!0})},D=C=>{j(h,C),g=ra(u(h).nodes)+1,j(f,null),Be.graph=u(h)},F=async C=>{var W;const[H]=C.target.files;if(H)try{const Y=await H.text();let V=JSON.parse(Y);V.nodes.length>0&&$t((W=V.nodes[0])==null?void 0:W.children)&&(V=oc(V)),D(new Et(V.nodes,V.edges,(V==null?void 0:V.title)??dn)),await p().then(()=>l())}catch(Y){console.error("Failed to load/parse JSON",Y)}finally{C.target.value=""}},q=(C,H="graph-project.json")=>{const W=JSON.stringify(C),Y=new Blob([W],{type:"application/json"}),V=URL.createObjectURL(Y),X=document.createElement("a");X.download=H,X.href=V,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(V)},k=(C,H,W=null)=>{const Y=r({x:C,y:H}),V=1e-5,X={...Y,width:V,height:V},Z=i(X);let J=u(f);for(const Q of Z){if(Q.id===W)continue;let te=!1;for(const re of Z)if(re.id!==W&&re!=null&&re.parentId&&(re==null?void 0:re.parentId)===Q.id){te=!0;break}if(!te){J=Q;break}}return J},N=(C,H)=>{const Y=pn(m.nodes)[H];return Y?(console.log(C,H,Y.position),Y.parentId===null||Y.parentId===void 0?rn(C,Y.position):N(rn(C,Y.position),Y.parentId)):C},M=(C,H)=>{const Y=pn(m.nodes)[H];return Y?Y.parentId===null||Y.parentId===void 0?na(C,Y.position):M(na(C,Y.position),Y.parentId):C},$=(C,H,W)=>{let Y=k(H,W),V=r({x:H,y:W});Y&&(V=N(V,Y.id));const X=re=>50+7*(re.length-5),Z=`Task ${C}`,J={width:X(Z),height:36};V=rn(V,{x:J.width/2,y:J.height/2});const Q={id:C,children:[],label:Z,completed:!1,lastManualResize:null,size:J,backgroundColor:"#111",position:V};u(h).addNode(Q,Y==null?void 0:Y.id);const te={};return te[C]={...V,...J},Y&&le(Y.id,{...pn(u(w)),[C]:{...Xr(Q),parentId:Y.id}},te),Q},E=(C,H)=>({source:C,target:H,id:`${C}->${H}`}),P=C=>!1,L=(C,H)=>{var fe,he,ue;console.log("handleConnectEnd");const W=((fe=H.fromHandle)==null?void 0:fe.type)==="source",Y=((he=H.fromNode)==null?void 0:he.id)??"1",V=(ue=H.toNode)==null?void 0:ue.id,{clientX:X,clientY:Z}="changedTouches"in C?C.changedTouches[0]:C,J=y();let Q=Y,te=V;if($t(V)&&($(J,X,Z),te=J),!W){const ge=Q;Q=te,te=ge}const re=E(Q,te);u(h).addEdge(re),m.edges=[...m.edges,sc(re)],p()},R=(C,H=u(f))=>{console.log("handleNodeDragStop",C.nodes[0].id);const{clientX:W,clientY:Y}=C==null?void 0:C.event,V=C.targetNode,X=k(W,Y,V.id),Z=V.parentId,J=(X==null?void 0:X.id)??H;if((X==null?void 0:X.id)===V.id||u(h).isAncestor(V.id,X==null?void 0:X.id))return;let Q=M(V.position,V.parentId);X&&(Q=N(Q,X.id)),o(V.id,{position:Q,parentId:J}),u(h).reparent(Z,J,V.id),u(h).refreshParentIds(),u(h).updateNode(V.id,{position:Q});const te=pn(u(w));$t(Z)||le(Z,te),!$t(J)&&J!==Z&&le(J,te),p()},O=({event:C})=>{console.log("handlePaneContextMenu"),C.preventDefault();const{clientX:H,clientY:W}=C,Y=y();$(Y,H,W),p()},B=({event:C})=>{console.log("handleNodeContextMenu"),C.preventDefault();const{clientX:H,clientY:W}=C,Y=y();$(Y,H,W),p()},K=()=>{D(new Et([],[])),Be.graph=u(h),p()},se=async({nodes:C,edges:H})=>{for(const W of C)u(h).deleteNode(W.id),le(W.parentId,{});for(const W of H)u(h).deleteEdge(W.id);return p(),!0},$e=C=>{const H=vv(C);if(!H)return;const W=H.getBoundingClientRect(),Y=s();return{width:Math.round(W.width/Y),height:Math.round(W.height/Y)}},le=(C,H,W={})=>{if(console.log("resizing",C,{...W}),Object.keys(H).length===0&&(H=pn(u(w))),!(C in H))return;const Y=$e(C),V=H[C],X=[];for(const xe in H){const Se=H[xe];(Se==null?void 0:Se.parentId)===C&&X.push(Se)}const Z=X.map(xe=>lv(xe,W)).map(xe=>({...xe,...M(xe,C)})),J=20,Q=cv(Z),te=Y.width/Q.width,re=10,fe=14;let he=fe;Q.width>0&&(he=Math.max(fe,Y.height*te));const ue={width:Q.width,height:he};let ge={x:Q.x,y:Q.y-ue.height-re,width:Q.width,height:Q.height+ue.height+re};if(X.length===0){const xe=M(V.position,V==null?void 0:V.parentId);ge={x:xe.x+V.measured.width/2,y:xe.y+V.measured.height/2,width:ue.width,height:ue.height+re}}const pe=a(X);console.log("bounds (reported from svelteflow)",pe),console.log("childBounds (estimated, should match svelteflow)",Q),console.log("total contentBounds (children + node label)",ge);const de={width:ge.width+2*J,height:ge.height+2*J};console.log("new size",de),console.log("labelSize",Y),console.log("newLabelSize",ue);const me=u(h).getNode(C);if(me){const xe=me.lastManualResize;xe&&(de.width=Math.max(de.width,xe.width),de.height=Math.max(de.height,xe.height))}const be=rn({x:ge.x,y:ge.y},{x:J,y:J}),Pe=N(be,V==null?void 0:V.parentId);console.log("parent's position has changed from",V.position,"to",Pe,"(",be,")");const Ne=rn(Pe,V.position);console.log("parent has moved by ",Ne),o(V.id,{...de,position:Pe}),u(h).updateNode(V.id,{size:de,position:Pe}),W[V.id]={...Pe,...de};for(const xe of X){let Se=xe.position;xe.id in W&&(Se={...W[xe.id]});const Ce=rn(Se,Ne);o(xe.id,{position:Ce}),u(h).updateNode(xe.id,{position:Ce})}$t(me.parentId)||le(me.parentId,H,W)},G=C=>{j(f,C),p().then(()=>{l()})};let U;const ie=()=>{u(h).setTitle(U.innerText),Wr(u(h))},ne=()=>{j(T,U.innerText),u(h).setTitle(U.innerText),Wr(u(h)),p(!1)},ye=C=>C?"":"visibility:hidden;pointer-events:none;";Be.refresh=p,Be.graph=u(h),Be.setFocusedNode=G,Be.resizeNodeToEncapsulateChildren=le,Ot(()=>{Be.refresh=p,Be.graph=u(h),Be.setFocusedNode=G,Be.resizeNodeToEncapsulateChildren=le});var ve=Iv(),oe=De(ve);oe.__change=F,kt(oe,C=>A=C,()=>A);var ae=Ee(oe,2);I0(ae,{get colorMode(){return c},nodeTypes:d,defaultEdgeOptions:ic,fitView:!0,onconnectend:L,onnodedragstop:R,onpanecontextmenu:O,onnodecontextmenu:B,ondelete:se,isValidConnection:P,minZoom:.2,maxZoom:6,get nodes(){return u(w)},set nodes(C){j(w,C)},get edges(){return u(b)},set edges(C){j(b,C)},children:(C,H)=>{var W=Mv(),Y=De(W);fr(Y,{position:"top-center",class:"titlebar","aria-hidden":"true",children:(Q,te)=>{var re=Sv();re.__input=ie;var fe=Oe(re);kt(re,he=>U=he,()=>U),ze(()=>tn(fe,u(T))),tt("blur",re,ne),we(Q,re)},$$slots:{default:!0}});var V=Ee(Y,2);j0(V,{});var X=Ee(V,2);K0(X,{});var Z=Ee(X,2);ov(Z,{});var J=Ee(Z,2);fr(J,{style:"display:flex; flex-direction: column; gap:2px;",children:(Q,te)=>{var re=Nv(),fe=De(re);fe.__click=[Ev,q,h];var he=Ee(fe,2);he.__click=I;var ue=Ee(he,2);ue.__click=K;var ge=Ee(ue,2),pe=Oe(ge);pe.__click=[Pv,D,p];var de=Ee(pe,2);de.__click=[Cv,D,p],ze((me,be)=>{Qe(pe,me),Qe(de,be)},[()=>ye(u(v).canUndo),()=>ye(u(v).canRedo)]),we(Q,re)},$$slots:{default:!0}}),we(C,W)},$$slots:{default:!0}}),we(e,ve),Ae()}gn(["change","input","click"]);const Be=qe({refresh:null,graph:null,setFocusedNode:null,resizeNodeToEncapsulateChildren:null});function zv(e){A0(e,{children:(t,n)=>{Av(t,{})},$$slots:{default:!0}})}wu(zv,{target:document.getElementById("app")});
